var FP=Object.defineProperty;var rE=r=>{throw TypeError(r)};var OP=(r,e,t)=>e in r?FP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ur=(r,e,t)=>OP(r,typeof e!="symbol"?e+"":e,t),M_=(r,e,t)=>e.has(r)||rE("Cannot "+t);var ue=(r,e,t)=>(M_(r,e,"read from private field"),t?t.call(r):e.get(r)),en=(r,e,t)=>e.has(r)?rE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Pt=(r,e,t,n)=>(M_(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),Tn=(r,e,t)=>(M_(r,e,"access private method"),t);var iy=(r,e,t,n)=>({set _(i){Pt(r,e,i,t)},get _(){return ue(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function XS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var E_={exports:{}},Lm={},C_={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function UP(){if(iE)return Pn;iE=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=m&&K[m]||K["@@iterator"],typeof K=="function"?K:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,M={};function w(K,ve,We){this.props=K,this.context=ve,this.refs=M,this.updater=We||y}w.prototype.isReactComponent={},w.prototype.setState=function(K,ve){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ve,"setState")},w.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function S(){}S.prototype=w.prototype;function T(K,ve,We){this.props=K,this.context=ve,this.refs=M,this.updater=We||y}var R=T.prototype=new S;R.constructor=T,_(R,w.prototype),R.isPureReactComponent=!0;var C=Array.isArray,k=Object.prototype.hasOwnProperty,O={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function z(K,ve,We){var we,Le={},Fe=null,He=null;if(ve!=null)for(we in ve.ref!==void 0&&(He=ve.ref),ve.key!==void 0&&(Fe=""+ve.key),ve)k.call(ve,we)&&!V.hasOwnProperty(we)&&(Le[we]=ve[we]);var rt=arguments.length-2;if(rt===1)Le.children=We;else if(1<rt){for(var yt=Array(rt),Rt=0;Rt<rt;Rt++)yt[Rt]=arguments[Rt+2];Le.children=yt}if(K&&K.defaultProps)for(we in rt=K.defaultProps,rt)Le[we]===void 0&&(Le[we]=rt[we]);return{$$typeof:r,type:K,key:Fe,ref:He,props:Le,_owner:O.current}}function F(K,ve){return{$$typeof:r,type:K.type,key:ve,ref:K.ref,props:K.props,_owner:K._owner}}function L(K){return typeof K=="object"&&K!==null&&K.$$typeof===r}function W(K){var ve={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(We){return ve[We]})}var q=/\/+/g;function re(K,ve){return typeof K=="object"&&K!==null&&K.key!=null?W(""+K.key):ve.toString(36)}function oe(K,ve,We,we,Le){var Fe=typeof K;(Fe==="undefined"||Fe==="boolean")&&(K=null);var He=!1;if(K===null)He=!0;else switch(Fe){case"string":case"number":He=!0;break;case"object":switch(K.$$typeof){case r:case e:He=!0}}if(He)return He=K,Le=Le(He),K=we===""?"."+re(He,0):we,C(Le)?(We="",K!=null&&(We=K.replace(q,"$&/")+"/"),oe(Le,ve,We,"",function(Rt){return Rt})):Le!=null&&(L(Le)&&(Le=F(Le,We+(!Le.key||He&&He.key===Le.key?"":(""+Le.key).replace(q,"$&/")+"/")+K)),ve.push(Le)),1;if(He=0,we=we===""?".":we+":",C(K))for(var rt=0;rt<K.length;rt++){Fe=K[rt];var yt=we+re(Fe,rt);He+=oe(Fe,ve,We,yt,Le)}else if(yt=v(K),typeof yt=="function")for(K=yt.call(K),rt=0;!(Fe=K.next()).done;)Fe=Fe.value,yt=we+re(Fe,rt++),He+=oe(Fe,ve,We,yt,Le);else if(Fe==="object")throw ve=String(K),Error("Objects are not valid as a React child (found: "+(ve==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ve)+"). If you meant to render a collection of children, use an array instead.");return He}function Se(K,ve,We){if(K==null)return K;var we=[],Le=0;return oe(K,we,"","",function(Fe){return ve.call(We,Fe,Le++)}),we}function he(K){if(K._status===-1){var ve=K._result;ve=ve(),ve.then(function(We){(K._status===0||K._status===-1)&&(K._status=1,K._result=We)},function(We){(K._status===0||K._status===-1)&&(K._status=2,K._result=We)}),K._status===-1&&(K._status=0,K._result=ve)}if(K._status===1)return K._result.default;throw K._result}var Ee={current:null},Y={transition:null},ge={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:Y,ReactCurrentOwner:O};function se(){throw Error("act(...) is not supported in production builds of React.")}return Pn.Children={map:Se,forEach:function(K,ve,We){Se(K,function(){ve.apply(this,arguments)},We)},count:function(K){var ve=0;return Se(K,function(){ve++}),ve},toArray:function(K){return Se(K,function(ve){return ve})||[]},only:function(K){if(!L(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Pn.Component=w,Pn.Fragment=t,Pn.Profiler=i,Pn.PureComponent=T,Pn.StrictMode=n,Pn.Suspense=u,Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Pn.act=se,Pn.cloneElement=function(K,ve,We){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var we=_({},K.props),Le=K.key,Fe=K.ref,He=K._owner;if(ve!=null){if(ve.ref!==void 0&&(Fe=ve.ref,He=O.current),ve.key!==void 0&&(Le=""+ve.key),K.type&&K.type.defaultProps)var rt=K.type.defaultProps;for(yt in ve)k.call(ve,yt)&&!V.hasOwnProperty(yt)&&(we[yt]=ve[yt]===void 0&&rt!==void 0?rt[yt]:ve[yt])}var yt=arguments.length-2;if(yt===1)we.children=We;else if(1<yt){rt=Array(yt);for(var Rt=0;Rt<yt;Rt++)rt[Rt]=arguments[Rt+2];we.children=rt}return{$$typeof:r,type:K.type,key:Le,ref:Fe,props:we,_owner:He}},Pn.createContext=function(K){return K={$$typeof:a,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:s,_context:K},K.Consumer=K},Pn.createElement=z,Pn.createFactory=function(K){var ve=z.bind(null,K);return ve.type=K,ve},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(K){return{$$typeof:l,render:K}},Pn.isValidElement=L,Pn.lazy=function(K){return{$$typeof:p,_payload:{_status:-1,_result:K},_init:he}},Pn.memo=function(K,ve){return{$$typeof:h,type:K,compare:ve===void 0?null:ve}},Pn.startTransition=function(K){var ve=Y.transition;Y.transition={};try{K()}finally{Y.transition=ve}},Pn.unstable_act=se,Pn.useCallback=function(K,ve){return Ee.current.useCallback(K,ve)},Pn.useContext=function(K){return Ee.current.useContext(K)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(K){return Ee.current.useDeferredValue(K)},Pn.useEffect=function(K,ve){return Ee.current.useEffect(K,ve)},Pn.useId=function(){return Ee.current.useId()},Pn.useImperativeHandle=function(K,ve,We){return Ee.current.useImperativeHandle(K,ve,We)},Pn.useInsertionEffect=function(K,ve){return Ee.current.useInsertionEffect(K,ve)},Pn.useLayoutEffect=function(K,ve){return Ee.current.useLayoutEffect(K,ve)},Pn.useMemo=function(K,ve){return Ee.current.useMemo(K,ve)},Pn.useReducer=function(K,ve,We){return Ee.current.useReducer(K,ve,We)},Pn.useRef=function(K){return Ee.current.useRef(K)},Pn.useState=function(K){return Ee.current.useState(K)},Pn.useSyncExternalStore=function(K,ve,We){return Ee.current.useSyncExternalStore(K,ve,We)},Pn.useTransition=function(){return Ee.current.useTransition()},Pn.version="18.3.1",Pn}var sE;function dx(){return sE||(sE=1,C_.exports=UP()),C_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function kP(){if(aE)return Lm;aE=1;var r=dx(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,u,h){var p,m={},v=null,y=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(y=u.ref);for(p in u)n.call(u,p)&&!s.hasOwnProperty(p)&&(m[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:e,type:l,key:v,ref:y,props:m,_owner:i.current}}return Lm.Fragment=t,Lm.jsx=a,Lm.jsxs=a,Lm}var oE;function zP(){return oE||(oE=1,E_.exports=kP()),E_.exports}var B=zP(),X=dx();const mi=XS(X);var sy={},b_={exports:{}},Us={},T_={exports:{}},R_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function HP(){return lE||(lE=1,(function(r){function e(Y,ge){var se=Y.length;Y.push(ge);e:for(;0<se;){var K=se-1>>>1,ve=Y[K];if(0<i(ve,ge))Y[K]=ge,Y[se]=ve,se=K;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ge=Y[0],se=Y.pop();if(se!==ge){Y[0]=se;e:for(var K=0,ve=Y.length,We=ve>>>1;K<We;){var we=2*(K+1)-1,Le=Y[we],Fe=we+1,He=Y[Fe];if(0>i(Le,se))Fe<ve&&0>i(He,Le)?(Y[K]=He,Y[Fe]=se,K=Fe):(Y[K]=Le,Y[we]=se,K=we);else if(Fe<ve&&0>i(He,se))Y[K]=He,Y[Fe]=se,K=Fe;else break e}}return ge}function i(Y,ge){var se=Y.sortIndex-ge.sortIndex;return se!==0?se:Y.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();r.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,m=null,v=3,y=!1,_=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Y){for(var ge=t(h);ge!==null;){if(ge.callback===null)n(h);else if(ge.startTime<=Y)n(h),ge.sortIndex=ge.expirationTime,e(u,ge);else break;ge=t(h)}}function C(Y){if(M=!1,R(Y),!_)if(t(u)!==null)_=!0,he(k);else{var ge=t(h);ge!==null&&Ee(C,ge.startTime-Y)}}function k(Y,ge){_=!1,M&&(M=!1,S(z),z=-1),y=!0;var se=v;try{for(R(ge),m=t(u);m!==null&&(!(m.expirationTime>ge)||Y&&!W());){var K=m.callback;if(typeof K=="function"){m.callback=null,v=m.priorityLevel;var ve=K(m.expirationTime<=ge);ge=r.unstable_now(),typeof ve=="function"?m.callback=ve:m===t(u)&&n(u),R(ge)}else n(u);m=t(u)}if(m!==null)var We=!0;else{var we=t(h);we!==null&&Ee(C,we.startTime-ge),We=!1}return We}finally{m=null,v=se,y=!1}}var O=!1,V=null,z=-1,F=5,L=-1;function W(){return!(r.unstable_now()-L<F)}function q(){if(V!==null){var Y=r.unstable_now();L=Y;var ge=!0;try{ge=V(!0,Y)}finally{ge?re():(O=!1,V=null)}}else O=!1}var re;if(typeof T=="function")re=function(){T(q)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Se=oe.port2;oe.port1.onmessage=q,re=function(){Se.postMessage(null)}}else re=function(){w(q,0)};function he(Y){V=Y,O||(O=!0,re())}function Ee(Y,ge){z=w(function(){Y(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,he(k))},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var ge=3;break;default:ge=v}var se=v;v=ge;try{return Y()}finally{v=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Y,ge){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=v;v=Y;try{return ge()}finally{v=se}},r.unstable_scheduleCallback=function(Y,ge,se){var K=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?K+se:K):se=K,Y){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=se+ve,Y={id:p++,callback:ge,priorityLevel:Y,startTime:se,expirationTime:ve,sortIndex:-1},se>K?(Y.sortIndex=se,e(h,Y),t(u)===null&&Y===t(h)&&(M?(S(z),z=-1):M=!0,Ee(C,se-K))):(Y.sortIndex=ve,e(u,Y),_||y||(_=!0,he(k))),Y},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(Y){var ge=v;return function(){var se=v;v=ge;try{return Y.apply(this,arguments)}finally{v=se}}}})(R_)),R_}var cE;function GP(){return cE||(cE=1,T_.exports=HP()),T_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function VP(){if(uE)return Us;uE=1;var r=dx(),e=GP();function t(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(o,c){a(o,c),a(o+"Capture",c)}function a(o,c){for(i[o]=c,o=0;o<c.length;o++)n.add(c[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(o){return u.call(m,o)?!0:u.call(p,o)?!1:h.test(o)?m[o]=!0:(p[o]=!0,!1)}function y(o,c,g,A){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return A?!1:g!==null?!g.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function _(o,c,g,A){if(c===null||typeof c>"u"||y(o,c,g,A))return!0;if(A)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function M(o,c,g,A,b,P,j){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=A,this.attributeNamespace=b,this.mustUseProperty=g,this.propertyName=o,this.type=c,this.sanitizeURL=P,this.removeEmptyString=j}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new M(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];w[c]=new M(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new M(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new M(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new M(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new M(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new M(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new M(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new M(o,5,!1,o.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function T(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(S,T);w[c]=new M(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(S,T);w[c]=new M(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(S,T);w[c]=new M(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new M(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new M(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,c,g,A){var b=w.hasOwnProperty(c)?w[c]:null;(b!==null?b.type!==0:A||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(_(c,g,b,A)&&(g=null),A||b===null?v(c)&&(g===null?o.removeAttribute(c):o.setAttribute(c,""+g)):b.mustUseProperty?o[b.propertyName]=g===null?b.type===3?!1:"":g:(c=b.attributeName,A=b.attributeNamespace,g===null?o.removeAttribute(c):(b=b.type,g=b===3||b===4&&g===!0?"":""+g,A?o.setAttributeNS(A,c,g):o.setAttribute(c,g))))}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),O=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),W=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ge(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var se=Object.assign,K;function ve(o){if(K===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);K=c&&c[1]||""}return`
`+K+o}var We=!1;function we(o,c){if(!o||We)return"";We=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Be){var A=Be}Reflect.construct(o,[],c)}else{try{c.call()}catch(Be){A=Be}o.call(c.prototype)}else{try{throw Error()}catch(Be){A=Be}o()}}catch(Be){if(Be&&A&&typeof Be.stack=="string"){for(var b=Be.stack.split(`
`),P=A.stack.split(`
`),j=b.length-1,ie=P.length-1;1<=j&&0<=ie&&b[j]!==P[ie];)ie--;for(;1<=j&&0<=ie;j--,ie--)if(b[j]!==P[ie]){if(j!==1||ie!==1)do if(j--,ie--,0>ie||b[j]!==P[ie]){var me=`
`+b[j].replace(" at new "," at ");return o.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",o.displayName)),me}while(1<=j&&0<=ie);break}}}finally{We=!1,Error.prepareStackTrace=g}return(o=o?o.displayName||o.name:"")?ve(o):""}function Le(o){switch(o.tag){case 5:return ve(o.type);case 16:return ve("Lazy");case 13:return ve("Suspense");case 19:return ve("SuspenseList");case 0:case 2:case 15:return o=we(o.type,!1),o;case 11:return o=we(o.type.render,!1),o;case 1:return o=we(o.type,!0),o;default:return""}}function Fe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case O:return"Portal";case F:return"Profiler";case z:return"StrictMode";case re:return"Suspense";case oe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case W:return(o.displayName||"Context")+".Consumer";case L:return(o._context.displayName||"Context")+".Provider";case q:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Se:return c=o.displayName||null,c!==null?c:Fe(o.type)||"Memo";case he:c=o._payload,o=o._init;try{return Fe(o(c))}catch{}}return null}function He(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(c);case 8:return c===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function rt(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function yt(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Rt(o){var c=yt(o)?"checked":"value",g=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),A=""+o[c];if(!o.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,P=g.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return b.call(this)},set:function(j){A=""+j,P.call(this,j)}}),Object.defineProperty(o,c,{enumerable:g.enumerable}),{getValue:function(){return A},setValue:function(j){A=""+j},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Qt(o){o._valueTracker||(o._valueTracker=Rt(o))}function Ke(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var g=c.getValue(),A="";return o&&(A=yt(o)?o.checked?"true":"false":o.value),o=A,o!==g?(c.setValue(o),!0):!1}function Ze(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ee(o,c){var g=c.checked;return se({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??o._wrapperState.initialChecked})}function Dt(o,c){var g=c.defaultValue==null?"":c.defaultValue,A=c.checked!=null?c.checked:c.defaultChecked;g=rt(c.value!=null?c.value:g),o._wrapperState={initialChecked:A,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function et(o,c){c=c.checked,c!=null&&R(o,"checked",c,!1)}function At(o,c){et(o,c);var g=rt(c.value),A=c.type;if(g!=null)A==="number"?(g===0&&o.value===""||o.value!=g)&&(o.value=""+g):o.value!==""+g&&(o.value=""+g);else if(A==="submit"||A==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Kt(o,c.type,g):c.hasOwnProperty("defaultValue")&&Kt(o,c.type,rt(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function at(o,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var A=c.type;if(!(A!=="submit"&&A!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,g||c===o.value||(o.value=c),o.defaultValue=c}g=o.name,g!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,g!==""&&(o.name=g)}function Kt(o,c,g){(c!=="number"||Ze(o.ownerDocument)!==o)&&(g==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+g&&(o.defaultValue=""+g))}var ht=Array.isArray;function N(o,c,g,A){if(o=o.options,c){c={};for(var b=0;b<g.length;b++)c["$"+g[b]]=!0;for(g=0;g<o.length;g++)b=c.hasOwnProperty("$"+o[g].value),o[g].selected!==b&&(o[g].selected=b),b&&A&&(o[g].defaultSelected=!0)}else{for(g=""+rt(g),c=null,b=0;b<o.length;b++){if(o[b].value===g){o[b].selected=!0,A&&(o[b].defaultSelected=!0);return}c!==null||o[b].disabled||(c=o[b])}c!==null&&(c.selected=!0)}}function D(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Q(o,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(t(92));if(ht(g)){if(1<g.length)throw Error(t(93));g=g[0]}c=g}c==null&&(c=""),g=c}o._wrapperState={initialValue:rt(g)}}function ye(o,c){var g=rt(c.value),A=rt(c.defaultValue);g!=null&&(g=""+g,g!==o.value&&(o.value=g),c.defaultValue==null&&o.defaultValue!==g&&(o.defaultValue=g)),A!=null&&(o.defaultValue=""+A)}function xe(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function pe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?pe(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ye,$e=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,A,b){MSApp.execUnsafeLocalFunction(function(){return o(c,g,A,b)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ye.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function kt(o,c){if(c){var g=o.firstChild;if(g&&g===o.lastChild&&g.nodeType===3){g.nodeValue=c;return}}o.textContent=c}var qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(qe).forEach(function(o){xt.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),qe[c]=qe[o]})});function zt(o,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||qe.hasOwnProperty(o)&&qe[o]?(""+c).trim():c+"px"}function Bt(o,c){o=o.style;for(var g in c)if(c.hasOwnProperty(g)){var A=g.indexOf("--")===0,b=zt(g,c[g],A);g==="float"&&(g="cssFloat"),A?o.setProperty(g,b):o[g]=b}}var St=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function de(o,c){if(c){if(St[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function De(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var it=null;function le(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ce=null,Pe=null,Ge=null;function Mt(o){if(o=Va(o)){if(typeof Ce!="function")throw Error(t(280));var c=o.stateNode;c&&(c=qf(c),Ce(o.stateNode,o.type,c))}}function vt(o){Pe?Ge?Ge.push(o):Ge=[o]:Pe=o}function qt(){if(Pe){var o=Pe,c=Ge;if(Ge=Pe=null,Mt(o),c)for(o=0;o<c.length;o++)Mt(c[o])}}function Rn(o,c){return o(c)}function $n(){}var fn=!1;function vr(o,c,g){if(fn)return o(c,g);fn=!0;try{return Rn(o,c,g)}finally{fn=!1,(Pe!==null||Ge!==null)&&($n(),qt())}}function wr(o,c){var g=o.stateNode;if(g===null)return null;var A=qf(g);if(A===null)return null;g=A[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(o=o.type,A=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!A;break e;default:o=!1}if(o)return null;if(g&&typeof g!="function")throw Error(t(231,c,typeof g));return g}var xo=!1;if(l)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){xo=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{xo=!1}function Pi(o,c,g,A,b,P,j,ie,me){var Be=Array.prototype.slice.call(arguments,3);try{c.apply(g,Be)}catch(nt){this.onError(nt)}}var is=!1,ss=null,ai=!1,cn=null,qo={onError:function(o){is=!0,ss=o}};function _o(o,c,g,A,b,P,j,ie,me){is=!1,ss=null,Pi.apply(qo,arguments)}function G(o,c,g,A,b,P,j,ie,me){if(_o.apply(this,arguments),is){if(is){var Be=ss;is=!1,ss=null}else throw Error(t(198));ai||(ai=!0,cn=Be)}}function J(o){var c=o,g=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(g=c.return),o=c.return;while(o)}return c.tag===3?g:null}function fe(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Ie(o){if(J(o)!==o)throw Error(t(188))}function Ue(o){var c=o.alternate;if(!c){if(c=J(o),c===null)throw Error(t(188));return c!==o?null:o}for(var g=o,A=c;;){var b=g.return;if(b===null)break;var P=b.alternate;if(P===null){if(A=b.return,A!==null){g=A;continue}break}if(b.child===P.child){for(P=b.child;P;){if(P===g)return Ie(b),o;if(P===A)return Ie(b),c;P=P.sibling}throw Error(t(188))}if(g.return!==A.return)g=b,A=P;else{for(var j=!1,ie=b.child;ie;){if(ie===g){j=!0,g=b,A=P;break}if(ie===A){j=!0,A=b,g=P;break}ie=ie.sibling}if(!j){for(ie=P.child;ie;){if(ie===g){j=!0,g=P,A=b;break}if(ie===A){j=!0,A=P,g=b;break}ie=ie.sibling}if(!j)throw Error(t(189))}}if(g.alternate!==A)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?o:c}function ke(o){return o=Ue(o),o!==null?ot(o):null}function ot(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=ot(o);if(c!==null)return c;o=o.sibling}return null}var H=e.unstable_scheduleCallback,ne=e.unstable_cancelCallback,ae=e.unstable_shouldYield,ce=e.unstable_requestPaint,$=e.unstable_now,Xe=e.unstable_getCurrentPriorityLevel,Oe=e.unstable_ImmediatePriority,Ve=e.unstable_UserBlockingPriority,Qe=e.unstable_NormalPriority,ut=e.unstable_LowPriority,gt=e.unstable_IdlePriority,lt=null,dt=null;function bt(o){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(lt,o,void 0,(o.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:_t,rn=Math.log,Tt=Math.LN2;function _t(o){return o>>>=0,o===0?32:31-(rn(o)/Tt|0)|0}var In=64,$t=4194304;function Un(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function _n(o,c){var g=o.pendingLanes;if(g===0)return 0;var A=0,b=o.suspendedLanes,P=o.pingedLanes,j=g&268435455;if(j!==0){var ie=j&~b;ie!==0?A=Un(ie):(P&=j,P!==0&&(A=Un(P)))}else j=g&~b,j!==0?A=Un(j):P!==0&&(A=Un(P));if(A===0)return 0;if(c!==0&&c!==A&&(c&b)===0&&(b=A&-A,P=c&-c,b>=P||b===16&&(P&4194240)!==0))return c;if((A&4)!==0&&(A|=g&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=A;0<c;)g=31-Ft(c),b=1<<g,A|=o[g],c&=~b;return A}function kn(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(o,c){for(var g=o.suspendedLanes,A=o.pingedLanes,b=o.expirationTimes,P=o.pendingLanes;0<P;){var j=31-Ft(P),ie=1<<j,me=b[j];me===-1?((ie&g)===0||(ie&A)!==0)&&(b[j]=kn(ie,c)):me<=c&&(o.expiredLanes|=ie),P&=~ie}}function Wt(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function bn(){var o=In;return In<<=1,(In&4194240)===0&&(In=64),o}function hr(o){for(var c=[],g=0;31>g;g++)c.push(o);return c}function Ln(o,c,g){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Ft(c),o[c]=g}function cr(o,c){var g=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var A=o.eventTimes;for(o=o.expirationTimes;0<g;){var b=31-Ft(g),P=1<<b;c[b]=0,A[b]=-1,o[b]=-1,g&=~P}}function ha(o,c){var g=o.entangledLanes|=c;for(o=o.entanglements;g;){var A=31-Ft(g),b=1<<A;b&c|o[A]&c&&(o[A]|=c),g&=~b}}var An=0;function oc(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var bu,zp,fv,_f,Af,$o=!1,Sf=[],pa=null,Mn=null,Na=null,el=new Map,lc=new Map,Ao=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vr(o,c){switch(o){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":el.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(c.pointerId)}}function tl(o,c,g,A,b,P){return o===null||o.nativeEvent!==P?(o={blockedOn:c,domEventName:g,eventSystemFlags:A,nativeEvent:P,targetContainers:[b]},c!==null&&(c=Va(c),c!==null&&zp(c)),o):(o.eventSystemFlags|=A,c=o.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),o)}function Zx(o,c,g,A,b){switch(c){case"focusin":return pa=tl(pa,o,c,g,A,b),!0;case"dragenter":return Mn=tl(Mn,o,c,g,A,b),!0;case"mouseover":return Na=tl(Na,o,c,g,A,b),!0;case"pointerover":var P=b.pointerId;return el.set(P,tl(el.get(P)||null,o,c,g,A,b)),!0;case"gotpointercapture":return P=b.pointerId,lc.set(P,tl(lc.get(P)||null,o,c,g,A,b)),!0}return!1}function wf(o){var c=To(o.target);if(c!==null){var g=J(c);if(g!==null){if(c=g.tag,c===13){if(c=fe(g),c!==null){o.blockedOn=c,Af(o.priority,function(){fv(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){o.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Mf(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var g=Ts(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(g===null){g=o.nativeEvent;var A=new g.constructor(g.type,g);it=A,g.target.dispatchEvent(A),it=null}else return c=Va(g),c!==null&&zp(c),o.blockedOn=g,!1;c.shift()}return!0}function Tu(o,c,g){Mf(o)&&g.delete(c)}function ma(){$o=!1,pa!==null&&Mf(pa)&&(pa=null),Mn!==null&&Mf(Mn)&&(Mn=null),Na!==null&&Mf(Na)&&(Na=null),el.forEach(Tu),lc.forEach(Tu)}function Ru(o,c){o.blockedOn===c&&(o.blockedOn=null,$o||($o=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ma)))}function Iu(o){function c(b){return Ru(b,o)}if(0<Sf.length){Ru(Sf[0],o);for(var g=1;g<Sf.length;g++){var A=Sf[g];A.blockedOn===o&&(A.blockedOn=null)}}for(pa!==null&&Ru(pa,o),Mn!==null&&Ru(Mn,o),Na!==null&&Ru(Na,o),el.forEach(c),lc.forEach(c),g=0;g<Ao.length;g++)A=Ao[g],A.blockedOn===o&&(A.blockedOn=null);for(;0<Ao.length&&(g=Ao[0],g.blockedOn===null);)wf(g),g.blockedOn===null&&Ao.shift()}var Bi=C.ReactCurrentBatchConfig,bs=!0;function Ef(o,c,g,A){var b=An,P=Bi.transition;Bi.transition=null;try{An=1,Cf(o,c,g,A)}finally{An=b,Bi.transition=P}}function Hp(o,c,g,A){var b=An,P=Bi.transition;Bi.transition=null;try{An=4,Cf(o,c,g,A)}finally{An=b,Bi.transition=P}}function Cf(o,c,g,A){if(bs){var b=Ts(o,c,g,A);if(b===null)Xf(o,c,A,bf,g),Vr(o,A);else if(Zx(b,o,c,g,A))A.stopPropagation();else if(Vr(o,A),c&4&&-1<Yx.indexOf(o)){for(;b!==null;){var P=Va(b);if(P!==null&&bu(P),P=Ts(o,c,g,A),P===null&&Xf(o,c,A,bf,g),P===b)break;b=P}b!==null&&A.stopPropagation()}else Xf(o,c,A,null,g)}}var bf=null;function Ts(o,c,g,A){if(bf=null,o=le(A),o=To(o),o!==null)if(c=J(o),c===null)o=null;else if(g=c.tag,g===13){if(o=fe(c),o!==null)return o;o=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return bf=o,null}function hv(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Oe:return 1;case Ve:return 4;case Qe:case ut:return 16;case gt:return 536870912;default:return 16}default:return 16}}var Ks=null,Gp=null,ji=null;function Pu(){if(ji)return ji;var o,c=Gp,g=c.length,A,b="value"in Ks?Ks.value:Ks.textContent,P=b.length;for(o=0;o<g&&c[o]===b[o];o++);var j=g-o;for(A=1;A<=j&&c[g-A]===b[P-A];A++);return ji=b.slice(o,1<A?1-A:void 0)}function nl(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Fa(){return!0}function Tf(){return!1}function Di(o){function c(g,A,b,P,j){this._reactName=g,this._targetInst=b,this.type=A,this.nativeEvent=P,this.target=j,this.currentTarget=null;for(var ie in o)o.hasOwnProperty(ie)&&(g=o[ie],this[ie]=g?g(P):P[ie]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Fa:Tf,this.isPropagationStopped=Tf,this}return se(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),c}var rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=Di(rl),il=se({},rl,{view:0,detail:0}),cc=Di(il),Wi,Rs,Is,uc=se({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Is&&(Is&&o.type==="mousemove"?(Wi=o.screenX-Is.screenX,Rs=o.screenY-Is.screenY):Rs=Wi=0,Is=o),Wi)},movementY:function(o){return"movementY"in o?o.movementY:Rs}}),Vp=Di(uc),Oa=se({},uc,{dataTransfer:0}),So=Di(Oa),Rf=se({},il,{relatedTarget:0}),If=Di(Rf),Pf=se({},rl,{animationName:0,elapsedTime:0,pseudoElement:0}),pv=Di(Pf),mv=se({},rl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),jp=Di(mv),Bf=se({},rl,{data:0}),Wp=Di(Bf),gv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Xp[o])?!!c[o]:!1}function wo(){return dc}var Df=se({},il,{key:function(o){if(o.key){var c=gv[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=nl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?vv[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wo,charCode:function(o){return o.type==="keypress"?nl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?nl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Lf=Di(Df),Ps=se({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),as=Di(Ps),sl=se({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wo}),Ua=Di(sl),ka=se({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),al=Di(ka),yv=se({},uc,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Jp=Di(yv),Kp=[9,13,27,32],Li=l&&"CompositionEvent"in window,oi=null;l&&"documentMode"in document&&(oi=document.documentMode);var pr=l&&"TextEvent"in window&&!oi,fc=l&&(!Li||oi&&8<oi&&11>=oi),Bs=" ",Yp=!1;function Zp(o,c){switch(o){case"keyup":return Kp.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Mo=!1;function xv(o,c){switch(o){case"compositionend":return Nf(c);case"keypress":return c.which!==32?null:(Yp=!0,Bs);case"textInput":return o=c.data,o===Bs&&Yp?null:o;default:return null}}function Du(o,c){if(Mo)return o==="compositionend"||!Li&&Zp(o,c)?(o=Pu(),ji=Gp=Ks=null,Mo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return fc&&c.locale!=="ko"?null:c.data;default:return null}}var hc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!hc[o.type]:c==="textarea"}function pc(o,c,g,A){vt(A),c=Jf(c,"onChange"),0<c.length&&(g=new Bu("onChange","change",null,g,A),o.push({event:g,listeners:c}))}var Eo=null,mc=null;function _v(o){xc(o,0)}function za(o){var c=Pr(o);if(Ke(c))return o}function Av(o,c){if(o==="change")return c}var gc=!1;if(l){var Xi;if(l){var ol="oninput"in document;if(!ol){var ll=document.createElement("div");ll.setAttribute("oninput","return;"),ol=typeof ll.oninput=="function"}Xi=ol}else Xi=!1;gc=Xi&&(!document.documentMode||9<document.documentMode)}function Ys(){Eo&&(Eo.detachEvent("onpropertychange",Of),mc=Eo=null)}function Of(o){if(o.propertyName==="value"&&za(mc)){var c=[];pc(c,mc,o,le(o)),vr(_v,c)}}function vc(o,c,g){o==="focusin"?(Ys(),Eo=c,mc=g,Eo.attachEvent("onpropertychange",Of)):o==="focusout"&&Ys()}function Sv(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return za(mc)}function Qp(o,c){if(o==="click")return za(c)}function yr(o,c){if(o==="input"||o==="change")return za(c)}function Uf(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var os=typeof Object.is=="function"?Object.is:Uf;function cl(o,c){if(os(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var g=Object.keys(o),A=Object.keys(c);if(g.length!==A.length)return!1;for(A=0;A<g.length;A++){var b=g[A];if(!u.call(c,b)||!os(o[b],c[b]))return!1}return!0}function Lu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ls(o,c){var g=Lu(o);o=0;for(var A;g;){if(g.nodeType===3){if(A=o+g.textContent.length,o<=c&&A>=c)return{node:g,offset:c-o};o=A}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Lu(g)}}function ul(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?ul(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function xr(){for(var o=window,c=Ze();c instanceof o.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)o=c.contentWindow;else break;c=Ze(o.document)}return c}function Yr(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function Zr(o){var c=xr(),g=o.focusedElem,A=o.selectionRange;if(c!==g&&g&&g.ownerDocument&&ul(g.ownerDocument.documentElement,g)){if(A!==null&&Yr(g)){if(c=A.start,o=A.end,o===void 0&&(o=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(o,g.value.length);else if(o=(c=g.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var b=g.textContent.length,P=Math.min(A.start,b);A=A.end===void 0?P:Math.min(A.end,b),!o.extend&&P>A&&(b=A,A=P,P=b),b=ls(g,P);var j=ls(g,A);b&&j&&(o.rangeCount!==1||o.anchorNode!==b.node||o.anchorOffset!==b.offset||o.focusNode!==j.node||o.focusOffset!==j.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),o.removeAllRanges(),P>A?(o.addRange(c),o.extend(j.node,j.offset)):(c.setEnd(j.node,j.offset),o.addRange(c)))}}for(c=[],o=g;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)o=c[g],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var kf=l&&"documentMode"in document&&11>=document.documentMode,ga=null,dl=null,Nu=null,Qr=!1;function zf(o,c,g){var A=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Qr||ga==null||ga!==Ze(A)||(A=ga,"selectionStart"in A&&Yr(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Nu&&cl(Nu,A)||(Nu=A,A=Jf(dl,"onSelect"),0<A.length&&(c=new Bu("onSelect","select",null,c,g),o.push({event:c,listeners:A}),c.target=ga)))}function yc(o,c){var g={};return g[o.toLowerCase()]=c.toLowerCase(),g["Webkit"+o]="webkit"+c,g["Moz"+o]="moz"+c,g}var Co={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionend:yc("Transition","TransitionEnd")},Zs={},Qs={};l&&(Qs=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function va(o){if(Zs[o])return Zs[o];if(!Co[o])return o;var c=Co[o],g;for(g in c)if(c.hasOwnProperty(g)&&g in Qs)return Zs[o]=c[g];return o}var Fu=va("animationend"),Ou=va("animationiteration"),qp=va("animationstart"),$p=va("transitionend"),em=new Map,tm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ha(o,c){em.set(o,c),s(c,[o])}for(var Hf=0;Hf<tm.length;Hf++){var Uu=tm[Hf],ku=Uu.toLowerCase(),wv=Uu[0].toUpperCase()+Uu.slice(1);Ha(ku,"on"+wv)}Ha(Fu,"onAnimationEnd"),Ha(Ou,"onAnimationIteration"),Ha(qp,"onAnimationStart"),Ha("dblclick","onDoubleClick"),Ha("focusin","onFocus"),Ha("focusout","onBlur"),Ha($p,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gf=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function Vf(o,c,g){var A=o.type||"unknown-event";o.currentTarget=g,G(A,c,void 0,o),o.currentTarget=null}function xc(o,c){c=(c&4)!==0;for(var g=0;g<o.length;g++){var A=o[g],b=A.event;A=A.listeners;e:{var P=void 0;if(c)for(var j=A.length-1;0<=j;j--){var ie=A[j],me=ie.instance,Be=ie.currentTarget;if(ie=ie.listener,me!==P&&b.isPropagationStopped())break e;Vf(b,ie,Be),P=me}else for(j=0;j<A.length;j++){if(ie=A[j],me=ie.instance,Be=ie.currentTarget,ie=ie.listener,me!==P&&b.isPropagationStopped())break e;Vf(b,ie,Be),P=me}}}if(ai)throw o=cn,ai=!1,cn=null,o}function ar(o,c){var g=c[pl];g===void 0&&(g=c[pl]=new Set);var A=o+"__bubble";g.has(A)||(Wf(c,o,2,!1),g.add(A))}function jf(o,c,g){var A=0;c&&(A|=4),Wf(g,o,A,c)}var zu="_reactListening"+Math.random().toString(36).slice(2);function _c(o){if(!o[zu]){o[zu]=!0,n.forEach(function(g){g!=="selectionchange"&&(Gf.has(g)||jf(g,!1,o),jf(g,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[zu]||(c[zu]=!0,jf("selectionchange",!1,c))}}function Wf(o,c,g,A){switch(hv(c)){case 1:var b=Ef;break;case 4:b=Hp;break;default:b=Cf}g=b.bind(null,c,g,o),b=void 0,!xo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),A?b!==void 0?o.addEventListener(c,g,{capture:!0,passive:b}):o.addEventListener(c,g,!0):b!==void 0?o.addEventListener(c,g,{passive:b}):o.addEventListener(c,g,!1)}function Xf(o,c,g,A,b){var P=A;if((c&1)===0&&(c&2)===0&&A!==null)e:for(;;){if(A===null)return;var j=A.tag;if(j===3||j===4){var ie=A.stateNode.containerInfo;if(ie===b||ie.nodeType===8&&ie.parentNode===b)break;if(j===4)for(j=A.return;j!==null;){var me=j.tag;if((me===3||me===4)&&(me=j.stateNode.containerInfo,me===b||me.nodeType===8&&me.parentNode===b))return;j=j.return}for(;ie!==null;){if(j=To(ie),j===null)return;if(me=j.tag,me===5||me===6){A=P=j;continue e}ie=ie.parentNode}}A=A.return}vr(function(){var Be=P,nt=le(g),st=[];e:{var tt=em.get(o);if(tt!==void 0){var Lt=Bu,Ht=o;switch(o){case"keypress":if(nl(g)===0)break e;case"keydown":case"keyup":Lt=Lf;break;case"focusin":Ht="focus",Lt=If;break;case"focusout":Ht="blur",Lt=If;break;case"beforeblur":case"afterblur":Lt=If;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Lt=Vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Lt=So;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Lt=Ua;break;case Fu:case Ou:case qp:Lt=pv;break;case $p:Lt=al;break;case"scroll":Lt=cc;break;case"wheel":Lt=Jp;break;case"copy":case"cut":case"paste":Lt=jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Lt=as}var Vt=(c&4)!==0,Wr=!Vt&&o==="scroll",be=Vt?tt!==null?tt+"Capture":null:tt;Vt=[];for(var _e=Be,Te;_e!==null;){Te=_e;var ft=Te.stateNode;if(Te.tag===5&&ft!==null&&(Te=ft,be!==null&&(ft=wr(_e,be),ft!=null&&Vt.push(Ac(_e,ft,Te)))),Wr)break;_e=_e.return}0<Vt.length&&(tt=new Lt(tt,Ht,null,g,nt),st.push({event:tt,listeners:Vt}))}}if((c&7)===0){e:{if(tt=o==="mouseover"||o==="pointerover",Lt=o==="mouseout"||o==="pointerout",tt&&g!==it&&(Ht=g.relatedTarget||g.fromElement)&&(To(Ht)||Ht[cs]))break e;if((Lt||tt)&&(tt=nt.window===nt?nt:(tt=nt.ownerDocument)?tt.defaultView||tt.parentWindow:window,Lt?(Ht=g.relatedTarget||g.toElement,Lt=Be,Ht=Ht?To(Ht):null,Ht!==null&&(Wr=J(Ht),Ht!==Wr||Ht.tag!==5&&Ht.tag!==6)&&(Ht=null)):(Lt=null,Ht=Be),Lt!==Ht)){if(Vt=Vp,ft="onMouseLeave",be="onMouseEnter",_e="mouse",(o==="pointerout"||o==="pointerover")&&(Vt=as,ft="onPointerLeave",be="onPointerEnter",_e="pointer"),Wr=Lt==null?tt:Pr(Lt),Te=Ht==null?tt:Pr(Ht),tt=new Vt(ft,_e+"leave",Lt,g,nt),tt.target=Wr,tt.relatedTarget=Te,ft=null,To(nt)===Be&&(Vt=new Vt(be,_e+"enter",Ht,g,nt),Vt.target=Te,Vt.relatedTarget=Wr,ft=Vt),Wr=ft,Lt&&Ht)t:{for(Vt=Lt,be=Ht,_e=0,Te=Vt;Te;Te=fl(Te))_e++;for(Te=0,ft=be;ft;ft=fl(ft))Te++;for(;0<_e-Te;)Vt=fl(Vt),_e--;for(;0<Te-_e;)be=fl(be),Te--;for(;_e--;){if(Vt===be||be!==null&&Vt===be.alternate)break t;Vt=fl(Vt),be=fl(be)}Vt=null}else Vt=null;Lt!==null&&Mv(st,tt,Lt,Vt,!1),Ht!==null&&Wr!==null&&Mv(st,Wr,Ht,Vt,!0)}}e:{if(tt=Be?Pr(Be):window,Lt=tt.nodeName&&tt.nodeName.toLowerCase(),Lt==="select"||Lt==="input"&&tt.type==="file")var Yt=Av;else if(Ff(tt))if(gc)Yt=yr;else{Yt=Sv;var sn=vc}else(Lt=tt.nodeName)&&Lt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(Yt=Qp);if(Yt&&(Yt=Yt(o,Be))){pc(st,Yt,g,nt);break e}sn&&sn(o,tt,Be),o==="focusout"&&(sn=tt._wrapperState)&&sn.controlled&&tt.type==="number"&&Kt(tt,"number",tt.value)}switch(sn=Be?Pr(Be):window,o){case"focusin":(Ff(sn)||sn.contentEditable==="true")&&(ga=sn,dl=Be,Nu=null);break;case"focusout":Nu=dl=ga=null;break;case"mousedown":Qr=!0;break;case"contextmenu":case"mouseup":case"dragend":Qr=!1,zf(st,g,nt);break;case"selectionchange":if(kf)break;case"keydown":case"keyup":zf(st,g,nt)}var an;if(Li)e:{switch(o){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Mo?Zp(o,g)&&(ln="onCompositionEnd"):o==="keydown"&&g.keyCode===229&&(ln="onCompositionStart");ln&&(fc&&g.locale!=="ko"&&(Mo||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Mo&&(an=Pu()):(Ks=nt,Gp="value"in Ks?Ks.value:Ks.textContent,Mo=!0)),sn=Jf(Be,ln),0<sn.length&&(ln=new Wp(ln,o,null,g,nt),st.push({event:ln,listeners:sn}),an?ln.data=an:(an=Nf(g),an!==null&&(ln.data=an)))),(an=pr?xv(o,g):Du(o,g))&&(Be=Jf(Be,"onBeforeInput"),0<Be.length&&(nt=new Wp("onBeforeInput","beforeinput",null,g,nt),st.push({event:nt,listeners:Be}),nt.data=an))}xc(st,c)})}function Ac(o,c,g){return{instance:o,listener:c,currentTarget:g}}function Jf(o,c){for(var g=c+"Capture",A=[];o!==null;){var b=o,P=b.stateNode;b.tag===5&&P!==null&&(b=P,P=wr(o,g),P!=null&&A.unshift(Ac(o,P,b)),P=wr(o,c),P!=null&&A.push(Ac(o,P,b))),o=o.return}return A}function fl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Mv(o,c,g,A,b){for(var P=c._reactName,j=[];g!==null&&g!==A;){var ie=g,me=ie.alternate,Be=ie.stateNode;if(me!==null&&me===A)break;ie.tag===5&&Be!==null&&(ie=Be,b?(me=wr(g,P),me!=null&&j.unshift(Ac(g,me,ie))):b||(me=wr(g,P),me!=null&&j.push(Ac(g,me,ie)))),g=g.return}j.length!==0&&o.push({event:c,listeners:j})}var Qx=/\r\n?/g,Ev=/\u0000|\uFFFD/g;function nm(o){return(typeof o=="string"?o:""+o).replace(Qx,`
`).replace(Ev,"")}function Hu(o,c,g){if(c=nm(c),nm(o)!==c&&g)throw Error(t(425))}function Gu(){}var Sc=null,rm=null;function im(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,am=typeof clearTimeout=="function"?clearTimeout:void 0,Kf=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Kf<"u"?function(o){return Kf.resolve(null).then(o).catch(Cv)}:sm;function Cv(o){setTimeout(function(){throw o})}function Yf(o,c){var g=c,A=0;do{var b=g.nextSibling;if(o.removeChild(g),b&&b.nodeType===8)if(g=b.data,g==="/$"){if(A===0){o.removeChild(b),Iu(c);return}A--}else g!=="$"&&g!=="$?"&&g!=="$!"||A++;g=b}while(g);Iu(c)}function Ga(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function om(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var g=o.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return o;c--}else g==="/$"&&c++}o=o.previousSibling}return null}var hl=Math.random().toString(36).slice(2),jr="__reactFiber$"+hl,wc="__reactProps$"+hl,cs="__reactContainer$"+hl,pl="__reactEvents$"+hl,Zf="__reactListeners$"+hl,Qf="__reactHandles$"+hl;function To(o){var c=o[jr];if(c)return c;for(var g=o.parentNode;g;){if(c=g[cs]||g[jr]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(o=om(o);o!==null;){if(g=o[jr])return g;o=om(o)}return c}o=g,g=o.parentNode}return null}function Va(o){return o=o[jr]||o[cs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Pr(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function qf(o){return o[wc]||null}var lm=[],qr=-1;function Mr(o){return{current:o}}function or(o){0>qr||(o.current=lm[qr],lm[qr]=null,qr--)}function ir(o,c){qr++,lm[qr]=o.current,o.current=c}var ja={},li=Mr(ja),Ni=Mr(!1),Wa=ja;function ml(o,c){var g=o.type.contextTypes;if(!g)return ja;var A=o.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===c)return A.__reactInternalMemoizedMaskedChildContext;var b={},P;for(P in g)b[P]=c[P];return A&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=b),b}function Ai(o){return o=o.childContextTypes,o!=null}function Vu(){or(Ni),or(li)}function cm(o,c,g){if(li.current!==ja)throw Error(t(168));ir(li,c),ir(Ni,g)}function ju(o,c,g){var A=o.stateNode;if(c=c.childContextTypes,typeof A.getChildContext!="function")return g;A=A.getChildContext();for(var b in A)if(!(b in c))throw Error(t(108,He(o)||"Unknown",b));return se({},g,A)}function gl(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ja,Wa=li.current,ir(li,o),ir(Ni,Ni.current),!0}function um(o,c,g){var A=o.stateNode;if(!A)throw Error(t(169));g?(o=ju(o,c,Wa),A.__reactInternalMemoizedMergedChildContext=o,or(Ni),or(li),ir(li,o)):or(Ni),ir(Ni,g)}var qs=null,Wu=!1,$f=!1;function Xu(o){qs===null?qs=[o]:qs.push(o)}function bv(o){Wu=!0,Xu(o)}function ya(){if(!$f&&qs!==null){$f=!0;var o=0,c=An;try{var g=qs;for(An=1;o<g.length;o++){var A=g[o];do A=A(!0);while(A!==null)}qs=null,Wu=!1}catch(b){throw qs!==null&&(qs=qs.slice(o+1)),H(Oe,ya),b}finally{An=c,$f=!1}}return null}var vl=[],Ji=0,eh=null,th=0,Fi=[],$r=0,yl=null,mt=1,Ds="";function Xa(o,c){vl[Ji++]=th,vl[Ji++]=eh,eh=o,th=c}function dm(o,c,g){Fi[$r++]=mt,Fi[$r++]=Ds,Fi[$r++]=yl,yl=o;var A=mt;o=Ds;var b=32-Ft(A)-1;A&=~(1<<b),g+=1;var P=32-Ft(c)+b;if(30<P){var j=b-b%5;P=(A&(1<<j)-1).toString(32),A>>=j,b-=j,mt=1<<32-Ft(c)+b|g<<b|A,Ds=P+o}else mt=1<<P|g<<b|A,Ds=o}function fm(o){o.return!==null&&(Xa(o,1),dm(o,1,0))}function Ja(o){for(;o===eh;)eh=vl[--Ji],vl[Ji]=null,th=vl[--Ji],vl[Ji]=null;for(;o===yl;)yl=Fi[--$r],Fi[$r]=null,Ds=Fi[--$r],Fi[$r]=null,mt=Fi[--$r],Fi[$r]=null}var ci=null,Oi=null,ur=!1,Ls=null;function hm(o,c){var g=wa(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=o,c=o.deletions,c===null?(o.deletions=[g],o.flags|=16):c.push(g)}function pm(o,c){switch(o.tag){case 5:var g=o.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ci=o,Oi=Ga(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ci=o,Oi=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=yl!==null?{id:mt,overflow:Ds}:null,o.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=wa(18,null,null,0),g.stateNode=c,g.return=o,o.child=g,ci=o,Oi=null,!0):!1;default:return!1}}function nh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function rh(o){if(ur){var c=Oi;if(c){var g=c;if(!pm(o,c)){if(nh(o))throw Error(t(418));c=Ga(g.nextSibling);var A=ci;c&&pm(o,c)?hm(A,g):(o.flags=o.flags&-4097|2,ur=!1,ci=o)}}else{if(nh(o))throw Error(t(418));o.flags=o.flags&-4097|2,ur=!1,ci=o}}}function ih(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ci=o}function Mc(o){if(o!==ci)return!1;if(!ur)return ih(o),ur=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!im(o.type,o.memoizedProps)),c&&(c=Oi)){if(nh(o))throw mm(),Error(t(418));for(;c;)hm(o,c),c=Ga(c.nextSibling)}if(ih(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var g=o.data;if(g==="/$"){if(c===0){Oi=Ga(o.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}o=o.nextSibling}Oi=null}}else Oi=ci?Ga(o.stateNode.nextSibling):null;return!0}function mm(){for(var o=Oi;o;)o=Ga(o.nextSibling)}function Ro(){Oi=ci=null,ur=!1}function Ec(o){Ls===null?Ls=[o]:Ls.push(o)}var $x=C.ReactCurrentBatchConfig;function Ju(o,c,g){if(o=g.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var A=g.stateNode}if(!A)throw Error(t(147,o));var b=A,P=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===P?c.ref:(c=function(j){var ie=b.refs;j===null?delete ie[P]:ie[P]=j},c._stringRef=P,c)}if(typeof o!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,o))}return o}function Ku(o,c){throw o=Object.prototype.toString.call(c),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function gm(o){var c=o._init;return c(o._payload)}function vm(o){function c(be,_e){if(o){var Te=be.deletions;Te===null?(be.deletions=[_e],be.flags|=16):Te.push(_e)}}function g(be,_e){if(!o)return null;for(;_e!==null;)c(be,_e),_e=_e.sibling;return null}function A(be,_e){for(be=new Map;_e!==null;)_e.key!==null?be.set(_e.key,_e):be.set(_e.index,_e),_e=_e.sibling;return be}function b(be,_e){return be=Fc(be,_e),be.index=0,be.sibling=null,be}function P(be,_e,Te){return be.index=Te,o?(Te=be.alternate,Te!==null?(Te=Te.index,Te<_e?(be.flags|=2,_e):Te):(be.flags|=2,_e)):(be.flags|=1048576,_e)}function j(be){return o&&be.alternate===null&&(be.flags|=2),be}function ie(be,_e,Te,ft){return _e===null||_e.tag!==6?(_e=y_(Te,be.mode,ft),_e.return=be,_e):(_e=b(_e,Te),_e.return=be,_e)}function me(be,_e,Te,ft){var Yt=Te.type;return Yt===V?nt(be,_e,Te.props.children,ft,Te.key):_e!==null&&(_e.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===he&&gm(Yt)===_e.type)?(ft=b(_e,Te.props),ft.ref=Ju(be,_e,Te),ft.return=be,ft):(ft=Zv(Te.type,Te.key,Te.props,null,be.mode,ft),ft.ref=Ju(be,_e,Te),ft.return=be,ft)}function Be(be,_e,Te,ft){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Te.containerInfo||_e.stateNode.implementation!==Te.implementation?(_e=x_(Te,be.mode,ft),_e.return=be,_e):(_e=b(_e,Te.children||[]),_e.return=be,_e)}function nt(be,_e,Te,ft,Yt){return _e===null||_e.tag!==7?(_e=dd(Te,be.mode,ft,Yt),_e.return=be,_e):(_e=b(_e,Te),_e.return=be,_e)}function st(be,_e,Te){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=y_(""+_e,be.mode,Te),_e.return=be,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case k:return Te=Zv(_e.type,_e.key,_e.props,null,be.mode,Te),Te.ref=Ju(be,null,_e),Te.return=be,Te;case O:return _e=x_(_e,be.mode,Te),_e.return=be,_e;case he:var ft=_e._init;return st(be,ft(_e._payload),Te)}if(ht(_e)||ge(_e))return _e=dd(_e,be.mode,Te,null),_e.return=be,_e;Ku(be,_e)}return null}function tt(be,_e,Te,ft){var Yt=_e!==null?_e.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Yt!==null?null:ie(be,_e,""+Te,ft);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case k:return Te.key===Yt?me(be,_e,Te,ft):null;case O:return Te.key===Yt?Be(be,_e,Te,ft):null;case he:return Yt=Te._init,tt(be,_e,Yt(Te._payload),ft)}if(ht(Te)||ge(Te))return Yt!==null?null:nt(be,_e,Te,ft,null);Ku(be,Te)}return null}function Lt(be,_e,Te,ft,Yt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return be=be.get(Te)||null,ie(_e,be,""+ft,Yt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case k:return be=be.get(ft.key===null?Te:ft.key)||null,me(_e,be,ft,Yt);case O:return be=be.get(ft.key===null?Te:ft.key)||null,Be(_e,be,ft,Yt);case he:var sn=ft._init;return Lt(be,_e,Te,sn(ft._payload),Yt)}if(ht(ft)||ge(ft))return be=be.get(Te)||null,nt(_e,be,ft,Yt,null);Ku(_e,ft)}return null}function Ht(be,_e,Te,ft){for(var Yt=null,sn=null,an=_e,ln=_e=0,Ei=null;an!==null&&ln<Te.length;ln++){an.index>ln?(Ei=an,an=null):Ei=an.sibling;var Zn=tt(be,an,Te[ln],ft);if(Zn===null){an===null&&(an=Ei);break}o&&an&&Zn.alternate===null&&c(be,an),_e=P(Zn,_e,ln),sn===null?Yt=Zn:sn.sibling=Zn,sn=Zn,an=Ei}if(ln===Te.length)return g(be,an),ur&&Xa(be,ln),Yt;if(an===null){for(;ln<Te.length;ln++)an=st(be,Te[ln],ft),an!==null&&(_e=P(an,_e,ln),sn===null?Yt=an:sn.sibling=an,sn=an);return ur&&Xa(be,ln),Yt}for(an=A(be,an);ln<Te.length;ln++)Ei=Lt(an,be,ln,Te[ln],ft),Ei!==null&&(o&&Ei.alternate!==null&&an.delete(Ei.key===null?ln:Ei.key),_e=P(Ei,_e,ln),sn===null?Yt=Ei:sn.sibling=Ei,sn=Ei);return o&&an.forEach(function(Oc){return c(be,Oc)}),ur&&Xa(be,ln),Yt}function Vt(be,_e,Te,ft){var Yt=ge(Te);if(typeof Yt!="function")throw Error(t(150));if(Te=Yt.call(Te),Te==null)throw Error(t(151));for(var sn=Yt=null,an=_e,ln=_e=0,Ei=null,Zn=Te.next();an!==null&&!Zn.done;ln++,Zn=Te.next()){an.index>ln?(Ei=an,an=null):Ei=an.sibling;var Oc=tt(be,an,Zn.value,ft);if(Oc===null){an===null&&(an=Ei);break}o&&an&&Oc.alternate===null&&c(be,an),_e=P(Oc,_e,ln),sn===null?Yt=Oc:sn.sibling=Oc,sn=Oc,an=Ei}if(Zn.done)return g(be,an),ur&&Xa(be,ln),Yt;if(an===null){for(;!Zn.done;ln++,Zn=Te.next())Zn=st(be,Zn.value,ft),Zn!==null&&(_e=P(Zn,_e,ln),sn===null?Yt=Zn:sn.sibling=Zn,sn=Zn);return ur&&Xa(be,ln),Yt}for(an=A(be,an);!Zn.done;ln++,Zn=Te.next())Zn=Lt(an,be,ln,Zn.value,ft),Zn!==null&&(o&&Zn.alternate!==null&&an.delete(Zn.key===null?ln:Zn.key),_e=P(Zn,_e,ln),sn===null?Yt=Zn:sn.sibling=Zn,sn=Zn);return o&&an.forEach(function(NP){return c(be,NP)}),ur&&Xa(be,ln),Yt}function Wr(be,_e,Te,ft){if(typeof Te=="object"&&Te!==null&&Te.type===V&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case k:e:{for(var Yt=Te.key,sn=_e;sn!==null;){if(sn.key===Yt){if(Yt=Te.type,Yt===V){if(sn.tag===7){g(be,sn.sibling),_e=b(sn,Te.props.children),_e.return=be,be=_e;break e}}else if(sn.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===he&&gm(Yt)===sn.type){g(be,sn.sibling),_e=b(sn,Te.props),_e.ref=Ju(be,sn,Te),_e.return=be,be=_e;break e}g(be,sn);break}else c(be,sn);sn=sn.sibling}Te.type===V?(_e=dd(Te.props.children,be.mode,ft,Te.key),_e.return=be,be=_e):(ft=Zv(Te.type,Te.key,Te.props,null,be.mode,ft),ft.ref=Ju(be,_e,Te),ft.return=be,be=ft)}return j(be);case O:e:{for(sn=Te.key;_e!==null;){if(_e.key===sn)if(_e.tag===4&&_e.stateNode.containerInfo===Te.containerInfo&&_e.stateNode.implementation===Te.implementation){g(be,_e.sibling),_e=b(_e,Te.children||[]),_e.return=be,be=_e;break e}else{g(be,_e);break}else c(be,_e);_e=_e.sibling}_e=x_(Te,be.mode,ft),_e.return=be,be=_e}return j(be);case he:return sn=Te._init,Wr(be,_e,sn(Te._payload),ft)}if(ht(Te))return Ht(be,_e,Te,ft);if(ge(Te))return Vt(be,_e,Te,ft);Ku(be,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,_e!==null&&_e.tag===6?(g(be,_e.sibling),_e=b(_e,Te),_e.return=be,be=_e):(g(be,_e),_e=y_(Te,be.mode,ft),_e.return=be,be=_e),j(be)):g(be,_e)}return Wr}var xl=vm(!0),Yu=vm(!1),_l=Mr(null),Al=null,Ka=null,Cc=null;function Sl(){Cc=Ka=Al=null}function Zu(o){var c=_l.current;or(_l),o._currentValue=c}function Qu(o,c,g){for(;o!==null;){var A=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,A!==null&&(A.childLanes|=c)):A!==null&&(A.childLanes&c)!==c&&(A.childLanes|=c),o===g)break;o=o.return}}function Io(o,c){Al=o,Cc=Ka=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Sn=!0),o.firstContext=null)}function us(o){var c=o._currentValue;if(Cc!==o)if(o={context:o,memoizedValue:c,next:null},Ka===null){if(Al===null)throw Error(t(308));Ka=o,Al.dependencies={lanes:0,firstContext:o}}else Ka=Ka.next=o;return c}var Ya=null;function ym(o){Ya===null?Ya=[o]:Ya.push(o)}function qu(o,c,g,A){var b=c.interleaved;return b===null?(g.next=g,ym(c)):(g.next=b.next,b.next=g),c.interleaved=g,$s(o,A)}function $s(o,c){o.lanes|=c;var g=o.alternate;for(g!==null&&(g.lanes|=c),g=o,o=o.return;o!==null;)o.childLanes|=c,g=o.alternate,g!==null&&(g.childLanes|=c),g=o,o=o.return;return g.tag===3?g.stateNode:null}var er=!1;function vn(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Br(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function tr(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function mr(o,c,g){var A=o.updateQueue;if(A===null)return null;if(A=A.shared,(Wn&2)!==0){var b=A.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),A.pending=c,$s(o,g)}return b=A.interleaved,b===null?(c.next=c,ym(A)):(c.next=b.next,b.next=c),A.interleaved=c,$s(o,g)}function Si(o,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var A=c.lanes;A&=o.pendingLanes,g|=A,c.lanes=g,ha(o,g)}}function wl(o,c){var g=o.updateQueue,A=o.alternate;if(A!==null&&(A=A.updateQueue,g===A)){var b=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var j={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?b=P=j:P=P.next=j,g=g.next}while(g!==null);P===null?b=P=c:P=P.next=c}else b=P=c;g={baseState:A.baseState,firstBaseUpdate:b,lastBaseUpdate:P,shared:A.shared,effects:A.effects},o.updateQueue=g;return}o=g.lastBaseUpdate,o===null?g.firstBaseUpdate=c:o.next=c,g.lastBaseUpdate=c}function Er(o,c,g,A){var b=o.updateQueue;er=!1;var P=b.firstBaseUpdate,j=b.lastBaseUpdate,ie=b.shared.pending;if(ie!==null){b.shared.pending=null;var me=ie,Be=me.next;me.next=null,j===null?P=Be:j.next=Be,j=me;var nt=o.alternate;nt!==null&&(nt=nt.updateQueue,ie=nt.lastBaseUpdate,ie!==j&&(ie===null?nt.firstBaseUpdate=Be:ie.next=Be,nt.lastBaseUpdate=me))}if(P!==null){var st=b.baseState;j=0,nt=Be=me=null,ie=P;do{var tt=ie.lane,Lt=ie.eventTime;if((A&tt)===tt){nt!==null&&(nt=nt.next={eventTime:Lt,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var Ht=o,Vt=ie;switch(tt=c,Lt=g,Vt.tag){case 1:if(Ht=Vt.payload,typeof Ht=="function"){st=Ht.call(Lt,st,tt);break e}st=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Vt.payload,tt=typeof Ht=="function"?Ht.call(Lt,st,tt):Ht,tt==null)break e;st=se({},st,tt);break e;case 2:er=!0}}ie.callback!==null&&ie.lane!==0&&(o.flags|=64,tt=b.effects,tt===null?b.effects=[ie]:tt.push(ie))}else Lt={eventTime:Lt,lane:tt,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},nt===null?(Be=nt=Lt,me=st):nt=nt.next=Lt,j|=tt;if(ie=ie.next,ie===null){if(ie=b.shared.pending,ie===null)break;tt=ie,ie=tt.next,tt.next=null,b.lastBaseUpdate=tt,b.shared.pending=null}}while(!0);if(nt===null&&(me=st),b.baseState=me,b.firstBaseUpdate=Be,b.lastBaseUpdate=nt,c=b.shared.interleaved,c!==null){b=c;do j|=b.lane,b=b.next;while(b!==c)}else P===null&&(b.shared.lanes=0);od|=j,o.lanes=j,o.memoizedState=st}}function bc(o,c,g){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var A=o[c],b=A.callback;if(b!==null){if(A.callback=null,A=g,typeof b!="function")throw Error(t(191,b));b.call(A)}}}var xa={},ds=Mr(xa),Ml=Mr(xa),Za=Mr(xa);function Nr(o){if(o===xa)throw Error(t(174));return o}function $u(o,c){switch(ir(Za,c),ir(Ml,o),ir(ds,xa),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:je(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=je(c,o)}or(ds),ir(ds,c)}function Po(){or(ds),or(Ml),or(Za)}function El(o){Nr(Za.current);var c=Nr(ds.current),g=je(c,o.type);c!==g&&(ir(Ml,o),ir(ds,g))}function Tc(o){Ml.current===o&&(or(ds),or(Ml))}var dr=Mr(0);function ea(o){for(var c=o;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Rc=[];function _a(){for(var o=0;o<Rc.length;o++)Rc[o]._workInProgressVersionPrimary=null;Rc.length=0}var Cl=C.ReactCurrentDispatcher,bl=C.ReactCurrentBatchConfig,Qa=0,lr=null,Cr=null,Gn=null,ta=!1,wi=!1,Bo=0,Ki=0;function ui(){throw Error(t(321))}function ed(o,c){if(c===null)return!1;for(var g=0;g<c.length&&g<o.length;g++)if(!os(o[g],c[g]))return!1;return!0}function td(o,c,g,A,b,P){if(Qa=P,lr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Cl.current=o===null||o.memoizedState===null?Lv:Nv,o=g(A,b),wi){P=0;do{if(wi=!1,Bo=0,25<=P)throw Error(t(301));P+=1,Gn=Cr=null,c.updateQueue=null,Cl.current=Fv,o=g(A,b)}while(wi)}if(Cl.current=dh,c=Cr!==null&&Cr.next!==null,Qa=0,Gn=Cr=lr=null,ta=!1,c)throw Error(t(300));return o}function xm(){var o=Bo!==0;return Bo=0,o}function di(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?lr.memoizedState=Gn=o:Gn=Gn.next=o,Gn}function fs(){if(Cr===null){var o=lr.alternate;o=o!==null?o.memoizedState:null}else o=Cr.next;var c=Gn===null?lr.memoizedState:Gn.next;if(c!==null)Gn=c,Cr=o;else{if(o===null)throw Error(t(310));Cr=o,o={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Gn===null?lr.memoizedState=Gn=o:Gn=Gn.next=o}return Gn}function Ic(o,c){return typeof c=="function"?c(o):c}function nd(o){var c=fs(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=o;var A=Cr,b=A.baseQueue,P=g.pending;if(P!==null){if(b!==null){var j=b.next;b.next=P.next,P.next=j}A.baseQueue=b=P,g.pending=null}if(b!==null){P=b.next,A=A.baseState;var ie=j=null,me=null,Be=P;do{var nt=Be.lane;if((Qa&nt)===nt)me!==null&&(me=me.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),A=Be.hasEagerState?Be.eagerState:o(A,Be.action);else{var st={lane:nt,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};me===null?(ie=me=st,j=A):me=me.next=st,lr.lanes|=nt,od|=nt}Be=Be.next}while(Be!==null&&Be!==P);me===null?j=A:me.next=ie,os(A,c.memoizedState)||(Sn=!0),c.memoizedState=A,c.baseState=j,c.baseQueue=me,g.lastRenderedState=A}if(o=g.interleaved,o!==null){b=o;do P=b.lane,lr.lanes|=P,od|=P,b=b.next;while(b!==o)}else b===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function qa(o){var c=fs(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=o;var A=g.dispatch,b=g.pending,P=c.memoizedState;if(b!==null){g.pending=null;var j=b=b.next;do P=o(P,j.action),j=j.next;while(j!==b);os(P,c.memoizedState)||(Sn=!0),c.memoizedState=P,c.baseQueue===null&&(c.baseState=P),g.lastRenderedState=P}return[P,A]}function _m(){}function Am(o,c){var g=lr,A=fs(),b=c(),P=!os(A.memoizedState,b);if(P&&(A.memoizedState=b,Sn=!0),A=A.queue,Mm(Tv.bind(null,g,A,o),[o]),A.getSnapshot!==c||P||Gn!==null&&Gn.memoizedState.tag&1){if(g.flags|=2048,na(9,rd.bind(null,g,A,b,c),void 0,null),Mi===null)throw Error(t(349));(Qa&30)!==0||sh(g,c,b)}return b}function sh(o,c,g){o.flags|=16384,o={getSnapshot:c,value:g},c=lr.updateQueue,c===null?(c={lastEffect:null,stores:null},lr.updateQueue=c,c.stores=[o]):(g=c.stores,g===null?c.stores=[o]:g.push(o))}function rd(o,c,g,A){c.value=g,c.getSnapshot=A,Rv(c)&&Sm(o)}function Tv(o,c,g){return g(function(){Rv(c)&&Sm(o)})}function Rv(o){var c=o.getSnapshot;o=o.value;try{var g=c();return!os(o,g)}catch{return!0}}function Sm(o){var c=$s(o,1);c!==null&&ro(c,o,1,-1)}function wm(o){var c=di();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:o},c.queue=o,o=o.dispatch=Tl.bind(null,lr,o),[c.memoizedState,o]}function na(o,c,g,A){return o={tag:o,create:c,destroy:g,deps:A,next:null},c=lr.updateQueue,c===null?(c={lastEffect:null,stores:null},lr.updateQueue=c,c.lastEffect=o.next=o):(g=c.lastEffect,g===null?c.lastEffect=o.next=o:(A=g.next,g.next=o,o.next=A,c.lastEffect=o)),o}function Iv(){return fs().memoizedState}function Aa(o,c,g,A){var b=di();lr.flags|=o,b.memoizedState=na(1|c,g,void 0,A===void 0?null:A)}function id(o,c,g,A){var b=fs();A=A===void 0?null:A;var P=void 0;if(Cr!==null){var j=Cr.memoizedState;if(P=j.destroy,A!==null&&ed(A,j.deps)){b.memoizedState=na(c,g,P,A);return}}lr.flags|=o,b.memoizedState=na(1|c,g,P,A)}function Ui(o,c){return Aa(8390656,8,o,c)}function Mm(o,c){return id(2048,8,o,c)}function Em(o,c){return id(4,2,o,c)}function Pv(o,c){return id(4,4,o,c)}function Bv(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Cm(o,c,g){return g=g!=null?g.concat([o]):null,id(4,4,Bv.bind(null,c,o),g)}function ah(){}function Dv(o,c){var g=fs();c=c===void 0?null:c;var A=g.memoizedState;return A!==null&&c!==null&&ed(c,A[1])?A[0]:(g.memoizedState=[o,c],o)}function hs(o,c){var g=fs();c=c===void 0?null:c;var A=g.memoizedState;return A!==null&&c!==null&&ed(c,A[1])?A[0]:(o=o(),g.memoizedState=[o,c],o)}function oh(o,c,g){return(Qa&21)===0?(o.baseState&&(o.baseState=!1,Sn=!0),o.memoizedState=g):(os(g,c)||(g=bn(),lr.lanes|=g,od|=g,o.baseState=!0),c)}function e_(o,c){var g=An;An=g!==0&&4>g?g:4,o(!0);var A=bl.transition;bl.transition={};try{o(!1),c()}finally{An=g,bl.transition=A}}function $a(){return fs().memoizedState}function lh(o,c,g){var A=Lc(o);if(g={lane:A,action:g,hasEagerState:!1,eagerState:null,next:null},sd(o))ch(c,g);else if(g=qu(o,c,g,A),g!==null){var b=ms();ro(g,o,A,b),uh(g,c,A)}}function Tl(o,c,g){var A=Lc(o),b={lane:A,action:g,hasEagerState:!1,eagerState:null,next:null};if(sd(o))ch(c,b);else{var P=o.alternate;if(o.lanes===0&&(P===null||P.lanes===0)&&(P=c.lastRenderedReducer,P!==null))try{var j=c.lastRenderedState,ie=P(j,g);if(b.hasEagerState=!0,b.eagerState=ie,os(ie,j)){var me=c.interleaved;me===null?(b.next=b,ym(c)):(b.next=me.next,me.next=b),c.interleaved=b;return}}catch{}finally{}g=qu(o,c,b,A),g!==null&&(b=ms(),ro(g,o,A,b),uh(g,c,A))}}function sd(o){var c=o.alternate;return o===lr||c!==null&&c===lr}function ch(o,c){wi=ta=!0;var g=o.pending;g===null?c.next=c:(c.next=g.next,g.next=c),o.pending=c}function uh(o,c,g){if((g&4194240)!==0){var A=c.lanes;A&=o.pendingLanes,g|=A,c.lanes=g,ha(o,g)}}var dh={readContext:us,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},Lv={readContext:us,useCallback:function(o,c){return di().memoizedState=[o,c===void 0?null:c],o},useContext:us,useEffect:Ui,useImperativeHandle:function(o,c,g){return g=g!=null?g.concat([o]):null,Aa(4194308,4,Bv.bind(null,c,o),g)},useLayoutEffect:function(o,c){return Aa(4194308,4,o,c)},useInsertionEffect:function(o,c){return Aa(4,2,o,c)},useMemo:function(o,c){var g=di();return c=c===void 0?null:c,o=o(),g.memoizedState=[o,c],o},useReducer:function(o,c,g){var A=di();return c=g!==void 0?g(c):c,A.memoizedState=A.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},A.queue=o,o=o.dispatch=lh.bind(null,lr,o),[A.memoizedState,o]},useRef:function(o){var c=di();return o={current:o},c.memoizedState=o},useState:wm,useDebugValue:ah,useDeferredValue:function(o){return di().memoizedState=o},useTransition:function(){var o=wm(!1),c=o[0];return o=e_.bind(null,o[1]),di().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,g){var A=lr,b=di();if(ur){if(g===void 0)throw Error(t(407));g=g()}else{if(g=c(),Mi===null)throw Error(t(349));(Qa&30)!==0||sh(A,c,g)}b.memoizedState=g;var P={value:g,getSnapshot:c};return b.queue=P,Ui(Tv.bind(null,A,P,o),[o]),A.flags|=2048,na(9,rd.bind(null,A,P,g,c),void 0,null),g},useId:function(){var o=di(),c=Mi.identifierPrefix;if(ur){var g=Ds,A=mt;g=(A&~(1<<32-Ft(A)-1)).toString(32)+g,c=":"+c+"R"+g,g=Bo++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=Ki++,c=":"+c+"r"+g.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},Nv={readContext:us,useCallback:Dv,useContext:us,useEffect:Mm,useImperativeHandle:Cm,useInsertionEffect:Em,useLayoutEffect:Pv,useMemo:hs,useReducer:nd,useRef:Iv,useState:function(){return nd(Ic)},useDebugValue:ah,useDeferredValue:function(o){var c=fs();return oh(c,Cr.memoizedState,o)},useTransition:function(){var o=nd(Ic)[0],c=fs().memoizedState;return[o,c]},useMutableSource:_m,useSyncExternalStore:Am,useId:$a,unstable_isNewReconciler:!1},Fv={readContext:us,useCallback:Dv,useContext:us,useEffect:Mm,useImperativeHandle:Cm,useInsertionEffect:Em,useLayoutEffect:Pv,useMemo:hs,useReducer:qa,useRef:Iv,useState:function(){return qa(Ic)},useDebugValue:ah,useDeferredValue:function(o){var c=fs();return Cr===null?c.memoizedState=o:oh(c,Cr.memoizedState,o)},useTransition:function(){var o=qa(Ic)[0],c=fs().memoizedState;return[o,c]},useMutableSource:_m,useSyncExternalStore:Am,useId:$a,unstable_isNewReconciler:!1};function Ns(o,c){if(o&&o.defaultProps){c=se({},c),o=o.defaultProps;for(var g in o)c[g]===void 0&&(c[g]=o[g]);return c}return c}function ad(o,c,g,A){c=o.memoizedState,g=g(A,c),g=g==null?c:se({},c,g),o.memoizedState=g,o.lanes===0&&(o.updateQueue.baseState=g)}var fh={isMounted:function(o){return(o=o._reactInternals)?J(o)===o:!1},enqueueSetState:function(o,c,g){o=o._reactInternals;var A=ms(),b=Lc(o),P=tr(A,b);P.payload=c,g!=null&&(P.callback=g),c=mr(o,P,b),c!==null&&(ro(c,o,b,A),Si(c,o,b))},enqueueReplaceState:function(o,c,g){o=o._reactInternals;var A=ms(),b=Lc(o),P=tr(A,b);P.tag=1,P.payload=c,g!=null&&(P.callback=g),c=mr(o,P,b),c!==null&&(ro(c,o,b,A),Si(c,o,b))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var g=ms(),A=Lc(o),b=tr(g,A);b.tag=2,c!=null&&(b.callback=c),c=mr(o,b,A),c!==null&&(ro(c,o,A,g),Si(c,o,A))}};function Ov(o,c,g,A,b,P,j){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(A,P,j):c.prototype&&c.prototype.isPureReactComponent?!cl(g,A)||!cl(b,P):!0}function d(o,c,g){var A=!1,b=ja,P=c.contextType;return typeof P=="object"&&P!==null?P=us(P):(b=Ai(c)?Wa:li.current,A=c.contextTypes,P=(A=A!=null)?ml(o,b):ja),c=new c(g,P),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=fh,o.stateNode=c,c._reactInternals=o,A&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=b,o.__reactInternalMemoizedMaskedChildContext=P),c}function f(o,c,g,A){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,A),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,A),c.state!==o&&fh.enqueueReplaceState(c,c.state,null)}function x(o,c,g,A){var b=o.stateNode;b.props=g,b.state=o.memoizedState,b.refs={},vn(o);var P=c.contextType;typeof P=="object"&&P!==null?b.context=us(P):(P=Ai(c)?Wa:li.current,b.context=ml(o,P)),b.state=o.memoizedState,P=c.getDerivedStateFromProps,typeof P=="function"&&(ad(o,c,P,g),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&fh.enqueueReplaceState(b,b.state,null),Er(o,g,b,A),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308)}function E(o,c){try{var g="",A=c;do g+=Le(A),A=A.return;while(A);var b=g}catch(P){b=`
Error generating stack: `+P.message+`
`+P.stack}return{value:o,source:c,stack:b,digest:null}}function I(o,c,g){return{value:o,source:null,stack:g??null,digest:c??null}}function U(o,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var te=typeof WeakMap=="function"?WeakMap:Map;function Ae(o,c,g){g=tr(-1,g),g.tag=3,g.payload={element:null};var A=c.value;return g.callback=function(){jv||(jv=!0,u_=A),U(o,c)},g}function ze(o,c,g){g=tr(-1,g),g.tag=3;var A=o.type.getDerivedStateFromError;if(typeof A=="function"){var b=c.value;g.payload=function(){return A(b)},g.callback=function(){U(o,c)}}var P=o.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){U(o,c),typeof A!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var j=c.stack;this.componentDidCatch(c.value,{componentStack:j!==null?j:""})}),g}function ct(o,c,g){var A=o.pingCache;if(A===null){A=o.pingCache=new te;var b=new Set;A.set(c,b)}else b=A.get(c),b===void 0&&(b=new Set,A.set(c,b));b.has(g)||(b.add(g),o=MP.bind(null,o,c,g),c.then(o,o))}function Ot(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function un(o,c,g,A,b){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=tr(-1,1),c.tag=2,mr(g,c,1))),g.lanes|=1),o):(o.flags|=65536,o.lanes=b,o)}var tn=C.ReactCurrentOwner,Sn=!1;function It(o,c,g,A){c.child=o===null?Yu(c,null,g,A):xl(c,o.child,g,A)}function fi(o,c,g,A,b){g=g.render;var P=c.ref;return Io(c,b),A=td(o,c,g,A,P,b),g=xm(),o!==null&&!Sn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,Rl(o,c,b)):(ur&&g&&fm(c),c.flags|=1,It(o,c,A,b),c.child)}function ps(o,c,g,A,b){if(o===null){var P=g.type;return typeof P=="function"&&!v_(P)&&P.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=P,Re(o,c,P,A,b)):(o=Zv(g.type,null,A,c,c.mode,b),o.ref=c.ref,o.return=c,c.child=o)}if(P=o.child,(o.lanes&b)===0){var j=P.memoizedProps;if(g=g.compare,g=g!==null?g:cl,g(j,A)&&o.ref===c.ref)return Rl(o,c,b)}return c.flags|=1,o=Fc(P,A),o.ref=c.ref,o.return=c,c.child=o}function Re(o,c,g,A,b){if(o!==null){var P=o.memoizedProps;if(cl(P,A)&&o.ref===c.ref)if(Sn=!1,c.pendingProps=A=P,(o.lanes&b)!==0)(o.flags&131072)!==0&&(Sn=!0);else return c.lanes=o.lanes,Rl(o,c,b)}return Et(o,c,g,A,b)}function Me(o,c,g){var A=c.pendingProps,b=A.children,P=o!==null?o.memoizedState:null;if(A.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},ir(ph,ra),ra|=g;else{if((g&1073741824)===0)return o=P!==null?P.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,ir(ph,ra),ra|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=P!==null?P.baseLanes:g,ir(ph,ra),ra|=A}else P!==null?(A=P.baseLanes|g,c.memoizedState=null):A=g,ir(ph,ra),ra|=A;return It(o,c,b,g),c.child}function Ne(o,c){var g=c.ref;(o===null&&g!==null||o!==null&&o.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function Et(o,c,g,A,b){var P=Ai(g)?Wa:li.current;return P=ml(c,P),Io(c,b),g=td(o,c,g,A,P,b),A=xm(),o!==null&&!Sn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,Rl(o,c,b)):(ur&&A&&fm(c),c.flags|=1,It(o,c,g,b),c.child)}function Xt(o,c,g,A,b){if(Ai(g)){var P=!0;gl(c)}else P=!1;if(Io(c,b),c.stateNode===null)kv(o,c),d(c,g,A),x(c,g,A,b),A=!0;else if(o===null){var j=c.stateNode,ie=c.memoizedProps;j.props=ie;var me=j.context,Be=g.contextType;typeof Be=="object"&&Be!==null?Be=us(Be):(Be=Ai(g)?Wa:li.current,Be=ml(c,Be));var nt=g.getDerivedStateFromProps,st=typeof nt=="function"||typeof j.getSnapshotBeforeUpdate=="function";st||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ie!==A||me!==Be)&&f(c,j,A,Be),er=!1;var tt=c.memoizedState;j.state=tt,Er(c,A,j,b),me=c.memoizedState,ie!==A||tt!==me||Ni.current||er?(typeof nt=="function"&&(ad(c,g,nt,A),me=c.memoizedState),(ie=er||Ov(c,g,ie,A,tt,me,Be))?(st||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(c.flags|=4194308)):(typeof j.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=A,c.memoizedState=me),j.props=A,j.state=me,j.context=Be,A=ie):(typeof j.componentDidMount=="function"&&(c.flags|=4194308),A=!1)}else{j=c.stateNode,Br(o,c),ie=c.memoizedProps,Be=c.type===c.elementType?ie:Ns(c.type,ie),j.props=Be,st=c.pendingProps,tt=j.context,me=g.contextType,typeof me=="object"&&me!==null?me=us(me):(me=Ai(g)?Wa:li.current,me=ml(c,me));var Lt=g.getDerivedStateFromProps;(nt=typeof Lt=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ie!==st||tt!==me)&&f(c,j,A,me),er=!1,tt=c.memoizedState,j.state=tt,Er(c,A,j,b);var Ht=c.memoizedState;ie!==st||tt!==Ht||Ni.current||er?(typeof Lt=="function"&&(ad(c,g,Lt,A),Ht=c.memoizedState),(Be=er||Ov(c,g,Be,A,tt,Ht,me)||!1)?(nt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(A,Ht,me),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(A,Ht,me)),typeof j.componentDidUpdate=="function"&&(c.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof j.componentDidUpdate!="function"||ie===o.memoizedProps&&tt===o.memoizedState||(c.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ie===o.memoizedProps&&tt===o.memoizedState||(c.flags|=1024),c.memoizedProps=A,c.memoizedState=Ht),j.props=A,j.state=Ht,j.context=me,A=Be):(typeof j.componentDidUpdate!="function"||ie===o.memoizedProps&&tt===o.memoizedState||(c.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||ie===o.memoizedProps&&tt===o.memoizedState||(c.flags|=1024),A=!1)}return hn(o,c,g,A,P,b)}function hn(o,c,g,A,b,P){Ne(o,c);var j=(c.flags&128)!==0;if(!A&&!j)return b&&um(c,g,!1),Rl(o,c,P);A=c.stateNode,tn.current=c;var ie=j&&typeof g.getDerivedStateFromError!="function"?null:A.render();return c.flags|=1,o!==null&&j?(c.child=xl(c,o.child,null,P),c.child=xl(c,null,ie,P)):It(o,c,ie,P),c.memoizedState=A.state,b&&um(c,g,!0),c.child}function dn(o){var c=o.stateNode;c.pendingContext?cm(o,c.pendingContext,c.pendingContext!==c.context):c.context&&cm(o,c.context,!1),$u(o,c.containerInfo)}function zn(o,c,g,A,b){return Ro(),Ec(b),c.flags|=256,It(o,c,g,A),c.child}var Fr={dehydrated:null,treeContext:null,retryLane:0};function Fn(o){return{baseLanes:o,cachePool:null,transitions:null}}function eo(o,c,g){var A=c.pendingProps,b=dr.current,P=!1,j=(c.flags&128)!==0,ie;if((ie=j)||(ie=o!==null&&o.memoizedState===null?!1:(b&2)!==0),ie?(P=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(b|=1),ir(dr,b&1),o===null)return rh(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(j=A.children,o=A.fallback,P?(A=c.mode,P=c.child,j={mode:"hidden",children:j},(A&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=j):P=Qv(j,A,0,null),o=dd(o,A,g,null),P.return=c,o.return=c,P.sibling=o,c.child=P,c.child.memoizedState=Fn(g),c.memoizedState=Fr,o):bm(c,j));if(b=o.memoizedState,b!==null&&(ie=b.dehydrated,ie!==null))return fP(o,c,j,A,ie,b,g);if(P){P=A.fallback,j=c.mode,b=o.child,ie=b.sibling;var me={mode:"hidden",children:A.children};return(j&1)===0&&c.child!==b?(A=c.child,A.childLanes=0,A.pendingProps=me,c.deletions=null):(A=Fc(b,me),A.subtreeFlags=b.subtreeFlags&14680064),ie!==null?P=Fc(ie,P):(P=dd(P,j,g,null),P.flags|=2),P.return=c,A.return=c,A.sibling=P,c.child=A,A=P,P=c.child,j=o.child.memoizedState,j=j===null?Fn(g):{baseLanes:j.baseLanes|g,cachePool:null,transitions:j.transitions},P.memoizedState=j,P.childLanes=o.childLanes&~g,c.memoizedState=Fr,A}return P=o.child,o=P.sibling,A=Fc(P,{mode:"visible",children:A.children}),(c.mode&1)===0&&(A.lanes=g),A.return=c,A.sibling=null,o!==null&&(g=c.deletions,g===null?(c.deletions=[o],c.flags|=16):g.push(o)),c.child=A,c.memoizedState=null,A}function bm(o,c){return c=Qv({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Uv(o,c,g,A){return A!==null&&Ec(A),xl(c,o.child,null,g),o=bm(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function fP(o,c,g,A,b,P,j){if(g)return c.flags&256?(c.flags&=-257,A=I(Error(t(422))),Uv(o,c,j,A)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(P=A.fallback,b=c.mode,A=Qv({mode:"visible",children:A.children},b,0,null),P=dd(P,b,j,null),P.flags|=2,A.return=c,P.return=c,A.sibling=P,c.child=A,(c.mode&1)!==0&&xl(c,o.child,null,j),c.child.memoizedState=Fn(j),c.memoizedState=Fr,P);if((c.mode&1)===0)return Uv(o,c,j,null);if(b.data==="$!"){if(A=b.nextSibling&&b.nextSibling.dataset,A)var ie=A.dgst;return A=ie,P=Error(t(419)),A=I(P,A,void 0),Uv(o,c,j,A)}if(ie=(j&o.childLanes)!==0,Sn||ie){if(A=Mi,A!==null){switch(j&-j){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(A.suspendedLanes|j))!==0?0:b,b!==0&&b!==P.retryLane&&(P.retryLane=b,$s(o,b),ro(A,o,b,-1))}return g_(),A=I(Error(t(421))),Uv(o,c,j,A)}return b.data==="$?"?(c.flags|=128,c.child=o.child,c=EP.bind(null,o),b._reactRetry=c,null):(o=P.treeContext,Oi=Ga(b.nextSibling),ci=c,ur=!0,Ls=null,o!==null&&(Fi[$r++]=mt,Fi[$r++]=Ds,Fi[$r++]=yl,mt=o.id,Ds=o.overflow,yl=c),c=bm(c,A.children),c.flags|=4096,c)}function CM(o,c,g){o.lanes|=c;var A=o.alternate;A!==null&&(A.lanes|=c),Qu(o.return,c,g)}function t_(o,c,g,A,b){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:A,tail:g,tailMode:b}:(P.isBackwards=c,P.rendering=null,P.renderingStartTime=0,P.last=A,P.tail=g,P.tailMode=b)}function bM(o,c,g){var A=c.pendingProps,b=A.revealOrder,P=A.tail;if(It(o,c,A.children,g),A=dr.current,(A&2)!==0)A=A&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&CM(o,g,c);else if(o.tag===19)CM(o,g,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}A&=1}if(ir(dr,A),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(g=c.child,b=null;g!==null;)o=g.alternate,o!==null&&ea(o)===null&&(b=g),g=g.sibling;g=b,g===null?(b=c.child,c.child=null):(b=g.sibling,g.sibling=null),t_(c,!1,b,g,P);break;case"backwards":for(g=null,b=c.child,c.child=null;b!==null;){if(o=b.alternate,o!==null&&ea(o)===null){c.child=b;break}o=b.sibling,b.sibling=g,g=b,b=o}t_(c,!0,g,null,P);break;case"together":t_(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function kv(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Rl(o,c,g){if(o!==null&&(c.dependencies=o.dependencies),od|=c.lanes,(g&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(t(153));if(c.child!==null){for(o=c.child,g=Fc(o,o.pendingProps),c.child=g,g.return=c;o.sibling!==null;)o=o.sibling,g=g.sibling=Fc(o,o.pendingProps),g.return=c;g.sibling=null}return c.child}function hP(o,c,g){switch(c.tag){case 3:dn(c),Ro();break;case 5:El(c);break;case 1:Ai(c.type)&&gl(c);break;case 4:$u(c,c.stateNode.containerInfo);break;case 10:var A=c.type._context,b=c.memoizedProps.value;ir(_l,A._currentValue),A._currentValue=b;break;case 13:if(A=c.memoizedState,A!==null)return A.dehydrated!==null?(ir(dr,dr.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?eo(o,c,g):(ir(dr,dr.current&1),o=Rl(o,c,g),o!==null?o.sibling:null);ir(dr,dr.current&1);break;case 19:if(A=(g&c.childLanes)!==0,(o.flags&128)!==0){if(A)return bM(o,c,g);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ir(dr,dr.current),A)break;return null;case 22:case 23:return c.lanes=0,Me(o,c,g)}return Rl(o,c,g)}var TM,n_,RM,IM;TM=function(o,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)o.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},n_=function(){},RM=function(o,c,g,A){var b=o.memoizedProps;if(b!==A){o=c.stateNode,Nr(ds.current);var P=null;switch(g){case"input":b=ee(o,b),A=ee(o,A),P=[];break;case"select":b=se({},b,{value:void 0}),A=se({},A,{value:void 0}),P=[];break;case"textarea":b=D(o,b),A=D(o,A),P=[];break;default:typeof b.onClick!="function"&&typeof A.onClick=="function"&&(o.onclick=Gu)}de(g,A);var j;g=null;for(Be in b)if(!A.hasOwnProperty(Be)&&b.hasOwnProperty(Be)&&b[Be]!=null)if(Be==="style"){var ie=b[Be];for(j in ie)ie.hasOwnProperty(j)&&(g||(g={}),g[j]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(i.hasOwnProperty(Be)?P||(P=[]):(P=P||[]).push(Be,null));for(Be in A){var me=A[Be];if(ie=b!=null?b[Be]:void 0,A.hasOwnProperty(Be)&&me!==ie&&(me!=null||ie!=null))if(Be==="style")if(ie){for(j in ie)!ie.hasOwnProperty(j)||me&&me.hasOwnProperty(j)||(g||(g={}),g[j]="");for(j in me)me.hasOwnProperty(j)&&ie[j]!==me[j]&&(g||(g={}),g[j]=me[j])}else g||(P||(P=[]),P.push(Be,g)),g=me;else Be==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,ie=ie?ie.__html:void 0,me!=null&&ie!==me&&(P=P||[]).push(Be,me)):Be==="children"?typeof me!="string"&&typeof me!="number"||(P=P||[]).push(Be,""+me):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(i.hasOwnProperty(Be)?(me!=null&&Be==="onScroll"&&ar("scroll",o),P||ie===me||(P=[])):(P=P||[]).push(Be,me))}g&&(P=P||[]).push("style",g);var Be=P;(c.updateQueue=Be)&&(c.flags|=4)}},IM=function(o,c,g,A){g!==A&&(c.flags|=4)};function Tm(o,c){if(!ur)switch(o.tailMode){case"hidden":c=o.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?o.tail=null:g.sibling=null;break;case"collapsed":g=o.tail;for(var A=null;g!==null;)g.alternate!==null&&(A=g),g=g.sibling;A===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:A.sibling=null}}function Yi(o){var c=o.alternate!==null&&o.alternate.child===o.child,g=0,A=0;if(c)for(var b=o.child;b!==null;)g|=b.lanes|b.childLanes,A|=b.subtreeFlags&14680064,A|=b.flags&14680064,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)g|=b.lanes|b.childLanes,A|=b.subtreeFlags,A|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=A,o.childLanes=g,c}function pP(o,c,g){var A=c.pendingProps;switch(Ja(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(c),null;case 1:return Ai(c.type)&&Vu(),Yi(c),null;case 3:return A=c.stateNode,Po(),or(Ni),or(li),_a(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(o===null||o.child===null)&&(Mc(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ls!==null&&(h_(Ls),Ls=null))),n_(o,c),Yi(c),null;case 5:Tc(c);var b=Nr(Za.current);if(g=c.type,o!==null&&c.stateNode!=null)RM(o,c,g,A,b),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!A){if(c.stateNode===null)throw Error(t(166));return Yi(c),null}if(o=Nr(ds.current),Mc(c)){A=c.stateNode,g=c.type;var P=c.memoizedProps;switch(A[jr]=c,A[wc]=P,o=(c.mode&1)!==0,g){case"dialog":ar("cancel",A),ar("close",A);break;case"iframe":case"object":case"embed":ar("load",A);break;case"video":case"audio":for(b=0;b<bo.length;b++)ar(bo[b],A);break;case"source":ar("error",A);break;case"img":case"image":case"link":ar("error",A),ar("load",A);break;case"details":ar("toggle",A);break;case"input":Dt(A,P),ar("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!P.multiple},ar("invalid",A);break;case"textarea":Q(A,P),ar("invalid",A)}de(g,P),b=null;for(var j in P)if(P.hasOwnProperty(j)){var ie=P[j];j==="children"?typeof ie=="string"?A.textContent!==ie&&(P.suppressHydrationWarning!==!0&&Hu(A.textContent,ie,o),b=["children",ie]):typeof ie=="number"&&A.textContent!==""+ie&&(P.suppressHydrationWarning!==!0&&Hu(A.textContent,ie,o),b=["children",""+ie]):i.hasOwnProperty(j)&&ie!=null&&j==="onScroll"&&ar("scroll",A)}switch(g){case"input":Qt(A),at(A,P,!0);break;case"textarea":Qt(A),xe(A);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(A.onclick=Gu)}A=b,c.updateQueue=A,A!==null&&(c.flags|=4)}else{j=b.nodeType===9?b:b.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=pe(g)),o==="http://www.w3.org/1999/xhtml"?g==="script"?(o=j.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof A.is=="string"?o=j.createElement(g,{is:A.is}):(o=j.createElement(g),g==="select"&&(j=o,A.multiple?j.multiple=!0:A.size&&(j.size=A.size))):o=j.createElementNS(o,g),o[jr]=c,o[wc]=A,TM(o,c,!1,!1),c.stateNode=o;e:{switch(j=De(g,A),g){case"dialog":ar("cancel",o),ar("close",o),b=A;break;case"iframe":case"object":case"embed":ar("load",o),b=A;break;case"video":case"audio":for(b=0;b<bo.length;b++)ar(bo[b],o);b=A;break;case"source":ar("error",o),b=A;break;case"img":case"image":case"link":ar("error",o),ar("load",o),b=A;break;case"details":ar("toggle",o),b=A;break;case"input":Dt(o,A),b=ee(o,A),ar("invalid",o);break;case"option":b=A;break;case"select":o._wrapperState={wasMultiple:!!A.multiple},b=se({},A,{value:void 0}),ar("invalid",o);break;case"textarea":Q(o,A),b=D(o,A),ar("invalid",o);break;default:b=A}de(g,b),ie=b;for(P in ie)if(ie.hasOwnProperty(P)){var me=ie[P];P==="style"?Bt(o,me):P==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&$e(o,me)):P==="children"?typeof me=="string"?(g!=="textarea"||me!=="")&&kt(o,me):typeof me=="number"&&kt(o,""+me):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(i.hasOwnProperty(P)?me!=null&&P==="onScroll"&&ar("scroll",o):me!=null&&R(o,P,me,j))}switch(g){case"input":Qt(o),at(o,A,!1);break;case"textarea":Qt(o),xe(o);break;case"option":A.value!=null&&o.setAttribute("value",""+rt(A.value));break;case"select":o.multiple=!!A.multiple,P=A.value,P!=null?N(o,!!A.multiple,P,!1):A.defaultValue!=null&&N(o,!!A.multiple,A.defaultValue,!0);break;default:typeof b.onClick=="function"&&(o.onclick=Gu)}switch(g){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Yi(c),null;case 6:if(o&&c.stateNode!=null)IM(o,c,o.memoizedProps,A);else{if(typeof A!="string"&&c.stateNode===null)throw Error(t(166));if(g=Nr(Za.current),Nr(ds.current),Mc(c)){if(A=c.stateNode,g=c.memoizedProps,A[jr]=c,(P=A.nodeValue!==g)&&(o=ci,o!==null))switch(o.tag){case 3:Hu(A.nodeValue,g,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Hu(A.nodeValue,g,(o.mode&1)!==0)}P&&(c.flags|=4)}else A=(g.nodeType===9?g:g.ownerDocument).createTextNode(A),A[jr]=c,c.stateNode=A}return Yi(c),null;case 13:if(or(dr),A=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(ur&&Oi!==null&&(c.mode&1)!==0&&(c.flags&128)===0)mm(),Ro(),c.flags|=98560,P=!1;else if(P=Mc(c),A!==null&&A.dehydrated!==null){if(o===null){if(!P)throw Error(t(318));if(P=c.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(t(317));P[jr]=c}else Ro(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Yi(c),P=!1}else Ls!==null&&(h_(Ls),Ls=null),P=!0;if(!P)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(A=A!==null,A!==(o!==null&&o.memoizedState!==null)&&A&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(dr.current&1)!==0?hi===0&&(hi=3):g_())),c.updateQueue!==null&&(c.flags|=4),Yi(c),null);case 4:return Po(),n_(o,c),o===null&&_c(c.stateNode.containerInfo),Yi(c),null;case 10:return Zu(c.type._context),Yi(c),null;case 17:return Ai(c.type)&&Vu(),Yi(c),null;case 19:if(or(dr),P=c.memoizedState,P===null)return Yi(c),null;if(A=(c.flags&128)!==0,j=P.rendering,j===null)if(A)Tm(P,!1);else{if(hi!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(j=ea(o),j!==null){for(c.flags|=128,Tm(P,!1),A=j.updateQueue,A!==null&&(c.updateQueue=A,c.flags|=4),c.subtreeFlags=0,A=g,g=c.child;g!==null;)P=g,o=A,P.flags&=14680066,j=P.alternate,j===null?(P.childLanes=0,P.lanes=o,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=j.childLanes,P.lanes=j.lanes,P.child=j.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=j.memoizedProps,P.memoizedState=j.memoizedState,P.updateQueue=j.updateQueue,P.type=j.type,o=j.dependencies,P.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),g=g.sibling;return ir(dr,dr.current&1|2),c.child}o=o.sibling}P.tail!==null&&$()>mh&&(c.flags|=128,A=!0,Tm(P,!1),c.lanes=4194304)}else{if(!A)if(o=ea(j),o!==null){if(c.flags|=128,A=!0,g=o.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),Tm(P,!0),P.tail===null&&P.tailMode==="hidden"&&!j.alternate&&!ur)return Yi(c),null}else 2*$()-P.renderingStartTime>mh&&g!==1073741824&&(c.flags|=128,A=!0,Tm(P,!1),c.lanes=4194304);P.isBackwards?(j.sibling=c.child,c.child=j):(g=P.last,g!==null?g.sibling=j:c.child=j,P.last=j)}return P.tail!==null?(c=P.tail,P.rendering=c,P.tail=c.sibling,P.renderingStartTime=$(),c.sibling=null,g=dr.current,ir(dr,A?g&1|2:g&1),c):(Yi(c),null);case 22:case 23:return m_(),A=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==A&&(c.flags|=8192),A&&(c.mode&1)!==0?(ra&1073741824)!==0&&(Yi(c),c.subtreeFlags&6&&(c.flags|=8192)):Yi(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function mP(o,c){switch(Ja(c),c.tag){case 1:return Ai(c.type)&&Vu(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Po(),or(Ni),or(li),_a(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Tc(c),null;case 13:if(or(dr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Ro()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return or(dr),null;case 4:return Po(),null;case 10:return Zu(c.type._context),null;case 22:case 23:return m_(),null;case 24:return null;default:return null}}var zv=!1,Zi=!1,gP=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function hh(o,c){var g=o.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(A){Or(o,c,A)}else g.current=null}function r_(o,c,g){try{g()}catch(A){Or(o,c,A)}}var PM=!1;function vP(o,c){if(Sc=bs,o=xr(),Yr(o)){if("selectionStart"in o)var g={start:o.selectionStart,end:o.selectionEnd};else e:{g=(g=o.ownerDocument)&&g.defaultView||window;var A=g.getSelection&&g.getSelection();if(A&&A.rangeCount!==0){g=A.anchorNode;var b=A.anchorOffset,P=A.focusNode;A=A.focusOffset;try{g.nodeType,P.nodeType}catch{g=null;break e}var j=0,ie=-1,me=-1,Be=0,nt=0,st=o,tt=null;t:for(;;){for(var Lt;st!==g||b!==0&&st.nodeType!==3||(ie=j+b),st!==P||A!==0&&st.nodeType!==3||(me=j+A),st.nodeType===3&&(j+=st.nodeValue.length),(Lt=st.firstChild)!==null;)tt=st,st=Lt;for(;;){if(st===o)break t;if(tt===g&&++Be===b&&(ie=j),tt===P&&++nt===A&&(me=j),(Lt=st.nextSibling)!==null)break;st=tt,tt=st.parentNode}st=Lt}g=ie===-1||me===-1?null:{start:ie,end:me}}else g=null}g=g||{start:0,end:0}}else g=null;for(rm={focusedElem:o,selectionRange:g},bs=!1,Ut=c;Ut!==null;)if(c=Ut,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ut=o;else for(;Ut!==null;){c=Ut;try{var Ht=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ht!==null){var Vt=Ht.memoizedProps,Wr=Ht.memoizedState,be=c.stateNode,_e=be.getSnapshotBeforeUpdate(c.elementType===c.type?Vt:Ns(c.type,Vt),Wr);be.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var Te=c.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ft){Or(c,c.return,ft)}if(o=c.sibling,o!==null){o.return=c.return,Ut=o;break}Ut=c.return}return Ht=PM,PM=!1,Ht}function Rm(o,c,g){var A=c.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var b=A=A.next;do{if((b.tag&o)===o){var P=b.destroy;b.destroy=void 0,P!==void 0&&r_(c,g,P)}b=b.next}while(b!==A)}}function Hv(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&o)===o){var A=g.create;g.destroy=A()}g=g.next}while(g!==c)}}function i_(o){var c=o.ref;if(c!==null){var g=o.stateNode;switch(o.tag){case 5:o=g;break;default:o=g}typeof c=="function"?c(o):c.current=o}}function BM(o){var c=o.alternate;c!==null&&(o.alternate=null,BM(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[jr],delete c[wc],delete c[pl],delete c[Zf],delete c[Qf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function DM(o){return o.tag===5||o.tag===3||o.tag===4}function LM(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||DM(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function s_(o,c,g){var A=o.tag;if(A===5||A===6)o=o.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(o,c):g.insertBefore(o,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(o,g)):(c=g,c.appendChild(o)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Gu));else if(A!==4&&(o=o.child,o!==null))for(s_(o,c,g),o=o.sibling;o!==null;)s_(o,c,g),o=o.sibling}function a_(o,c,g){var A=o.tag;if(A===5||A===6)o=o.stateNode,c?g.insertBefore(o,c):g.appendChild(o);else if(A!==4&&(o=o.child,o!==null))for(a_(o,c,g),o=o.sibling;o!==null;)a_(o,c,g),o=o.sibling}var ki=null,to=!1;function Pc(o,c,g){for(g=g.child;g!==null;)NM(o,c,g),g=g.sibling}function NM(o,c,g){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(lt,g)}catch{}switch(g.tag){case 5:Zi||hh(g,c);case 6:var A=ki,b=to;ki=null,Pc(o,c,g),ki=A,to=b,ki!==null&&(to?(o=ki,g=g.stateNode,o.nodeType===8?o.parentNode.removeChild(g):o.removeChild(g)):ki.removeChild(g.stateNode));break;case 18:ki!==null&&(to?(o=ki,g=g.stateNode,o.nodeType===8?Yf(o.parentNode,g):o.nodeType===1&&Yf(o,g),Iu(o)):Yf(ki,g.stateNode));break;case 4:A=ki,b=to,ki=g.stateNode.containerInfo,to=!0,Pc(o,c,g),ki=A,to=b;break;case 0:case 11:case 14:case 15:if(!Zi&&(A=g.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){b=A=A.next;do{var P=b,j=P.destroy;P=P.tag,j!==void 0&&((P&2)!==0||(P&4)!==0)&&r_(g,c,j),b=b.next}while(b!==A)}Pc(o,c,g);break;case 1:if(!Zi&&(hh(g,c),A=g.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=g.memoizedProps,A.state=g.memoizedState,A.componentWillUnmount()}catch(ie){Or(g,c,ie)}Pc(o,c,g);break;case 21:Pc(o,c,g);break;case 22:g.mode&1?(Zi=(A=Zi)||g.memoizedState!==null,Pc(o,c,g),Zi=A):Pc(o,c,g);break;default:Pc(o,c,g)}}function FM(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var g=o.stateNode;g===null&&(g=o.stateNode=new gP),c.forEach(function(A){var b=CP.bind(null,o,A);g.has(A)||(g.add(A),A.then(b,b))})}}function no(o,c){var g=c.deletions;if(g!==null)for(var A=0;A<g.length;A++){var b=g[A];try{var P=o,j=c,ie=j;e:for(;ie!==null;){switch(ie.tag){case 5:ki=ie.stateNode,to=!1;break e;case 3:ki=ie.stateNode.containerInfo,to=!0;break e;case 4:ki=ie.stateNode.containerInfo,to=!0;break e}ie=ie.return}if(ki===null)throw Error(t(160));NM(P,j,b),ki=null,to=!1;var me=b.alternate;me!==null&&(me.return=null),b.return=null}catch(Be){Or(b,c,Be)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)OM(c,o),c=c.sibling}function OM(o,c){var g=o.alternate,A=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(no(c,o),Do(o),A&4){try{Rm(3,o,o.return),Hv(3,o)}catch(Vt){Or(o,o.return,Vt)}try{Rm(5,o,o.return)}catch(Vt){Or(o,o.return,Vt)}}break;case 1:no(c,o),Do(o),A&512&&g!==null&&hh(g,g.return);break;case 5:if(no(c,o),Do(o),A&512&&g!==null&&hh(g,g.return),o.flags&32){var b=o.stateNode;try{kt(b,"")}catch(Vt){Or(o,o.return,Vt)}}if(A&4&&(b=o.stateNode,b!=null)){var P=o.memoizedProps,j=g!==null?g.memoizedProps:P,ie=o.type,me=o.updateQueue;if(o.updateQueue=null,me!==null)try{ie==="input"&&P.type==="radio"&&P.name!=null&&et(b,P),De(ie,j);var Be=De(ie,P);for(j=0;j<me.length;j+=2){var nt=me[j],st=me[j+1];nt==="style"?Bt(b,st):nt==="dangerouslySetInnerHTML"?$e(b,st):nt==="children"?kt(b,st):R(b,nt,st,Be)}switch(ie){case"input":At(b,P);break;case"textarea":ye(b,P);break;case"select":var tt=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!P.multiple;var Lt=P.value;Lt!=null?N(b,!!P.multiple,Lt,!1):tt!==!!P.multiple&&(P.defaultValue!=null?N(b,!!P.multiple,P.defaultValue,!0):N(b,!!P.multiple,P.multiple?[]:"",!1))}b[wc]=P}catch(Vt){Or(o,o.return,Vt)}}break;case 6:if(no(c,o),Do(o),A&4){if(o.stateNode===null)throw Error(t(162));b=o.stateNode,P=o.memoizedProps;try{b.nodeValue=P}catch(Vt){Or(o,o.return,Vt)}}break;case 3:if(no(c,o),Do(o),A&4&&g!==null&&g.memoizedState.isDehydrated)try{Iu(c.containerInfo)}catch(Vt){Or(o,o.return,Vt)}break;case 4:no(c,o),Do(o);break;case 13:no(c,o),Do(o),b=o.child,b.flags&8192&&(P=b.memoizedState!==null,b.stateNode.isHidden=P,!P||b.alternate!==null&&b.alternate.memoizedState!==null||(c_=$())),A&4&&FM(o);break;case 22:if(nt=g!==null&&g.memoizedState!==null,o.mode&1?(Zi=(Be=Zi)||nt,no(c,o),Zi=Be):no(c,o),Do(o),A&8192){if(Be=o.memoizedState!==null,(o.stateNode.isHidden=Be)&&!nt&&(o.mode&1)!==0)for(Ut=o,nt=o.child;nt!==null;){for(st=Ut=nt;Ut!==null;){switch(tt=Ut,Lt=tt.child,tt.tag){case 0:case 11:case 14:case 15:Rm(4,tt,tt.return);break;case 1:hh(tt,tt.return);var Ht=tt.stateNode;if(typeof Ht.componentWillUnmount=="function"){A=tt,g=tt.return;try{c=A,Ht.props=c.memoizedProps,Ht.state=c.memoizedState,Ht.componentWillUnmount()}catch(Vt){Or(A,g,Vt)}}break;case 5:hh(tt,tt.return);break;case 22:if(tt.memoizedState!==null){zM(st);continue}}Lt!==null?(Lt.return=tt,Ut=Lt):zM(st)}nt=nt.sibling}e:for(nt=null,st=o;;){if(st.tag===5){if(nt===null){nt=st;try{b=st.stateNode,Be?(P=b.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(ie=st.stateNode,me=st.memoizedProps.style,j=me!=null&&me.hasOwnProperty("display")?me.display:null,ie.style.display=zt("display",j))}catch(Vt){Or(o,o.return,Vt)}}}else if(st.tag===6){if(nt===null)try{st.stateNode.nodeValue=Be?"":st.memoizedProps}catch(Vt){Or(o,o.return,Vt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===o)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===o)break e;for(;st.sibling===null;){if(st.return===null||st.return===o)break e;nt===st&&(nt=null),st=st.return}nt===st&&(nt=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:no(c,o),Do(o),A&4&&FM(o);break;case 21:break;default:no(c,o),Do(o)}}function Do(o){var c=o.flags;if(c&2){try{e:{for(var g=o.return;g!==null;){if(DM(g)){var A=g;break e}g=g.return}throw Error(t(160))}switch(A.tag){case 5:var b=A.stateNode;A.flags&32&&(kt(b,""),A.flags&=-33);var P=LM(o);a_(o,P,b);break;case 3:case 4:var j=A.stateNode.containerInfo,ie=LM(o);s_(o,ie,j);break;default:throw Error(t(161))}}catch(me){Or(o,o.return,me)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function yP(o,c,g){Ut=o,UM(o)}function UM(o,c,g){for(var A=(o.mode&1)!==0;Ut!==null;){var b=Ut,P=b.child;if(b.tag===22&&A){var j=b.memoizedState!==null||zv;if(!j){var ie=b.alternate,me=ie!==null&&ie.memoizedState!==null||Zi;ie=zv;var Be=Zi;if(zv=j,(Zi=me)&&!Be)for(Ut=b;Ut!==null;)j=Ut,me=j.child,j.tag===22&&j.memoizedState!==null?HM(b):me!==null?(me.return=j,Ut=me):HM(b);for(;P!==null;)Ut=P,UM(P),P=P.sibling;Ut=b,zv=ie,Zi=Be}kM(o)}else(b.subtreeFlags&8772)!==0&&P!==null?(P.return=b,Ut=P):kM(o)}}function kM(o){for(;Ut!==null;){var c=Ut;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Zi||Hv(5,c);break;case 1:var A=c.stateNode;if(c.flags&4&&!Zi)if(g===null)A.componentDidMount();else{var b=c.elementType===c.type?g.memoizedProps:Ns(c.type,g.memoizedProps);A.componentDidUpdate(b,g.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var P=c.updateQueue;P!==null&&bc(c,P,A);break;case 3:var j=c.updateQueue;if(j!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}bc(c,j,g)}break;case 5:var ie=c.stateNode;if(g===null&&c.flags&4){g=ie;var me=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&g.focus();break;case"img":me.src&&(g.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Be=c.alternate;if(Be!==null){var nt=Be.memoizedState;if(nt!==null){var st=nt.dehydrated;st!==null&&Iu(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zi||c.flags&512&&i_(c)}catch(tt){Or(c,c.return,tt)}}if(c===o){Ut=null;break}if(g=c.sibling,g!==null){g.return=c.return,Ut=g;break}Ut=c.return}}function zM(o){for(;Ut!==null;){var c=Ut;if(c===o){Ut=null;break}var g=c.sibling;if(g!==null){g.return=c.return,Ut=g;break}Ut=c.return}}function HM(o){for(;Ut!==null;){var c=Ut;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{Hv(4,c)}catch(me){Or(c,g,me)}break;case 1:var A=c.stateNode;if(typeof A.componentDidMount=="function"){var b=c.return;try{A.componentDidMount()}catch(me){Or(c,b,me)}}var P=c.return;try{i_(c)}catch(me){Or(c,P,me)}break;case 5:var j=c.return;try{i_(c)}catch(me){Or(c,j,me)}}}catch(me){Or(c,c.return,me)}if(c===o){Ut=null;break}var ie=c.sibling;if(ie!==null){ie.return=c.return,Ut=ie;break}Ut=c.return}}var xP=Math.ceil,Gv=C.ReactCurrentDispatcher,o_=C.ReactCurrentOwner,Sa=C.ReactCurrentBatchConfig,Wn=0,Mi=null,ei=null,zi=0,ra=0,ph=Mr(0),hi=0,Im=null,od=0,Vv=0,l_=0,Pm=null,Fs=null,c_=0,mh=1/0,Il=null,jv=!1,u_=null,Bc=null,Wv=!1,Dc=null,Xv=0,Bm=0,d_=null,Jv=-1,Kv=0;function ms(){return(Wn&6)!==0?$():Jv!==-1?Jv:Jv=$()}function Lc(o){return(o.mode&1)===0?1:(Wn&2)!==0&&zi!==0?zi&-zi:$x.transition!==null?(Kv===0&&(Kv=bn()),Kv):(o=An,o!==0||(o=window.event,o=o===void 0?16:hv(o.type)),o)}function ro(o,c,g,A){if(50<Bm)throw Bm=0,d_=null,Error(t(185));Ln(o,g,A),((Wn&2)===0||o!==Mi)&&(o===Mi&&((Wn&2)===0&&(Vv|=g),hi===4&&Nc(o,zi)),Os(o,A),g===1&&Wn===0&&(c.mode&1)===0&&(mh=$()+500,Wu&&ya()))}function Os(o,c){var g=o.callbackNode;Dn(o,c);var A=_n(o,o===Mi?zi:0);if(A===0)g!==null&&ne(g),o.callbackNode=null,o.callbackPriority=0;else if(c=A&-A,o.callbackPriority!==c){if(g!=null&&ne(g),c===1)o.tag===0?bv(VM.bind(null,o)):Xu(VM.bind(null,o)),qx(function(){(Wn&6)===0&&ya()}),g=null;else{switch(oc(A)){case 1:g=Oe;break;case 4:g=Ve;break;case 16:g=Qe;break;case 536870912:g=gt;break;default:g=Qe}g=QM(g,GM.bind(null,o))}o.callbackPriority=c,o.callbackNode=g}}function GM(o,c){if(Jv=-1,Kv=0,(Wn&6)!==0)throw Error(t(327));var g=o.callbackNode;if(gh()&&o.callbackNode!==g)return null;var A=_n(o,o===Mi?zi:0);if(A===0)return null;if((A&30)!==0||(A&o.expiredLanes)!==0||c)c=Yv(o,A);else{c=A;var b=Wn;Wn|=2;var P=WM();(Mi!==o||zi!==c)&&(Il=null,mh=$()+500,cd(o,c));do try{SP();break}catch(ie){jM(o,ie)}while(!0);Sl(),Gv.current=P,Wn=b,ei!==null?c=0:(Mi=null,zi=0,c=hi)}if(c!==0){if(c===2&&(b=Wt(o),b!==0&&(A=b,c=f_(o,b))),c===1)throw g=Im,cd(o,0),Nc(o,A),Os(o,$()),g;if(c===6)Nc(o,A);else{if(b=o.current.alternate,(A&30)===0&&!_P(b)&&(c=Yv(o,A),c===2&&(P=Wt(o),P!==0&&(A=P,c=f_(o,P))),c===1))throw g=Im,cd(o,0),Nc(o,A),Os(o,$()),g;switch(o.finishedWork=b,o.finishedLanes=A,c){case 0:case 1:throw Error(t(345));case 2:ud(o,Fs,Il);break;case 3:if(Nc(o,A),(A&130023424)===A&&(c=c_+500-$(),10<c)){if(_n(o,0)!==0)break;if(b=o.suspendedLanes,(b&A)!==A){ms(),o.pingedLanes|=o.suspendedLanes&b;break}o.timeoutHandle=sm(ud.bind(null,o,Fs,Il),c);break}ud(o,Fs,Il);break;case 4:if(Nc(o,A),(A&4194240)===A)break;for(c=o.eventTimes,b=-1;0<A;){var j=31-Ft(A);P=1<<j,j=c[j],j>b&&(b=j),A&=~P}if(A=b,A=$()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*xP(A/1960))-A,10<A){o.timeoutHandle=sm(ud.bind(null,o,Fs,Il),A);break}ud(o,Fs,Il);break;case 5:ud(o,Fs,Il);break;default:throw Error(t(329))}}}return Os(o,$()),o.callbackNode===g?GM.bind(null,o):null}function f_(o,c){var g=Pm;return o.current.memoizedState.isDehydrated&&(cd(o,c).flags|=256),o=Yv(o,c),o!==2&&(c=Fs,Fs=g,c!==null&&h_(c)),o}function h_(o){Fs===null?Fs=o:Fs.push.apply(Fs,o)}function _P(o){for(var c=o;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var A=0;A<g.length;A++){var b=g[A],P=b.getSnapshot;b=b.value;try{if(!os(P(),b))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Nc(o,c){for(c&=~l_,c&=~Vv,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var g=31-Ft(c),A=1<<g;o[g]=-1,c&=~A}}function VM(o){if((Wn&6)!==0)throw Error(t(327));gh();var c=_n(o,0);if((c&1)===0)return Os(o,$()),null;var g=Yv(o,c);if(o.tag!==0&&g===2){var A=Wt(o);A!==0&&(c=A,g=f_(o,A))}if(g===1)throw g=Im,cd(o,0),Nc(o,c),Os(o,$()),g;if(g===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,ud(o,Fs,Il),Os(o,$()),null}function p_(o,c){var g=Wn;Wn|=1;try{return o(c)}finally{Wn=g,Wn===0&&(mh=$()+500,Wu&&ya())}}function ld(o){Dc!==null&&Dc.tag===0&&(Wn&6)===0&&gh();var c=Wn;Wn|=1;var g=Sa.transition,A=An;try{if(Sa.transition=null,An=1,o)return o()}finally{An=A,Sa.transition=g,Wn=c,(Wn&6)===0&&ya()}}function m_(){ra=ph.current,or(ph)}function cd(o,c){o.finishedWork=null,o.finishedLanes=0;var g=o.timeoutHandle;if(g!==-1&&(o.timeoutHandle=-1,am(g)),ei!==null)for(g=ei.return;g!==null;){var A=g;switch(Ja(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Vu();break;case 3:Po(),or(Ni),or(li),_a();break;case 5:Tc(A);break;case 4:Po();break;case 13:or(dr);break;case 19:or(dr);break;case 10:Zu(A.type._context);break;case 22:case 23:m_()}g=g.return}if(Mi=o,ei=o=Fc(o.current,null),zi=ra=c,hi=0,Im=null,l_=Vv=od=0,Fs=Pm=null,Ya!==null){for(c=0;c<Ya.length;c++)if(g=Ya[c],A=g.interleaved,A!==null){g.interleaved=null;var b=A.next,P=g.pending;if(P!==null){var j=P.next;P.next=b,A.next=j}g.pending=A}Ya=null}return o}function jM(o,c){do{var g=ei;try{if(Sl(),Cl.current=dh,ta){for(var A=lr.memoizedState;A!==null;){var b=A.queue;b!==null&&(b.pending=null),A=A.next}ta=!1}if(Qa=0,Gn=Cr=lr=null,wi=!1,Bo=0,o_.current=null,g===null||g.return===null){hi=1,Im=c,ei=null;break}e:{var P=o,j=g.return,ie=g,me=c;if(c=zi,ie.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Be=me,nt=ie,st=nt.tag;if((nt.mode&1)===0&&(st===0||st===11||st===15)){var tt=nt.alternate;tt?(nt.updateQueue=tt.updateQueue,nt.memoizedState=tt.memoizedState,nt.lanes=tt.lanes):(nt.updateQueue=null,nt.memoizedState=null)}var Lt=Ot(j);if(Lt!==null){Lt.flags&=-257,un(Lt,j,ie,P,c),Lt.mode&1&&ct(P,Be,c),c=Lt,me=Be;var Ht=c.updateQueue;if(Ht===null){var Vt=new Set;Vt.add(me),c.updateQueue=Vt}else Ht.add(me);break e}else{if((c&1)===0){ct(P,Be,c),g_();break e}me=Error(t(426))}}else if(ur&&ie.mode&1){var Wr=Ot(j);if(Wr!==null){(Wr.flags&65536)===0&&(Wr.flags|=256),un(Wr,j,ie,P,c),Ec(E(me,ie));break e}}P=me=E(me,ie),hi!==4&&(hi=2),Pm===null?Pm=[P]:Pm.push(P),P=j;do{switch(P.tag){case 3:P.flags|=65536,c&=-c,P.lanes|=c;var be=Ae(P,me,c);wl(P,be);break e;case 1:ie=me;var _e=P.type,Te=P.stateNode;if((P.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(Bc===null||!Bc.has(Te)))){P.flags|=65536,c&=-c,P.lanes|=c;var ft=ze(P,ie,c);wl(P,ft);break e}}P=P.return}while(P!==null)}JM(g)}catch(Yt){c=Yt,ei===g&&g!==null&&(ei=g=g.return);continue}break}while(!0)}function WM(){var o=Gv.current;return Gv.current=dh,o===null?dh:o}function g_(){(hi===0||hi===3||hi===2)&&(hi=4),Mi===null||(od&268435455)===0&&(Vv&268435455)===0||Nc(Mi,zi)}function Yv(o,c){var g=Wn;Wn|=2;var A=WM();(Mi!==o||zi!==c)&&(Il=null,cd(o,c));do try{AP();break}catch(b){jM(o,b)}while(!0);if(Sl(),Wn=g,Gv.current=A,ei!==null)throw Error(t(261));return Mi=null,zi=0,hi}function AP(){for(;ei!==null;)XM(ei)}function SP(){for(;ei!==null&&!ae();)XM(ei)}function XM(o){var c=ZM(o.alternate,o,ra);o.memoizedProps=o.pendingProps,c===null?JM(o):ei=c,o_.current=null}function JM(o){var c=o;do{var g=c.alternate;if(o=c.return,(c.flags&32768)===0){if(g=pP(g,c,ra),g!==null){ei=g;return}}else{if(g=mP(g,c),g!==null){g.flags&=32767,ei=g;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{hi=6,ei=null;return}}if(c=c.sibling,c!==null){ei=c;return}ei=c=o}while(c!==null);hi===0&&(hi=5)}function ud(o,c,g){var A=An,b=Sa.transition;try{Sa.transition=null,An=1,wP(o,c,g,A)}finally{Sa.transition=b,An=A}return null}function wP(o,c,g,A){do gh();while(Dc!==null);if((Wn&6)!==0)throw Error(t(327));g=o.finishedWork;var b=o.finishedLanes;if(g===null)return null;if(o.finishedWork=null,o.finishedLanes=0,g===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var P=g.lanes|g.childLanes;if(cr(o,P),o===Mi&&(ei=Mi=null,zi=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Wv||(Wv=!0,QM(Qe,function(){return gh(),null})),P=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||P){P=Sa.transition,Sa.transition=null;var j=An;An=1;var ie=Wn;Wn|=4,o_.current=null,vP(o,g),OM(g,o),Zr(rm),bs=!!Sc,rm=Sc=null,o.current=g,yP(g),ce(),Wn=ie,An=j,Sa.transition=P}else o.current=g;if(Wv&&(Wv=!1,Dc=o,Xv=b),P=o.pendingLanes,P===0&&(Bc=null),bt(g.stateNode),Os(o,$()),c!==null)for(A=o.onRecoverableError,g=0;g<c.length;g++)b=c[g],A(b.value,{componentStack:b.stack,digest:b.digest});if(jv)throw jv=!1,o=u_,u_=null,o;return(Xv&1)!==0&&o.tag!==0&&gh(),P=o.pendingLanes,(P&1)!==0?o===d_?Bm++:(Bm=0,d_=o):Bm=0,ya(),null}function gh(){if(Dc!==null){var o=oc(Xv),c=Sa.transition,g=An;try{if(Sa.transition=null,An=16>o?16:o,Dc===null)var A=!1;else{if(o=Dc,Dc=null,Xv=0,(Wn&6)!==0)throw Error(t(331));var b=Wn;for(Wn|=4,Ut=o.current;Ut!==null;){var P=Ut,j=P.child;if((Ut.flags&16)!==0){var ie=P.deletions;if(ie!==null){for(var me=0;me<ie.length;me++){var Be=ie[me];for(Ut=Be;Ut!==null;){var nt=Ut;switch(nt.tag){case 0:case 11:case 15:Rm(8,nt,P)}var st=nt.child;if(st!==null)st.return=nt,Ut=st;else for(;Ut!==null;){nt=Ut;var tt=nt.sibling,Lt=nt.return;if(BM(nt),nt===Be){Ut=null;break}if(tt!==null){tt.return=Lt,Ut=tt;break}Ut=Lt}}}var Ht=P.alternate;if(Ht!==null){var Vt=Ht.child;if(Vt!==null){Ht.child=null;do{var Wr=Vt.sibling;Vt.sibling=null,Vt=Wr}while(Vt!==null)}}Ut=P}}if((P.subtreeFlags&2064)!==0&&j!==null)j.return=P,Ut=j;else e:for(;Ut!==null;){if(P=Ut,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:Rm(9,P,P.return)}var be=P.sibling;if(be!==null){be.return=P.return,Ut=be;break e}Ut=P.return}}var _e=o.current;for(Ut=_e;Ut!==null;){j=Ut;var Te=j.child;if((j.subtreeFlags&2064)!==0&&Te!==null)Te.return=j,Ut=Te;else e:for(j=_e;Ut!==null;){if(ie=Ut,(ie.flags&2048)!==0)try{switch(ie.tag){case 0:case 11:case 15:Hv(9,ie)}}catch(Yt){Or(ie,ie.return,Yt)}if(ie===j){Ut=null;break e}var ft=ie.sibling;if(ft!==null){ft.return=ie.return,Ut=ft;break e}Ut=ie.return}}if(Wn=b,ya(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(lt,o)}catch{}A=!0}return A}finally{An=g,Sa.transition=c}}return!1}function KM(o,c,g){c=E(g,c),c=Ae(o,c,1),o=mr(o,c,1),c=ms(),o!==null&&(Ln(o,1,c),Os(o,c))}function Or(o,c,g){if(o.tag===3)KM(o,o,g);else for(;c!==null;){if(c.tag===3){KM(c,o,g);break}else if(c.tag===1){var A=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Bc===null||!Bc.has(A))){o=E(g,o),o=ze(c,o,1),c=mr(c,o,1),o=ms(),c!==null&&(Ln(c,1,o),Os(c,o));break}}c=c.return}}function MP(o,c,g){var A=o.pingCache;A!==null&&A.delete(c),c=ms(),o.pingedLanes|=o.suspendedLanes&g,Mi===o&&(zi&g)===g&&(hi===4||hi===3&&(zi&130023424)===zi&&500>$()-c_?cd(o,0):l_|=g),Os(o,c)}function YM(o,c){c===0&&((o.mode&1)===0?c=1:(c=$t,$t<<=1,($t&130023424)===0&&($t=4194304)));var g=ms();o=$s(o,c),o!==null&&(Ln(o,c,g),Os(o,g))}function EP(o){var c=o.memoizedState,g=0;c!==null&&(g=c.retryLane),YM(o,g)}function CP(o,c){var g=0;switch(o.tag){case 13:var A=o.stateNode,b=o.memoizedState;b!==null&&(g=b.retryLane);break;case 19:A=o.stateNode;break;default:throw Error(t(314))}A!==null&&A.delete(c),YM(o,g)}var ZM;ZM=function(o,c,g){if(o!==null)if(o.memoizedProps!==c.pendingProps||Ni.current)Sn=!0;else{if((o.lanes&g)===0&&(c.flags&128)===0)return Sn=!1,hP(o,c,g);Sn=(o.flags&131072)!==0}else Sn=!1,ur&&(c.flags&1048576)!==0&&dm(c,th,c.index);switch(c.lanes=0,c.tag){case 2:var A=c.type;kv(o,c),o=c.pendingProps;var b=ml(c,li.current);Io(c,g),b=td(null,c,A,o,b,g);var P=xm();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ai(A)?(P=!0,gl(c)):P=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,vn(c),b.updater=fh,c.stateNode=b,b._reactInternals=c,x(c,A,o,g),c=hn(null,c,A,!0,P,g)):(c.tag=0,ur&&P&&fm(c),It(null,c,b,g),c=c.child),c;case 16:A=c.elementType;e:{switch(kv(o,c),o=c.pendingProps,b=A._init,A=b(A._payload),c.type=A,b=c.tag=TP(A),o=Ns(A,o),b){case 0:c=Et(null,c,A,o,g);break e;case 1:c=Xt(null,c,A,o,g);break e;case 11:c=fi(null,c,A,o,g);break e;case 14:c=ps(null,c,A,Ns(A.type,o),g);break e}throw Error(t(306,A,""))}return c;case 0:return A=c.type,b=c.pendingProps,b=c.elementType===A?b:Ns(A,b),Et(o,c,A,b,g);case 1:return A=c.type,b=c.pendingProps,b=c.elementType===A?b:Ns(A,b),Xt(o,c,A,b,g);case 3:e:{if(dn(c),o===null)throw Error(t(387));A=c.pendingProps,P=c.memoizedState,b=P.element,Br(o,c),Er(c,A,null,g);var j=c.memoizedState;if(A=j.element,P.isDehydrated)if(P={element:A,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},c.updateQueue.baseState=P,c.memoizedState=P,c.flags&256){b=E(Error(t(423)),c),c=zn(o,c,A,g,b);break e}else if(A!==b){b=E(Error(t(424)),c),c=zn(o,c,A,g,b);break e}else for(Oi=Ga(c.stateNode.containerInfo.firstChild),ci=c,ur=!0,Ls=null,g=Yu(c,null,A,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ro(),A===b){c=Rl(o,c,g);break e}It(o,c,A,g)}c=c.child}return c;case 5:return El(c),o===null&&rh(c),A=c.type,b=c.pendingProps,P=o!==null?o.memoizedProps:null,j=b.children,im(A,b)?j=null:P!==null&&im(A,P)&&(c.flags|=32),Ne(o,c),It(o,c,j,g),c.child;case 6:return o===null&&rh(c),null;case 13:return eo(o,c,g);case 4:return $u(c,c.stateNode.containerInfo),A=c.pendingProps,o===null?c.child=xl(c,null,A,g):It(o,c,A,g),c.child;case 11:return A=c.type,b=c.pendingProps,b=c.elementType===A?b:Ns(A,b),fi(o,c,A,b,g);case 7:return It(o,c,c.pendingProps,g),c.child;case 8:return It(o,c,c.pendingProps.children,g),c.child;case 12:return It(o,c,c.pendingProps.children,g),c.child;case 10:e:{if(A=c.type._context,b=c.pendingProps,P=c.memoizedProps,j=b.value,ir(_l,A._currentValue),A._currentValue=j,P!==null)if(os(P.value,j)){if(P.children===b.children&&!Ni.current){c=Rl(o,c,g);break e}}else for(P=c.child,P!==null&&(P.return=c);P!==null;){var ie=P.dependencies;if(ie!==null){j=P.child;for(var me=ie.firstContext;me!==null;){if(me.context===A){if(P.tag===1){me=tr(-1,g&-g),me.tag=2;var Be=P.updateQueue;if(Be!==null){Be=Be.shared;var nt=Be.pending;nt===null?me.next=me:(me.next=nt.next,nt.next=me),Be.pending=me}}P.lanes|=g,me=P.alternate,me!==null&&(me.lanes|=g),Qu(P.return,g,c),ie.lanes|=g;break}me=me.next}}else if(P.tag===10)j=P.type===c.type?null:P.child;else if(P.tag===18){if(j=P.return,j===null)throw Error(t(341));j.lanes|=g,ie=j.alternate,ie!==null&&(ie.lanes|=g),Qu(j,g,c),j=P.sibling}else j=P.child;if(j!==null)j.return=P;else for(j=P;j!==null;){if(j===c){j=null;break}if(P=j.sibling,P!==null){P.return=j.return,j=P;break}j=j.return}P=j}It(o,c,b.children,g),c=c.child}return c;case 9:return b=c.type,A=c.pendingProps.children,Io(c,g),b=us(b),A=A(b),c.flags|=1,It(o,c,A,g),c.child;case 14:return A=c.type,b=Ns(A,c.pendingProps),b=Ns(A.type,b),ps(o,c,A,b,g);case 15:return Re(o,c,c.type,c.pendingProps,g);case 17:return A=c.type,b=c.pendingProps,b=c.elementType===A?b:Ns(A,b),kv(o,c),c.tag=1,Ai(A)?(o=!0,gl(c)):o=!1,Io(c,g),d(c,A,b),x(c,A,b,g),hn(null,c,A,!0,o,g);case 19:return bM(o,c,g);case 22:return Me(o,c,g)}throw Error(t(156,c.tag))};function QM(o,c){return H(o,c)}function bP(o,c,g,A){this.tag=o,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(o,c,g,A){return new bP(o,c,g,A)}function v_(o){return o=o.prototype,!(!o||!o.isReactComponent)}function TP(o){if(typeof o=="function")return v_(o)?1:0;if(o!=null){if(o=o.$$typeof,o===q)return 11;if(o===Se)return 14}return 2}function Fc(o,c){var g=o.alternate;return g===null?(g=wa(o.tag,c,o.key,o.mode),g.elementType=o.elementType,g.type=o.type,g.stateNode=o.stateNode,g.alternate=o,o.alternate=g):(g.pendingProps=c,g.type=o.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=o.flags&14680064,g.childLanes=o.childLanes,g.lanes=o.lanes,g.child=o.child,g.memoizedProps=o.memoizedProps,g.memoizedState=o.memoizedState,g.updateQueue=o.updateQueue,c=o.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=o.sibling,g.index=o.index,g.ref=o.ref,g}function Zv(o,c,g,A,b,P){var j=2;if(A=o,typeof o=="function")v_(o)&&(j=1);else if(typeof o=="string")j=5;else e:switch(o){case V:return dd(g.children,b,P,c);case z:j=8,b|=8;break;case F:return o=wa(12,g,c,b|2),o.elementType=F,o.lanes=P,o;case re:return o=wa(13,g,c,b),o.elementType=re,o.lanes=P,o;case oe:return o=wa(19,g,c,b),o.elementType=oe,o.lanes=P,o;case Ee:return Qv(g,b,P,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:j=10;break e;case W:j=9;break e;case q:j=11;break e;case Se:j=14;break e;case he:j=16,A=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return c=wa(j,g,c,b),c.elementType=o,c.type=A,c.lanes=P,c}function dd(o,c,g,A){return o=wa(7,o,A,c),o.lanes=g,o}function Qv(o,c,g,A){return o=wa(22,o,A,c),o.elementType=Ee,o.lanes=g,o.stateNode={isHidden:!1},o}function y_(o,c,g){return o=wa(6,o,null,c),o.lanes=g,o}function x_(o,c,g){return c=wa(4,o.children!==null?o.children:[],o.key,c),c.lanes=g,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function RP(o,c,g,A,b){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hr(0),this.expirationTimes=hr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hr(0),this.identifierPrefix=A,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function __(o,c,g,A,b,P,j,ie,me){return o=new RP(o,c,g,ie,me),c===1?(c=1,P===!0&&(c|=8)):c=0,P=wa(3,null,null,c),o.current=P,P.stateNode=o,P.memoizedState={element:A,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},vn(P),o}function IP(o,c,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:A==null?null:""+A,children:o,containerInfo:c,implementation:g}}function qM(o){if(!o)return ja;o=o._reactInternals;e:{if(J(o)!==o||o.tag!==1)throw Error(t(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ai(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(o.tag===1){var g=o.type;if(Ai(g))return ju(o,g,c)}return c}function $M(o,c,g,A,b,P,j,ie,me){return o=__(g,A,!0,o,b,P,j,ie,me),o.context=qM(null),g=o.current,A=ms(),b=Lc(g),P=tr(A,b),P.callback=c??null,mr(g,P,b),o.current.lanes=b,Ln(o,b,A),Os(o,A),o}function qv(o,c,g,A){var b=c.current,P=ms(),j=Lc(b);return g=qM(g),c.context===null?c.context=g:c.pendingContext=g,c=tr(P,j),c.payload={element:o},A=A===void 0?null:A,A!==null&&(c.callback=A),o=mr(b,c,j),o!==null&&(ro(o,b,j,P),Si(o,b,j)),j}function $v(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function eE(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var g=o.retryLane;o.retryLane=g!==0&&g<c?g:c}}function A_(o,c){eE(o,c),(o=o.alternate)&&eE(o,c)}function PP(){return null}var tE=typeof reportError=="function"?reportError:function(o){console.error(o)};function S_(o){this._internalRoot=o}ey.prototype.render=S_.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(t(409));qv(o,c,null,null)},ey.prototype.unmount=S_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;ld(function(){qv(null,o,null,null)}),c[cs]=null}};function ey(o){this._internalRoot=o}ey.prototype.unstable_scheduleHydration=function(o){if(o){var c=_f();o={blockedOn:null,target:o,priority:c};for(var g=0;g<Ao.length&&c!==0&&c<Ao[g].priority;g++);Ao.splice(g,0,o),g===0&&wf(o)}};function w_(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function ty(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function nE(){}function BP(o,c,g,A,b){if(b){if(typeof A=="function"){var P=A;A=function(){var Be=$v(j);P.call(Be)}}var j=$M(c,A,o,0,null,!1,!1,"",nE);return o._reactRootContainer=j,o[cs]=j.current,_c(o.nodeType===8?o.parentNode:o),ld(),j}for(;b=o.lastChild;)o.removeChild(b);if(typeof A=="function"){var ie=A;A=function(){var Be=$v(me);ie.call(Be)}}var me=__(o,0,!1,null,null,!1,!1,"",nE);return o._reactRootContainer=me,o[cs]=me.current,_c(o.nodeType===8?o.parentNode:o),ld(function(){qv(c,me,g,A)}),me}function ny(o,c,g,A,b){var P=g._reactRootContainer;if(P){var j=P;if(typeof b=="function"){var ie=b;b=function(){var me=$v(j);ie.call(me)}}qv(c,j,o,b)}else j=BP(g,c,o,b,A);return $v(j)}bu=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var g=Un(c.pendingLanes);g!==0&&(ha(c,g|1),Os(c,$()),(Wn&6)===0&&(mh=$()+500,ya()))}break;case 13:ld(function(){var A=$s(o,1);if(A!==null){var b=ms();ro(A,o,1,b)}}),A_(o,1)}},zp=function(o){if(o.tag===13){var c=$s(o,134217728);if(c!==null){var g=ms();ro(c,o,134217728,g)}A_(o,134217728)}},fv=function(o){if(o.tag===13){var c=Lc(o),g=$s(o,c);if(g!==null){var A=ms();ro(g,o,c,A)}A_(o,c)}},_f=function(){return An},Af=function(o,c){var g=An;try{return An=o,c()}finally{An=g}},Ce=function(o,c,g){switch(c){case"input":if(At(o,g),c=g.name,g.type==="radio"&&c!=null){for(g=o;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var A=g[c];if(A!==o&&A.form===o.form){var b=qf(A);if(!b)throw Error(t(90));Ke(A),At(A,b)}}}break;case"textarea":ye(o,g);break;case"select":c=g.value,c!=null&&N(o,!!g.multiple,c,!1)}},Rn=p_,$n=ld;var DP={usingClientEntryPoint:!1,Events:[Va,Pr,qf,vt,qt,p_]},Dm={findFiberByHostInstance:To,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LP={bundleType:Dm.bundleType,version:Dm.version,rendererPackageName:Dm.rendererPackageName,rendererConfig:Dm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ke(o),o===null?null:o.stateNode},findFiberByHostInstance:Dm.findFiberByHostInstance||PP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ry.isDisabled&&ry.supportsFiber)try{lt=ry.inject(LP),dt=ry}catch{}}return Us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DP,Us.createPortal=function(o,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w_(c))throw Error(t(200));return IP(o,c,null,g)},Us.createRoot=function(o,c){if(!w_(o))throw Error(t(299));var g=!1,A="",b=tE;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(A=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=__(o,1,!1,null,null,g,!1,A,b),o[cs]=c.current,_c(o.nodeType===8?o.parentNode:o),new S_(c)},Us.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=ke(c),o=o===null?null:o.stateNode,o},Us.flushSync=function(o){return ld(o)},Us.hydrate=function(o,c,g){if(!ty(c))throw Error(t(200));return ny(null,o,c,!0,g)},Us.hydrateRoot=function(o,c,g){if(!w_(o))throw Error(t(405));var A=g!=null&&g.hydratedSources||null,b=!1,P="",j=tE;if(g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onRecoverableError!==void 0&&(j=g.onRecoverableError)),c=$M(c,null,o,1,g??null,b,!1,P,j),o[cs]=c.current,_c(o),A)for(o=0;o<A.length;o++)g=A[o],b=g._getVersion,b=b(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,b]:c.mutableSourceEagerHydrationData.push(g,b);return new ey(c)},Us.render=function(o,c,g){if(!ty(c))throw Error(t(200));return ny(null,o,c,!1,g)},Us.unmountComponentAtNode=function(o){if(!ty(o))throw Error(t(40));return o._reactRootContainer?(ld(function(){ny(null,null,o,!1,function(){o._reactRootContainer=null,o[cs]=null})}),!0):!1},Us.unstable_batchedUpdates=p_,Us.unstable_renderSubtreeIntoContainer=function(o,c,g,A){if(!ty(g))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return ny(o,c,g,!1,A)},Us.version="18.3.1-next-f1338f8080-20240426",Us}var dE;function jP(){if(dE)return b_.exports;dE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),b_.exports=VP(),b_.exports}var fE;function WP(){if(fE)return sy;fE=1;var r=jP();return sy.createRoot=r.createRoot,sy.hydrateRoot=r.hydrateRoot,sy}var XP=WP();const JP=XS(XP);var Tp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},KP={setTimeout:(r,e)=>setTimeout(r,e),clearTimeout:r=>clearTimeout(r),setInterval:(r,e)=>setInterval(r,e),clearInterval:r=>clearInterval(r)},tu,WS,Cb,YP=(Cb=class{constructor(){en(this,tu,KP);en(this,WS,!1)}setTimeoutProvider(r){Pt(this,tu,r)}setTimeout(r,e){return ue(this,tu).setTimeout(r,e)}clearTimeout(r){ue(this,tu).clearTimeout(r)}setInterval(r,e){return ue(this,tu).setInterval(r,e)}clearInterval(r){ue(this,tu).clearInterval(r)}},tu=new WeakMap,WS=new WeakMap,Cb),Pd=new YP;function ZP(r){setTimeout(r,0)}var nf=typeof window>"u"||"Deno"in globalThis;function _s(){}function QP(r,e){return typeof r=="function"?r(e):r}function JA(r){return typeof r=="number"&&r>=0&&r!==1/0}function Ob(r,e){return Math.max(r+(e||0)-Date.now(),0)}function fu(r,e){return typeof r=="function"?r(e):r}function ba(r,e){return typeof r=="function"?r(e):r}function hE(r,e){const{type:t="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:l}=r;if(a){if(n){if(e.queryHash!==JS(a,e.options))return!1}else if(!_g(e.queryKey,a))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||i&&i!==e.state.fetchStatus||s&&!s(e))}function pE(r,e){const{exact:t,status:n,predicate:i,mutationKey:s}=r;if(s){if(!e.options.mutationKey)return!1;if(t){if(rf(e.options.mutationKey)!==rf(s))return!1}else if(!_g(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function JS(r,e){return((e==null?void 0:e.queryKeyHashFn)||rf)(r)}function rf(r){return JSON.stringify(r,(e,t)=>KA(t)?Object.keys(t).sort().reduce((n,i)=>(n[i]=t[i],n),{}):t)}function _g(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>_g(r[t],e[t])):!1}var qP=Object.prototype.hasOwnProperty;function Ub(r,e,t=0){if(r===e)return r;if(t>500)return e;const n=mE(r)&&mE(e);if(!n&&!(KA(r)&&KA(e)))return e;const s=(n?r:Object.keys(r)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let h=0;for(let p=0;p<l;p++){const m=n?p:a[p],v=r[m],y=e[m];if(v===y){u[m]=v,(n?p<s:qP.call(r,m))&&h++;continue}if(v===null||y===null||typeof v!="object"||typeof y!="object"){u[m]=y;continue}const _=Ub(v,y,t+1);u[m]=_,_===v&&h++}return s===l&&h===s?r:u}function h0(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function mE(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function KA(r){if(!gE(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!gE(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function gE(r){return Object.prototype.toString.call(r)==="[object Object]"}function $P(r){return new Promise(e=>{Pd.setTimeout(e,r)})}function YA(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Ub(r,e):e}function e2(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function t2(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var KS=Symbol();function kb(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===KS?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function YS(r,e){return typeof r=="function"?r(...e):!!r}function n2(r,e,t){let n=!1,i;return Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(i??(i=e()),n||(n=!0,i.aborted?t():i.addEventListener("abort",t,{once:!0})),i)}),r}var Hd,nu,$h,bb,r2=(bb=class extends Tp{constructor(){super();en(this,Hd);en(this,nu);en(this,$h);Pt(this,$h,e=>{if(!nf&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ue(this,nu)||this.setEventListener(ue(this,$h))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,nu))==null||e.call(this),Pt(this,nu,void 0))}setEventListener(e){var t;Pt(this,$h,e),(t=ue(this,nu))==null||t.call(this),Pt(this,nu,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){ue(this,Hd)!==e&&(Pt(this,Hd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ue(this,Hd)=="boolean"?ue(this,Hd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hd=new WeakMap,nu=new WeakMap,$h=new WeakMap,bb),ZS=new r2;function ZA(){let r,e;const t=new Promise((i,s)=>{r=i,e=s});t.status="pending",t.catch(()=>{});function n(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{n({status:"fulfilled",value:i}),r(i)},t.reject=i=>{n({status:"rejected",reason:i}),e(i)},t}var i2=ZP;function s2(){let r=[],e=0,t=l=>{l()},n=l=>{l()},i=i2;const s=l=>{e?r.push(l):i(()=>{t(l)})},a=()=>{const l=r;r=[],l.length&&i(()=>{n(()=>{l.forEach(u=>{t(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{s(()=>{l(...u)})},schedule:s,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var gi=s2(),ep,ru,tp,Tb,a2=(Tb=class extends Tp{constructor(){super();en(this,ep,!0);en(this,ru);en(this,tp);Pt(this,tp,e=>{if(!nf&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){ue(this,ru)||this.setEventListener(ue(this,tp))}onUnsubscribe(){var e;this.hasListeners()||((e=ue(this,ru))==null||e.call(this),Pt(this,ru,void 0))}setEventListener(e){var t;Pt(this,tp,e),(t=ue(this,ru))==null||t.call(this),Pt(this,ru,e(this.setOnline.bind(this)))}setOnline(e){ue(this,ep)!==e&&(Pt(this,ep,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return ue(this,ep)}},ep=new WeakMap,ru=new WeakMap,tp=new WeakMap,Tb),p0=new a2;function o2(r){return Math.min(1e3*2**r,3e4)}function zb(r){return(r??"online")==="online"?p0.isOnline():!0}var QA=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Hb(r){let e=!1,t=0,n;const i=ZA(),s=()=>i.status!=="pending",a=M=>{var w;if(!s()){const S=new QA(M);v(S),(w=r.onCancel)==null||w.call(r,S)}},l=()=>{e=!0},u=()=>{e=!1},h=()=>ZS.isFocused()&&(r.networkMode==="always"||p0.isOnline())&&r.canRun(),p=()=>zb(r.networkMode)&&r.canRun(),m=M=>{s()||(n==null||n(),i.resolve(M))},v=M=>{s()||(n==null||n(),i.reject(M))},y=()=>new Promise(M=>{var w;n=S=>{(s()||h())&&M(S)},(w=r.onPause)==null||w.call(r)}).then(()=>{var M;n=void 0,s()||(M=r.onContinue)==null||M.call(r)}),_=()=>{if(s())return;let M;const w=t===0?r.initialPromise:void 0;try{M=w??r.fn()}catch(S){M=Promise.reject(S)}Promise.resolve(M).then(m).catch(S=>{var O;if(s())return;const T=r.retry??(nf?0:3),R=r.retryDelay??o2,C=typeof R=="function"?R(t,S):R,k=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,S);if(e||!k){v(S);return}t++,(O=r.onFail)==null||O.call(r,t,S),$P(C).then(()=>h()?void 0:y()).then(()=>{e?v(S):_()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?_():y().then(_),i)}}var Gd,Rb,Gb=(Rb=class{constructor(){en(this,Gd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),JA(this.gcTime)&&Pt(this,Gd,Pd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(nf?1/0:300*1e3))}clearGcTimeout(){ue(this,Gd)&&(Pd.clearTimeout(ue(this,Gd)),Pt(this,Gd,void 0))}},Gd=new WeakMap,Rb),Vd,np,Ca,jd,bi,Og,Wd,co,kl,Ib,l2=(Ib=class extends Gb{constructor(e){super();en(this,co);en(this,Vd);en(this,np);en(this,Ca);en(this,jd);en(this,bi);en(this,Og);en(this,Wd);Pt(this,Wd,!1),Pt(this,Og,e.defaultOptions),this.setOptions(e.options),this.observers=[],Pt(this,jd,e.client),Pt(this,Ca,ue(this,jd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Pt(this,Vd,yE(this.options)),this.state=e.state??ue(this,Vd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ue(this,bi))==null?void 0:e.promise}setOptions(e){if(this.options={...ue(this,Og),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=yE(this.options);t.data!==void 0&&(this.setState(vE(t.data,t.dataUpdatedAt)),Pt(this,Vd,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ue(this,Ca).remove(this)}setData(e,t){const n=YA(this.state.data,e,this.options);return Tn(this,co,kl).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){Tn(this,co,kl).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,i;const t=(n=ue(this,bi))==null?void 0:n.promise;return(i=ue(this,bi))==null||i.cancel(e),t?t.then(_s).catch(_s):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ue(this,Vd))}isActive(){return this.observers.some(e=>ba(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===KS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>fu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ob(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ue(this,bi))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ue(this,bi))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ue(this,Ca).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ue(this,bi)&&(ue(this,Wd)?ue(this,bi).cancel({revert:!0}):ue(this,bi).cancelRetry()),this.scheduleGc()),ue(this,Ca).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Tn(this,co,kl).call(this,{type:"invalidate"})}async fetch(e,t){var u,h,p,m,v,y,_,M,w,S,T,R;if(this.state.fetchStatus!=="idle"&&((u=ue(this,bi))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ue(this,bi))return ue(this,bi).continueRetry(),ue(this,bi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const C=this.observers.find(k=>k.options.queryFn);C&&this.setOptions(C.options)}const n=new AbortController,i=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Pt(this,Wd,!0),n.signal)})},s=()=>{const C=kb(this.options,t),O=(()=>{const V={client:ue(this,jd),queryKey:this.queryKey,meta:this.meta};return i(V),V})();return Pt(this,Wd,!1),this.options.persister?this.options.persister(C,O,this):C(O)},l=(()=>{const C={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:ue(this,jd),state:this.state,fetchFn:s};return i(C),C})();(h=this.options.behavior)==null||h.onFetch(l,this),Pt(this,np,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&Tn(this,co,kl).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta}),Pt(this,bi,Hb({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof QA&&C.revert&&this.setState({...ue(this,np),fetchStatus:"idle"}),n.abort()},onFail:(C,k)=>{Tn(this,co,kl).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{Tn(this,co,kl).call(this,{type:"pause"})},onContinue:()=>{Tn(this,co,kl).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await ue(this,bi).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(y=(v=ue(this,Ca).config).onSuccess)==null||y.call(v,C,this),(M=(_=ue(this,Ca).config).onSettled)==null||M.call(_,C,this.state.error,this),C}catch(C){if(C instanceof QA){if(C.silent)return ue(this,bi).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw Tn(this,co,kl).call(this,{type:"error",error:C}),(S=(w=ue(this,Ca).config).onError)==null||S.call(w,C,this),(R=(T=ue(this,Ca).config).onSettled)==null||R.call(T,this.state.data,C,this),C}finally{this.scheduleGc()}}},Vd=new WeakMap,np=new WeakMap,Ca=new WeakMap,jd=new WeakMap,bi=new WeakMap,Og=new WeakMap,Wd=new WeakMap,co=new WeakSet,kl=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Vb(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...vE(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Pt(this,np,e.manual?i:void 0),i;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),gi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ue(this,Ca).notify({query:this,type:"updated",action:e})})},Ib);function Vb(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zb(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function vE(r,e){return{data:r,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yE(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Hs,Hn,Ug,ys,Xd,rp,Gl,iu,kg,ip,sp,Jd,Kd,su,ap,rr,ng,qA,$A,eS,tS,nS,rS,iS,jb,Pb,c2=(Pb=class extends Tp{constructor(e,t){super();en(this,rr);en(this,Hs);en(this,Hn);en(this,Ug);en(this,ys);en(this,Xd);en(this,rp);en(this,Gl);en(this,iu);en(this,kg);en(this,ip);en(this,sp);en(this,Jd);en(this,Kd);en(this,su);en(this,ap,new Set);this.options=t,Pt(this,Hs,e),Pt(this,iu,null),Pt(this,Gl,ZA()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ue(this,Hn).addObserver(this),xE(ue(this,Hn),this.options)?Tn(this,rr,ng).call(this):this.updateResult(),Tn(this,rr,tS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sS(ue(this,Hn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sS(ue(this,Hn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Tn(this,rr,nS).call(this),Tn(this,rr,rS).call(this),ue(this,Hn).removeObserver(this)}setOptions(e){const t=this.options,n=ue(this,Hn);if(this.options=ue(this,Hs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ba(this.options.enabled,ue(this,Hn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Tn(this,rr,iS).call(this),ue(this,Hn).setOptions(this.options),t._defaulted&&!h0(this.options,t)&&ue(this,Hs).getQueryCache().notify({type:"observerOptionsUpdated",query:ue(this,Hn),observer:this});const i=this.hasListeners();i&&_E(ue(this,Hn),n,this.options,t)&&Tn(this,rr,ng).call(this),this.updateResult(),i&&(ue(this,Hn)!==n||ba(this.options.enabled,ue(this,Hn))!==ba(t.enabled,ue(this,Hn))||fu(this.options.staleTime,ue(this,Hn))!==fu(t.staleTime,ue(this,Hn)))&&Tn(this,rr,qA).call(this);const s=Tn(this,rr,$A).call(this);i&&(ue(this,Hn)!==n||ba(this.options.enabled,ue(this,Hn))!==ba(t.enabled,ue(this,Hn))||s!==ue(this,su))&&Tn(this,rr,eS).call(this,s)}getOptimisticResult(e){const t=ue(this,Hs).getQueryCache().build(ue(this,Hs),e),n=this.createResult(t,e);return d2(this,n)&&(Pt(this,ys,n),Pt(this,rp,this.options),Pt(this,Xd,ue(this,Hn).state)),n}getCurrentResult(){return ue(this,ys)}trackResult(e,t){return new Proxy(e,{get:(n,i)=>(this.trackProp(i),t==null||t(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&ue(this,Gl).status==="pending"&&ue(this,Gl).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(e){ue(this,ap).add(e)}getCurrentQuery(){return ue(this,Hn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ue(this,Hs).defaultQueryOptions(e),n=ue(this,Hs).getQueryCache().build(ue(this,Hs),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return Tn(this,rr,ng).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ue(this,ys)))}createResult(e,t){var F;const n=ue(this,Hn),i=this.options,s=ue(this,ys),a=ue(this,Xd),l=ue(this,rp),h=e!==n?e.state:ue(this,Ug),{state:p}=e;let m={...p},v=!1,y;if(t._optimisticResults){const L=this.hasListeners(),W=!L&&xE(e,t),q=L&&_E(e,n,t,i);(W||q)&&(m={...m,...Vb(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:_,errorUpdatedAt:M,status:w}=m;y=m.data;let S=!1;if(t.placeholderData!==void 0&&y===void 0&&w==="pending"){let L;s!=null&&s.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(L=s.data,S=!0):L=typeof t.placeholderData=="function"?t.placeholderData((F=ue(this,sp))==null?void 0:F.state.data,ue(this,sp)):t.placeholderData,L!==void 0&&(w="success",y=YA(s==null?void 0:s.data,L,t),v=!0)}if(t.select&&y!==void 0&&!S)if(s&&y===(a==null?void 0:a.data)&&t.select===ue(this,kg))y=ue(this,ip);else try{Pt(this,kg,t.select),y=t.select(y),y=YA(s==null?void 0:s.data,y,t),Pt(this,ip,y),Pt(this,iu,null)}catch(L){Pt(this,iu,L)}ue(this,iu)&&(_=ue(this,iu),y=ue(this,ip),M=Date.now(),w="error");const T=m.fetchStatus==="fetching",R=w==="pending",C=w==="error",k=R&&T,O=y!==void 0,z={status:w,fetchStatus:m.fetchStatus,isPending:R,isSuccess:w==="success",isError:C,isInitialLoading:k,isLoading:k,data:y,dataUpdatedAt:m.dataUpdatedAt,error:_,errorUpdatedAt:M,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:T,isRefetching:T&&!R,isLoadingError:C&&!O,isPaused:m.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:C&&O,isStale:QS(e,t),refetch:this.refetch,promise:ue(this,Gl),isEnabled:ba(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const L=z.data!==void 0,W=z.status==="error"&&!L,q=Se=>{W?Se.reject(z.error):L&&Se.resolve(z.data)},re=()=>{const Se=Pt(this,Gl,z.promise=ZA());q(Se)},oe=ue(this,Gl);switch(oe.status){case"pending":e.queryHash===n.queryHash&&q(oe);break;case"fulfilled":(W||z.data!==oe.value)&&re();break;case"rejected":(!W||z.error!==oe.reason)&&re();break}}return z}updateResult(){const e=ue(this,ys),t=this.createResult(ue(this,Hn),this.options);if(Pt(this,Xd,ue(this,Hn).state),Pt(this,rp,this.options),ue(this,Xd).data!==void 0&&Pt(this,sp,ue(this,Hn)),h0(t,e))return;Pt(this,ys,t);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,s=typeof i=="function"?i():i;if(s==="all"||!s&&!ue(this,ap).size)return!0;const a=new Set(s??ue(this,ap));return this.options.throwOnError&&a.add("error"),Object.keys(ue(this,ys)).some(l=>{const u=l;return ue(this,ys)[u]!==e[u]&&a.has(u)})};Tn(this,rr,jb).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Tn(this,rr,tS).call(this)}},Hs=new WeakMap,Hn=new WeakMap,Ug=new WeakMap,ys=new WeakMap,Xd=new WeakMap,rp=new WeakMap,Gl=new WeakMap,iu=new WeakMap,kg=new WeakMap,ip=new WeakMap,sp=new WeakMap,Jd=new WeakMap,Kd=new WeakMap,su=new WeakMap,ap=new WeakMap,rr=new WeakSet,ng=function(e){Tn(this,rr,iS).call(this);let t=ue(this,Hn).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(_s)),t},qA=function(){Tn(this,rr,nS).call(this);const e=fu(this.options.staleTime,ue(this,Hn));if(nf||ue(this,ys).isStale||!JA(e))return;const n=Ob(ue(this,ys).dataUpdatedAt,e)+1;Pt(this,Jd,Pd.setTimeout(()=>{ue(this,ys).isStale||this.updateResult()},n))},$A=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ue(this,Hn)):this.options.refetchInterval)??!1},eS=function(e){Tn(this,rr,rS).call(this),Pt(this,su,e),!(nf||ba(this.options.enabled,ue(this,Hn))===!1||!JA(ue(this,su))||ue(this,su)===0)&&Pt(this,Kd,Pd.setInterval(()=>{(this.options.refetchIntervalInBackground||ZS.isFocused())&&Tn(this,rr,ng).call(this)},ue(this,su)))},tS=function(){Tn(this,rr,qA).call(this),Tn(this,rr,eS).call(this,Tn(this,rr,$A).call(this))},nS=function(){ue(this,Jd)&&(Pd.clearTimeout(ue(this,Jd)),Pt(this,Jd,void 0))},rS=function(){ue(this,Kd)&&(Pd.clearInterval(ue(this,Kd)),Pt(this,Kd,void 0))},iS=function(){const e=ue(this,Hs).getQueryCache().build(ue(this,Hs),this.options);if(e===ue(this,Hn))return;const t=ue(this,Hn);Pt(this,Hn,e),Pt(this,Ug,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},jb=function(e){gi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ue(this,ys))}),ue(this,Hs).getQueryCache().notify({query:ue(this,Hn),type:"observerResultsUpdated"})})},Pb);function u2(r,e){return ba(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function xE(r,e){return u2(r,e)||r.state.data!==void 0&&sS(r,e,e.refetchOnMount)}function sS(r,e,t){if(ba(e.enabled,r)!==!1&&fu(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&QS(r,e)}return!1}function _E(r,e,t,n){return(r!==e||ba(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&QS(r,t)}function QS(r,e){return ba(e.enabled,r)!==!1&&r.isStaleByTime(fu(e.staleTime,r))}function d2(r,e){return!h0(r.getCurrentResult(),e)}function AE(r){return{onFetch:(e,t)=>{var p,m,v,y,_;const n=e.options,i=(v=(m=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:m.fetchMore)==null?void 0:v.direction,s=((y=e.state.data)==null?void 0:y.pages)||[],a=((_=e.state.data)==null?void 0:_.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const h=async()=>{let M=!1;const w=R=>{n2(R,()=>e.signal,()=>M=!0)},S=kb(e.options,e.fetchOptions),T=async(R,C,k)=>{if(M)return Promise.reject();if(C==null&&R.pages.length)return Promise.resolve(R);const V=(()=>{const W={client:e.client,queryKey:e.queryKey,pageParam:C,direction:k?"backward":"forward",meta:e.options.meta};return w(W),W})(),z=await S(V),{maxPages:F}=e.options,L=k?t2:e2;return{pages:L(R.pages,z,F),pageParams:L(R.pageParams,C,F)}};if(i&&s.length){const R=i==="backward",C=R?f2:SE,k={pages:s,pageParams:a},O=C(n,k);l=await T(k,O,R)}else{const R=r??s.length;do{const C=u===0?a[0]??n.initialPageParam:SE(n,l);if(u>0&&C==null)break;l=await T(l,C),u++}while(u<R)}return l};e.options.persister?e.fetchFn=()=>{var M,w;return(w=(M=e.options).persister)==null?void 0:w.call(M,h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function SE(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function f2(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var zg,Fo,es,Yd,Oo,Zc,Bb,h2=(Bb=class extends Gb{constructor(e){super();en(this,Oo);en(this,zg);en(this,Fo);en(this,es);en(this,Yd);Pt(this,zg,e.client),this.mutationId=e.mutationId,Pt(this,es,e.mutationCache),Pt(this,Fo,[]),this.state=e.state||Wb(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ue(this,Fo).includes(e)||(ue(this,Fo).push(e),this.clearGcTimeout(),ue(this,es).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Pt(this,Fo,ue(this,Fo).filter(t=>t!==e)),this.scheduleGc(),ue(this,es).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ue(this,Fo).length||(this.state.status==="pending"?this.scheduleGc():ue(this,es).remove(this))}continue(){var e;return((e=ue(this,Yd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,u,h,p,m,v,y,_,M,w,S,T,R,C,k,O,V;const t=()=>{Tn(this,Oo,Zc).call(this,{type:"continue"})},n={client:ue(this,zg),meta:this.options.meta,mutationKey:this.options.mutationKey};Pt(this,Yd,Hb({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(z,F)=>{Tn(this,Oo,Zc).call(this,{type:"failed",failureCount:z,error:F})},onPause:()=>{Tn(this,Oo,Zc).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ue(this,es).canRun(this)}));const i=this.state.status==="pending",s=!ue(this,Yd).canStart();try{if(i)t();else{Tn(this,Oo,Zc).call(this,{type:"pending",variables:e,isPaused:s}),ue(this,es).config.onMutate&&await ue(this,es).config.onMutate(e,this,n);const F=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e,n));F!==this.state.context&&Tn(this,Oo,Zc).call(this,{type:"pending",context:F,variables:e,isPaused:s})}const z=await ue(this,Yd).start();return await((h=(u=ue(this,es).config).onSuccess)==null?void 0:h.call(u,z,e,this.state.context,this,n)),await((m=(p=this.options).onSuccess)==null?void 0:m.call(p,z,e,this.state.context,n)),await((y=(v=ue(this,es).config).onSettled)==null?void 0:y.call(v,z,null,this.state.variables,this.state.context,this,n)),await((M=(_=this.options).onSettled)==null?void 0:M.call(_,z,null,e,this.state.context,n)),Tn(this,Oo,Zc).call(this,{type:"success",data:z}),z}catch(z){try{await((S=(w=ue(this,es).config).onError)==null?void 0:S.call(w,z,e,this.state.context,this,n))}catch(F){Promise.reject(F)}try{await((R=(T=this.options).onError)==null?void 0:R.call(T,z,e,this.state.context,n))}catch(F){Promise.reject(F)}try{await((k=(C=ue(this,es).config).onSettled)==null?void 0:k.call(C,void 0,z,this.state.variables,this.state.context,this,n))}catch(F){Promise.reject(F)}try{await((V=(O=this.options).onSettled)==null?void 0:V.call(O,void 0,z,e,this.state.context,n))}catch(F){Promise.reject(F)}throw Tn(this,Oo,Zc).call(this,{type:"error",error:z}),z}finally{ue(this,es).runNext(this)}}},zg=new WeakMap,Fo=new WeakMap,es=new WeakMap,Yd=new WeakMap,Oo=new WeakSet,Zc=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),gi.batch(()=>{ue(this,Fo).forEach(n=>{n.onMutationUpdate(e)}),ue(this,es).notify({mutation:this,type:"updated",action:e})})},Bb);function Wb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vl,uo,Hg,Db,p2=(Db=class extends Tp{constructor(e={}){super();en(this,Vl);en(this,uo);en(this,Hg);this.config=e,Pt(this,Vl,new Set),Pt(this,uo,new Map),Pt(this,Hg,0)}build(e,t,n){const i=new h2({client:e,mutationCache:this,mutationId:++iy(this,Hg)._,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){ue(this,Vl).add(e);const t=ay(e);if(typeof t=="string"){const n=ue(this,uo).get(t);n?n.push(e):ue(this,uo).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ue(this,Vl).delete(e)){const t=ay(e);if(typeof t=="string"){const n=ue(this,uo).get(t);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&ue(this,uo).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ay(e);if(typeof t=="string"){const n=ue(this,uo).get(t),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const t=ay(e);if(typeof t=="string"){const i=(n=ue(this,uo).get(t))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){gi.batch(()=>{ue(this,Vl).forEach(e=>{this.notify({type:"removed",mutation:e})}),ue(this,Vl).clear(),ue(this,uo).clear()})}getAll(){return Array.from(ue(this,Vl))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>pE(t,n))}findAll(e={}){return this.getAll().filter(t=>pE(e,t))}notify(e){gi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return gi.batch(()=>Promise.all(e.map(t=>t.continue().catch(_s))))}},Vl=new WeakMap,uo=new WeakMap,Hg=new WeakMap,Db);function ay(r){var e;return(e=r.options.scope)==null?void 0:e.id}var jl,au,Gs,Wl,$l,o0,aS,Lb,m2=(Lb=class extends Tp{constructor(t,n){super();en(this,$l);en(this,jl);en(this,au);en(this,Gs);en(this,Wl);Pt(this,jl,t),this.setOptions(n),this.bindMethods(),Tn(this,$l,o0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const n=this.options;this.options=ue(this,jl).defaultMutationOptions(t),h0(this.options,n)||ue(this,jl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ue(this,Gs),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&rf(n.mutationKey)!==rf(this.options.mutationKey)?this.reset():((i=ue(this,Gs))==null?void 0:i.state.status)==="pending"&&ue(this,Gs).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=ue(this,Gs))==null||t.removeObserver(this)}onMutationUpdate(t){Tn(this,$l,o0).call(this),Tn(this,$l,aS).call(this,t)}getCurrentResult(){return ue(this,au)}reset(){var t;(t=ue(this,Gs))==null||t.removeObserver(this),Pt(this,Gs,void 0),Tn(this,$l,o0).call(this),Tn(this,$l,aS).call(this)}mutate(t,n){var i;return Pt(this,Wl,n),(i=ue(this,Gs))==null||i.removeObserver(this),Pt(this,Gs,ue(this,jl).getMutationCache().build(ue(this,jl),this.options)),ue(this,Gs).addObserver(this),ue(this,Gs).execute(t)}},jl=new WeakMap,au=new WeakMap,Gs=new WeakMap,Wl=new WeakMap,$l=new WeakSet,o0=function(){var n;const t=((n=ue(this,Gs))==null?void 0:n.state)??Wb();Pt(this,au,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},aS=function(t){gi.batch(()=>{var n,i,s,a,l,u,h,p;if(ue(this,Wl)&&this.hasListeners()){const m=ue(this,au).variables,v=ue(this,au).context,y={client:ue(this,jl),meta:this.options.meta,mutationKey:this.options.mutationKey};if((t==null?void 0:t.type)==="success"){try{(i=(n=ue(this,Wl)).onSuccess)==null||i.call(n,t.data,m,v,y)}catch(_){Promise.reject(_)}try{(a=(s=ue(this,Wl)).onSettled)==null||a.call(s,t.data,null,m,v,y)}catch(_){Promise.reject(_)}}else if((t==null?void 0:t.type)==="error"){try{(u=(l=ue(this,Wl)).onError)==null||u.call(l,t.error,m,v,y)}catch(_){Promise.reject(_)}try{(p=(h=ue(this,Wl)).onSettled)==null||p.call(h,void 0,t.error,m,v,y)}catch(_){Promise.reject(_)}}}this.listeners.forEach(m=>{m(ue(this,au))})})},Lb),Uo,Nb,g2=(Nb=class extends Tp{constructor(e={}){super();en(this,Uo);this.config=e,Pt(this,Uo,new Map)}build(e,t,n){const i=t.queryKey,s=t.queryHash??JS(i,t);let a=this.get(s);return a||(a=new l2({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){ue(this,Uo).has(e.queryHash)||(ue(this,Uo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ue(this,Uo).get(e.queryHash);t&&(e.destroy(),t===e&&ue(this,Uo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){gi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ue(this,Uo).get(e)}getAll(){return[...ue(this,Uo).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>hE(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>hE(e,n)):t}notify(e){gi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){gi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){gi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Uo=new WeakMap,Nb),zr,ou,lu,op,lp,cu,cp,up,Fb,v2=(Fb=class{constructor(r={}){en(this,zr);en(this,ou);en(this,lu);en(this,op);en(this,lp);en(this,cu);en(this,cp);en(this,up);Pt(this,zr,r.queryCache||new g2),Pt(this,ou,r.mutationCache||new p2),Pt(this,lu,r.defaultOptions||{}),Pt(this,op,new Map),Pt(this,lp,new Map),Pt(this,cu,0)}mount(){iy(this,cu)._++,ue(this,cu)===1&&(Pt(this,cp,ZS.subscribe(async r=>{r&&(await this.resumePausedMutations(),ue(this,zr).onFocus())})),Pt(this,up,p0.subscribe(async r=>{r&&(await this.resumePausedMutations(),ue(this,zr).onOnline())})))}unmount(){var r,e;iy(this,cu)._--,ue(this,cu)===0&&((r=ue(this,cp))==null||r.call(this),Pt(this,cp,void 0),(e=ue(this,up))==null||e.call(this),Pt(this,up,void 0))}isFetching(r){return ue(this,zr).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return ue(this,ou).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=ue(this,zr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=ue(this,zr).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(fu(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return ue(this,zr).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),i=ue(this,zr).get(n.queryHash),s=i==null?void 0:i.state.data,a=QP(e,s);if(a!==void 0)return ue(this,zr).build(this,n).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return gi.batch(()=>ue(this,zr).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=ue(this,zr).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=ue(this,zr);gi.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=ue(this,zr);return gi.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=gi.batch(()=>ue(this,zr).findAll(r).map(i=>i.cancel(t)));return Promise.all(n).then(_s).catch(_s)}invalidateQueries(r,e={}){return gi.batch(()=>(ue(this,zr).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=gi.batch(()=>ue(this,zr).findAll(r).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(_s)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(_s)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=ue(this,zr).build(this,e);return t.isStaleByTime(fu(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(_s).catch(_s)}fetchInfiniteQuery(r){return r.behavior=AE(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(_s).catch(_s)}ensureInfiniteQueryData(r){return r.behavior=AE(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return p0.isOnline()?ue(this,ou).resumePausedMutations():Promise.resolve()}getQueryCache(){return ue(this,zr)}getMutationCache(){return ue(this,ou)}getDefaultOptions(){return ue(this,lu)}setDefaultOptions(r){Pt(this,lu,r)}setQueryDefaults(r,e){ue(this,op).set(rf(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...ue(this,op).values()],t={};return e.forEach(n=>{_g(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){ue(this,lp).set(rf(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...ue(this,lp).values()],t={};return e.forEach(n=>{_g(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...ue(this,lu).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=JS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===KS&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...ue(this,lu).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){ue(this,zr).clear(),ue(this,ou).clear()}},zr=new WeakMap,ou=new WeakMap,lu=new WeakMap,op=new WeakMap,lp=new WeakMap,cu=new WeakMap,cp=new WeakMap,up=new WeakMap,Fb),Xb=X.createContext(void 0),ic=r=>{const e=X.useContext(Xb);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},y2=({client:r,children:e})=>(X.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),B.jsx(Xb.Provider,{value:r,children:e})),Jb=X.createContext(!1),x2=()=>X.useContext(Jb);Jb.Provider;function _2(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var A2=X.createContext(_2()),S2=()=>X.useContext(A2),w2=(r,e,t)=>{const n=t!=null&&t.state.error&&typeof r.throwOnError=="function"?YS(r.throwOnError,[t.state.error,t]):r.throwOnError;(r.suspense||r.experimental_prefetchInRender||n)&&(e.isReset()||(r.retryOnMount=!1))},M2=r=>{X.useEffect(()=>{r.clearReset()},[r])},E2=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:i})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(i&&r.data===void 0||YS(t,[r.error,n])),C2=r=>{if(r.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),n=r.staleTime;r.staleTime=typeof n=="function"?(...i)=>t(n(...i)):t(n),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},b2=(r,e)=>r.isLoading&&r.isFetching&&!e,T2=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,wE=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function R2(r,e,t){var v,y,_,M;const n=x2(),i=S2(),s=ic(),a=s.defaultQueryOptions(r);(y=(v=s.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||y.call(v,a);const l=s.getQueryCache().get(a.queryHash);a._optimisticResults=n?"isRestoring":"optimistic",C2(a),w2(a,i,l),M2(i);const u=!s.getQueryCache().get(a.queryHash),[h]=X.useState(()=>new e(s,a)),p=h.getOptimisticResult(a),m=!n&&r.subscribed!==!1;if(X.useSyncExternalStore(X.useCallback(w=>{const S=m?h.subscribe(gi.batchCalls(w)):_s;return h.updateResult(),S},[h,m]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),X.useEffect(()=>{h.setOptions(a)},[a,h]),T2(a,p))throw wE(a,h,i);if(E2({result:p,errorResetBoundary:i,throwOnError:a.throwOnError,query:l,suspense:a.suspense}))throw p.error;if((M=(_=s.getDefaultOptions().queries)==null?void 0:_._experimental_afterQuery)==null||M.call(_,a,p),a.experimental_prefetchInRender&&!nf&&b2(p,n)){const w=u?wE(a,h,i):l==null?void 0:l.promise;w==null||w.catch(_s).finally(()=>{h.updateResult()})}return a.notifyOnChangeProps?p:h.trackResult(p)}function Ho(r,e){return R2(r,c2)}function mf(r,e){const t=ic(),[n]=X.useState(()=>new m2(t,r));X.useEffect(()=>{n.setOptions(r)},[n,r]);const i=X.useSyncExternalStore(X.useCallback(a=>n.subscribe(gi.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=X.useCallback((a,l)=>{n.mutate(a,l).catch(_s)},[n]);if(i.error&&YS(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ME="popstate";function I2(r={}){function e(n,i){let{pathname:s,search:a,hash:l}=n.location;return oS("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Ag(i)}return B2(e,t,null,r)}function Rr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Pa(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function P2(){return Math.random().toString(36).substring(2,10)}function EE(r,e){return{usr:r.state,key:r.key,idx:e}}function oS(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Rp(e):e,state:t,key:e&&e.key||n||P2()}}function Ag({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Rp(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function B2(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,l="POP",u=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function m(){l="POP";let w=p(),S=w==null?null:w-h;h=w,u&&u({action:l,location:M.location,delta:S})}function v(w,S){l="PUSH";let T=oS(M.location,w,S);h=p()+1;let R=EE(T,h),C=M.createHref(T);try{a.pushState(R,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(C)}s&&u&&u({action:l,location:M.location,delta:1})}function y(w,S){l="REPLACE";let T=oS(M.location,w,S);h=p();let R=EE(T,h),C=M.createHref(T);a.replaceState(R,"",C),s&&u&&u({action:l,location:M.location,delta:0})}function _(w){return D2(w)}let M={get action(){return l},get location(){return r(i,a)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ME,m),u=w,()=>{i.removeEventListener(ME,m),u=null}},createHref(w){return e(i,w)},createURL:_,encodeLocation(w){let S=_(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:y,go(w){return a.go(w)}};return M}function D2(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Rr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Ag(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Kb(r,e,t="/"){return L2(r,e,t,!1)}function L2(r,e,t,n){let i=typeof e=="string"?Rp(e):e,s=ec(i.pathname||"/",t);if(s==null)return null;let a=Yb(r);N2(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let h=X2(s);l=j2(a[u],h,n)}return l}function Yb(r,e=[],t=[],n="",i=!1){let s=(a,l,u=i,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&u)return;Rr(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=Zl([n,p.relativePath]),v=t.concat(p);a.children&&a.children.length>0&&(Rr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Yb(a.children,e,v,m,u)),!(a.path==null&&!a.index)&&e.push({path:m,score:G2(m,a.index),routesMeta:v})};return r.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,l);else for(let h of Zb(a.path))s(a,l,!0,h)}),e}function Zb(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=Zb(n.join("/")),l=[];return l.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...a),l.map(u=>r.startsWith("/")&&u===""?"/":u)}function N2(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:V2(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var F2=/^:[\w-]+$/,O2=3,U2=2,k2=1,z2=10,H2=-2,CE=r=>r==="*";function G2(r,e){let t=r.split("/"),n=t.length;return t.some(CE)&&(n+=H2),e&&(n+=U2),t.filter(i=>!CE(i)).reduce((i,s)=>i+(F2.test(s)?O2:s===""?k2:z2),n)}function V2(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function j2(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",a=[];for(let l=0;l<n.length;++l){let u=n[l],h=l===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=m0({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),v=u.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=m0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Zl([s,m.pathname]),pathnameBase:Z2(Zl([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Zl([s,m.pathnameBase]))}return a}function m0(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=W2(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:m},v)=>{if(p==="*"){let _=l[v]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=l[v];return m&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:r}}function W2(r,e=!1,t=!0){Pa(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function X2(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pa(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function ec(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var J2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function K2(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Rp(r):r,s;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?s=bE(t.substring(1),"/"):s=bE(t,e)):s=e,{pathname:s,search:Q2(n),hash:q2(i)}}function bE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function I_(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y2(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qS(r){let e=Y2(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function $S(r,e,t,n=!1){let i;typeof r=="string"?i=Rp(r):(i={...r},Rr(!i.pathname||!i.pathname.includes("?"),I_("?","pathname","search",i)),Rr(!i.pathname||!i.pathname.includes("#"),I_("#","pathname","hash",i)),Rr(!i.search||!i.search.includes("#"),I_("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=t;else{let m=e.length-1;if(!n&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let u=K2(i,l),h=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Zl=r=>r.join("/").replace(/\/\/+/g,"/"),Z2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Q2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,q2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,$2=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function eB(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function tB(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Qb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qb(r,e){let t=r;if(typeof t!="string"||!J2.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,i=!1;if(Qb)try{let s=new URL(window.location.href),a=t.startsWith("//")?new URL(s.protocol+t):new URL(t),l=ec(a.pathname,e);a.origin===s.origin&&l!=null?t=l+a.search+a.hash:i=!0}catch{Pa(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $b=["POST","PUT","PATCH","DELETE"];new Set($b);var nB=["GET",...$b];new Set(nB);var Ip=X.createContext(null);Ip.displayName="DataRouter";var fx=X.createContext(null);fx.displayName="DataRouterState";var rB=X.createContext(!1),eT=X.createContext({isTransitioning:!1});eT.displayName="ViewTransition";var iB=X.createContext(new Map);iB.displayName="Fetchers";var sB=X.createContext(null);sB.displayName="Await";var da=X.createContext(null);da.displayName="Navigation";var Gg=X.createContext(null);Gg.displayName="Location";var Ba=X.createContext({outlet:null,matches:[],isDataRoute:!1});Ba.displayName="Route";var ew=X.createContext(null);ew.displayName="RouteError";var tT="REACT_ROUTER_ERROR",aB="REDIRECT",oB="ROUTE_ERROR_RESPONSE";function lB(r){if(r.startsWith(`${tT}:${aB}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function cB(r){if(r.startsWith(`${tT}:${oB}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new $2(e.status,e.statusText,e.data)}catch{}}function uB(r,{relative:e}={}){Rr(Pp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=X.useContext(da),{hash:i,pathname:s,search:a}=jg(r,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:Zl([t,s])),n.createHref({pathname:l,search:a,hash:i})}function Pp(){return X.useContext(Gg)!=null}function sc(){return Rr(Pp(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(Gg).location}var nT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rT(r){X.useContext(da).static||X.useLayoutEffect(r)}function Vg(){let{isDataRoute:r}=X.useContext(Ba);return r?CB():dB()}function dB(){Rr(Pp(),"useNavigate() may be used only in the context of a <Router> component.");let r=X.useContext(Ip),{basename:e,navigator:t}=X.useContext(da),{matches:n}=X.useContext(Ba),{pathname:i}=sc(),s=JSON.stringify(qS(n)),a=X.useRef(!1);return rT(()=>{a.current=!0}),X.useCallback((u,h={})=>{if(Pa(a.current,nT),!a.current)return;if(typeof u=="number"){t.go(u);return}let p=$S(u,JSON.parse(s),i,h.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Zl([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,s,i,r])}var fB=X.createContext(null);function hB(r){let e=X.useContext(Ba).outlet;return X.useMemo(()=>e&&X.createElement(fB.Provider,{value:r},e),[e,r])}function pB(){let{matches:r}=X.useContext(Ba),e=r[r.length-1];return e?e.params:{}}function jg(r,{relative:e}={}){let{matches:t}=X.useContext(Ba),{pathname:n}=sc(),i=JSON.stringify(qS(t));return X.useMemo(()=>$S(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function mB(r,e){return iT(r,e)}function iT(r,e,t,n,i){var T;Rr(Pp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=X.useContext(da),{matches:a}=X.useContext(Ba),l=a[a.length-1],u=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",m=l&&l.route;{let R=m&&m.path||"";aT(h,!m||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=sc(),y;if(e){let R=typeof e=="string"?Rp(e):e;Rr(p==="/"||((T=R.pathname)==null?void 0:T.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=v;let _=y.pathname||"/",M=_;if(p!=="/"){let R=p.replace(/^\//,"").split("/");M="/"+_.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=Kb(r,{pathname:M});Pa(m||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Pa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=_B(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Zl([p,s.encodeLocation?s.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Zl([p,s.encodeLocation?s.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),a,t,n,i);return e&&S?X.createElement(Gg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function gB(){let r=EB(),e=eB(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:s},"ErrorBoundary")," or"," ",X.createElement("code",{style:s},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:i},t):null,a)}var vB=X.createElement(gB,null),sT=class extends X.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=cB(r.digest);t&&(r=t)}let e=r!==void 0?X.createElement(Ba.Provider,{value:this.props.routeContext},X.createElement(ew.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?X.createElement(yB,{error:r},e):e}};sT.contextType=rB;var P_=new WeakMap;function yB({children:r,error:e}){let{basename:t}=X.useContext(da);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=lB(e.digest);if(n){let i=P_.get(e);if(i)throw i;let s=qb(n.location,t);if(Qb&&!P_.get(e))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw P_.set(e,a),a}return X.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return r}function xB({routeContext:r,match:e,children:t}){let n=X.useContext(Ip);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(Ba.Provider,{value:r},t)}function _B(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,a=t==null?void 0:t.errors;if(a!=null){let p=s.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);Rr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let l=!1,u=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=p),m.route.id){let{loaderData:v,errors:y}=t,_=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||_){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let h=t&&n?(p,m)=>{var v,y;n(p,{location:t.location,params:((y=(v=t.matches)==null?void 0:v[0])==null?void 0:y.params)??{},unstable_pattern:tB(t.matches),errorInfo:m})}:void 0;return s.reduceRight((p,m,v)=>{let y,_=!1,M=null,w=null;t&&(y=a&&m.route.id?a[m.route.id]:void 0,M=m.route.errorElement||vB,l&&(u<0&&v===0?(aT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,w=null):u===v&&(_=!0,w=m.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,v+1)),T=()=>{let R;return y?R=M:_?R=w:m.route.Component?R=X.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,X.createElement(xB,{match:m,routeContext:{outlet:p,matches:S,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?X.createElement(sT,{location:t.location,revalidation:t.revalidation,component:M,error:y,children:T(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:h}):T()},null)}function tw(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AB(r){let e=X.useContext(Ip);return Rr(e,tw(r)),e}function SB(r){let e=X.useContext(fx);return Rr(e,tw(r)),e}function wB(r){let e=X.useContext(Ba);return Rr(e,tw(r)),e}function nw(r){let e=wB(r),t=e.matches[e.matches.length-1];return Rr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function MB(){return nw("useRouteId")}function EB(){var n;let r=X.useContext(ew),e=SB("useRouteError"),t=nw("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function CB(){let{router:r}=AB("useNavigate"),e=nw("useNavigate"),t=X.useRef(!1);return rT(()=>{t.current=!0}),X.useCallback(async(i,s={})=>{Pa(t.current,nT),t.current&&(typeof i=="number"?await r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var TE={};function aT(r,e,t){!e&&!TE[r]&&(TE[r]=!0,Pa(!1,t))}X.memo(bB);function bB({routes:r,future:e,state:t,onError:n}){return iT(r,void 0,t,n,e)}function TB({to:r,replace:e,state:t,relative:n}){Rr(Pp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=X.useContext(da);Pa(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=X.useContext(Ba),{pathname:a}=sc(),l=Vg(),u=$S(r,qS(s),a,n==="path"),h=JSON.stringify(u);return X.useEffect(()=>{l(JSON.parse(h),{replace:e,state:t,relative:n})},[l,h,n,e,t]),null}function RB(r){return hB(r.context)}function Lo(r){Rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IB({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){Rr(!Pp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),u=X.useMemo(()=>({basename:l,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[l,i,s,a]);typeof t=="string"&&(t=Rp(t));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:y="default"}=t,_=X.useMemo(()=>{let M=ec(h,l);return M==null?null:{location:{pathname:M,search:p,hash:m,state:v,key:y},navigationType:n}},[l,h,p,m,v,y,n]);return Pa(_!=null,`<Router basename="${l}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:X.createElement(da.Provider,{value:u},X.createElement(Gg.Provider,{children:e,value:_}))}function PB({children:r,location:e}){return mB(lS(r),e)}function lS(r,e=[]){let t=[];return X.Children.forEach(r,(n,i)=>{if(!X.isValidElement(n))return;let s=[...e,i];if(n.type===X.Fragment){t.push.apply(t,lS(n.props.children,s));return}Rr(n.type===Lo,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=lS(n.props.children,s)),t.push(a)}),t}var l0="get",c0="application/x-www-form-urlencoded";function hx(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function BB(r){return hx(r)&&r.tagName.toLowerCase()==="button"}function DB(r){return hx(r)&&r.tagName.toLowerCase()==="form"}function LB(r){return hx(r)&&r.tagName.toLowerCase()==="input"}function NB(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function FB(r,e){return r.button===0&&(!e||e==="_self")&&!NB(r)}function cS(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let n=r[t];return e.concat(Array.isArray(n)?n.map(i=>[t,i]):[[t,n]])},[]))}function OB(r,e){let t=cS(r);return e&&e.forEach((n,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}var oy=null;function UB(){if(oy===null)try{new FormData(document.createElement("form"),0),oy=!1}catch{oy=!0}return oy}var kB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function B_(r){return r!=null&&!kB.has(r)?(Pa(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${c0}"`),null):r}function zB(r,e){let t,n,i,s,a;if(DB(r)){let l=r.getAttribute("action");n=l?ec(l,e):null,t=r.getAttribute("method")||l0,i=B_(r.getAttribute("enctype"))||c0,s=new FormData(r)}else if(BB(r)||LB(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||l.getAttribute("action");if(n=u?ec(u,e):null,t=r.getAttribute("formmethod")||l.getAttribute("method")||l0,i=B_(r.getAttribute("formenctype"))||B_(l.getAttribute("enctype"))||c0,s=new FormData(l,r),!UB()){let{name:h,type:p,value:m}=r;if(p==="image"){let v=h?`${h}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else h&&s.append(h,m)}}else{if(hx(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=l0,n=null,i=c0,a=r}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rw(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function HB(r,e,t,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&ec(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function GB(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VB(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function jB(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await GB(s,t);return a.links?a.links():[]}return[]}));return KB(n.flat(1).filter(VB).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function RE(r,e,t,n,i,s){let a=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,l=(u,h)=>{var p;return t[h].pathname!==u.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,h)=>a(u,h)||l(u,h)):s==="data"?e.filter((u,h)=>{var m;let p=n.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(a(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function WB(r,e,{includeHydrateFallback:t}={}){return XB(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function XB(r){return[...new Set(r)]}function JB(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function KB(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(JB(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}function oT(){let r=X.useContext(Ip);return rw(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function YB(){let r=X.useContext(fx);return rw(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var iw=X.createContext(void 0);iw.displayName="FrameworkContext";function lT(){let r=X.useContext(iw);return rw(r,"You must render this element inside a <HydratedRouter> element"),r}function ZB(r,e){let t=X.useContext(iw),[n,i]=X.useState(!1),[s,a]=X.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,v=X.useRef(null);X.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let M=S=>{S.forEach(T=>{a(T.isIntersecting)})},w=new IntersectionObserver(M,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[r]),X.useEffect(()=>{if(n){let M=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(M)}}},[n]);let y=()=>{i(!0)},_=()=>{i(!1),a(!1)};return t?r!=="intent"?[s,v,{}]:[s,v,{onFocus:Nm(l,y),onBlur:Nm(u,_),onMouseEnter:Nm(h,y),onMouseLeave:Nm(p,_),onTouchStart:Nm(m,y)}]:[!1,v,{}]}function Nm(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function QB({page:r,...e}){let{router:t}=oT(),n=X.useMemo(()=>Kb(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?X.createElement($B,{page:r,matches:n,...e}):null}function qB(r){let{manifest:e,routeModules:t}=lT(),[n,i]=X.useState([]);return X.useEffect(()=>{let s=!1;return jB(r,e,t).then(a=>{s||i(a)}),()=>{s=!0}},[r,e,t]),n}function $B({page:r,matches:e,...t}){let n=sc(),{future:i,manifest:s,routeModules:a}=lT(),{basename:l}=oT(),{loaderData:u,matches:h}=YB(),p=X.useMemo(()=>RE(r,e,h,s,n,"data"),[r,e,h,s,n]),m=X.useMemo(()=>RE(r,e,h,s,n,"assets"),[r,e,h,s,n]),v=X.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let M=new Set,w=!1;if(e.forEach(T=>{var C;let R=s.routes[T.route.id];!R||!R.hasLoader||(!p.some(k=>k.route.id===T.route.id)&&T.route.id in u&&((C=a[T.route.id])!=null&&C.shouldRevalidate)||R.hasClientLoader?w=!0:M.add(T.route.id))}),M.size===0)return[];let S=HB(r,l,i.unstable_trailingSlashAwareDataRequests,"data");return w&&M.size>0&&S.searchParams.set("_routes",e.filter(T=>M.has(T.route.id)).map(T=>T.route.id).join(",")),[S.pathname+S.search]},[l,i.unstable_trailingSlashAwareDataRequests,u,n,s,p,e,r,a]),y=X.useMemo(()=>WB(m,s),[m,s]),_=qB(m);return X.createElement(X.Fragment,null,v.map(M=>X.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),y.map(M=>X.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),_.map(({key:M,link:w})=>X.createElement("link",{key:M,nonce:t.nonce,...w,crossOrigin:w.crossOrigin??t.crossOrigin})))}function eD(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tD&&(window.__reactRouterVersion="7.13.0")}catch{}function nD({basename:r,children:e,unstable_useTransitions:t,window:n}){let i=X.useRef();i.current==null&&(i.current=I2({window:n,v5Compat:!0}));let s=i.current,[a,l]=X.useState({action:s.action,location:s.location}),u=X.useCallback(h=>{t===!1?l(h):X.startTransition(()=>l(h))},[t]);return X.useLayoutEffect(()=>s.listen(u),[s,u]),X.createElement(IB,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:t})}var cT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hr=X.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:l,target:u,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...y},_){let{basename:M,unstable_useTransitions:w}=X.useContext(da),S=typeof h=="string"&&cT.test(h),T=qb(h,M);h=T.to;let R=uB(h,{relative:i}),[C,k,O]=ZB(n,y),V=sD(h,{replace:a,state:l,target:u,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w});function z(L){e&&e(L),L.defaultPrevented||V(L)}let F=X.createElement("a",{...y,...O,href:T.absoluteURL||R,onClick:T.isExternal||s?e:z,ref:eD(_,k),target:u,"data-discover":!S&&t==="render"?"true":void 0});return C&&!S?X.createElement(X.Fragment,null,F,X.createElement(QB,{page:R})):F});Hr.displayName="Link";var uT=X.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:l,children:u,...h},p){let m=jg(a,{relative:h.relative}),v=sc(),y=X.useContext(fx),{navigator:_,basename:M}=X.useContext(da),w=y!=null&&dD(m)&&l===!0,S=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,T=v.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(T=T.toLowerCase(),R=R?R.toLowerCase():null,S=S.toLowerCase()),R&&M&&(R=ec(R,M)||R);const C=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let k=T===S||!i&&T.startsWith(S)&&T.charAt(C)==="/",O=R!=null&&(R===S||!i&&R.startsWith(S)&&R.charAt(S.length)==="/"),V={isActive:k,isPending:O,isTransitioning:w},z=k?e:void 0,F;typeof n=="function"?F=n(V):F=[n,k?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(V):s;return X.createElement(Hr,{...h,"aria-current":z,className:F,ref:p,style:L,to:a,viewTransition:l},typeof u=="function"?u(V):u)});uT.displayName="NavLink";var rD=X.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:a=l0,action:l,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...y},_)=>{let{unstable_useTransitions:M}=X.useContext(da),w=cD(),S=uD(l,{relative:h}),T=a.toLowerCase()==="get"?"get":"post",R=typeof l=="string"&&cT.test(l),C=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let O=k.nativeEvent.submitter,V=(O==null?void 0:O.getAttribute("formmethod"))||a,z=()=>w(O||k.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v});M&&t!==!1?X.startTransition(()=>z()):z()};return X.createElement("form",{ref:_,method:T,action:S,onSubmit:n?u:C,...y,"data-discover":!R&&r==="render"?"true":void 0})});rD.displayName="Form";function iD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dT(r){let e=X.useContext(Ip);return Rr(e,iD(r)),e}function sD(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:u}={}){let h=Vg(),p=sc(),m=jg(r,{relative:s});return X.useCallback(v=>{if(FB(v,e)){v.preventDefault();let y=t!==void 0?t:Ag(p)===Ag(m),_=()=>h(r,{replace:y,state:n,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l});u?X.startTransition(()=>_()):_()}},[p,h,m,t,n,e,r,i,s,a,l,u])}function aD(r){Pa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=X.useRef(cS(r)),t=X.useRef(!1),n=sc(),i=X.useMemo(()=>OB(n.search,t.current?null:e.current),[n.search]),s=Vg(),a=X.useCallback((l,u)=>{const h=cS(typeof l=="function"?l(new URLSearchParams(i)):l);t.current=!0,s("?"+h,u)},[s,i]);return[i,a]}var oD=0,lD=()=>`__${String(++oD)}__`;function cD(){let{router:r}=dT("useSubmit"),{basename:e}=X.useContext(da),t=MB(),n=r.fetch,i=r.navigate;return X.useCallback(async(s,a={})=>{let{action:l,method:u,encType:h,formData:p,body:m}=zB(s,e);if(a.navigate===!1){let v=a.fetcherKey||lD();await n(v,t,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await i(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:p,body:m,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,i,e,t])}function uD(r,{relative:e}={}){let{basename:t}=X.useContext(da),n=X.useContext(Ba);Rr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...jg(r||".",{relative:e})},a=sc();if(r==null){s.search=a.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(p=>p==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let p=l.toString();s.search=p?`?${p}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Zl([t,s.pathname])),Ag(s)}function dD(r,{relative:e}={}){let t=X.useContext(eT);Rr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dT("useViewTransitionState"),i=jg(r,{relative:e});if(!t.isTransitioning)return!1;let s=ec(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=ec(t.nextLocation.pathname,n)||t.nextLocation.pathname;return m0(i.pathname,a)!=null||m0(i.pathname,s)!=null}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fT=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=X.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...l},u)=>X.createElement("svg",{ref:u,...hD,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:fT("lucide",i),...l},[...a.map(([h,p])=>X.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=(r,e)=>{const t=X.forwardRef(({className:n,...i},s)=>X.createElement(pD,{ref:s,iconNode:e,className:fT(`lucide-${fD(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=Ir("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=Ir("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Ir("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=Ir("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=Ir("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=Ir("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=Ir("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=Ir("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=Ir("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=Ir("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=Ir("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Ir("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Ir("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=Ir("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=Ir("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Ir("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=Ir("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=Ir("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=Ir("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=Ir("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=Ir("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Ir("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Ir("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=Ir("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),LE=r=>{let e;const t=new Set,n=(h,p)=>{const m=typeof h=="function"?h(e):h;if(!Object.is(m,e)){const v=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=e=r(n,i,l);return l},ED=(r=>r?LE(r):LE),CD=r=>r;function bD(r,e=CD){const t=mi.useSyncExternalStore(r.subscribe,mi.useCallback(()=>e(r.getState()),[r,e]),mi.useCallback(()=>e(r.getInitialState()),[r,e]));return mi.useDebugValue(t),t}const NE=r=>{const e=ED(r),t=n=>bD(e,n);return Object.assign(t,e),t},Wg=(r=>r?NE(r):NE);function TD(r,e){let t;try{t=r()}catch{return}return{getItem:i=>{var s;const a=u=>u===null?null:JSON.parse(u,void 0),l=(s=t.getItem(i))!=null?s:null;return l instanceof Promise?l.then(a):a(l)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const fS=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return fS(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return fS(n)(t)}}}},RD=(r,e)=>(t,n,i)=>{let s={storage:TD(()=>window.localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},a=!1,l=0;const u=new Set,h=new Set;let p=s.storage;if(!p)return r((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...w)},n,i);const m=()=>{const w=s.partialize({...n()});return p.setItem(s.name,{state:w,version:s.version})},v=i.setState;i.setState=(w,S)=>(v(w,S),m());const y=r((...w)=>(t(...w),m()),n,i);i.getInitialState=()=>y;let _;const M=()=>{var w,S;if(!p)return;const T=++l;a=!1,u.forEach(C=>{var k;return C((k=n())!=null?k:y)});const R=((S=s.onRehydrateStorage)==null?void 0:S.call(s,(w=n())!=null?w:y))||void 0;return fS(p.getItem.bind(p))(s.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==s.version){if(s.migrate){const k=s.migrate(C.state,C.version);return k instanceof Promise?k.then(O=>[!0,O]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var k;if(T!==l)return;const[O,V]=C;if(_=s.merge(V,(k=n())!=null?k:y),t(_,!0),O)return m()}).then(()=>{T===l&&(R==null||R(_,void 0),_=n(),a=!0,h.forEach(C=>C(_)))}).catch(C=>{T===l&&(R==null||R(void 0,C))})};return i.persist={setOptions:w=>{s={...s,...w},w.storage&&(p=w.storage)},clearStorage:()=>{p==null||p.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>M(),hasHydrated:()=>a,onHydrate:w=>(u.add(w),()=>{u.delete(w)}),onFinishHydration:w=>(h.add(w),()=>{h.delete(w)})},s.skipHydration||M(),_||y},mT=RD;Wg()(mT(r=>({assets:[],selectedAsset:null,filters:{},setAssets:e=>r({assets:e}),setSelectedAsset:e=>r({selectedAsset:e}),setFilters:e=>r(t=>({filters:{...t.filters,...e}})),clearFilters:()=>r({filters:{}})}),{name:"assets-storage",partialize:r=>({filters:r.filters})}));const ly=Wg()(r=>({presets:[],selectedPreset:null,selectedTag:null,allTags:[],setPresets:e=>{const t=Array.from(new Set(e.flatMap(n=>n.tags))).sort();r({presets:e,allTags:t})},setSelectedPreset:e=>r({selectedPreset:e}),setSelectedTag:e=>r({selectedTag:e})}));Wg()(r=>({presets:[],selectedPreset:null,setPresets:e=>r({presets:e}),setSelectedPreset:e=>r({selectedPreset:e})}));const hS=Wg()(mT(r=>({sidebarOpen:!0,theme:"light",toggleSidebar:()=>r(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:e=>r({sidebarOpen:e}),setTheme:e=>r({theme:e})}),{name:"ui-storage"}));function gT(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=gT(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function ID(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=gT(r))&&(n&&(n+=" "),n+=e);return n}const ow="-",PD=r=>{const e=DD(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const l=a.split(ow);return l[0]===""&&l.length!==1&&l.shift(),vT(l,e)||BD(a)},getConflictingClassGroupIds:(a,l)=>{const u=t[a]||[];return l&&n[a]?[...u,...n[a]]:u}}},vT=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),i=n?vT(r.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const s=r.join(ow);return(a=e.validators.find(({validator:l})=>l(s)))==null?void 0:a.classGroupId},FE=/^\[(.+)\]$/,BD=r=>{if(FE.test(r)){const e=FE.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},DD=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return ND(Object.entries(r.classGroups),t).forEach(([s,a])=>{pS(a,n,s,e)}),n},pS=(r,e,t,n)=>{r.forEach(i=>{if(typeof i=="string"){const s=i===""?e:OE(e,i);s.classGroupId=t;return}if(typeof i=="function"){if(LD(i)){pS(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([s,a])=>{pS(a,OE(e,s),t,n)})})},OE=(r,e)=>{let t=r;return e.split(ow).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},LD=r=>r.isThemeGetter,ND=(r,e)=>e?r.map(([t,n])=>{const i=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,l])=>[e+a,l])):s);return[t,i]}):r,FD=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(s,a)=>{t.set(s,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(s){let a=t.get(s);if(a!==void 0)return a;if((a=n.get(s))!==void 0)return i(s,a),a},set(s,a){t.has(s)?t.set(s,a):i(s,a)}}},yT="!",OD=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,i=e[0],s=e.length,a=l=>{const u=[];let h=0,p=0,m;for(let w=0;w<l.length;w++){let S=l[w];if(h===0){if(S===i&&(n||l.slice(w,w+s)===e)){u.push(l.slice(p,w)),p=w+s;continue}if(S==="/"){m=w;continue}}S==="["?h++:S==="]"&&h--}const v=u.length===0?l:l.substring(p),y=v.startsWith(yT),_=y?v.substring(1):v,M=m&&m>p?m-p:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:M}};return t?l=>t({className:l,parseClassName:a}):a},UD=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},kD=r=>({cache:FD(r.cacheSize),parseClassName:OD(r),...PD(r)}),zD=/\s+/,HD=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i}=e,s=[],a=r.trim().split(zD);let l="";for(let u=a.length-1;u>=0;u-=1){const h=a[u],{modifiers:p,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}=t(h);let _=!!y,M=n(_?v.substring(0,y):v);if(!M){if(!_){l=h+(l.length>0?" "+l:l);continue}if(M=n(v),!M){l=h+(l.length>0?" "+l:l);continue}_=!1}const w=UD(p).join(":"),S=m?w+yT:w,T=S+M;if(s.includes(T))continue;s.push(T);const R=i(M,_);for(let C=0;C<R.length;++C){const k=R[C];s.push(S+k)}l=h+(l.length>0?" "+l:l)}return l};function GD(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=xT(e))&&(n&&(n+=" "),n+=t);return n}const xT=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=xT(r[n]))&&(t&&(t+=" "),t+=e);return t};function VD(r,...e){let t,n,i,s=a;function a(u){const h=e.reduce((p,m)=>m(p),r());return t=kD(h),n=t.cache.get,i=t.cache.set,s=l,l(u)}function l(u){const h=n(u);if(h)return h;const p=HD(u,t);return i(u,p),p}return function(){return s(GD.apply(null,arguments))}}const _r=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},_T=/^\[(?:([a-z-]+):)?(.+)\]$/i,jD=/^\d+\/\d+$/,WD=new Set(["px","full","screen"]),XD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,KD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,YD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ZD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pl=r=>Kh(r)||WD.has(r)||jD.test(r),Uc=r=>Bp(r,"length",iL),Kh=r=>!!r&&!Number.isNaN(Number(r)),D_=r=>Bp(r,"number",Kh),Fm=r=>!!r&&Number.isInteger(Number(r)),QD=r=>r.endsWith("%")&&Kh(r.slice(0,-1)),En=r=>_T.test(r),kc=r=>XD.test(r),qD=new Set(["length","size","percentage"]),$D=r=>Bp(r,qD,AT),eL=r=>Bp(r,"position",AT),tL=new Set(["image","url"]),nL=r=>Bp(r,tL,aL),rL=r=>Bp(r,"",sL),Om=()=>!0,Bp=(r,e,t)=>{const n=_T.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},iL=r=>JD.test(r)&&!KD.test(r),AT=()=>!1,sL=r=>YD.test(r),aL=r=>ZD.test(r),oL=()=>{const r=_r("colors"),e=_r("spacing"),t=_r("blur"),n=_r("brightness"),i=_r("borderColor"),s=_r("borderRadius"),a=_r("borderSpacing"),l=_r("borderWidth"),u=_r("contrast"),h=_r("grayscale"),p=_r("hueRotate"),m=_r("invert"),v=_r("gap"),y=_r("gradientColorStops"),_=_r("gradientColorStopPositions"),M=_r("inset"),w=_r("margin"),S=_r("opacity"),T=_r("padding"),R=_r("saturate"),C=_r("scale"),k=_r("sepia"),O=_r("skew"),V=_r("space"),z=_r("translate"),F=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],W=()=>["auto",En,e],q=()=>[En,e],re=()=>["",Pl,Uc],oe=()=>["auto",Kh,En],Se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],he=()=>["solid","dashed","dotted","double","none"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Y=()=>["start","end","center","between","around","evenly","stretch"],ge=()=>["","0",En],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[Kh,En];return{cacheSize:500,separator:":",theme:{colors:[Om],spacing:[Pl,Uc],blur:["none","",kc,En],brightness:K(),borderColor:[r],borderRadius:["none","","full",kc,En],borderSpacing:q(),borderWidth:re(),contrast:K(),grayscale:ge(),hueRotate:K(),invert:ge(),gap:q(),gradientColorStops:[r],gradientColorStopPositions:[QD,Uc],inset:W(),margin:W(),opacity:K(),padding:q(),saturate:K(),scale:K(),sepia:ge(),skew:K(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",En]}],container:["container"],columns:[{columns:[kc]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Se(),En]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[M]}],"inset-x":[{"inset-x":[M]}],"inset-y":[{"inset-y":[M]}],start:[{start:[M]}],end:[{end:[M]}],top:[{top:[M]}],right:[{right:[M]}],bottom:[{bottom:[M]}],left:[{left:[M]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fm,En]}],basis:[{basis:W()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",En]}],grow:[{grow:ge()}],shrink:[{shrink:ge()}],order:[{order:["first","last","none",Fm,En]}],"grid-cols":[{"grid-cols":[Om]}],"col-start-end":[{col:["auto",{span:["full",Fm,En]},En]}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":[Om]}],"row-start-end":[{row:["auto",{span:[Fm,En]},En]}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",En]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",En]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...Y()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Y(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Y(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[V]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[V]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",En,e]}],"min-w":[{"min-w":[En,e,"min","max","fit"]}],"max-w":[{"max-w":[En,e,"none","full","min","max","fit","prose",{screen:[kc]},kc]}],h:[{h:[En,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[En,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[En,e,"auto","min","max","fit"]}],"font-size":[{text:["base",kc,Uc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",D_]}],"font-family":[{font:[Om]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",En]}],"line-clamp":[{"line-clamp":["none",Kh,D_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pl,En]}],"list-image":[{"list-image":["none",En]}],"list-style-type":[{list:["none","disc","decimal",En]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pl,Uc]}],"underline-offset":[{"underline-offset":["auto",Pl,En]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Se(),eL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$D]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nL]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...he(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:he()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...he()]}],"outline-offset":[{"outline-offset":[Pl,En]}],"outline-w":[{outline:[Pl,Uc]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Pl,Uc]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",kc,rL]}],"shadow-color":[{shadow:[Om]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ee()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",kc,En]}],grayscale:[{grayscale:[h]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[m]}],saturate:[{saturate:[R]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[h]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",En]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",En]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",En]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Fm,En]}],"translate-x":[{"translate-x":[z]}],"translate-y":[{"translate-y":[z]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",En]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Pl,Uc,D_]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lL=VD(oL);function la(...r){return lL(ID(r))}function fp(r){const e=new Date(r);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function cL(r){const e=new Date(r),n=new Date().getTime()-e.getTime(),i=Math.floor(n/6e4),s=Math.floor(n/36e5),a=Math.floor(n/864e5);return i<1?"just now":i<60?`${i}m ago`:s<24?`${s}h ago`:a<7?`${a}d ago`:fp(r)}const uL=[{to:"/",icon:xD,label:"Dashboard"},{to:"/assets",icon:ag,label:"Assets"},{to:"/lighting",icon:dS,label:"Lighting Presets"},{to:"/renders",icon:g0,label:"Render Presets"},{to:"/uploads",icon:pT,label:"Uploads"}];function dL({className:r}){const e=hS(n=>n.sidebarOpen),t=hS(n=>n.setSidebarOpen);return B.jsxs(B.Fragment,{children:[e&&B.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),B.jsxs("aside",{className:la("fixed lg:sticky top-0 left-0 z-50 h-screen w-64 bg-white border-r border-gray-200 flex flex-col transition-transform duration-300 ease-in-out",!e&&"-translate-x-full lg:translate-x-0",r),children:[B.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[B.jsxs("h1",{className:"text-xl font-bold text-gray-900",children:["SimpleXR ",B.jsx("span",{className:"text-primary",children:"DAM"})]}),B.jsx("button",{onClick:()=>t(!1),className:"lg:hidden text-gray-400 hover:text-gray-600",children:B.jsx(aw,{className:"w-5 h-5"})})]}),B.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:uL.map(n=>B.jsxs(uT,{to:n.to,onClick:()=>{window.innerWidth<1024&&t(!1)},className:({isActive:i})=>la("flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors",i?"bg-primary/10 text-primary":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[B.jsx(n.icon,{className:"w-5 h-5"}),n.label]},n.to))}),B.jsx("div",{className:"p-4 border-t border-gray-100",children:B.jsx("p",{className:"text-xs text-gray-400 text-center",children:"3D Digital Asset Management v0.1.0"})})]})]})}const qn=X.forwardRef(({className:r,variant:e="primary",size:t="md",children:n,...i},s)=>B.jsx("button",{ref:s,className:la("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{"bg-primary text-white hover:bg-primary-dark":e==="primary","bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":e==="secondary","bg-danger text-white hover:bg-red-600":e==="danger","bg-transparent text-gray-600 hover:bg-gray-100":e==="ghost"},{"px-2.5 py-1.5 text-xs":t==="sm","px-4 py-2 text-sm":t==="md","px-6 py-3 text-base":t==="lg"},r),...i,children:n}));qn.displayName="Button";function fL({title:r,actions:e}){const t=hS(n=>n.setSidebarOpen);return B.jsx("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200",children:B.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx(qn,{variant:"ghost",size:"sm",onClick:()=>t(!0),className:"lg:hidden",children:B.jsx(_D,{className:"w-5 h-5"})}),r&&B.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:r})]}),e&&B.jsx("div",{className:"flex items-center gap-3",children:e})]})})}const ac=Wg(r=>({toasts:[],addToast:(e,t="info")=>{const n=Math.random().toString(36).substring(7);r(i=>({toasts:[...i.toasts,{id:n,message:e,type:t}]})),setTimeout(()=>{r(i=>({toasts:i.toasts.filter(s=>s.id!==n)}))},3e3)},removeToast:e=>r(t=>({toasts:t.toasts.filter(n=>n.id!==e)}))})),hL={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-amber-500"};function pL(){const{toasts:r,removeToast:e}=ac();return B.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:r.map(t=>B.jsxs("div",{className:`${hL[t.type]} text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] animate-slide-in`,children:[B.jsx("span",{className:"flex-1",children:t.message}),B.jsx("button",{onClick:()=>e(t.id),className:"text-white/80 hover:text-white",children:B.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id))})}function mL({title:r,actions:e}){return B.jsxs("div",{className:"min-h-screen bg-page",children:[B.jsx(dL,{}),B.jsxs("div",{className:"lg:ml-64",children:[B.jsx(fL,{title:r,actions:e}),B.jsx("main",{className:"p-6",children:B.jsx(RB,{})})]}),B.jsx(pL,{})]})}const gL="";async function ws(r,e={}){const t=`${gL}${r}`,n={"Content-Type":"application/json",...e.headers},i=await fetch(t,{...e,headers:n});if(!i.ok){const s=await i.json().catch(()=>({error:"Unknown error"}));throw new Error(s.error||s.message||`HTTP ${i.status}`)}if(i.status!==204)return i.json()}const gu={list:r=>ws(`/assets${r?"?"+new URLSearchParams({...r.status&&{status:r.status},...r.limit&&{limit:r.limit.toString()},...r.offset&&{offset:r.offset.toString()}}):""}`),get:r=>ws(`/assets/${r}`),create:r=>ws("/assets",{method:"POST",body:JSON.stringify(r)}),update:(r,e)=>ws(`/assets/${r}`,{method:"PATCH",body:JSON.stringify(e)}),delete:r=>ws(`/assets/${r}`,{method:"DELETE"})},sf={list:r=>ws(`/presets/lighting${r?`?tag=${encodeURIComponent(r)}`:""}`),get:r=>ws(`/presets/lighting/${r}`),create:r=>ws("/presets/lighting",{method:"POST",body:JSON.stringify(r)}),update:(r,e)=>ws(`/presets/lighting/${r}`,{method:"PATCH",body:JSON.stringify(e)}),delete:r=>ws(`/presets/lighting/${r}`,{method:"DELETE"})},v0={list:r=>ws(`/presets/render${r?`?assetId=${r}`:""}`),get:r=>ws(`/presets/render/${r}`),create:r=>ws("/presets/render",{method:"POST",body:JSON.stringify(r)}),delete:r=>ws(`/presets/render/${r}`,{method:"DELETE"})},vL={presign:r=>ws("/uploads/presign",{method:"POST",body:JSON.stringify({path:r})})};function Ri({className:r,children:e,...t}){return B.jsx("div",{className:la("bg-white rounded-xl border border-gray-200 shadow-sm",r),...t,children:e})}function yL({className:r,children:e,...t}){return B.jsx("div",{className:la("p-6 border-b border-gray-100",r),...t,children:e})}function Es({className:r,children:e,...t}){return B.jsx("div",{className:la("p-6",r),...t,children:e})}function xL({className:r,children:e,...t}){return B.jsx("h3",{className:la("text-lg font-semibold text-gray-900",r),...t,children:e})}const _L={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"};function og({className:r,variant:e="default",children:t,...n}){return B.jsx("span",{className:la("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",_L[e],r),...n,children:t})}const AL={draft:{label:"Draft",variant:"default"},processing:{label:"Processing",variant:"info"},ready:{label:"Ready",variant:"success"},failed:{label:"Failed",variant:"danger"}};function lw({status:r,className:e}){const t=AL[r];return B.jsx(og,{variant:t.variant,className:e,children:t.label})}function SL(){const{data:r}=Ho({queryKey:["assets"],queryFn:()=>gu.list()}),{data:e}=Ho({queryKey:["lighting-presets"],queryFn:()=>sf.list()}),{data:t}=Ho({queryKey:["render-presets"],queryFn:()=>v0.list()}),n=(r==null?void 0:r.items)??[],i=(e==null?void 0:e.items)??[],s=(t==null?void 0:t.items)??[],a=n.length,l=n.filter(y=>y.status==="draft").length,u=n.filter(y=>y.status==="ready").length,h=n.filter(y=>y.status==="processing").length,p=n.filter(y=>y.status==="failed").length,m=[...n].sort((y,_)=>new Date(_.createdAt).getTime()-new Date(y.createdAt).getTime()).slice(0,5),v=[{label:"Total Assets",value:a,icon:ag,color:"text-gray-600",href:"/assets"},{label:"Ready",value:u,icon:ag,color:"text-green-600",href:"/assets?status=ready"},{label:"Lighting Presets",value:i.length,icon:dS,color:"text-amber-600",href:"/lighting"},{label:"Render Presets",value:s.length,icon:g0,color:"text-purple-600",href:"/renders"}];return B.jsxs("div",{className:"space-y-6",children:[B.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map(y=>B.jsx(Hr,{to:y.href,children:B.jsx(Ri,{className:"hover:shadow-md transition-shadow cursor-pointer",children:B.jsx(Es,{className:"p-6",children:B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsxs("div",{children:[B.jsx("p",{className:"text-sm text-gray-500",children:y.label}),B.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:y.value})]}),B.jsx(y.icon,{className:`w-8 h-8 ${y.color}`})]})})})},y.label))}),B.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[B.jsxs(Ri,{children:[B.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[B.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Assets"}),B.jsxs(Hr,{to:"/assets",className:"text-sm text-primary hover:text-primary-dark flex items-center gap-1",children:["View all ",B.jsx(mD,{className:"w-4 h-4"})]})]}),B.jsx(Es,{className:"p-0",children:m.length===0?B.jsx("div",{className:"p-6 text-center text-gray-500",children:"No assets yet. Create your first asset to get started."}):B.jsx("ul",{className:"divide-y divide-gray-100",children:m.map(y=>B.jsx("li",{children:B.jsxs(Hr,{to:`/assets/${y.id}`,className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[B.jsxs("div",{className:"min-w-0 flex-1",children:[B.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:y.name}),B.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:cL(y.createdAt)})]}),B.jsx(lw,{status:y.status})]})},y.id))})})]}),B.jsxs(Ri,{children:[B.jsx("div",{className:"p-6",children:B.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),B.jsxs(Es,{className:"p-6 space-y-4",children:[B.jsxs(Hr,{to:"/uploads",className:"flex items-center gap-4 p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[B.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:B.jsx(pT,{className:"w-5 h-5 text-primary"})}),B.jsxs("div",{children:[B.jsx("p",{className:"font-medium text-gray-900",children:"Upload 3D Model"}),B.jsx("p",{className:"text-sm text-gray-500",children:"Upload a new GLB file"})]})]}),B.jsxs(Hr,{to:"/assets/new",className:"flex items-center gap-4 p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[B.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:B.jsx(ag,{className:"w-5 h-5 text-green-600"})}),B.jsxs("div",{children:[B.jsx("p",{className:"font-medium text-gray-900",children:"Create Asset"}),B.jsx("p",{className:"text-sm text-gray-500",children:"Add a new 3D asset"})]})]}),B.jsxs(Hr,{to:"/lighting/new",className:"flex items-center gap-4 p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[B.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:B.jsx(dS,{className:"w-5 h-5 text-amber-600"})}),B.jsxs("div",{children:[B.jsx("p",{className:"font-medium text-gray-900",children:"Create Lighting Preset"}),B.jsx("p",{className:"text-sm text-gray-500",children:"Configure HDRI lighting"})]})]}),B.jsxs(Hr,{to:"/renders/new",className:"flex items-center gap-4 p-4 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[B.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:B.jsx(g0,{className:"w-5 h-5 text-purple-600"})}),B.jsxs("div",{children:[B.jsx("p",{className:"font-medium text-gray-900",children:"Create Render Preset"}),B.jsx("p",{className:"text-sm text-gray-500",children:"Configure camera settings"})]})]})]})]})]}),(l>0||h>0||p>0)&&B.jsxs(Ri,{children:[B.jsx("div",{className:"p-6",children:B.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Asset Status Overview"})}),B.jsx(Es,{className:"p-6",children:B.jsxs("div",{className:"flex flex-wrap gap-4",children:[l>0&&B.jsx(Hr,{to:"/assets?status=draft",className:"flex items-center gap-2",children:B.jsxs(og,{variant:"default",children:[l," Draft"]})}),h>0&&B.jsx(Hr,{to:"/assets?status=processing",className:"flex items-center gap-2",children:B.jsxs(og,{variant:"info",children:[h," Processing"]})}),p>0&&B.jsx(Hr,{to:"/assets?status=failed",className:"flex items-center gap-2",children:B.jsxs(og,{variant:"danger",children:[p," Failed"]})})]})})]})]})}const Ti=X.forwardRef(({className:r,type:e,...t},n)=>B.jsx("input",{type:e,ref:n,className:la("w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:outline-none",r),...t}));Ti.displayName="Input";const hp=X.forwardRef(({className:r,children:e,...t},n)=>B.jsx("select",{ref:n,className:la("w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-primary focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:outline-none bg-white",r),...t,children:e}));hp.displayName="Select";const ST=X.createContext(void 0);function wL(){const r=X.useContext(ST);if(!r)throw new Error("Dialog components must be used within a Dialog");return r}function Xg({children:r,open:e,onOpenChange:t}){return B.jsx(ST.Provider,{value:{isOpen:e,open:()=>t(!0),close:()=>t(!1)},children:r})}function Jg({children:r,className:e,title:t}){const{isOpen:n,close:i}=wL();return n?B.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[B.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:i}),B.jsxs("div",{className:la("relative bg-white rounded-xl shadow-lg max-w-md w-full mx-4 max-h-[90vh] overflow-auto",e),children:[t&&B.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[B.jsx("h2",{className:"text-lg font-semibold",children:t}),B.jsx("button",{type:"button",onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:B.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:B.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),B.jsx("div",{className:"p-6",children:r})]})]}):null}function Kg({children:r,className:e}){return B.jsx("div",{className:la("flex items-center justify-end gap-3 mt-6",e),children:r})}function ML({isOpen:r,onClose:e,onConfirm:t,itemName:n}){return B.jsx(Xg,{open:r,onOpenChange:i=>!i&&e(),children:B.jsxs(Jg,{title:"Delete Asset",children:[B.jsx("div",{className:"space-y-4",children:B.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",B.jsx("strong",{children:n}),"? This action cannot be undone."]})}),B.jsxs(Kg,{children:[B.jsx(qn,{variant:"secondary",onClick:e,children:"Cancel"}),B.jsx(qn,{variant:"danger",onClick:t,children:"Delete"})]})]})})}function EL(){const r=ic(),e=ac(),[t]=aD(),n=t.get("status"),[i,s]=X.useState(""),[a,l]=X.useState(n||""),[u,h]=X.useState({isOpen:!1,asset:null}),{data:p,isLoading:m}=Ho({queryKey:["assets",a||void 0],queryFn:()=>gu.list({status:a||void 0})}),v=mf({mutationFn:M=>gu.delete(M),onSuccess:()=>{r.invalidateQueries({queryKey:["assets"]}),e.addToast("Asset deleted successfully","success"),h({isOpen:!1,asset:null})},onError:M=>{e.addToast(M.message,"error")}}),_=((p==null?void 0:p.items)??[]).filter(M=>M.name.toLowerCase().includes(i.toLowerCase()));return B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[B.jsx("div",{className:"flex-1 max-w-md",children:B.jsxs("div",{className:"relative",children:[B.jsx(MD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),B.jsx(Ti,{placeholder:"Search assets...",value:i,onChange:M=>s(M.target.value),className:"pl-10"})]})}),B.jsx(Hr,{to:"/assets/new",children:B.jsxs(qn,{children:[B.jsx(dp,{className:"w-4 h-4"}),"New Asset"]})})]}),B.jsx(Ri,{children:B.jsx("div",{className:"p-4 flex flex-wrap gap-4",children:B.jsxs("div",{className:"flex-1 min-w-[200px]",children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),B.jsxs(hp,{value:a,onChange:M=>l(M.target.value),children:[B.jsx("option",{value:"",children:"All Statuses"}),B.jsx("option",{value:"draft",children:"Draft"}),B.jsx("option",{value:"processing",children:"Processing"}),B.jsx("option",{value:"ready",children:"Ready"}),B.jsx("option",{value:"failed",children:"Failed"})]})]})})}),B.jsx(Ri,{children:m?B.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading assets..."}):_.length===0?B.jsx("div",{className:"p-8 text-center text-gray-500",children:i||a?B.jsx("p",{children:"No assets match your filters."}):B.jsxs("div",{children:[B.jsx("p",{className:"mb-4",children:"No assets yet. Create your first asset to get started."}),B.jsx(Hr,{to:"/assets/new",children:B.jsxs(qn,{children:[B.jsx(dp,{className:"w-4 h-4"}),"Create Asset"]})})]})}):B.jsx("div",{className:"overflow-x-auto",children:B.jsxs("table",{className:"w-full",children:[B.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:B.jsxs("tr",{children:[B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),B.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),B.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(M=>B.jsxs("tr",{className:"hover:bg-gray-50",children:[B.jsxs("td",{className:"px-6 py-4",children:[B.jsx(Hr,{to:`/assets/${M.id}`,className:"text-sm font-medium text-primary hover:text-primary-dark",children:M.name}),B.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate max-w-xs",children:M.masterUrl})]}),B.jsx("td",{className:"px-6 py-4",children:B.jsx(lw,{status:M.status})}),B.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:fp(M.createdAt)}),B.jsx("td",{className:"px-6 py-4",children:B.jsxs("div",{className:"flex items-center justify-end gap-2",children:[B.jsx(Hr,{to:`/assets/${M.id}`,className:"p-1.5 text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100",title:"View",children:B.jsx(gD,{className:"w-4 h-4"})}),B.jsx(Hr,{to:`/assets/${M.id}/edit`,className:"p-1.5 text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100",title:"Edit",children:B.jsx(hT,{className:"w-4 h-4"})}),B.jsx("button",{onClick:()=>h({isOpen:!0,asset:M}),className:"p-1.5 text-gray-400 hover:text-red-600 rounded hover:bg-red-50",title:"Delete",children:B.jsx(sw,{className:"w-4 h-4"})})]})})]},M.id))})]})})}),u.asset&&B.jsx(ML,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,asset:null}),onConfirm:()=>v.mutate(u.asset.id),itemName:u.asset.name})]})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Dp="171",Cd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},wT=0,mS=1,MT=2,CL=3,ET=0,px=1,lg=2,lo=3,Jo=0,ts=1,Ta=2,Go=0,Zd=1,gS=2,vS=3,yS=4,CT=5,$c=100,bT=101,TT=102,RT=103,IT=104,PT=200,BT=201,DT=202,LT=203,y0=204,x0=205,NT=206,FT=207,OT=208,UT=209,kT=210,zT=211,HT=212,GT=213,VT=214,_0=0,A0=1,S0=2,af=3,w0=4,M0=5,E0=6,C0=7,Yg=0,jT=1,WT=2,Vo=0,XT=1,JT=2,KT=3,cw=4,YT=5,ZT=6,QT=7,xS="attached",qT="detached",vu=300,Ko=301,yu=302,pp=303,Sg=304,Lp=306,xu=1e3,Jr=1001,mp=1002,Ii=1003,mx=1004,bL=1004,Bd=1005,TL=1005,Jn=1006,Yh=1007,RL=1007,Ia=1008,_S=1008,Xs=1009,gx=1010,vx=1011,gp=1012,Zg=1013,Yo=1014,br=1015,vi=1016,yx=1017,xx=1018,of=1020,uw=35902,dw=1021,fw=1022,Kr=1023,hw=1024,pw=1025,Qd=1026,lf=1027,Qg=1028,qg=1029,mw=1030,_x=1031,IL=1032,Ax=1033,cg=33776,ug=33777,dg=33778,fg=33779,b0=35840,T0=35841,R0=35842,I0=35843,P0=36196,B0=37492,D0=37496,L0=37808,N0=37809,F0=37810,O0=37811,U0=37812,k0=37813,z0=37814,H0=37815,G0=37816,V0=37817,j0=37818,W0=37819,X0=37820,J0=37821,hg=36492,K0=36494,Y0=36495,gw=36283,Z0=36284,Q0=36285,q0=36286,$T=2200,eR=2201,tR=2202,vp=2300,yp=2301,u0=2302,Dd=2400,Ld=2401,wg=2402,Sx=2500,vw=2501,nR=0,yw=1,$0=2,rR=3200,iR=3201,PL=3202,BL=3203,wu=0,sR=1,Xl="",As="srgb",Zo="srgb-linear",Mg="linear",sr="srgb",DL=0,Td=7680,LL=7681,NL=7682,FL=7683,OL=34055,UL=34056,kL=5386,zL=512,HL=513,GL=514,VL=515,jL=516,WL=517,XL=518,AS=519,aR=512,oR=513,lR=514,xw=515,cR=516,uR=517,dR=518,fR=519,Eg=35044,JL=35048,KL=35040,YL=35045,ZL=35049,QL=35041,qL=35046,$L=35050,eN=35042,tN="100",SS="300 es",zo=2e3,Cg=2001;let Qo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}};const Qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let UE=1234567;const qd=Math.PI/180,xp=180/Math.PI;function oa(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Qi[r&255]+Qi[r>>8&255]+Qi[r>>16&255]+Qi[r>>24&255]+"-"+Qi[e&255]+Qi[e>>8&255]+"-"+Qi[e>>16&15|64]+Qi[e>>24&255]+"-"+Qi[t&63|128]+Qi[t>>8&255]+"-"+Qi[t>>16&255]+Qi[t>>24&255]+Qi[n&255]+Qi[n>>8&255]+Qi[n>>16&255]+Qi[n>>24&255]).toLowerCase()}function pn(r,e,t){return Math.max(e,Math.min(t,r))}function _w(r,e){return(r%e+e)%e}function nN(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function rN(r,e,t){return r!==e?(t-r)/(e-r):0}function pg(r,e,t){return(1-t)*r+t*e}function iN(r,e,t,n){return pg(r,e,1-Math.exp(-t*n))}function sN(r,e=1){return e-Math.abs(_w(r,e*2)-e)}function aN(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function oN(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function lN(r,e){return r+Math.floor(Math.random()*(e-r+1))}function cN(r,e){return r+Math.random()*(e-r)}function uN(r){return r*(.5-Math.random())}function dN(r){r!==void 0&&(UE=r);let e=UE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function fN(r){return r*qd}function hN(r){return r*xp}function pN(r){return(r&r-1)===0&&r!==0}function mN(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function gN(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function vN(r,e,t,n,i){const s=Math.cos,a=Math.sin,l=s(t/2),u=a(t/2),h=s((e+n)/2),p=a((e+n)/2),m=s((e-n)/2),v=a((e-n)/2),y=s((n-e)/2),_=a((n-e)/2);switch(i){case"XYX":r.set(l*p,u*m,u*v,l*h);break;case"YZY":r.set(u*v,l*p,u*m,l*h);break;case"ZXZ":r.set(u*m,u*v,l*p,l*h);break;case"XZX":r.set(l*p,u*_,u*y,l*h);break;case"YXY":r.set(u*y,l*p,u*_,l*h);break;case"ZYZ":r.set(u*_,u*y,l*p,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ms(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function wn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Aw={DEG2RAD:qd,RAD2DEG:xp,generateUUID:oa,clamp:pn,euclideanModulo:_w,mapLinear:nN,inverseLerp:rN,lerp:pg,damp:iN,pingpong:sN,smoothstep:aN,smootherstep:oN,randInt:lN,randFloat:cN,randFloatSpread:uN,seededRandom:dN,degToRad:fN,radToDeg:hN,isPowerOfTwo:pN,ceilPowerOfTwo:mN,floorPowerOfTwo:gN,setQuaternionFromProperEuler:vN,normalize:wn,denormalize:Ms};class Je{constructor(e=0,t=0){Je.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(pn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(pn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yn{constructor(e,t,n,i,s,a,l,u,h){yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,l,u,h)}set(e,t,n,i,s,a,l,u,h){const p=this.elements;return p[0]=e,p[1]=i,p[2]=l,p[3]=t,p[4]=s,p[5]=u,p[6]=n,p[7]=a,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],l=n[3],u=n[6],h=n[1],p=n[4],m=n[7],v=n[2],y=n[5],_=n[8],M=i[0],w=i[3],S=i[6],T=i[1],R=i[4],C=i[7],k=i[2],O=i[5],V=i[8];return s[0]=a*M+l*T+u*k,s[3]=a*w+l*R+u*O,s[6]=a*S+l*C+u*V,s[1]=h*M+p*T+m*k,s[4]=h*w+p*R+m*O,s[7]=h*S+p*C+m*V,s[2]=v*M+y*T+_*k,s[5]=v*w+y*R+_*O,s[8]=v*S+y*C+_*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8];return t*a*p-t*l*h-n*s*p+n*l*u+i*s*h-i*a*u}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=p*a-l*h,v=l*u-p*s,y=h*s-a*u,_=t*m+n*v+i*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/_;return e[0]=m*M,e[1]=(i*h-p*n)*M,e[2]=(l*n-i*a)*M,e[3]=v*M,e[4]=(p*t-i*u)*M,e[5]=(i*s-l*t)*M,e[6]=y*M,e[7]=(n*u-h*t)*M,e[8]=(a*t-n*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,a,l){const u=Math.cos(s),h=Math.sin(s);return this.set(n*u,n*h,-n*(u*a+h*l)+a+e,-i*h,i*u,-i*(-h*a+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(L_.makeScale(e,t)),this}rotate(e){return this.premultiply(L_.makeRotation(-e)),this}translate(e,t){return this.premultiply(L_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const L_=new yn;function hR(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const yN={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function jh(r,e){return new yN[r](e)}function bg(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function pR(){const r=bg("canvas");return r.style.display="block",r}const kE={};function kh(r){r in kE||(kE[r]=!0,console.warn(r))}function xN(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function _N(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function AN(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const zE=new yn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),HE=new yn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function SN(){const r={enabled:!0,workingColorSpace:Zo,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===sr&&(i.r=Ql(i.r),i.g=Ql(i.g),i.b=Ql(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===sr&&(i.r=Zh(i.r),i.g=Zh(i.g),i.b=Zh(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Xl?Mg:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[Zo]:{primaries:e,whitePoint:n,transfer:Mg,toXYZ:zE,fromXYZ:HE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:As},outputColorSpaceConfig:{drawingBufferColorSpace:As}},[As]:{primaries:e,whitePoint:n,transfer:sr,toXYZ:zE,fromXYZ:HE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:As}}}),r}const jn=SN();function Ql(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Zh(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let vh;class mR{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vh===void 0&&(vh=bg("canvas")),vh.width=e.width,vh.height=e.height;const n=vh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=vh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=Ql(s[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ql(t[n]/255)*255):t[n]=Ql(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let wN=0;class Nd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wN++}),this.uuid=oa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,l=i.length;a<l;a++)i[a].isDataTexture?s.push(N_(i[a].image)):s.push(N_(i[a]))}else s=N_(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function N_(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?mR.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let MN=0;class nr extends Qo{constructor(e=nr.DEFAULT_IMAGE,t=nr.DEFAULT_MAPPING,n=Jr,i=Jr,s=Jn,a=Ia,l=Kr,u=Xs,h=nr.DEFAULT_ANISOTROPY,p=Xl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:MN++}),this.uuid=oa(),this.name="",this.source=new Nd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vu)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xu:e.x=e.x-Math.floor(e.x);break;case Jr:e.x=e.x<0?0:1;break;case mp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case xu:e.y=e.y-Math.floor(e.y);break;case Jr:e.y=e.y<0?0:1;break;case mp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}nr.DEFAULT_IMAGE=null;nr.DEFAULT_MAPPING=vu;nr.DEFAULT_ANISOTROPY=1;class Xn{constructor(e=0,t=0,n=0,i=1){Xn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const u=e.elements,h=u[0],p=u[4],m=u[8],v=u[1],y=u[5],_=u[9],M=u[2],w=u[6],S=u[10];if(Math.abs(p-v)<.01&&Math.abs(m-M)<.01&&Math.abs(_-w)<.01){if(Math.abs(p+v)<.1&&Math.abs(m+M)<.1&&Math.abs(_+w)<.1&&Math.abs(h+y+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(h+1)/2,C=(y+1)/2,k=(S+1)/2,O=(p+v)/4,V=(m+M)/4,z=(_+w)/4;return R>C&&R>k?R<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(R),i=O/n,s=V/n):C>k?C<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),n=O/i,s=z/i):k<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(k),n=V/s,i=z/s),this.set(n,i,s,t),this}let T=Math.sqrt((w-_)*(w-_)+(m-M)*(m-M)+(v-p)*(v-p));return Math.abs(T)<.001&&(T=1),this.x=(w-_)/T,this.y=(m-M)/T,this.z=(v-p)/T,this.w=Math.acos((h+y+S-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this.w=pn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this.w=pn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(pn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gR extends Qo{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Xn(0,0,e,t),this.scissorTest=!1,this.viewport=new Xn(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new nr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Nd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Js extends gR{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class wx extends nr{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Ii,this.minFilter=Ii,this.wrapR=Jr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class EN extends Js{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new wx(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Sw extends nr{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Ii,this.minFilter=Ii,this.wrapR=Jr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class CN extends Js{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Sw(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ii{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,a,l){let u=n[i+0],h=n[i+1],p=n[i+2],m=n[i+3];const v=s[a+0],y=s[a+1],_=s[a+2],M=s[a+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=_,e[t+3]=M;return}if(m!==M||u!==v||h!==y||p!==_){let w=1-l;const S=u*v+h*y+p*_+m*M,T=S>=0?1:-1,R=1-S*S;if(R>Number.EPSILON){const k=Math.sqrt(R),O=Math.atan2(k,S*T);w=Math.sin(w*O)/k,l=Math.sin(l*O)/k}const C=l*T;if(u=u*w+v*C,h=h*w+y*C,p=p*w+_*C,m=m*w+M*C,w===1-l){const k=1/Math.sqrt(u*u+h*h+p*p+m*m);u*=k,h*=k,p*=k,m*=k}}e[t]=u,e[t+1]=h,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,i,s,a){const l=n[i],u=n[i+1],h=n[i+2],p=n[i+3],m=s[a],v=s[a+1],y=s[a+2],_=s[a+3];return e[t]=l*_+p*m+u*y-h*v,e[t+1]=u*_+p*v+h*m-l*y,e[t+2]=h*_+p*y+l*v-u*m,e[t+3]=p*_-l*m-u*v-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,a=e._order,l=Math.cos,u=Math.sin,h=l(n/2),p=l(i/2),m=l(s/2),v=u(n/2),y=u(i/2),_=u(s/2);switch(a){case"XYZ":this._x=v*p*m+h*y*_,this._y=h*y*m-v*p*_,this._z=h*p*_+v*y*m,this._w=h*p*m-v*y*_;break;case"YXZ":this._x=v*p*m+h*y*_,this._y=h*y*m-v*p*_,this._z=h*p*_-v*y*m,this._w=h*p*m+v*y*_;break;case"ZXY":this._x=v*p*m-h*y*_,this._y=h*y*m+v*p*_,this._z=h*p*_+v*y*m,this._w=h*p*m-v*y*_;break;case"ZYX":this._x=v*p*m-h*y*_,this._y=h*y*m+v*p*_,this._z=h*p*_-v*y*m,this._w=h*p*m+v*y*_;break;case"YZX":this._x=v*p*m+h*y*_,this._y=h*y*m+v*p*_,this._z=h*p*_-v*y*m,this._w=h*p*m-v*y*_;break;case"XZY":this._x=v*p*m-h*y*_,this._y=h*y*m-v*p*_,this._z=h*p*_+v*y*m,this._w=h*p*m+v*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],a=t[1],l=t[5],u=t[9],h=t[2],p=t[6],m=t[10],v=n+l+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-u)*y,this._y=(s-h)*y,this._z=(a-i)*y}else if(n>l&&n>m){const y=2*Math.sqrt(1+n-l-m);this._w=(p-u)/y,this._x=.25*y,this._y=(i+a)/y,this._z=(s+h)/y}else if(l>m){const y=2*Math.sqrt(1+l-n-m);this._w=(s-h)/y,this._x=(i+a)/y,this._y=.25*y,this._z=(u+p)/y}else{const y=2*Math.sqrt(1+m-n-l);this._w=(a-i)/y,this._x=(s+h)/y,this._y=(u+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(pn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,a=e._w,l=t._x,u=t._y,h=t._z,p=t._w;return this._x=n*p+a*l+i*h-s*u,this._y=i*p+a*u+s*l-n*h,this._z=s*p+a*h+n*u-i*l,this._w=a*p-n*l-i*u-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let l=a*e._w+n*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const y=1-t;return this._w=y*a+t*this._w,this._x=y*n+t*this._x,this._y=y*i+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const h=Math.sqrt(u),p=Math.atan2(h,l),m=Math.sin((1-t)*p)/h,v=Math.sin(t*p)/h;return this._w=a*m+this._w*v,this._x=n*m+this._x*v,this._y=i*m+this._y*v,this._z=s*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,n=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(GE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(GE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,a=e.y,l=e.z,u=e.w,h=2*(a*i-l*n),p=2*(l*t-s*i),m=2*(s*n-a*t);return this.x=t+u*h+a*m-l*p,this.y=n+u*p+l*h-s*m,this.z=i+u*m+s*p-a*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=pn(this.x,e.x,t.x),this.y=pn(this.y,e.y,t.y),this.z=pn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=pn(this.x,e,t),this.y=pn(this.y,e,t),this.z=pn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(pn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,a=t.x,l=t.y,u=t.z;return this.x=i*u-s*l,this.y=s*a-n*u,this.z=n*l-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return F_.copy(this).projectOnVector(e),this.sub(F_)}reflect(e){return this.sub(F_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(pn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const F_=new Z,GE=new ii;class ns{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(io.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(io.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=io.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,io):io.fromBufferAttribute(s,a),io.applyMatrix4(e.matrixWorld),this.expandByPoint(io);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),cy.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),cy.copy(n.boundingBox)),cy.applyMatrix4(e.matrixWorld),this.union(cy)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,io),io.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Um),uy.subVectors(this.max,Um),yh.subVectors(e.a,Um),xh.subVectors(e.b,Um),_h.subVectors(e.c,Um),zc.subVectors(xh,yh),Hc.subVectors(_h,xh),fd.subVectors(yh,_h);let t=[0,-zc.z,zc.y,0,-Hc.z,Hc.y,0,-fd.z,fd.y,zc.z,0,-zc.x,Hc.z,0,-Hc.x,fd.z,0,-fd.x,-zc.y,zc.x,0,-Hc.y,Hc.x,0,-fd.y,fd.x,0];return!O_(t,yh,xh,_h,uy)||(t=[1,0,0,0,1,0,0,0,1],!O_(t,yh,xh,_h,uy))?!1:(dy.crossVectors(zc,Hc),t=[dy.x,dy.y,dy.z],O_(t,yh,xh,_h,uy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,io).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(io).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Bl=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],io=new Z,cy=new ns,yh=new Z,xh=new Z,_h=new Z,zc=new Z,Hc=new Z,fd=new Z,Um=new Z,uy=new Z,dy=new Z,hd=new Z;function O_(r,e,t,n,i){for(let s=0,a=r.length-3;s<=a;s+=3){hd.fromArray(r,s);const l=i.x*Math.abs(hd.x)+i.y*Math.abs(hd.y)+i.z*Math.abs(hd.z),u=e.dot(hd),h=t.dot(hd),p=n.dot(hd);if(Math.max(-Math.max(u,h,p),Math.min(u,h,p))>l)return!1}return!0}const bN=new ns,km=new Z,U_=new Z;class Hi{constructor(e=new Z,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):bN.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;km.subVectors(e,this.center);const t=km.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(km,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(U_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(km.copy(e.center).add(U_)),this.expandByPoint(km.copy(e.center).sub(U_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Dl=new Z,k_=new Z,fy=new Z,Gc=new Z,z_=new Z,hy=new Z,H_=new Z;class gf{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Dl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Dl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Dl.copy(this.origin).addScaledVector(this.direction,t),Dl.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){k_.copy(e).add(t).multiplyScalar(.5),fy.copy(t).sub(e).normalize(),Gc.copy(this.origin).sub(k_);const s=e.distanceTo(t)*.5,a=-this.direction.dot(fy),l=Gc.dot(this.direction),u=-Gc.dot(fy),h=Gc.lengthSq(),p=Math.abs(1-a*a);let m,v,y,_;if(p>0)if(m=a*u-l,v=a*l-u,_=s*p,m>=0)if(v>=-_)if(v<=_){const M=1/p;m*=M,v*=M,y=m*(m+a*v+2*l)+v*(a*m+v+2*u)+h}else v=s,m=Math.max(0,-(a*v+l)),y=-m*m+v*(v+2*u)+h;else v=-s,m=Math.max(0,-(a*v+l)),y=-m*m+v*(v+2*u)+h;else v<=-_?(m=Math.max(0,-(-a*s+l)),v=m>0?-s:Math.min(Math.max(-s,-u),s),y=-m*m+v*(v+2*u)+h):v<=_?(m=0,v=Math.min(Math.max(-s,-u),s),y=v*(v+2*u)+h):(m=Math.max(0,-(a*s+l)),v=m>0?s:Math.min(Math.max(-s,-u),s),y=-m*m+v*(v+2*u)+h);else v=a>0?-s:s,m=Math.max(0,-(a*v+l)),y=-m*m+v*(v+2*u)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,m),i&&i.copy(k_).addScaledVector(fy,v),y}intersectSphere(e,t){Dl.subVectors(e.center,this.origin);const n=Dl.dot(this.direction),i=Dl.dot(Dl)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),l=n-a,u=n+a;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,a,l,u;const h=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,v=this.origin;return h>=0?(n=(e.min.x-v.x)*h,i=(e.max.x-v.x)*h):(n=(e.max.x-v.x)*h,i=(e.min.x-v.x)*h),p>=0?(s=(e.min.y-v.y)*p,a=(e.max.y-v.y)*p):(s=(e.max.y-v.y)*p,a=(e.min.y-v.y)*p),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),m>=0?(l=(e.min.z-v.z)*m,u=(e.max.z-v.z)*m):(l=(e.max.z-v.z)*m,u=(e.min.z-v.z)*m),n>u||l>i)||((l>n||n!==n)&&(n=l),(u<i||i!==i)&&(i=u),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Dl)!==null}intersectTriangle(e,t,n,i,s){z_.subVectors(t,e),hy.subVectors(n,e),H_.crossVectors(z_,hy);let a=this.direction.dot(H_),l;if(a>0){if(i)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Gc.subVectors(this.origin,e);const u=l*this.direction.dot(hy.crossVectors(Gc,hy));if(u<0)return null;const h=l*this.direction.dot(z_.cross(Gc));if(h<0||u+h>a)return null;const p=-l*Gc.dot(H_);return p<0?null:this.at(p/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nn{constructor(e,t,n,i,s,a,l,u,h,p,m,v,y,_,M,w){nn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,l,u,h,p,m,v,y,_,M,w)}set(e,t,n,i,s,a,l,u,h,p,m,v,y,_,M,w){const S=this.elements;return S[0]=e,S[4]=t,S[8]=n,S[12]=i,S[1]=s,S[5]=a,S[9]=l,S[13]=u,S[2]=h,S[6]=p,S[10]=m,S[14]=v,S[3]=y,S[7]=_,S[11]=M,S[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nn().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ah.setFromMatrixColumn(e,0).length(),s=1/Ah.setFromMatrixColumn(e,1).length(),a=1/Ah.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),l=Math.sin(n),u=Math.cos(i),h=Math.sin(i),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const v=a*p,y=a*m,_=l*p,M=l*m;t[0]=u*p,t[4]=-u*m,t[8]=h,t[1]=y+_*h,t[5]=v-M*h,t[9]=-l*u,t[2]=M-v*h,t[6]=_+y*h,t[10]=a*u}else if(e.order==="YXZ"){const v=u*p,y=u*m,_=h*p,M=h*m;t[0]=v+M*l,t[4]=_*l-y,t[8]=a*h,t[1]=a*m,t[5]=a*p,t[9]=-l,t[2]=y*l-_,t[6]=M+v*l,t[10]=a*u}else if(e.order==="ZXY"){const v=u*p,y=u*m,_=h*p,M=h*m;t[0]=v-M*l,t[4]=-a*m,t[8]=_+y*l,t[1]=y+_*l,t[5]=a*p,t[9]=M-v*l,t[2]=-a*h,t[6]=l,t[10]=a*u}else if(e.order==="ZYX"){const v=a*p,y=a*m,_=l*p,M=l*m;t[0]=u*p,t[4]=_*h-y,t[8]=v*h+M,t[1]=u*m,t[5]=M*h+v,t[9]=y*h-_,t[2]=-h,t[6]=l*u,t[10]=a*u}else if(e.order==="YZX"){const v=a*u,y=a*h,_=l*u,M=l*h;t[0]=u*p,t[4]=M-v*m,t[8]=_*m+y,t[1]=m,t[5]=a*p,t[9]=-l*p,t[2]=-h*p,t[6]=y*m+_,t[10]=v-M*m}else if(e.order==="XZY"){const v=a*u,y=a*h,_=l*u,M=l*h;t[0]=u*p,t[4]=-m,t[8]=h*p,t[1]=v*m+M,t[5]=a*p,t[9]=y*m-_,t[2]=_*m-y,t[6]=l*p,t[10]=M*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(TN,e,RN)}lookAt(e,t,n){const i=this.elements;return ia.subVectors(e,t),ia.lengthSq()===0&&(ia.z=1),ia.normalize(),Vc.crossVectors(n,ia),Vc.lengthSq()===0&&(Math.abs(n.z)===1?ia.x+=1e-4:ia.z+=1e-4,ia.normalize(),Vc.crossVectors(n,ia)),Vc.normalize(),py.crossVectors(ia,Vc),i[0]=Vc.x,i[4]=py.x,i[8]=ia.x,i[1]=Vc.y,i[5]=py.y,i[9]=ia.y,i[2]=Vc.z,i[6]=py.z,i[10]=ia.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],l=n[4],u=n[8],h=n[12],p=n[1],m=n[5],v=n[9],y=n[13],_=n[2],M=n[6],w=n[10],S=n[14],T=n[3],R=n[7],C=n[11],k=n[15],O=i[0],V=i[4],z=i[8],F=i[12],L=i[1],W=i[5],q=i[9],re=i[13],oe=i[2],Se=i[6],he=i[10],Ee=i[14],Y=i[3],ge=i[7],se=i[11],K=i[15];return s[0]=a*O+l*L+u*oe+h*Y,s[4]=a*V+l*W+u*Se+h*ge,s[8]=a*z+l*q+u*he+h*se,s[12]=a*F+l*re+u*Ee+h*K,s[1]=p*O+m*L+v*oe+y*Y,s[5]=p*V+m*W+v*Se+y*ge,s[9]=p*z+m*q+v*he+y*se,s[13]=p*F+m*re+v*Ee+y*K,s[2]=_*O+M*L+w*oe+S*Y,s[6]=_*V+M*W+w*Se+S*ge,s[10]=_*z+M*q+w*he+S*se,s[14]=_*F+M*re+w*Ee+S*K,s[3]=T*O+R*L+C*oe+k*Y,s[7]=T*V+R*W+C*Se+k*ge,s[11]=T*z+R*q+C*he+k*se,s[15]=T*F+R*re+C*Ee+k*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],a=e[1],l=e[5],u=e[9],h=e[13],p=e[2],m=e[6],v=e[10],y=e[14],_=e[3],M=e[7],w=e[11],S=e[15];return _*(+s*u*m-i*h*m-s*l*v+n*h*v+i*l*y-n*u*y)+M*(+t*u*y-t*h*v+s*a*v-i*a*y+i*h*p-s*u*p)+w*(+t*h*m-t*l*y-s*a*m+n*a*y+s*l*p-n*h*p)+S*(-i*l*p-t*u*m+t*l*v+i*a*m-n*a*v+n*u*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=e[9],v=e[10],y=e[11],_=e[12],M=e[13],w=e[14],S=e[15],T=m*w*h-M*v*h+M*u*y-l*w*y-m*u*S+l*v*S,R=_*v*h-p*w*h-_*u*y+a*w*y+p*u*S-a*v*S,C=p*M*h-_*m*h+_*l*y-a*M*y-p*l*S+a*m*S,k=_*m*u-p*M*u-_*l*v+a*M*v+p*l*w-a*m*w,O=t*T+n*R+i*C+s*k;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/O;return e[0]=T*V,e[1]=(M*v*s-m*w*s-M*i*y+n*w*y+m*i*S-n*v*S)*V,e[2]=(l*w*s-M*u*s+M*i*h-n*w*h-l*i*S+n*u*S)*V,e[3]=(m*u*s-l*v*s-m*i*h+n*v*h+l*i*y-n*u*y)*V,e[4]=R*V,e[5]=(p*w*s-_*v*s+_*i*y-t*w*y-p*i*S+t*v*S)*V,e[6]=(_*u*s-a*w*s-_*i*h+t*w*h+a*i*S-t*u*S)*V,e[7]=(a*v*s-p*u*s+p*i*h-t*v*h-a*i*y+t*u*y)*V,e[8]=C*V,e[9]=(_*m*s-p*M*s-_*n*y+t*M*y+p*n*S-t*m*S)*V,e[10]=(a*M*s-_*l*s+_*n*h-t*M*h-a*n*S+t*l*S)*V,e[11]=(p*l*s-a*m*s-p*n*h+t*m*h+a*n*y-t*l*y)*V,e[12]=k*V,e[13]=(p*M*i-_*m*i+_*n*v-t*M*v-p*n*w+t*m*w)*V,e[14]=(_*l*i-a*M*i-_*n*u+t*M*u+a*n*w-t*l*w)*V,e[15]=(a*m*i-p*l*i+p*n*u-t*m*u-a*n*v+t*l*v)*V,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,a=e.x,l=e.y,u=e.z,h=s*a,p=s*l;return this.set(h*a+n,h*l-i*u,h*u+i*l,0,h*l+i*u,p*l+n,p*u-i*a,0,h*u-i*l,p*u+i*a,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,a=t._y,l=t._z,u=t._w,h=s+s,p=a+a,m=l+l,v=s*h,y=s*p,_=s*m,M=a*p,w=a*m,S=l*m,T=u*h,R=u*p,C=u*m,k=n.x,O=n.y,V=n.z;return i[0]=(1-(M+S))*k,i[1]=(y+C)*k,i[2]=(_-R)*k,i[3]=0,i[4]=(y-C)*O,i[5]=(1-(v+S))*O,i[6]=(w+T)*O,i[7]=0,i[8]=(_+R)*V,i[9]=(w-T)*V,i[10]=(1-(v+M))*V,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Ah.set(i[0],i[1],i[2]).length();const a=Ah.set(i[4],i[5],i[6]).length(),l=Ah.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],so.copy(this);const h=1/s,p=1/a,m=1/l;return so.elements[0]*=h,so.elements[1]*=h,so.elements[2]*=h,so.elements[4]*=p,so.elements[5]*=p,so.elements[6]*=p,so.elements[8]*=m,so.elements[9]*=m,so.elements[10]*=m,t.setFromRotationMatrix(so),n.x=s,n.y=a,n.z=l,this}makePerspective(e,t,n,i,s,a,l=zo){const u=this.elements,h=2*s/(t-e),p=2*s/(n-i),m=(t+e)/(t-e),v=(n+i)/(n-i);let y,_;if(l===zo)y=-(a+s)/(a-s),_=-2*a*s/(a-s);else if(l===Cg)y=-a/(a-s),_=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=p,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=y,u[14]=_,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,i,s,a,l=zo){const u=this.elements,h=1/(t-e),p=1/(n-i),m=1/(a-s),v=(t+e)*h,y=(n+i)*p;let _,M;if(l===zo)_=(a+s)*m,M=-2*m;else if(l===Cg)_=s*m,M=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-y,u[2]=0,u[6]=0,u[10]=M,u[14]=-_,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ah=new Z,so=new nn,TN=new Z(0,0,0),RN=new Z(1,1,1),Vc=new Z,py=new Z,ia=new Z,VE=new nn,jE=new ii;class ca{constructor(e=0,t=0,n=0,i=ca.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],l=i[8],u=i[1],h=i[5],p=i[9],m=i[2],v=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-pn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(pn(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-pn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(pn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,h),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-pn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return VE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jE.setFromEuler(this),this.setFromQuaternion(jE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ca.DEFAULT_ORDER="XYZ";class $d{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let IN=0;const WE=new Z,Sh=new ii,Ll=new nn,my=new Z,zm=new Z,PN=new Z,BN=new ii,XE=new Z(1,0,0),JE=new Z(0,1,0),KE=new Z(0,0,1),YE={type:"added"},DN={type:"removed"},wh={type:"childadded",child:null},G_={type:"childremoved",child:null};class On extends Qo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:IN++}),this.uuid=oa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DEFAULT_UP.clone();const e=new Z,t=new ca,n=new ii,i=new Z(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new nn},normalMatrix:{value:new yn}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=On.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new $d,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sh.setFromAxisAngle(e,t),this.quaternion.multiply(Sh),this}rotateOnWorldAxis(e,t){return Sh.setFromAxisAngle(e,t),this.quaternion.premultiply(Sh),this}rotateX(e){return this.rotateOnAxis(XE,e)}rotateY(e){return this.rotateOnAxis(JE,e)}rotateZ(e){return this.rotateOnAxis(KE,e)}translateOnAxis(e,t){return WE.copy(e).applyQuaternion(this.quaternion),this.position.add(WE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(XE,e)}translateY(e){return this.translateOnAxis(JE,e)}translateZ(e){return this.translateOnAxis(KE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ll.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?my.copy(e):my.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),zm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ll.lookAt(zm,my,this.up):Ll.lookAt(my,zm,this.up),this.quaternion.setFromRotationMatrix(Ll),i&&(Ll.extractRotation(i.matrixWorld),Sh.setFromRotationMatrix(Ll),this.quaternion.premultiply(Sh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(YE),wh.child=e,this.dispatchEvent(wh),wh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(DN),G_.child=e,this.dispatchEvent(G_),G_.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ll.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ll.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ll),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(YE),wh.child=e,this.dispatchEvent(wh),wh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zm,e,PN),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zm,BN,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,p=u.length;h<p;h++){const m=u[h];s(e.shapes,m)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u<h;u++)l.push(s(e.materials,this.material[u]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];i.animations.push(s(e.animations,u))}}if(t){const l=a(e.geometries),u=a(e.materials),h=a(e.textures),p=a(e.images),m=a(e.shapes),v=a(e.skeletons),y=a(e.animations),_=a(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),h.length>0&&(n.textures=h),p.length>0&&(n.images=p),m.length>0&&(n.shapes=m),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=i,n;function a(l){const u=[];for(const h in l){const p=l[h];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}On.DEFAULT_UP=new Z(0,1,0);On.DEFAULT_MATRIX_AUTO_UPDATE=!0;On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ao=new Z,Nl=new Z,V_=new Z,Fl=new Z,Mh=new Z,Eh=new Z,ZE=new Z,j_=new Z,W_=new Z,X_=new Z,J_=new Xn,K_=new Xn,Y_=new Xn;class js{constructor(e=new Z,t=new Z,n=new Z){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),ao.subVectors(e,t),i.cross(ao);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){ao.subVectors(i,t),Nl.subVectors(n,t),V_.subVectors(e,t);const a=ao.dot(ao),l=ao.dot(Nl),u=ao.dot(V_),h=Nl.dot(Nl),p=Nl.dot(V_),m=a*h-l*l;if(m===0)return s.set(0,0,0),null;const v=1/m,y=(h*u-l*p)*v,_=(a*p-l*u)*v;return s.set(1-y-_,_,y)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Fl)===null?!1:Fl.x>=0&&Fl.y>=0&&Fl.x+Fl.y<=1}static getInterpolation(e,t,n,i,s,a,l,u){return this.getBarycoord(e,t,n,i,Fl)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Fl.x),u.addScaledVector(a,Fl.y),u.addScaledVector(l,Fl.z),u)}static getInterpolatedAttribute(e,t,n,i,s,a){return J_.setScalar(0),K_.setScalar(0),Y_.setScalar(0),J_.fromBufferAttribute(e,t),K_.fromBufferAttribute(e,n),Y_.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(J_,s.x),a.addScaledVector(K_,s.y),a.addScaledVector(Y_,s.z),a}static isFrontFacing(e,t,n,i){return ao.subVectors(n,t),Nl.subVectors(e,t),ao.cross(Nl).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ao.subVectors(this.c,this.b),Nl.subVectors(this.a,this.b),ao.cross(Nl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return js.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return js.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return js.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return js.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return js.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let a,l;Mh.subVectors(i,n),Eh.subVectors(s,n),j_.subVectors(e,n);const u=Mh.dot(j_),h=Eh.dot(j_);if(u<=0&&h<=0)return t.copy(n);W_.subVectors(e,i);const p=Mh.dot(W_),m=Eh.dot(W_);if(p>=0&&m<=p)return t.copy(i);const v=u*m-p*h;if(v<=0&&u>=0&&p<=0)return a=u/(u-p),t.copy(n).addScaledVector(Mh,a);X_.subVectors(e,s);const y=Mh.dot(X_),_=Eh.dot(X_);if(_>=0&&y<=_)return t.copy(s);const M=y*h-u*_;if(M<=0&&h>=0&&_<=0)return l=h/(h-_),t.copy(n).addScaledVector(Eh,l);const w=p*_-y*m;if(w<=0&&m-p>=0&&y-_>=0)return ZE.subVectors(s,i),l=(m-p)/(m-p+(y-_)),t.copy(i).addScaledVector(ZE,l);const S=1/(w+M+v);return a=M*S,l=v*S,t.copy(n).addScaledVector(Mh,a).addScaledVector(Eh,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const vR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},jc={h:0,s:0,l:0},gy={h:0,s:0,l:0};function Z_(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class wt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=As){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,jn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=jn.workingColorSpace){return this.r=e,this.g=t,this.b=n,jn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=jn.workingColorSpace){if(e=_w(e,1),t=pn(t,0,1),n=pn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=Z_(a,s,e+1/3),this.g=Z_(a,s,e),this.b=Z_(a,s,e-1/3)}return jn.toWorkingColorSpace(this,i),this}setStyle(e,t=As){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],l=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=As){const n=vR[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ql(e.r),this.g=Ql(e.g),this.b=Ql(e.b),this}copyLinearToSRGB(e){return this.r=Zh(e.r),this.g=Zh(e.g),this.b=Zh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=As){return jn.fromWorkingColorSpace(qi.copy(this),e),Math.round(pn(qi.r*255,0,255))*65536+Math.round(pn(qi.g*255,0,255))*256+Math.round(pn(qi.b*255,0,255))}getHexString(e=As){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=jn.workingColorSpace){jn.fromWorkingColorSpace(qi.copy(this),t);const n=qi.r,i=qi.g,s=qi.b,a=Math.max(n,i,s),l=Math.min(n,i,s);let u,h;const p=(l+a)/2;if(l===a)u=0,h=0;else{const m=a-l;switch(h=p<=.5?m/(a+l):m/(2-a-l),a){case n:u=(i-s)/m+(i<s?6:0);break;case i:u=(s-n)/m+2;break;case s:u=(n-i)/m+4;break}u/=6}return e.h=u,e.s=h,e.l=p,e}getRGB(e,t=jn.workingColorSpace){return jn.fromWorkingColorSpace(qi.copy(this),t),e.r=qi.r,e.g=qi.g,e.b=qi.b,e}getStyle(e=As){jn.fromWorkingColorSpace(qi.copy(this),e);const t=qi.r,n=qi.g,i=qi.b;return e!==As?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(jc),this.setHSL(jc.h+e,jc.s+t,jc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(jc),e.getHSL(gy);const n=pg(jc.h,gy.h,t),i=pg(jc.s,gy.s,t),s=pg(jc.l,gy.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qi=new wt;wt.NAMES=vR;let LN=0;class yi extends Qo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:LN++}),this.uuid=oa(),this.name="",this.type="Material",this.blending=Zd,this.side=Jo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=y0,this.blendDst=x0,this.blendEquation=$c,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wt(0,0,0),this.blendAlpha=0,this.depthFunc=af,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Td,this.stencilZFail=Td,this.stencilZPass=Td,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Zd&&(n.blending=this.blending),this.side!==Jo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==y0&&(n.blendSrc=this.blendSrc),this.blendDst!==x0&&(n.blendDst=this.blendDst),this.blendEquation!==$c&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==af&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AS&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Td&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Td&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Td&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const a=[];for(const l in s){const u=s[l];delete u.metadata,a.push(u)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ws extends yi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ca,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Jl=NN();function NN(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(n[u]=0,n[u|256]=32768,i[u]=24,i[u|256]=24):h<-14?(n[u]=1024>>-h-14,n[u|256]=1024>>-h-14|32768,i[u]=-h-1,i[u|256]=-h-1):h<=15?(n[u]=h+15<<10,n[u|256]=h+15<<10|32768,i[u]=13,i[u|256]=13):h<128?(n[u]=31744,n[u|256]=64512,i[u]=24,i[u|256]=24):(n[u]=31744,n[u|256]=64512,i[u]=13,i[u|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,p=0;for(;(h&8388608)===0;)h<<=1,p-=8388608;h&=-8388609,p+=947912704,s[u]=h|p}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:l}}function zs(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=pn(r,-65504,65504),Jl.floatView[0]=r;const e=Jl.uint32View[0],t=e>>23&511;return Jl.baseTable[t]+((e&8388607)>>Jl.shiftTable[t])}function rg(r){const e=r>>10;return Jl.uint32View[0]=Jl.mantissaTable[Jl.offsetTable[e]+(r&1023)]+Jl.exponentTable[e],Jl.floatView[0]}const Fd={toHalfFloat:zs,fromHalfFloat:rg},ti=new Z,vy=new Je;class Kn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Eg,this.updateRanges=[],this.gpuType=br,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)vy.fromBufferAttribute(this,t),vy.applyMatrix3(e),this.setXY(t,vy.x,vy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix3(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix4(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ti.fromBufferAttribute(this,t),ti.applyNormalMatrix(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ti.fromBufferAttribute(this,t),ti.transformDirection(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ms(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=wn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array),i=wn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array),i=wn(i,this.array),s=wn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Eg&&(e.usage=this.usage),e}}class FN extends Kn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class ON extends Kn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class UN extends Kn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class kN extends Kn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class ww extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class zN extends Kn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Mw extends Kn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class HN extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=rg(this.array[e*this.itemSize]);return this.normalized&&(t=Ms(t,this.array)),t}setX(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize]=zs(t),this}getY(e){let t=rg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ms(t,this.array)),t}setY(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize+1]=zs(t),this}getZ(e){let t=rg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ms(t,this.array)),t}setZ(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize+2]=zs(t),this}getW(e){let t=rg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ms(t,this.array)),t}setW(e,t){return this.normalized&&(t=wn(t,this.array)),this.array[e*this.itemSize+3]=zs(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array)),this.array[e+0]=zs(t),this.array[e+1]=zs(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array),i=wn(i,this.array)),this.array[e+0]=zs(t),this.array[e+1]=zs(n),this.array[e+2]=zs(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array),i=wn(i,this.array),s=wn(s,this.array)),this.array[e+0]=zs(t),this.array[e+1]=zs(n),this.array[e+2]=zs(i),this.array[e+3]=zs(s),this}}class Jt extends Kn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let GN=0;const Ma=new nn,Q_=new On,Ch=new Z,sa=new ns,Hm=new ns,Ci=new Z;class xn extends Qo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:GN++}),this.uuid=oa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hR(e)?Mw:ww)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new yn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ma.makeRotationFromQuaternion(e),this.applyMatrix4(Ma),this}rotateX(e){return Ma.makeRotationX(e),this.applyMatrix4(Ma),this}rotateY(e){return Ma.makeRotationY(e),this.applyMatrix4(Ma),this}rotateZ(e){return Ma.makeRotationZ(e),this.applyMatrix4(Ma),this}translate(e,t,n){return Ma.makeTranslation(e,t,n),this.applyMatrix4(Ma),this}scale(e,t,n){return Ma.makeScale(e,t,n),this.applyMatrix4(Ma),this}lookAt(e){return Q_.lookAt(e),Q_.updateMatrix(),this.applyMatrix4(Q_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ch).negate(),this.translate(Ch.x,Ch.y,Ch.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Jt(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ns);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];sa.setFromBufferAttribute(s),this.morphTargetsRelative?(Ci.addVectors(this.boundingBox.min,sa.min),this.boundingBox.expandByPoint(Ci),Ci.addVectors(this.boundingBox.max,sa.max),this.boundingBox.expandByPoint(Ci)):(this.boundingBox.expandByPoint(sa.min),this.boundingBox.expandByPoint(sa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Z,1/0);return}if(e){const n=this.boundingSphere.center;if(sa.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const l=t[s];Hm.setFromBufferAttribute(l),this.morphTargetsRelative?(Ci.addVectors(sa.min,Hm.min),sa.expandByPoint(Ci),Ci.addVectors(sa.max,Hm.max),sa.expandByPoint(Ci)):(sa.expandByPoint(Hm.min),sa.expandByPoint(Hm.max))}sa.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)Ci.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Ci));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,p=l.count;h<p;h++)Ci.fromBufferAttribute(l,h),u&&(Ch.fromBufferAttribute(e,h),Ci.add(Ch)),i=Math.max(i,n.distanceToSquared(Ci))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Kn(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let z=0;z<n.count;z++)l[z]=new Z,u[z]=new Z;const h=new Z,p=new Z,m=new Z,v=new Je,y=new Je,_=new Je,M=new Z,w=new Z;function S(z,F,L){h.fromBufferAttribute(n,z),p.fromBufferAttribute(n,F),m.fromBufferAttribute(n,L),v.fromBufferAttribute(s,z),y.fromBufferAttribute(s,F),_.fromBufferAttribute(s,L),p.sub(h),m.sub(h),y.sub(v),_.sub(v);const W=1/(y.x*_.y-_.x*y.y);isFinite(W)&&(M.copy(p).multiplyScalar(_.y).addScaledVector(m,-y.y).multiplyScalar(W),w.copy(m).multiplyScalar(y.x).addScaledVector(p,-_.x).multiplyScalar(W),l[z].add(M),l[F].add(M),l[L].add(M),u[z].add(w),u[F].add(w),u[L].add(w))}let T=this.groups;T.length===0&&(T=[{start:0,count:e.count}]);for(let z=0,F=T.length;z<F;++z){const L=T[z],W=L.start,q=L.count;for(let re=W,oe=W+q;re<oe;re+=3)S(e.getX(re+0),e.getX(re+1),e.getX(re+2))}const R=new Z,C=new Z,k=new Z,O=new Z;function V(z){k.fromBufferAttribute(i,z),O.copy(k);const F=l[z];R.copy(F),R.sub(k.multiplyScalar(k.dot(F))).normalize(),C.crossVectors(O,F);const W=C.dot(u[z])<0?-1:1;a.setXYZW(z,R.x,R.y,R.z,W)}for(let z=0,F=T.length;z<F;++z){const L=T[z],W=L.start,q=L.count;for(let re=W,oe=W+q;re<oe;re+=3)V(e.getX(re+0)),V(e.getX(re+1)),V(e.getX(re+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Kn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const i=new Z,s=new Z,a=new Z,l=new Z,u=new Z,h=new Z,p=new Z,m=new Z;if(e)for(let v=0,y=e.count;v<y;v+=3){const _=e.getX(v+0),M=e.getX(v+1),w=e.getX(v+2);i.fromBufferAttribute(t,_),s.fromBufferAttribute(t,M),a.fromBufferAttribute(t,w),p.subVectors(a,s),m.subVectors(i,s),p.cross(m),l.fromBufferAttribute(n,_),u.fromBufferAttribute(n,M),h.fromBufferAttribute(n,w),l.add(p),u.add(p),h.add(p),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(M,u.x,u.y,u.z),n.setXYZ(w,h.x,h.y,h.z)}else for(let v=0,y=t.count;v<y;v+=3)i.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),p.subVectors(a,s),m.subVectors(i,s),p.cross(m),n.setXYZ(v+0,p.x,p.y,p.z),n.setXYZ(v+1,p.x,p.y,p.z),n.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ci.fromBufferAttribute(e,t),Ci.normalize(),e.setXYZ(t,Ci.x,Ci.y,Ci.z)}toNonIndexed(){function e(l,u){const h=l.array,p=l.itemSize,m=l.normalized,v=new h.constructor(u.length*p);let y=0,_=0;for(let M=0,w=u.length;M<w;M++){l.isInterleavedBufferAttribute?y=u[M]*l.data.stride+l.offset:y=u[M]*p;for(let S=0;S<p;S++)v[_++]=h[y++]}return new Kn(v,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xn,n=this.index.array,i=this.attributes;for(const l in i){const u=i[l],h=e(u,n);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let p=0,m=h.length;p<m;p++){const v=h[p],y=e(v,n);u.push(y)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const h=a[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const h=n[u];e.data.attributes[u]=h.toJSON(e.data)}const i={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],p=[];for(let m=0,v=h.length;m<v;m++){const y=h[m];p.push(y.toJSON(e.data))}p.length>0&&(i[u]=p,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const h in i){const p=i[h];this.setAttribute(h,p.clone(t))}const s=e.morphAttributes;for(const h in s){const p=[],m=s[h];for(let v=0,y=m.length;v<y;v++)p.push(m[v].clone(t));this.morphAttributes[h]=p}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let h=0,p=a.length;h<p;h++){const m=a[h];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const QE=new nn,pd=new gf,yy=new Hi,qE=new Z,xy=new Z,_y=new Z,Ay=new Z,q_=new Z,Sy=new Z,$E=new Z,wy=new Z;class Tr extends On{constructor(e=new xn,t=new Ws){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){Sy.set(0,0,0);for(let u=0,h=s.length;u<h;u++){const p=l[u],m=s[u];p!==0&&(q_.fromBufferAttribute(m,e),a?Sy.addScaledVector(q_,p):Sy.addScaledVector(q_.sub(t),p))}t.add(Sy)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),yy.copy(n.boundingSphere),yy.applyMatrix4(s),pd.copy(e.ray).recast(e.near),!(yy.containsPoint(pd.origin)===!1&&(pd.intersectSphere(yy,qE)===null||pd.origin.distanceToSquared(qE)>(e.far-e.near)**2))&&(QE.copy(s).invert(),pd.copy(e.ray).applyMatrix4(QE),!(n.boundingBox!==null&&pd.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,pd)))}_computeIntersections(e,t,n){let i;const s=this.geometry,a=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,p=s.attributes.uv1,m=s.attributes.normal,v=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(a))for(let _=0,M=v.length;_<M;_++){const w=v[_],S=a[w.materialIndex],T=Math.max(w.start,y.start),R=Math.min(l.count,Math.min(w.start+w.count,y.start+y.count));for(let C=T,k=R;C<k;C+=3){const O=l.getX(C),V=l.getX(C+1),z=l.getX(C+2);i=My(this,S,e,n,h,p,m,O,V,z),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),M=Math.min(l.count,y.start+y.count);for(let w=_,S=M;w<S;w+=3){const T=l.getX(w),R=l.getX(w+1),C=l.getX(w+2);i=My(this,a,e,n,h,p,m,T,R,C),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(u!==void 0)if(Array.isArray(a))for(let _=0,M=v.length;_<M;_++){const w=v[_],S=a[w.materialIndex],T=Math.max(w.start,y.start),R=Math.min(u.count,Math.min(w.start+w.count,y.start+y.count));for(let C=T,k=R;C<k;C+=3){const O=C,V=C+1,z=C+2;i=My(this,S,e,n,h,p,m,O,V,z),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),M=Math.min(u.count,y.start+y.count);for(let w=_,S=M;w<S;w+=3){const T=w,R=w+1,C=w+2;i=My(this,a,e,n,h,p,m,T,R,C),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function VN(r,e,t,n,i,s,a,l){let u;if(e.side===ts?u=n.intersectTriangle(a,s,i,!0,l):u=n.intersectTriangle(i,s,a,e.side===Jo,l),u===null)return null;wy.copy(l),wy.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(wy);return h<t.near||h>t.far?null:{distance:h,point:wy.clone(),object:r}}function My(r,e,t,n,i,s,a,l,u,h){r.getVertexPosition(l,xy),r.getVertexPosition(u,_y),r.getVertexPosition(h,Ay);const p=VN(r,e,t,n,xy,_y,Ay,$E);if(p){const m=new Z;js.getBarycoord($E,xy,_y,Ay,m),i&&(p.uv=js.getInterpolatedAttribute(i,l,u,h,m,new Je)),s&&(p.uv1=js.getInterpolatedAttribute(s,l,u,h,m,new Je)),a&&(p.normal=js.getInterpolatedAttribute(a,l,u,h,m,new Z),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const v={a:l,b:u,c:h,normal:new Z,materialIndex:0};js.getNormal(xy,_y,Ay,v.normal),p.face=v,p.barycoord=m}return p}class vf extends xn{constructor(e=1,t=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const l=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const u=[],h=[],p=[],m=[];let v=0,y=0;_("z","y","x",-1,-1,n,t,e,a,s,0),_("z","y","x",1,-1,n,t,-e,a,s,1),_("x","z","y",1,1,e,n,t,i,a,2),_("x","z","y",1,-1,e,n,-t,i,a,3),_("x","y","z",1,-1,e,t,n,i,s,4),_("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(u),this.setAttribute("position",new Jt(h,3)),this.setAttribute("normal",new Jt(p,3)),this.setAttribute("uv",new Jt(m,2));function _(M,w,S,T,R,C,k,O,V,z,F){const L=C/V,W=k/z,q=C/2,re=k/2,oe=O/2,Se=V+1,he=z+1;let Ee=0,Y=0;const ge=new Z;for(let se=0;se<he;se++){const K=se*W-re;for(let ve=0;ve<Se;ve++){const We=ve*L-q;ge[M]=We*T,ge[w]=K*R,ge[S]=oe,h.push(ge.x,ge.y,ge.z),ge[M]=0,ge[w]=0,ge[S]=O>0?1:-1,p.push(ge.x,ge.y,ge.z),m.push(ve/V),m.push(1-se/z),Ee+=1}}for(let se=0;se<z;se++)for(let K=0;K<V;K++){const ve=v+K+Se*se,We=v+K+Se*(se+1),we=v+(K+1)+Se*(se+1),Le=v+(K+1)+Se*se;u.push(ve,We,Le),u.push(We,we,Le),Y+=6}l.addGroup(y,Y,F),y+=Y,v+=Ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _p(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function vs(r){const e={};for(let t=0;t<r.length;t++){const n=_p(r[t]);for(const i in n)e[i]=n[i]}return e}function jN(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function yR(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:jn.workingColorSpace}const Ew={clone:_p,merge:vs};var WN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,XN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Cs extends yi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=WN,this.fragmentShader=XN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_p(e.uniforms),this.uniformsGroups=jN(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class $g extends On{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn,this.coordinateSystem=zo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Wc=new Z,e1=new Je,t1=new Je;class Gr extends $g{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=xp*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(qd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xp*2*Math.atan(Math.tan(qd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Wc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Wc.x,Wc.y).multiplyScalar(-e/Wc.z),Wc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Wc.x,Wc.y).multiplyScalar(-e/Wc.z)}getViewSize(e,t){return this.getViewBounds(e,e1,t1),t.subVectors(t1,e1)}setViewOffset(e,t,n,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(qd*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,h=a.fullHeight;s+=a.offsetX*i/u,t-=a.offsetY*n/h,i*=a.width/u,n*=a.height/h}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const bh=-90,Th=1;class xR extends On{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Gr(bh,Th,e,t);i.layers=this.layers,this.add(i);const s=new Gr(bh,Th,e,t);s.layers=this.layers,this.add(s);const a=new Gr(bh,Th,e,t);a.layers=this.layers,this.add(a);const l=new Gr(bh,Th,e,t);l.layers=this.layers,this.add(l);const u=new Gr(bh,Th,e,t);u.layers=this.layers,this.add(u);const h=new Gr(bh,Th,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,a,l,u]=t;for(const h of t)this.remove(h);if(e===zo)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Cg)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,u,h,p]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,l),e.setRenderTarget(n,3,i),e.render(t,u),e.setRenderTarget(n,4,i),e.render(t,h),n.texture.generateMipmaps=M,e.setRenderTarget(n,5,i),e.render(t,p),e.setRenderTarget(m,v,y),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class ev extends nr{constructor(e,t,n,i,s,a,l,u,h,p){e=e!==void 0?e:[],t=t!==void 0?t:Ko,super(e,t,n,i,s,a,l,u,h,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Cw extends Js{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new ev(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new vf(5,5,5),s=new Cs({name:"CubemapFromEquirect",uniforms:_p(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ts,blending:Go});s.uniforms.tEquirect.value=t;const a=new Tr(i,s),l=t.minFilter;return t.minFilter===Ia&&(t.minFilter=Jn),new xR(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(s)}}class Mx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new wt(e),this.density=t}clone(){return new Mx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ex{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new wt(e),this.near=t,this.far=n}clone(){return new Ex(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Np extends On{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ca,this.environmentIntensity=1,this.environmentRotation=new ca,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class tv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Eg,this.updateRanges=[],this.version=0,this.uuid=oa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gs=new Z;class _u{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)gs.fromBufferAttribute(this,t),gs.applyMatrix4(e),this.setXYZ(t,gs.x,gs.y,gs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)gs.fromBufferAttribute(this,t),gs.applyNormalMatrix(e),this.setXYZ(t,gs.x,gs.y,gs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)gs.fromBufferAttribute(this,t),gs.transformDirection(e),this.setXYZ(t,gs.x,gs.y,gs.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ms(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=wn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=wn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=wn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=wn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=wn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ms(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ms(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ms(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ms(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array),i=wn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=wn(t,this.array),n=wn(n,this.array),i=wn(i,this.array),s=wn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Kn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _u(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class bw extends yi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Rh;const Gm=new Z,Ih=new Z,Ph=new Z,Bh=new Je,Vm=new Je,_R=new nn,Ey=new Z,jm=new Z,Cy=new Z,n1=new Je,$_=new Je,r1=new Je;class AR extends On{constructor(e=new bw){if(super(),this.isSprite=!0,this.type="Sprite",Rh===void 0){Rh=new xn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new tv(t,5);Rh.setIndex([0,1,2,0,2,3]),Rh.setAttribute("position",new _u(n,3,0,!1)),Rh.setAttribute("uv",new _u(n,2,3,!1))}this.geometry=Rh,this.material=e,this.center=new Je(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ih.setFromMatrixScale(this.matrixWorld),_R.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ph.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ih.multiplyScalar(-Ph.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const a=this.center;by(Ey.set(-.5,-.5,0),Ph,a,Ih,i,s),by(jm.set(.5,-.5,0),Ph,a,Ih,i,s),by(Cy.set(.5,.5,0),Ph,a,Ih,i,s),n1.set(0,0),$_.set(1,0),r1.set(1,1);let l=e.ray.intersectTriangle(Ey,jm,Cy,!1,Gm);if(l===null&&(by(jm.set(-.5,.5,0),Ph,a,Ih,i,s),$_.set(0,1),l=e.ray.intersectTriangle(Ey,Cy,jm,!1,Gm),l===null))return;const u=e.ray.origin.distanceTo(Gm);u<e.near||u>e.far||t.push({distance:u,point:Gm.clone(),uv:js.getInterpolation(Gm,Ey,jm,Cy,n1,$_,r1,new Je),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function by(r,e,t,n,i,s){Bh.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Vm.x=s*Bh.x-i*Bh.y,Vm.y=i*Bh.x+s*Bh.y):Vm.copy(Bh),r.copy(e),r.x+=Vm.x,r.y+=Vm.y,r.applyMatrix4(_R)}const Ty=new Z,i1=new Z;class SR extends On{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Ty.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Ty);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Ty.setFromMatrixPosition(e.matrixWorld),i1.setFromMatrixPosition(this.matrixWorld);const n=Ty.distanceTo(i1)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let a=t[i].distance;if(t[i].object.visible&&(a-=a*t[i].hysteresis),n>=a)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const s1=new Z,a1=new Xn,o1=new Xn,JN=new Z,l1=new nn,Ry=new Z,eA=new Hi,c1=new nn,tA=new gf;class Tw extends Tr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=xS,this.bindMatrix=new nn,this.bindMatrixInverse=new nn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ns),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ry),this.boundingBox.expandByPoint(Ry)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Hi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ry),this.boundingSphere.expandByPoint(Ry)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),eA.copy(this.boundingSphere),eA.applyMatrix4(i),e.ray.intersectsSphere(eA)!==!1&&(c1.copy(i).invert(),tA.copy(e.ray).applyMatrix4(c1),!(this.boundingBox!==null&&tA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,tA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Xn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===xS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===qT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;a1.fromBufferAttribute(i.attributes.skinIndex,e),o1.fromBufferAttribute(i.attributes.skinWeight,e),s1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=o1.getComponent(s);if(a!==0){const l=a1.getComponent(s);l1.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(JN.copy(s1).applyMatrix4(l1),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Cx extends On{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mo extends nr{constructor(e=null,t=1,n=1,i,s,a,l,u,h=Ii,p=Ii,m,v){super(null,a,l,u,h,p,i,s,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const u1=new nn,KN=new nn;class nv{constructor(e=[],t=[]){this.uuid=oa(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new nn;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:KN;u1.multiplyMatrices(l,t[s]),u1.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new nv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new mo(t,e,e,Kr,br);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Cx),this.bones.push(a),this.boneInverses.push(new nn().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class cf extends Kn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Dh=new nn,d1=new nn,Iy=[],f1=new ns,YN=new nn,Wm=new Tr,Xm=new Hi;class Rw extends Tr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cf(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,YN)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ns),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Dh),f1.copy(e.boundingBox).applyMatrix4(Dh),this.boundingBox.union(f1)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Hi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Dh),Xm.copy(e.boundingSphere).applyMatrix4(Dh),this.boundingSphere.union(Xm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let l=0;l<n.length;l++)n[l]=i[a+l]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Wm.geometry=this.geometry,Wm.material=this.material,Wm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xm.copy(this.boundingSphere),Xm.applyMatrix4(n),e.ray.intersectsSphere(Xm)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Dh),d1.multiplyMatrices(n,Dh),Wm.matrixWorld=d1,Wm.raycast(e,Iy);for(let a=0,l=Iy.length;a<l;a++){const u=Iy[a];u.instanceId=s,u.object=this,t.push(u)}Iy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new cf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new mo(new Float32Array(i*this.count),i,this.count,Qg,br));const s=this.morphTexture.source.data.data;let a=0;for(let h=0;h<n.length;h++)a+=n[h];const l=this.geometry.morphTargetsRelative?1:1-a,u=i*e;s[u]=l,s.set(n,u+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const nA=new Z,ZN=new Z,QN=new yn;class ko{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=nA.subVectors(n,t).cross(ZN.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(nA),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||QN.getNormalMatrix(e),i=this.coplanarPoint(nA).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const md=new Hi,Py=new Z;class rv{constructor(e=new ko,t=new ko,n=new ko,i=new ko,s=new ko,a=new ko){this.planes=[e,t,n,i,s,a]}set(e,t,n,i,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=zo){const n=this.planes,i=e.elements,s=i[0],a=i[1],l=i[2],u=i[3],h=i[4],p=i[5],m=i[6],v=i[7],y=i[8],_=i[9],M=i[10],w=i[11],S=i[12],T=i[13],R=i[14],C=i[15];if(n[0].setComponents(u-s,v-h,w-y,C-S).normalize(),n[1].setComponents(u+s,v+h,w+y,C+S).normalize(),n[2].setComponents(u+a,v+p,w+_,C+T).normalize(),n[3].setComponents(u-a,v-p,w-_,C-T).normalize(),n[4].setComponents(u-l,v-m,w-M,C-R).normalize(),t===zo)n[5].setComponents(u+l,v+m,w+M,C+R).normalize();else if(t===Cg)n[5].setComponents(l,m,M,R).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),md.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),md.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(md)}intersectsSprite(e){return md.center.set(0,0,0),md.radius=.7071067811865476,md.applyMatrix4(e.matrixWorld),this.intersectsSphere(md)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Py.x=i.normal.x>0?e.max.x:e.min.x,Py.y=i.normal.y>0?e.max.y:e.min.y,Py.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Py)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function rA(r,e){return r-e}function qN(r,e){return r.z-e.z}function $N(r,e){return e.z-r.z}class eF{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];a.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=i}reset(){this.list.length=0,this.index=0}}const ks=new nn,tF=new wt(1,1,1),iA=new rv,By=new ns,gd=new Hi,Jm=new Z,h1=new Z,nF=new Z,sA=new eF,$i=new Tr,Dy=[];function rF(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,r.getComponent(s,a))}else e.array.set(r.array,t*n);e.needsUpdate=!0}function vd(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)e[n]=r[n]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class wR extends Tr{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,n=t*2,i){super(new xn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new mo(t,e,e,Kr,br);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new mo(t,e,e,qg,Yo);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new mo(t,e,e,Kr,br);n.colorSpace=jn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:l,itemSize:u,normalized:h}=a,p=new l.constructor(n*u),m=new Kn(p,u,h);t.setAttribute(s,m)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Kn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ns);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ks),this.getBoundingBoxAt(s,By).applyMatrix4(ks),e.union(By)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Hi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,ks),this.getBoundingSphereAt(s,gd).applyMatrix4(ks),e.union(gd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(rA),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;ks.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(tF.toArray(a.image.data,i*4),a.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?a.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(rA),u=this._availableGeometryIds.shift(),s[u]=i):(u=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(u,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),l=this._geometryInfo[e];if(i&&a.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const p in n.attributes){const m=t.getAttribute(p),v=n.getAttribute(p);rF(m,v,u);const y=m.itemSize;for(let _=m.count,M=h;_<M;_++){const w=u+_;for(let S=0;S<y;S++)v.setComponent(w,S,0)}v.needsUpdate=!0,v.addUpdateRange(u*y,h*y)}if(i){const p=l.indexStart,m=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<a.count;v++)s.setX(p+v,u+a.getX(v));for(let v=a.count,y=m;v<y;v++)s.setX(p+v,u);s.needsUpdate=!0,s.addUpdateRange(p,l.reservedIndexCount)}return l.start=i?l.indexStart:l.vertexStart,l.count=i?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,s=n.length;i<s;i++)n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((a,l)=>l).sort((a,l)=>n[a].vertexStart-n[l].vertexStart),s=this.geometry;for(let a=0,l=n.length;a<l;a++){const u=i[a],h=n[u];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:p,vertexStart:m,reservedIndexCount:v}=h,y=s.index,_=y.array,M=e-m;for(let w=p;w<p+v;w++)_[w]=_[w]+M;y.array.copyWithin(t,p,p+v),y.addUpdateRange(t,v),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:p,reservedVertexCount:m}=h,v=s.attributes;for(const y in v){const _=v[y],{array:M,itemSize:w}=_;M.copyWithin(e*w,p*w,(p+m)*w),_.addUpdateRange(e*w,m*w)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new ns,a=n.index,l=n.attributes.position;for(let u=i.start,h=i.start+i.count;u<h;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(Jm.fromBufferAttribute(l,p))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Hi;this.getBoundingBoxAt(e,By),By.getCenter(s.center);const a=n.index,l=n.attributes.position;let u=0;for(let h=i.start,p=i.start+i.count;h<p;h++){let m=h;a&&(m=a.getX(m)),Jm.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(Jm))}s.radius=Math.sqrt(u),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(rA);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);vd(this._multiDrawCounts,i),vd(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),vd(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),vd(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),vd(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xn,this._initializeGeometry(s));const a=this.geometry;s.index&&vd(s.index.array,a.index.array);for(const l in s.attributes)vd(s.attributes[l].array,a.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,a=this.geometry;$i.material=this.material,$i.geometry.index=a.index,$i.geometry.attributes=a.attributes,$i.geometry.boundingBox===null&&($i.geometry.boundingBox=new ns),$i.geometry.boundingSphere===null&&($i.geometry.boundingSphere=new Hi);for(let l=0,u=n.length;l<u;l++){if(!n[l].visible||!n[l].active)continue;const h=n[l].geometryIndex,p=i[h];$i.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,$i.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,$i.geometry.boundingBox),this.getBoundingSphereAt(h,$i.geometry.boundingSphere),$i.raycast(e,Dy);for(let m=0,v=Dy.length;m<v;m++){const y=Dy[m];y.object=this,y.batchId=l,t.push(y)}Dy.length=0}$i.material=null,$i.geometry.index=null,$i.geometry.attributes={},$i.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,h=this._multiDrawStarts,p=this._multiDrawCounts,m=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,_=y.image.data;v&&(ks.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),iA.setFromProjectionMatrix(ks,e.coordinateSystem));let M=0;if(this.sortObjects){ks.copy(this.matrixWorld).invert(),Jm.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ks),h1.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ks);for(let T=0,R=u.length;T<R;T++)if(u[T].visible&&u[T].active){const C=u[T].geometryIndex;this.getMatrixAt(T,ks),this.getBoundingSphereAt(C,gd).applyMatrix4(ks);let k=!1;if(v&&(k=!iA.intersectsSphere(gd)),!k){const O=m[C],V=nF.subVectors(gd.center,Jm).dot(h1);sA.push(O.start,O.count,V,T)}}const w=sA.list,S=this.customSort;S===null?w.sort(s.transparent?$N:qN):S.call(this,w,n);for(let T=0,R=w.length;T<R;T++){const C=w[T];h[M]=C.start*l,p[M]=C.count,_[M]=C.index,M++}sA.reset()}else for(let w=0,S=u.length;w<S;w++)if(u[w].visible&&u[w].active){const T=u[w].geometryIndex;let R=!1;if(v&&(this.getMatrixAt(w,ks),this.getBoundingSphereAt(T,gd).applyMatrix4(ks),R=!iA.intersectsSphere(gd)),!R){const C=m[T];h[M]=C.start*l,p[M]=C.count,_[M]=w,M++}}y.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class rs extends yi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ex=new Z,tx=new Z,p1=new nn,Km=new gf,Ly=new Hi,aA=new Z,m1=new Z;class tc extends On{constructor(e=new xn,t=new rs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)ex.fromBufferAttribute(t,i-1),tx.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=ex.distanceTo(tx);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ly.copy(n.boundingSphere),Ly.applyMatrix4(i),Ly.radius+=s,e.ray.intersectsSphere(Ly)===!1)return;p1.copy(i).invert(),Km.copy(e.ray).applyMatrix4(p1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=this.isLineSegments?2:1,p=n.index,v=n.attributes.position;if(p!==null){const y=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count);for(let M=y,w=_-1;M<w;M+=h){const S=p.getX(M),T=p.getX(M+1),R=Ny(this,e,Km,u,S,T);R&&t.push(R)}if(this.isLineLoop){const M=p.getX(_-1),w=p.getX(y),S=Ny(this,e,Km,u,M,w);S&&t.push(S)}}else{const y=Math.max(0,a.start),_=Math.min(v.count,a.start+a.count);for(let M=y,w=_-1;M<w;M+=h){const S=Ny(this,e,Km,u,M,M+1);S&&t.push(S)}if(this.isLineLoop){const M=Ny(this,e,Km,u,_-1,y);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Ny(r,e,t,n,i,s){const a=r.geometry.attributes.position;if(ex.fromBufferAttribute(a,i),tx.fromBufferAttribute(a,s),t.distanceSqToSegment(ex,tx,aA,m1)>n)return;aA.applyMatrix4(r.matrixWorld);const u=e.ray.origin.distanceTo(aA);if(!(u<e.near||u>e.far))return{distance:u,point:m1.clone().applyMatrix4(r.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:r}}const g1=new Z,v1=new Z;class go extends tc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)g1.fromBufferAttribute(t,i),v1.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+g1.distanceTo(v1);e.setAttribute("lineDistance",new Jt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Iw extends tc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class bx extends yi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const y1=new nn,wS=new gf,Fy=new Hi,Oy=new Z;class Pw extends On{constructor(e=new xn,t=new bx){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Fy.copy(n.boundingSphere),Fy.applyMatrix4(i),Fy.radius+=s,e.ray.intersectsSphere(Fy)===!1)return;y1.copy(i).invert(),wS.copy(e.ray).applyMatrix4(y1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=n.index,m=n.attributes.position;if(h!==null){const v=Math.max(0,a.start),y=Math.min(h.count,a.start+a.count);for(let _=v,M=y;_<M;_++){const w=h.getX(_);Oy.fromBufferAttribute(m,w),x1(Oy,w,u,i,e,t,this)}}else{const v=Math.max(0,a.start),y=Math.min(m.count,a.start+a.count);for(let _=v,M=y;_<M;_++)Oy.fromBufferAttribute(m,_),x1(Oy,_,u,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function x1(r,e,t,n,i,s,a){const l=wS.distanceSqToPoint(r);if(l<t){const u=new Z;wS.closestPointToPoint(r,u),u.applyMatrix4(n);const h=i.ray.origin.distanceTo(u);if(h<i.near||h>i.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class Kl extends On{constructor(){super(),this.isGroup=!0,this.type="Group"}}class iF extends nr{constructor(e,t,n,i,s,a,l,u,h){super(e,t,n,i,s,a,l,u,h),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Jn,this.magFilter=s!==void 0?s:Jn,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class sF extends nr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ii,this.minFilter=Ii,this.generateMipmaps=!1,this.needsUpdate=!0}}class Tx extends nr{constructor(e,t,n,i,s,a,l,u,h,p,m,v){super(null,a,l,u,h,p,i,s,m,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class aF extends Tx{constructor(e,t,n,i,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Jr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class oF extends Tx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Ko),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class MR extends nr{constructor(e,t,n,i,s,a,l,u,h){super(e,t,n,i,s,a,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Rx extends nr{constructor(e,t,n,i,s,a,l,u,h,p=Qd){if(p!==Qd&&p!==lf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===Qd&&(n=Yo),n===void 0&&p===lf&&(n=of),super(null,i,s,a,l,u,p,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Ii,this.minFilter=u!==void 0?u:Ii,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class vo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let l=0,u=s-1,h;for(;l<=u;)if(i=Math.floor(l+(u-l)/2),h=n[i]-a,h<0)l=i+1;else if(h>0)u=i-1;else{u=i;break}if(i=u,n[i]===a)return i/(s-1);const p=n[i],v=n[i+1]-p,y=(a-p)/v;return(i+y)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),l=this.getPoint(s),u=t||(a.isVector2?new Je:new Z);return u.copy(l).sub(a).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Z,i=[],s=[],a=[],l=new Z,u=new nn;for(let y=0;y<=e;y++){const _=y/e;i[y]=this.getTangentAt(_,new Z)}s[0]=new Z,a[0]=new Z;let h=Number.MAX_VALUE;const p=Math.abs(i[0].x),m=Math.abs(i[0].y),v=Math.abs(i[0].z);p<=h&&(h=p,n.set(1,0,0)),m<=h&&(h=m,n.set(0,1,0)),v<=h&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],l),a[0].crossVectors(i[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),a[y]=a[y-1].clone(),l.crossVectors(i[y-1],i[y]),l.length()>Number.EPSILON){l.normalize();const _=Math.acos(pn(i[y-1].dot(i[y]),-1,1));s[y].applyMatrix4(u.makeRotationAxis(l,_))}a[y].crossVectors(i[y],s[y])}if(t===!0){let y=Math.acos(pn(s[0].dot(s[e]),-1,1));y/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let _=1;_<=e;_++)s[_].applyMatrix4(u.makeRotationAxis(i[_],y*_)),a[_].crossVectors(i[_],s[_])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ix extends vo{constructor(e=0,t=0,n=1,i=1,s=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new Je){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(a?s=0:s=i),this.aClockwise===!0&&!a&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=u-this.aX,y=h-this.aY;u=v*p-y*m+this.aX,h=v*m+y*p+this.aY}return n.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ER extends Ix{constructor(e,t,n,i,s,a){super(e,t,n,n,i,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Bw(){let r=0,e=0,t=0,n=0;function i(s,a,l,u){r=s,e=l,t=-3*s+3*a-2*l-u,n=2*s-2*a+l+u}return{initCatmullRom:function(s,a,l,u,h){i(a,l,h*(l-s),h*(u-a))},initNonuniformCatmullRom:function(s,a,l,u,h,p,m){let v=(a-s)/h-(l-s)/(h+p)+(l-a)/p,y=(l-a)/p-(u-a)/(p+m)+(u-l)/m;v*=p,y*=p,i(a,l,v,y)},calc:function(s){const a=s*s,l=a*s;return r+e*s+t*a+n*l}}}const Uy=new Z,oA=new Bw,lA=new Bw,cA=new Bw;class CR extends vo{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new Z){const n=t,i=this.points,s=i.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let h,p;this.closed||l>0?h=i[(l-1)%s]:(Uy.subVectors(i[0],i[1]).add(i[0]),h=Uy);const m=i[l%s],v=i[(l+1)%s];if(this.closed||l+2<s?p=i[(l+2)%s]:(Uy.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=Uy),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(h.distanceToSquared(m),y),M=Math.pow(m.distanceToSquared(v),y),w=Math.pow(v.distanceToSquared(p),y);M<1e-4&&(M=1),_<1e-4&&(_=M),w<1e-4&&(w=M),oA.initNonuniformCatmullRom(h.x,m.x,v.x,p.x,_,M,w),lA.initNonuniformCatmullRom(h.y,m.y,v.y,p.y,_,M,w),cA.initNonuniformCatmullRom(h.z,m.z,v.z,p.z,_,M,w)}else this.curveType==="catmullrom"&&(oA.initCatmullRom(h.x,m.x,v.x,p.x,this.tension),lA.initCatmullRom(h.y,m.y,v.y,p.y,this.tension),cA.initCatmullRom(h.z,m.z,v.z,p.z,this.tension));return n.set(oA.calc(u),lA.calc(u),cA.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Z().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _1(r,e,t,n,i){const s=(n-e)*.5,a=(i-t)*.5,l=r*r,u=r*l;return(2*t-2*n+s+a)*u+(-3*t+3*n-2*s-a)*l+s*r+t}function lF(r,e){const t=1-r;return t*t*e}function cF(r,e){return 2*(1-r)*r*e}function uF(r,e){return r*r*e}function mg(r,e,t,n){return lF(r,e)+cF(r,t)+uF(r,n)}function dF(r,e){const t=1-r;return t*t*t*e}function fF(r,e){const t=1-r;return 3*t*t*r*e}function hF(r,e){return 3*(1-r)*r*r*e}function pF(r,e){return r*r*r*e}function gg(r,e,t,n,i){return dF(r,e)+fF(r,t)+hF(r,n)+pF(r,i)}class Dw extends vo{constructor(e=new Je,t=new Je,n=new Je,i=new Je){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Je){const n=t,i=this.v0,s=this.v1,a=this.v2,l=this.v3;return n.set(gg(e,i.x,s.x,a.x,l.x),gg(e,i.y,s.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bR extends vo{constructor(e=new Z,t=new Z,n=new Z,i=new Z){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Z){const n=t,i=this.v0,s=this.v1,a=this.v2,l=this.v3;return n.set(gg(e,i.x,s.x,a.x,l.x),gg(e,i.y,s.y,a.y,l.y),gg(e,i.z,s.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lw extends vo{constructor(e=new Je,t=new Je){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Je){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Je){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TR extends vo{constructor(e=new Z,t=new Z){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Z){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nw extends vo{constructor(e=new Je,t=new Je,n=new Je){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Je){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(mg(e,i.x,s.x,a.x),mg(e,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Fw extends vo{constructor(e=new Z,t=new Z,n=new Z){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Z){const n=t,i=this.v0,s=this.v1,a=this.v2;return n.set(mg(e,i.x,s.x,a.x),mg(e,i.y,s.y,a.y),mg(e,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ow extends vo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Je){const n=t,i=this.points,s=(i.length-1)*e,a=Math.floor(s),l=s-a,u=i[a===0?a:a-1],h=i[a],p=i[a>i.length-2?i.length-1:a+1],m=i[a>i.length-3?i.length-1:a+2];return n.set(_1(l,u.x,h.x,p.x,m.x),_1(l,u.y,h.y,p.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Je().fromArray(i))}return this}}var nx=Object.freeze({__proto__:null,ArcCurve:ER,CatmullRomCurve3:CR,CubicBezierCurve:Dw,CubicBezierCurve3:bR,EllipseCurve:Ix,LineCurve:Lw,LineCurve3:TR,QuadraticBezierCurve:Nw,QuadraticBezierCurve3:Fw,SplineCurve:Ow});class RR extends vo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nx[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const a=i[s]-n,l=this.curves[s],u=l.getLength(),h=u===0?0:1-a/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const a=s[i],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(l);for(let h=0;h<u.length;h++){const p=u[h];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new nx[i.type]().fromJSON(i))}return this}}class Tg extends RR{constructor(e){super(),this.type="Path",this.currentPoint=new Je,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Lw(this.currentPoint.clone(),new Je(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new Nw(this.currentPoint.clone(),new Je(e,t),new Je(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,a){const l=new Dw(this.currentPoint.clone(),new Je(e,t),new Je(n,i),new Je(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Ow(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,n,i,s,a),this}absarc(e,t,n,i,s,a){return this.absellipse(e,t,n,n,i,s,a),this}ellipse(e,t,n,i,s,a,l,u){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+h,t+p,n,i,s,a,l,u),this}absellipse(e,t,n,i,s,a,l,u){const h=new Ix(e,t,n,i,s,a,l,u);if(this.curves.length>0){const m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);const p=h.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class iv extends xn{constructor(e=[new Je(0,-.5),new Je(.5,0),new Je(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=pn(i,0,Math.PI*2);const s=[],a=[],l=[],u=[],h=[],p=1/t,m=new Z,v=new Je,y=new Z,_=new Z,M=new Z;let w=0,S=0;for(let T=0;T<=e.length-1;T++)switch(T){case 0:w=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-w,y.z=S*0,M.copy(y),y.normalize(),u.push(y.x,y.y,y.z);break;case e.length-1:u.push(M.x,M.y,M.z);break;default:w=e[T+1].x-e[T].x,S=e[T+1].y-e[T].y,y.x=S*1,y.y=-w,y.z=S*0,_.copy(y),y.x+=M.x,y.y+=M.y,y.z+=M.z,y.normalize(),u.push(y.x,y.y,y.z),M.copy(_)}for(let T=0;T<=t;T++){const R=n+T*p*i,C=Math.sin(R),k=Math.cos(R);for(let O=0;O<=e.length-1;O++){m.x=e[O].x*C,m.y=e[O].y,m.z=e[O].x*k,a.push(m.x,m.y,m.z),v.x=T/t,v.y=O/(e.length-1),l.push(v.x,v.y);const V=u[3*O+0]*C,z=u[3*O+1],F=u[3*O+0]*k;h.push(V,z,F)}}for(let T=0;T<t;T++)for(let R=0;R<e.length-1;R++){const C=R+T*e.length,k=C,O=C+e.length,V=C+e.length+1,z=C+1;s.push(k,O,z),s.push(V,z,O)}this.setIndex(s),this.setAttribute("position",new Jt(a,3)),this.setAttribute("uv",new Jt(l,2)),this.setAttribute("normal",new Jt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iv(e.points,e.segments,e.phiStart,e.phiLength)}}class Px extends iv{constructor(e=1,t=1,n=4,i=8){const s=new Tg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Px(e.radius,e.length,e.capSegments,e.radialSegments)}}class Bx extends xn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],a=[],l=[],u=[],h=new Z,p=new Je;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=n+m/t*i;h.x=e*Math.cos(y),h.y=e*Math.sin(y),a.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(a[v]/e+1)/2,p.y=(a[v+1]/e+1)/2,u.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Jt(a,3)),this.setAttribute("normal",new Jt(l,3)),this.setAttribute("uv",new Jt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fp extends xn{constructor(e=1,t=1,n=1,i=32,s=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:u};const h=this;i=Math.floor(i),s=Math.floor(s);const p=[],m=[],v=[],y=[];let _=0;const M=[],w=n/2;let S=0;T(),a===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(p),this.setAttribute("position",new Jt(m,3)),this.setAttribute("normal",new Jt(v,3)),this.setAttribute("uv",new Jt(y,2));function T(){const C=new Z,k=new Z;let O=0;const V=(t-e)/n;for(let z=0;z<=s;z++){const F=[],L=z/s,W=L*(t-e)+e;for(let q=0;q<=i;q++){const re=q/i,oe=re*u+l,Se=Math.sin(oe),he=Math.cos(oe);k.x=W*Se,k.y=-L*n+w,k.z=W*he,m.push(k.x,k.y,k.z),C.set(Se,V,he).normalize(),v.push(C.x,C.y,C.z),y.push(re,1-L),F.push(_++)}M.push(F)}for(let z=0;z<i;z++)for(let F=0;F<s;F++){const L=M[F][z],W=M[F+1][z],q=M[F+1][z+1],re=M[F][z+1];(e>0||F!==0)&&(p.push(L,W,re),O+=3),(t>0||F!==s-1)&&(p.push(W,q,re),O+=3)}h.addGroup(S,O,0),S+=O}function R(C){const k=_,O=new Je,V=new Z;let z=0;const F=C===!0?e:t,L=C===!0?1:-1;for(let q=1;q<=i;q++)m.push(0,w*L,0),v.push(0,L,0),y.push(.5,.5),_++;const W=_;for(let q=0;q<=i;q++){const oe=q/i*u+l,Se=Math.cos(oe),he=Math.sin(oe);V.x=F*he,V.y=w*L,V.z=F*Se,m.push(V.x,V.y,V.z),v.push(0,L,0),O.x=Se*.5+.5,O.y=he*.5*L+.5,y.push(O.x,O.y),_++}for(let q=0;q<i;q++){const re=k+q,oe=W+q;C===!0?p.push(oe,oe+1,re):p.push(oe+1,oe,re),z+=3}h.addGroup(S,z,C===!0?1:2),S+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dx extends Fp{constructor(e=1,t=1,n=32,i=1,s=!1,a=0,l=Math.PI*2){super(0,e,t,n,i,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new Dx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mu extends xn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],a=[];l(i),h(n),p(),this.setAttribute("position",new Jt(s,3)),this.setAttribute("normal",new Jt(s.slice(),3)),this.setAttribute("uv",new Jt(a,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const R=new Z,C=new Z,k=new Z;for(let O=0;O<t.length;O+=3)y(t[O+0],R),y(t[O+1],C),y(t[O+2],k),u(R,C,k,T)}function u(T,R,C,k){const O=k+1,V=[];for(let z=0;z<=O;z++){V[z]=[];const F=T.clone().lerp(C,z/O),L=R.clone().lerp(C,z/O),W=O-z;for(let q=0;q<=W;q++)q===0&&z===O?V[z][q]=F:V[z][q]=F.clone().lerp(L,q/W)}for(let z=0;z<O;z++)for(let F=0;F<2*(O-z)-1;F++){const L=Math.floor(F/2);F%2===0?(v(V[z][L+1]),v(V[z+1][L]),v(V[z][L])):(v(V[z][L+1]),v(V[z+1][L+1]),v(V[z+1][L]))}}function h(T){const R=new Z;for(let C=0;C<s.length;C+=3)R.x=s[C+0],R.y=s[C+1],R.z=s[C+2],R.normalize().multiplyScalar(T),s[C+0]=R.x,s[C+1]=R.y,s[C+2]=R.z}function p(){const T=new Z;for(let R=0;R<s.length;R+=3){T.x=s[R+0],T.y=s[R+1],T.z=s[R+2];const C=w(T)/2/Math.PI+.5,k=S(T)/Math.PI+.5;a.push(C,1-k)}_(),m()}function m(){for(let T=0;T<a.length;T+=6){const R=a[T+0],C=a[T+2],k=a[T+4],O=Math.max(R,C,k),V=Math.min(R,C,k);O>.9&&V<.1&&(R<.2&&(a[T+0]+=1),C<.2&&(a[T+2]+=1),k<.2&&(a[T+4]+=1))}}function v(T){s.push(T.x,T.y,T.z)}function y(T,R){const C=T*3;R.x=e[C+0],R.y=e[C+1],R.z=e[C+2]}function _(){const T=new Z,R=new Z,C=new Z,k=new Z,O=new Je,V=new Je,z=new Je;for(let F=0,L=0;F<s.length;F+=9,L+=6){T.set(s[F+0],s[F+1],s[F+2]),R.set(s[F+3],s[F+4],s[F+5]),C.set(s[F+6],s[F+7],s[F+8]),O.set(a[L+0],a[L+1]),V.set(a[L+2],a[L+3]),z.set(a[L+4],a[L+5]),k.copy(T).add(R).add(C).divideScalar(3);const W=w(k);M(O,L+0,T,W),M(V,L+2,R,W),M(z,L+4,C,W)}}function M(T,R,C,k){k<0&&T.x===1&&(a[R]=T.x-1),C.x===0&&C.z===0&&(a[R]=k/2/Math.PI+.5)}function w(T){return Math.atan2(T.z,-T.x)}function S(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mu(e.vertices,e.indices,e.radius,e.details)}}class Lx extends Mu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lx(e.radius,e.detail)}}const ky=new Z,zy=new Z,uA=new Z,Hy=new js;class IR extends xn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(qd*t),a=e.getIndex(),l=e.getAttribute("position"),u=a?a.count:l.count,h=[0,0,0],p=["a","b","c"],m=new Array(3),v={},y=[];for(let _=0;_<u;_+=3){a?(h[0]=a.getX(_),h[1]=a.getX(_+1),h[2]=a.getX(_+2)):(h[0]=_,h[1]=_+1,h[2]=_+2);const{a:M,b:w,c:S}=Hy;if(M.fromBufferAttribute(l,h[0]),w.fromBufferAttribute(l,h[1]),S.fromBufferAttribute(l,h[2]),Hy.getNormal(uA),m[0]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,m[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[2]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let T=0;T<3;T++){const R=(T+1)%3,C=m[T],k=m[R],O=Hy[p[T]],V=Hy[p[R]],z=`${C}_${k}`,F=`${k}_${C}`;F in v&&v[F]?(uA.dot(v[F].normal)<=s&&(y.push(O.x,O.y,O.z),y.push(V.x,V.y,V.z)),v[F]=null):z in v||(v[z]={index0:h[T],index1:h[R],normal:uA.clone()})}}for(const _ in v)if(v[_]){const{index0:M,index1:w}=v[_];ky.fromBufferAttribute(l,M),zy.fromBufferAttribute(l,w),y.push(ky.x,ky.y,ky.z),y.push(zy.x,zy.y,zy.z)}this.setAttribute("position",new Jt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ef extends Tg{constructor(e){super(e),this.uuid=oa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Tg().fromJSON(i))}return this}}const mF={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=PR(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,u,h,p,m,v,y;if(n&&(s=_F(r,e,s,t)),r.length>80*t){l=h=r[0],u=p=r[1];for(let _=t;_<i;_+=t)m=r[_],v=r[_+1],m<l&&(l=m),v<u&&(u=v),m>h&&(h=m),v>p&&(p=v);y=Math.max(h-l,p-u),y=y!==0?32767/y:0}return Rg(s,a,t,l,u,y,0),a}};function PR(r,e,t,n,i){let s,a;if(i===PF(r,e,t,n)>0)for(s=e;s<t;s+=n)a=A1(s,r[s],r[s+1],a);else for(s=t-n;s>=e;s-=n)a=A1(s,r[s],r[s+1],a);return a&&Nx(a,a.next)&&(Pg(a),a=a.next),a}function uf(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Nx(t,t.next)||Lr(t.prev,t,t.next)===0)){if(Pg(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Rg(r,e,t,n,i,s,a){if(!r)return;!a&&s&&EF(r,n,i,s);let l=r,u,h;for(;r.prev!==r.next;){if(u=r.prev,h=r.next,s?vF(r,n,i,s):gF(r)){e.push(u.i/t|0),e.push(r.i/t|0),e.push(h.i/t|0),Pg(r),r=h.next,l=h.next;continue}if(r=h,r===l){a?a===1?(r=yF(uf(r),e,t),Rg(r,e,t,n,i,s,2)):a===2&&xF(r,e,t,n,i,s):Rg(uf(r),e,t,n,i,s,1);break}}}function gF(r){const e=r.prev,t=r,n=r.next;if(Lr(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,l=e.y,u=t.y,h=n.y,p=i<s?i<a?i:a:s<a?s:a,m=l<u?l<h?l:h:u<h?u:h,v=i>s?i>a?i:a:s>a?s:a,y=l>u?l>h?l:h:u>h?u:h;let _=n.next;for(;_!==e;){if(_.x>=p&&_.x<=v&&_.y>=m&&_.y<=y&&Wh(i,l,s,u,a,h,_.x,_.y)&&Lr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function vF(r,e,t,n){const i=r.prev,s=r,a=r.next;if(Lr(i,s,a)>=0)return!1;const l=i.x,u=s.x,h=a.x,p=i.y,m=s.y,v=a.y,y=l<u?l<h?l:h:u<h?u:h,_=p<m?p<v?p:v:m<v?m:v,M=l>u?l>h?l:h:u>h?u:h,w=p>m?p>v?p:v:m>v?m:v,S=MS(y,_,e,t,n),T=MS(M,w,e,t,n);let R=r.prevZ,C=r.nextZ;for(;R&&R.z>=S&&C&&C.z<=T;){if(R.x>=y&&R.x<=M&&R.y>=_&&R.y<=w&&R!==i&&R!==a&&Wh(l,p,u,m,h,v,R.x,R.y)&&Lr(R.prev,R,R.next)>=0||(R=R.prevZ,C.x>=y&&C.x<=M&&C.y>=_&&C.y<=w&&C!==i&&C!==a&&Wh(l,p,u,m,h,v,C.x,C.y)&&Lr(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;R&&R.z>=S;){if(R.x>=y&&R.x<=M&&R.y>=_&&R.y<=w&&R!==i&&R!==a&&Wh(l,p,u,m,h,v,R.x,R.y)&&Lr(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;C&&C.z<=T;){if(C.x>=y&&C.x<=M&&C.y>=_&&C.y<=w&&C!==i&&C!==a&&Wh(l,p,u,m,h,v,C.x,C.y)&&Lr(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function yF(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!Nx(i,s)&&BR(i,n,n.next,s)&&Ig(i,s)&&Ig(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Pg(n),Pg(n.next),n=r=s),n=n.next}while(n!==r);return uf(n)}function xF(r,e,t,n,i,s){let a=r;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&TF(a,l)){let u=DR(a,l);a=uf(a,a.next),u=uf(u,u.next),Rg(a,e,t,n,i,s,0),Rg(u,e,t,n,i,s,0);return}l=l.next}a=a.next}while(a!==r)}function _F(r,e,t,n){const i=[];let s,a,l,u,h;for(s=0,a=e.length;s<a;s++)l=e[s]*n,u=s<a-1?e[s+1]*n:r.length,h=PR(r,l,u,n,!1),h===h.next&&(h.steiner=!0),i.push(bF(h));for(i.sort(AF),s=0;s<i.length;s++)t=SF(i[s],t);return t}function AF(r,e){return r.x-e.x}function SF(r,e){const t=wF(r,e);if(!t)return e;const n=DR(t,r);return uf(n,n.next),uf(t,t.next)}function wF(r,e){let t=e,n=-1/0,i;const s=r.x,a=r.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=s&&v>n&&(n=v,i=t.x<t.next.x?t:t.next,v===s))return i}t=t.next}while(t!==e);if(!i)return null;const l=i,u=i.x,h=i.y;let p=1/0,m;t=i;do s>=t.x&&t.x>=u&&s!==t.x&&Wh(a<h?s:n,a,u,h,a<h?n:s,a,t.x,t.y)&&(m=Math.abs(a-t.y)/(s-t.x),Ig(t,r)&&(m<p||m===p&&(t.x>i.x||t.x===i.x&&MF(i,t)))&&(i=t,p=m)),t=t.next;while(t!==l);return i}function MF(r,e){return Lr(r.prev,r,e.prev)<0&&Lr(e.next,r,r.next)<0}function EF(r,e,t,n){let i=r;do i.z===0&&(i.z=MS(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,CF(i)}function CF(r){let e,t,n,i,s,a,l,u,h=1;do{for(t=r,r=null,s=null,a=0;t;){for(a++,n=t,l=0,e=0;e<h&&(l++,n=n.nextZ,!!n);e++);for(u=h;l>0||u>0&&n;)l!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,h*=2}while(a>1);return r}function MS(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function bF(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Wh(r,e,t,n,i,s,a,l){return(i-a)*(e-l)>=(r-a)*(s-l)&&(r-a)*(n-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(i-a)*(n-l)}function TF(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!RF(r,e)&&(Ig(r,e)&&Ig(e,r)&&IF(r,e)&&(Lr(r.prev,r,e.prev)||Lr(r,e.prev,e))||Nx(r,e)&&Lr(r.prev,r,r.next)>0&&Lr(e.prev,e,e.next)>0)}function Lr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Nx(r,e){return r.x===e.x&&r.y===e.y}function BR(r,e,t,n){const i=Vy(Lr(r,e,t)),s=Vy(Lr(r,e,n)),a=Vy(Lr(t,n,r)),l=Vy(Lr(t,n,e));return!!(i!==s&&a!==l||i===0&&Gy(r,t,e)||s===0&&Gy(r,n,e)||a===0&&Gy(t,r,n)||l===0&&Gy(t,e,n))}function Gy(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Vy(r){return r>0?1:r<0?-1:0}function RF(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&BR(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Ig(r,e){return Lr(r.prev,r,r.next)<0?Lr(r,e,r.next)>=0&&Lr(r,r.prev,e)>=0:Lr(r,e,r.prev)<0||Lr(r,r.next,e)<0}function IF(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function DR(r,e){const t=new ES(r.i,r.x,r.y),n=new ES(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function A1(r,e,t,n){const i=new ES(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Pg(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function ES(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function PF(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}class jo{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return jo.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];S1(e),w1(n,e);let a=e.length;t.forEach(S1);for(let u=0;u<t.length;u++)i.push(a),a+=t[u].length,w1(n,t[u]);const l=mF.triangulate(n,i);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function S1(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function w1(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Fx extends xn{constructor(e=new ef([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];a(h)}this.setAttribute("position",new Jt(i,3)),this.setAttribute("uv",new Jt(s,2)),this.computeVertexNormals();function a(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const S=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:BF;let R,C=!1,k,O,V,z;S&&(R=S.getSpacedPoints(p),C=!0,v=!1,k=S.computeFrenetFrames(p,!1),O=new Z,V=new Z,z=new Z),v||(w=0,y=0,_=0,M=0);const F=l.extractPoints(h);let L=F.shape;const W=F.holes;if(!jo.isClockWise(L)){L=L.reverse();for(let Ke=0,Ze=W.length;Ke<Ze;Ke++){const ee=W[Ke];jo.isClockWise(ee)&&(W[Ke]=ee.reverse())}}const re=jo.triangulateShape(L,W),oe=L;for(let Ke=0,Ze=W.length;Ke<Ze;Ke++){const ee=W[Ke];L=L.concat(ee)}function Se(Ke,Ze,ee){return Ze||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ke.clone().addScaledVector(Ze,ee)}const he=L.length,Ee=re.length;function Y(Ke,Ze,ee){let Dt,et,At;const at=Ke.x-Ze.x,Kt=Ke.y-Ze.y,ht=ee.x-Ke.x,N=ee.y-Ke.y,D=at*at+Kt*Kt,Q=at*N-Kt*ht;if(Math.abs(Q)>Number.EPSILON){const ye=Math.sqrt(D),xe=Math.sqrt(ht*ht+N*N),pe=Ze.x-Kt/ye,je=Ze.y+at/ye,Ye=ee.x-N/xe,$e=ee.y+ht/xe,kt=((Ye-pe)*N-($e-je)*ht)/(at*N-Kt*ht);Dt=pe+at*kt-Ke.x,et=je+Kt*kt-Ke.y;const qe=Dt*Dt+et*et;if(qe<=2)return new Je(Dt,et);At=Math.sqrt(qe/2)}else{let ye=!1;at>Number.EPSILON?ht>Number.EPSILON&&(ye=!0):at<-Number.EPSILON?ht<-Number.EPSILON&&(ye=!0):Math.sign(Kt)===Math.sign(N)&&(ye=!0),ye?(Dt=-Kt,et=at,At=Math.sqrt(D)):(Dt=at,et=Kt,At=Math.sqrt(D/2))}return new Je(Dt/At,et/At)}const ge=[];for(let Ke=0,Ze=oe.length,ee=Ze-1,Dt=Ke+1;Ke<Ze;Ke++,ee++,Dt++)ee===Ze&&(ee=0),Dt===Ze&&(Dt=0),ge[Ke]=Y(oe[Ke],oe[ee],oe[Dt]);const se=[];let K,ve=ge.concat();for(let Ke=0,Ze=W.length;Ke<Ze;Ke++){const ee=W[Ke];K=[];for(let Dt=0,et=ee.length,At=et-1,at=Dt+1;Dt<et;Dt++,At++,at++)At===et&&(At=0),at===et&&(at=0),K[Dt]=Y(ee[Dt],ee[At],ee[at]);se.push(K),ve=ve.concat(K)}for(let Ke=0;Ke<w;Ke++){const Ze=Ke/w,ee=y*Math.cos(Ze*Math.PI/2),Dt=_*Math.sin(Ze*Math.PI/2)+M;for(let et=0,At=oe.length;et<At;et++){const at=Se(oe[et],ge[et],Dt);He(at.x,at.y,-ee)}for(let et=0,At=W.length;et<At;et++){const at=W[et];K=se[et];for(let Kt=0,ht=at.length;Kt<ht;Kt++){const N=Se(at[Kt],K[Kt],Dt);He(N.x,N.y,-ee)}}}const We=_+M;for(let Ke=0;Ke<he;Ke++){const Ze=v?Se(L[Ke],ve[Ke],We):L[Ke];C?(V.copy(k.normals[0]).multiplyScalar(Ze.x),O.copy(k.binormals[0]).multiplyScalar(Ze.y),z.copy(R[0]).add(V).add(O),He(z.x,z.y,z.z)):He(Ze.x,Ze.y,0)}for(let Ke=1;Ke<=p;Ke++)for(let Ze=0;Ze<he;Ze++){const ee=v?Se(L[Ze],ve[Ze],We):L[Ze];C?(V.copy(k.normals[Ke]).multiplyScalar(ee.x),O.copy(k.binormals[Ke]).multiplyScalar(ee.y),z.copy(R[Ke]).add(V).add(O),He(z.x,z.y,z.z)):He(ee.x,ee.y,m/p*Ke)}for(let Ke=w-1;Ke>=0;Ke--){const Ze=Ke/w,ee=y*Math.cos(Ze*Math.PI/2),Dt=_*Math.sin(Ze*Math.PI/2)+M;for(let et=0,At=oe.length;et<At;et++){const at=Se(oe[et],ge[et],Dt);He(at.x,at.y,m+ee)}for(let et=0,At=W.length;et<At;et++){const at=W[et];K=se[et];for(let Kt=0,ht=at.length;Kt<ht;Kt++){const N=Se(at[Kt],K[Kt],Dt);C?He(N.x,N.y+R[p-1].y,R[p-1].x+ee):He(N.x,N.y,m+ee)}}}we(),Le();function we(){const Ke=i.length/3;if(v){let Ze=0,ee=he*Ze;for(let Dt=0;Dt<Ee;Dt++){const et=re[Dt];rt(et[2]+ee,et[1]+ee,et[0]+ee)}Ze=p+w*2,ee=he*Ze;for(let Dt=0;Dt<Ee;Dt++){const et=re[Dt];rt(et[0]+ee,et[1]+ee,et[2]+ee)}}else{for(let Ze=0;Ze<Ee;Ze++){const ee=re[Ze];rt(ee[2],ee[1],ee[0])}for(let Ze=0;Ze<Ee;Ze++){const ee=re[Ze];rt(ee[0]+he*p,ee[1]+he*p,ee[2]+he*p)}}n.addGroup(Ke,i.length/3-Ke,0)}function Le(){const Ke=i.length/3;let Ze=0;Fe(oe,Ze),Ze+=oe.length;for(let ee=0,Dt=W.length;ee<Dt;ee++){const et=W[ee];Fe(et,Ze),Ze+=et.length}n.addGroup(Ke,i.length/3-Ke,1)}function Fe(Ke,Ze){let ee=Ke.length;for(;--ee>=0;){const Dt=ee;let et=ee-1;et<0&&(et=Ke.length-1);for(let At=0,at=p+w*2;At<at;At++){const Kt=he*At,ht=he*(At+1),N=Ze+Dt+Kt,D=Ze+et+Kt,Q=Ze+et+ht,ye=Ze+Dt+ht;yt(N,D,Q,ye)}}}function He(Ke,Ze,ee){u.push(Ke),u.push(Ze),u.push(ee)}function rt(Ke,Ze,ee){Rt(Ke),Rt(Ze),Rt(ee);const Dt=i.length/3,et=T.generateTopUV(n,i,Dt-3,Dt-2,Dt-1);Qt(et[0]),Qt(et[1]),Qt(et[2])}function yt(Ke,Ze,ee,Dt){Rt(Ke),Rt(Ze),Rt(Dt),Rt(Ze),Rt(ee),Rt(Dt);const et=i.length/3,At=T.generateSideWallUV(n,i,et-6,et-3,et-2,et-1);Qt(At[0]),Qt(At[1]),Qt(At[3]),Qt(At[1]),Qt(At[2]),Qt(At[3])}function Rt(Ke){i.push(u[Ke*3+0]),i.push(u[Ke*3+1]),i.push(u[Ke*3+2])}function Qt(Ke){s.push(Ke.x),s.push(Ke.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return DF(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new nx[i.type]().fromJSON(i)),new Fx(n,e.options)}}const BF={generateTopUV:function(r,e,t,n,i){const s=e[t*3],a=e[t*3+1],l=e[n*3],u=e[n*3+1],h=e[i*3],p=e[i*3+1];return[new Je(s,a),new Je(l,u),new Je(h,p)]},generateSideWallUV:function(r,e,t,n,i,s){const a=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[n*3],p=e[n*3+1],m=e[n*3+2],v=e[i*3],y=e[i*3+1],_=e[i*3+2],M=e[s*3],w=e[s*3+1],S=e[s*3+2];return Math.abs(l-p)<Math.abs(a-h)?[new Je(a,1-u),new Je(h,1-m),new Je(v,1-_),new Je(M,1-S)]:[new Je(l,1-u),new Je(p,1-m),new Je(y,1-_),new Je(w,1-S)]}};function DF(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class sv extends Mu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sv(e.radius,e.detail)}}class av extends Mu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new av(e.radius,e.detail)}}class Eu extends xn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,a=t/2,l=Math.floor(n),u=Math.floor(i),h=l+1,p=u+1,m=e/l,v=t/u,y=[],_=[],M=[],w=[];for(let S=0;S<p;S++){const T=S*v-a;for(let R=0;R<h;R++){const C=R*m-s;_.push(C,-T,0),M.push(0,0,1),w.push(R/l),w.push(1-S/u)}}for(let S=0;S<u;S++)for(let T=0;T<l;T++){const R=T+h*S,C=T+h*(S+1),k=T+1+h*(S+1),O=T+1+h*S;y.push(R,C,O),y.push(C,k,O)}this.setIndex(y),this.setAttribute("position",new Jt(_,3)),this.setAttribute("normal",new Jt(M,3)),this.setAttribute("uv",new Jt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eu(e.width,e.height,e.widthSegments,e.heightSegments)}}class Ox extends xn{constructor(e=.5,t=1,n=32,i=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:a},n=Math.max(3,n),i=Math.max(1,i);const l=[],u=[],h=[],p=[];let m=e;const v=(t-e)/i,y=new Z,_=new Je;for(let M=0;M<=i;M++){for(let w=0;w<=n;w++){const S=s+w/n*a;y.x=m*Math.cos(S),y.y=m*Math.sin(S),u.push(y.x,y.y,y.z),h.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,p.push(_.x,_.y)}m+=v}for(let M=0;M<i;M++){const w=M*(n+1);for(let S=0;S<n;S++){const T=S+w,R=T,C=T+n+1,k=T+n+2,O=T+1;l.push(R,C,O),l.push(C,k,O)}}this.setIndex(l),this.setAttribute("position",new Jt(u,3)),this.setAttribute("normal",new Jt(h,3)),this.setAttribute("uv",new Jt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ox(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ux extends xn{constructor(e=new ef([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],a=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let p=0;p<e.length;p++)h(e[p]),this.addGroup(l,u,p),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Jt(i,3)),this.setAttribute("normal",new Jt(s,3)),this.setAttribute("uv",new Jt(a,2));function h(p){const m=i.length/3,v=p.extractPoints(t);let y=v.shape;const _=v.holes;jo.isClockWise(y)===!1&&(y=y.reverse());for(let w=0,S=_.length;w<S;w++){const T=_[w];jo.isClockWise(T)===!0&&(_[w]=T.reverse())}const M=jo.triangulateShape(y,_);for(let w=0,S=_.length;w<S;w++){const T=_[w];y=y.concat(T)}for(let w=0,S=y.length;w<S;w++){const T=y[w];i.push(T.x,T.y,0),s.push(0,0,1),a.push(T.x,T.y)}for(let w=0,S=M.length;w<S;w++){const T=M[w],R=T[0]+m,C=T[1]+m,k=T[2]+m;n.push(R,C,k),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return LF(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const a=t[e.shapes[i]];n.push(a)}return new Ux(n,e.curveSegments)}}function LF(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class ov extends xn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(a+l,Math.PI);let h=0;const p=[],m=new Z,v=new Z,y=[],_=[],M=[],w=[];for(let S=0;S<=n;S++){const T=[],R=S/n;let C=0;S===0&&a===0?C=.5/t:S===n&&u===Math.PI&&(C=-.5/t);for(let k=0;k<=t;k++){const O=k/t;m.x=-e*Math.cos(i+O*s)*Math.sin(a+R*l),m.y=e*Math.cos(a+R*l),m.z=e*Math.sin(i+O*s)*Math.sin(a+R*l),_.push(m.x,m.y,m.z),v.copy(m).normalize(),M.push(v.x,v.y,v.z),w.push(O+C,1-R),T.push(h++)}p.push(T)}for(let S=0;S<n;S++)for(let T=0;T<t;T++){const R=p[S][T+1],C=p[S][T],k=p[S+1][T],O=p[S+1][T+1];(S!==0||a>0)&&y.push(R,C,O),(S!==n-1||u<Math.PI)&&y.push(C,k,O)}this.setIndex(y),this.setAttribute("position",new Jt(_,3)),this.setAttribute("normal",new Jt(M,3)),this.setAttribute("uv",new Jt(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kx extends Mu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new kx(e.radius,e.detail)}}class zx extends xn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const a=[],l=[],u=[],h=[],p=new Z,m=new Z,v=new Z;for(let y=0;y<=n;y++)for(let _=0;_<=i;_++){const M=_/i*s,w=y/n*Math.PI*2;m.x=(e+t*Math.cos(w))*Math.cos(M),m.y=(e+t*Math.cos(w))*Math.sin(M),m.z=t*Math.sin(w),l.push(m.x,m.y,m.z),p.x=e*Math.cos(M),p.y=e*Math.sin(M),v.subVectors(m,p).normalize(),u.push(v.x,v.y,v.z),h.push(_/i),h.push(y/n)}for(let y=1;y<=n;y++)for(let _=1;_<=i;_++){const M=(i+1)*y+_-1,w=(i+1)*(y-1)+_-1,S=(i+1)*(y-1)+_,T=(i+1)*y+_;a.push(M,w,T),a.push(w,S,T)}this.setIndex(a),this.setAttribute("position",new Jt(l,3)),this.setAttribute("normal",new Jt(u,3)),this.setAttribute("uv",new Jt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Hx extends xn{constructor(e=1,t=.4,n=64,i=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:a},n=Math.floor(n),i=Math.floor(i);const l=[],u=[],h=[],p=[],m=new Z,v=new Z,y=new Z,_=new Z,M=new Z,w=new Z,S=new Z;for(let R=0;R<=n;++R){const C=R/n*s*Math.PI*2;T(C,s,a,e,y),T(C+.01,s,a,e,_),w.subVectors(_,y),S.addVectors(_,y),M.crossVectors(w,S),S.crossVectors(M,w),M.normalize(),S.normalize();for(let k=0;k<=i;++k){const O=k/i*Math.PI*2,V=-t*Math.cos(O),z=t*Math.sin(O);m.x=y.x+(V*S.x+z*M.x),m.y=y.y+(V*S.y+z*M.y),m.z=y.z+(V*S.z+z*M.z),u.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),h.push(v.x,v.y,v.z),p.push(R/n),p.push(k/i)}}for(let R=1;R<=n;R++)for(let C=1;C<=i;C++){const k=(i+1)*(R-1)+(C-1),O=(i+1)*R+(C-1),V=(i+1)*R+C,z=(i+1)*(R-1)+C;l.push(k,O,z),l.push(O,V,z)}this.setIndex(l),this.setAttribute("position",new Jt(u,3)),this.setAttribute("normal",new Jt(h,3)),this.setAttribute("uv",new Jt(p,2));function T(R,C,k,O,V){const z=Math.cos(R),F=Math.sin(R),L=k/C*R,W=Math.cos(L);V.x=O*(2+W)*.5*z,V.y=O*(2+W)*F*.5,V.z=O*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gx extends xn{constructor(e=new Fw(new Z(-1,-1,0),new Z(-1,1,0),new Z(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new Z,u=new Z,h=new Je;let p=new Z;const m=[],v=[],y=[],_=[];M(),this.setIndex(_),this.setAttribute("position",new Jt(m,3)),this.setAttribute("normal",new Jt(v,3)),this.setAttribute("uv",new Jt(y,2));function M(){for(let R=0;R<t;R++)w(R);w(s===!1?t:0),T(),S()}function w(R){p=e.getPointAt(R/t,p);const C=a.normals[R],k=a.binormals[R];for(let O=0;O<=i;O++){const V=O/i*Math.PI*2,z=Math.sin(V),F=-Math.cos(V);u.x=F*C.x+z*k.x,u.y=F*C.y+z*k.y,u.z=F*C.z+z*k.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=p.x+n*u.x,l.y=p.y+n*u.y,l.z=p.z+n*u.z,m.push(l.x,l.y,l.z)}}function S(){for(let R=1;R<=t;R++)for(let C=1;C<=i;C++){const k=(i+1)*(R-1)+(C-1),O=(i+1)*R+(C-1),V=(i+1)*R+C,z=(i+1)*(R-1)+C;_.push(k,O,z),_.push(O,V,z)}}function T(){for(let R=0;R<=t;R++)for(let C=0;C<=i;C++)h.x=R/t,h.y=C/i,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gx(new nx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class LR extends xn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new Z,s=new Z;if(e.index!==null){const a=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,p=u.length;h<p;++h){const m=u[h],v=m.start,y=m.count;for(let _=v,M=v+y;_<M;_+=3)for(let w=0;w<3;w++){const S=l.getX(_+w),T=l.getX(_+(w+1)%3);i.fromBufferAttribute(a,S),s.fromBufferAttribute(a,T),M1(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let h=0;h<3;h++){const p=3*l+h,m=3*l+(h+1)%3;i.fromBufferAttribute(a,p),s.fromBufferAttribute(a,m),M1(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Jt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function M1(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var E1=Object.freeze({__proto__:null,BoxGeometry:vf,CapsuleGeometry:Px,CircleGeometry:Bx,ConeGeometry:Dx,CylinderGeometry:Fp,DodecahedronGeometry:Lx,EdgesGeometry:IR,ExtrudeGeometry:Fx,IcosahedronGeometry:sv,LatheGeometry:iv,OctahedronGeometry:av,PlaneGeometry:Eu,PolyhedronGeometry:Mu,RingGeometry:Ox,ShapeGeometry:Ux,SphereGeometry:ov,TetrahedronGeometry:kx,TorusGeometry:zx,TorusKnotGeometry:Hx,TubeGeometry:Gx,WireframeGeometry:LR});class NR extends yi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new wt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FR extends Cs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class lv extends yi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new wt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wu,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ca,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Da extends lv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new wt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new wt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new wt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class OR extends yi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new wt(16777215),this.specular=new wt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wu,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ca,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UR extends yi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new wt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wu,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class kR extends yi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wu,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zR extends yi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wu,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ca,this.combine=Yg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Uw extends yi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=rR,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class kw extends yi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class HR extends yi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new wt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wu,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GR extends rs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Od(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function VR(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function jR(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function CS(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,a=0;a!==n;++s){const l=t[s]*e;for(let u=0;u!==e;++u)i[a++]=r[l+u]}return i}function zw(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=r[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=r[i++];while(s!==void 0)}function NF(r,e,t,n,i=30){const s=r.clone();s.name=e;const a=[];for(let u=0;u<s.tracks.length;++u){const h=s.tracks[u],p=h.getValueSize(),m=[],v=[];for(let y=0;y<h.times.length;++y){const _=h.times[y]*i;if(!(_<t||_>=n)){m.push(h.times[y]);for(let M=0;M<p;++M)v.push(h.values[y*p+M])}}m.length!==0&&(h.times=Od(m,h.times.constructor),h.values=Od(v,h.values.constructor),a.push(h))}s.tracks=a;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function FF(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let a=0;a<i;++a){const l=t.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const h=r.tracks.find(function(S){return S.name===l.name&&S.ValueTypeName===u});if(h===void 0)continue;let p=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let v=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const _=l.times.length-1;let M;if(s<=l.times[0]){const S=p,T=m-p;M=l.values.slice(S,T)}else if(s>=l.times[_]){const S=_*m+p,T=S+m-p;M=l.values.slice(S,T)}else{const S=l.createInterpolant(),T=p,R=m-p;S.evaluate(s),M=S.resultBuffer.slice(T,R)}u==="quaternion"&&new ii().fromArray(M).normalize().conjugate().toArray(M);const w=h.times.length;for(let S=0;S<w;++S){const T=S*y+v;if(u==="quaternion")ii.multiplyQuaternionsFlat(h.values,T,M,0,h.values,T);else{const R=y-v*2;for(let C=0;C<R;++C)h.values[T+C]-=M[C]}}}return r.blendMode=vw,r}const OF={convertArray:Od,isTypedArray:VR,getKeyframeOrder:jR,sortedArray:CS,flattenJSON:zw,subclip:NF,makeClipAdditive:FF};class Op{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let a;n:{r:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let u=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(i=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WR extends Op{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Dd,endingEnd:Dd}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,a=e+1,l=i[s],u=i[a];if(l===void 0)switch(this.getSettings_().endingStart){case Ld:s=e,l=2*t-n;break;case wg:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case Ld:a=e,u=2*n-t;break;case wg:a=1,u=n+i[1]-i[0];break;default:a=e-1,u=t}const h=(n-t)*.5,p=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-n),this._offsetPrev=s*p,this._offsetNext=a*p}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,p=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,_=(n-t)/(i-t),M=_*_,w=M*_,S=-v*w+2*v*M-v*_,T=(1+v)*w+(-1.5-2*v)*M+(-.5+v)*_+1,R=(-1-y)*w+(1.5+y)*M+.5*_,C=y*w-y*M;for(let k=0;k!==l;++k)s[k]=S*a[p+k]+T*a[h+k]+R*a[u+k]+C*a[m+k];return s}}class Hw extends Op{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,p=(n-t)/(i-t),m=1-p;for(let v=0;v!==l;++v)s[v]=a[h+v]*m+a[u+v]*p;return s}}class XR extends Op{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class yo{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Od(t,this.TimeBufferType),this.values=Od(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Od(e.times,Array),values:Od(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new XR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Hw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case vp:t=this.InterpolantFactoryMethodDiscrete;break;case yp:t=this.InterpolantFactoryMethodLinear;break;case u0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vp;case this.InterpolantFactoryMethodLinear:return yp;case this.InterpolantFactoryMethodSmooth:return u0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),e=!1;break}a=u}if(i!==void 0&&VR(i))for(let l=0,u=i.length;l!==u;++l){const h=i[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===u0,s=e.length-1;let a=1;for(let l=1;l<s;++l){let u=!1;const h=e[l],p=e[l+1];if(h!==p&&(l!==1||h!==e[0]))if(i)u=!0;else{const m=l*n,v=m-n,y=m+n;for(let _=0;_!==n;++_){const M=t[m+_];if(M!==t[v+_]||M!==t[y+_]){u=!0;break}}}if(u){if(l!==a){e[a]=e[l];const m=l*n,v=a*n;for(let y=0;y!==n;++y)t[v+y]=t[m+y]}++a}}if(s>0){e[a]=e[s];for(let l=s*n,u=a*n,h=0;h!==n;++h)t[u+h]=t[l+h];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}yo.prototype.TimeBufferType=Float32Array;yo.prototype.ValueBufferType=Float32Array;yo.prototype.DefaultInterpolation=yp;class yf extends yo{constructor(e,t,n){super(e,t,n)}}yf.prototype.ValueTypeName="bool";yf.prototype.ValueBufferType=Array;yf.prototype.DefaultInterpolation=vp;yf.prototype.InterpolantFactoryMethodLinear=void 0;yf.prototype.InterpolantFactoryMethodSmooth=void 0;class Gw extends yo{}Gw.prototype.ValueTypeName="color";class df extends yo{}df.prototype.ValueTypeName="number";class JR extends Op{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(n-t)/(i-t);let h=e*l;for(let p=h+l;h!==p;h+=4)ii.slerpFlat(s,0,a,h-l,a,h,u);return s}}class ff extends yo{InterpolantFactoryMethodLinear(e){return new JR(this.times,this.values,this.getValueSize(),e)}}ff.prototype.ValueTypeName="quaternion";ff.prototype.InterpolantFactoryMethodSmooth=void 0;class xf extends yo{constructor(e,t,n){super(e,t,n)}}xf.prototype.ValueTypeName="string";xf.prototype.ValueBufferType=Array;xf.prototype.DefaultInterpolation=vp;xf.prototype.InterpolantFactoryMethodLinear=void 0;xf.prototype.InterpolantFactoryMethodSmooth=void 0;class hf extends yo{}hf.prototype.ValueTypeName="vector";class Ap{constructor(e="",t=-1,n=[],i=Sx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=oa(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,l=n.length;a!==l;++a)t.push(kF(n[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(yo.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,a=[];for(let l=0;l<s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const p=jR(u);u=CS(u,1,p),h=CS(h,1,p),!i&&u[0]===0&&(u.push(s),h.push(h[0])),a.push(new df(".morphTargetInfluences["+t[l].name+"]",u,h).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const h=e[l],p=h.name.match(s);if(p&&p.length>1){const m=p[1];let v=i[m];v||(i[m]=v=[]),v.push(h)}}const a=[];for(const l in i)a.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,v,y,_,M){if(y.length!==0){const w=[],S=[];zw(y,w,S,_),w.length!==0&&M.push(new m(v,w,S))}},i=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let m=0;m<h.length;m++){const v=h[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let _;for(_=0;_<v.length;_++)if(v[_].morphTargets)for(let M=0;M<v[_].morphTargets.length;M++)y[v[_].morphTargets[M]]=-1;for(const M in y){const w=[],S=[];for(let T=0;T!==v[_].morphTargets.length;++T){const R=v[_];w.push(R.time),S.push(R.morphTarget===M?1:0)}i.push(new df(".morphTargetInfluence["+M+"]",w,S))}u=y.length*a}else{const y=".bones["+t[m].name+"]";n(hf,y+".position",v,"pos",i),n(ff,y+".quaternion",v,"rot",i),n(hf,y+".scale",v,"scl",i)}}return i.length===0?null:new this(s,u,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function UF(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return df;case"vector":case"vector2":case"vector3":case"vector4":return hf;case"color":return Gw;case"quaternion":return ff;case"bool":case"boolean":return yf;case"string":return xf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function kF(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=UF(r.type);if(r.times===void 0){const t=[],n=[];zw(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Yl={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Vx{constructor(e,t,n){const i=this;let s=!1,a=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&i.onStart!==void 0&&i.onStart(p,a,l),s=!0},this.itemEnd=function(p){a++,i.onProgress!==void 0&&i.onProgress(p,a,l),a===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,m){return h.push(p,m),this},this.removeHandler=function(p){const m=h.indexOf(p);return m!==-1&&h.splice(m,2),this},this.getHandler=function(p){for(let m=0,v=h.length;m<v;m+=2){const y=h[m],_=h[m+1];if(y.global&&(y.lastIndex=0),y.test(p))return _}return null}}}const KR=new Vx;class Vi{constructor(e){this.manager=e!==void 0?e:KR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Vi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ol={};class zF extends Error{constructor(e,t){super(e),this.response=t}}class Gi extends Vi{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Yl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ol[e]!==void 0){Ol[e].push({onLoad:t,onProgress:n,onError:i});return}Ol[e]=[],Ol[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const p=Ol[e],m=h.body.getReader(),v=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),y=v?parseInt(v):0,_=y!==0;let M=0;const w=new ReadableStream({start(S){T();function T(){m.read().then(({done:R,value:C})=>{if(R)S.close();else{M+=C.byteLength;const k=new ProgressEvent("progress",{lengthComputable:_,loaded:M,total:y});for(let O=0,V=p.length;O<V;O++){const z=p[O];z.onProgress&&z.onProgress(k)}S.enqueue(C),T()}},R=>{S.error(R)})}}});return new Response(w)}else throw new zF(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return h.json();default:if(l===void 0)return h.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return h.arrayBuffer().then(_=>y.decode(_))}}}).then(h=>{Yl.add(e,h);const p=Ol[e];delete Ol[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onLoad&&y.onLoad(h)}}).catch(h=>{const p=Ol[e];if(p===void 0)throw this.manager.itemError(e),h;delete Ol[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class HF extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gi(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Ap.parse(e[n]);t.push(i)}return t}}class GF extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=[],l=new Tx,u=new Gi(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function p(m){u.load(e[m],function(v){const y=s.parse(v,!0);a[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(l.minFilter=Jn),l.image=a,l.format=y.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)p(m);else u.load(e,function(m){const v=s.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let _=0;_<y;_++){a[_]={mipmaps:[]};for(let M=0;M<v.mipmapCount;M++)a[_].mipmaps.push(v.mipmaps[_*v.mipmapCount+M]),a[_].format=v.format,a[_].width=v.width,a[_].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Jn),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}class Bg extends Vi{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Yl.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l=bg("img");function u(){p(),Yl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(m){p(),i&&i(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",u,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class YR extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=new ev;s.colorSpace=As;const a=new Bg(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(h){a.load(e[h],function(p){s.images[h]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let h=0;h<e.length;++h)u(h);return s}}class Vw extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new mo,l=new Gi(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(p){if(i!==void 0)i(p);else{console.error(p);return}}h.image!==void 0?a.image=h.image:h.data!==void 0&&(a.image.width=h.width,a.image.height=h.height,a.image.data=h.data),a.wrapS=h.wrapS!==void 0?h.wrapS:Jr,a.wrapT=h.wrapT!==void 0?h.wrapT:Jr,a.magFilter=h.magFilter!==void 0?h.magFilter:Jn,a.minFilter=h.minFilter!==void 0?h.minFilter:Jn,a.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(a.colorSpace=h.colorSpace),h.flipY!==void 0&&(a.flipY=h.flipY),h.format!==void 0&&(a.format=h.format),h.type!==void 0&&(a.type=h.type),h.mipmaps!==void 0&&(a.mipmaps=h.mipmaps,a.minFilter=Ia),h.mipmapCount===1&&(a.minFilter=Jn),h.generateMipmaps!==void 0&&(a.generateMipmaps=h.generateMipmaps),a.needsUpdate=!0,t&&t(a,h)},n,i),a}}class ZR extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=new nr,a=new Bg(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class Cu extends On{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new wt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class QR extends Cu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.groundColor=new wt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const dA=new nn,C1=new Z,b1=new Z;class jw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new rv,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new Xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;C1.setFromMatrixPosition(e.matrixWorld),t.position.copy(C1),b1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(b1),t.updateMatrixWorld(),dA.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dA),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(dA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class VF extends jw{constructor(){super(new Gr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=xp*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ww extends Cu{constructor(e,t,n=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new VF}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const T1=new nn,Ym=new Z,fA=new Z;class jF extends jw{constructor(){super(new Gr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new Xn(2,1,1,1),new Xn(0,1,1,1),new Xn(3,1,1,1),new Xn(1,1,1,1),new Xn(3,0,1,1),new Xn(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Ym.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ym),fA.copy(n.position),fA.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(fA),n.updateMatrixWorld(),i.makeTranslation(-Ym.x,-Ym.y,-Ym.z),T1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(T1)}}class Xw extends Cu{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new jF}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}let Wo=class extends $g{constructor(e=-1,t=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,l=i+t,u=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,a=s+h*this.view.width,l-=p*this.view.offsetY,u=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};class WF extends jw{constructor(){super(new Wo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Jw extends Cu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.shadow=new WF}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qR extends Cu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $R extends Cu{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Z)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*i)),t.addScaledVector(a[5],1.092548*(i*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*i),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*i),t.addScaledVector(a[5],2*.429043*i*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class tI extends Cu{constructor(e=new eI,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class jx extends Vi{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,a=new Gi(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new wt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(i.uniforms[s]={},a.type){case"t":i.uniforms[s].value=n(a.value);break;case"c":i.uniforms[s].value=new wt().setHex(a.value);break;case"v2":i.uniforms[s].value=new Je().fromArray(a.value);break;case"v3":i.uniforms[s].value=new Z().fromArray(a.value);break;case"v4":i.uniforms[s].value=new Xn().fromArray(a.value);break;case"m3":i.uniforms[s].value=new yn().fromArray(a.value);break;case"m4":i.uniforms[s].value=new nn().fromArray(a.value);break;default:i.uniforms[s].value=a.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Je().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Je().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return jx.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:NR,SpriteMaterial:bw,RawShaderMaterial:FR,ShaderMaterial:Cs,PointsMaterial:bx,MeshPhysicalMaterial:Da,MeshStandardMaterial:lv,MeshPhongMaterial:OR,MeshToonMaterial:UR,MeshNormalMaterial:kR,MeshLambertMaterial:zR,MeshDepthMaterial:Uw,MeshDistanceMaterial:kw,MeshBasicMaterial:Ws,MeshMatcapMaterial:HR,LineDashedMaterial:GR,LineBasicMaterial:rs,Material:yi};return new t[e]}}class hu{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class nI extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class rI extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gi(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(y,_){if(t[_]!==void 0)return t[_];const w=y.interleavedBuffers[_],S=s(y,w.buffer),T=jh(w.type,S),R=new tv(T,w.stride);return R.uuid=w.uuid,t[_]=R,R}function s(y,_){if(n[_]!==void 0)return n[_];const w=y.arrayBuffers[_],S=new Uint32Array(w).buffer;return n[_]=S,S}const a=e.isInstancedBufferGeometry?new nI:new xn,l=e.data.index;if(l!==void 0){const y=jh(l.type,l.array);a.setIndex(new Kn(y,1))}const u=e.data.attributes;for(const y in u){const _=u[y];let M;if(_.isInterleavedBufferAttribute){const w=i(e.data,_.data);M=new _u(w,_.itemSize,_.offset,_.normalized)}else{const w=jh(_.type,_.array),S=_.isInstancedBufferAttribute?cf:Kn;M=new S(w,_.itemSize,_.normalized)}_.name!==void 0&&(M.name=_.name),_.usage!==void 0&&M.setUsage(_.usage),a.setAttribute(y,M)}const h=e.data.morphAttributes;if(h)for(const y in h){const _=h[y],M=[];for(let w=0,S=_.length;w<S;w++){const T=_[w];let R;if(T.isInterleavedBufferAttribute){const C=i(e.data,T.data);R=new _u(C,T.itemSize,T.offset,T.normalized)}else{const C=jh(T.type,T.array);R=new Kn(C,T.itemSize,T.normalized)}T.name!==void 0&&(R.name=T.name),M.push(R)}a.morphAttributes[y]=M}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,_=m.length;y!==_;++y){const M=m[y];a.addGroup(M.start,M.count,M.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new Z;v.center!==void 0&&y.fromArray(v.center),a.boundingSphere=new Hi(y,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class XF extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=this.path===""?hu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new Gi(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(m){i!==void 0&&i(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=h.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?hu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Gi(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,n),p=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,p),this.bindLightTargets(h),t!==void 0){let m=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,i,l,a,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new ef().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new nv().fromJSON(e[s],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new rI;for(let s=0,a=e.length;s<a;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(u);break;default:u.type in E1?l=E1[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new jx;s.setTextures(t);for(let a=0,l=e.length;a<l;a++){const u=e[a];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),i[u.uuid]=n[u.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Ap.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function a(u){return n.manager.itemStart(u),s.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const h=u,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return a(p)}else return u.data?{data:jh(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new Vx(t);s=new Bg(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,p=e.length;h<p;h++){const m=e[h],v=m.url;if(Array.isArray(v)){const y=[];for(let _=0,M=v.length;_<M;_++){const w=v[_],S=l(w);S!==null&&(S instanceof HTMLImageElement?y.push(S):y.push(new mo(S.data,S.width,S.height)))}i[m.uuid]=new Nd(y)}else{const y=l(m.url);i[m.uuid]=new Nd(y)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(u)}else return a.data?{data:jh(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){i=new Bg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.url;if(Array.isArray(h)){const p=[];for(let m=0,v=h.length;m<v;m++){const y=h[m],_=await s(y);_!==null&&(_ instanceof HTMLImageElement?p.push(_):p.push(new mo(_.data,_.width,_.height)))}n[u.uuid]=new Nd(p)}else{const p=await s(u.url);n[u.uuid]=new Nd(p)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const i={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],h=u.data;let p;Array.isArray(h)?(p=new ev,h.length===6&&(p.needsUpdate=!0)):(h&&h.data?p=new mo:p=new nr,h&&(p.needsUpdate=!0)),p.source=u,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,JF)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],R1),p.wrapT=n(l.wrap[1],R1)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,I1)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,I1)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),i[l.uuid]=p}return i}parseObject(e,t,n,i,s){let a;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let _=0,M=v.length;_<M;_++){const w=v[_];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),y.push(n[w])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function h(v){return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),i[v]}let p,m;switch(e.type){case"Scene":a=new Np,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new wt(e.background):a.background=h(e.background)),e.environment!==void 0&&(a.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Ex(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Mx(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Gr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Wo(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new qR(e.color,e.intensity);break;case"DirectionalLight":a=new Jw(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Xw(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new $R(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Ww(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new QR(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new tI().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),m=u(e.material),a=new Tw(p,m),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),m=u(e.material),a=new Tr(p,m);break;case"InstancedMesh":p=l(e.geometry),m=u(e.material);const v=e.count,y=e.instanceMatrix,_=e.instanceColor;a=new Rw(p,m,v),a.instanceMatrix=new cf(new Float32Array(y.array),16),_!==void 0&&(a.instanceColor=new cf(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":p=l(e.geometry),m=u(e.material),a=new wR(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),a.geometry=p,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(M=>{const w=new ns;w.min.fromArray(M.boxMin),w.max.fromArray(M.boxMax);const S=new Hi;return S.radius=M.sphereRadius,S.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:w,sphereInitialized:M.sphereInitialized,sphere:S}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=h(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=h(e.colorsTexture.uuid));break;case"LOD":a=new SR;break;case"Line":a=new tc(l(e.geometry),u(e.material));break;case"LineLoop":a=new Iw(l(e.geometry),u(e.material));break;case"LineSegments":a=new go(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new Pw(l(e.geometry),u(e.material));break;case"Sprite":a=new AR(u(e.material));break;case"Group":a=new Kl;break;case"Bone":a=new Cx;break;default:a=new On}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)a.add(this.parseObject(v[y],t,n,i,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const _=v[y];a.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const _=v[y],M=a.getObjectByProperty("uuid",_.object);M!==void 0&&a.addLevel(M,_.distance,_.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new On}})}}const JF={UVMapping:vu,CubeReflectionMapping:Ko,CubeRefractionMapping:yu,EquirectangularReflectionMapping:pp,EquirectangularRefractionMapping:Sg,CubeUVReflectionMapping:Lp},R1={RepeatWrapping:xu,ClampToEdgeWrapping:Jr,MirroredRepeatWrapping:mp},I1={NearestFilter:Ii,NearestMipmapNearestFilter:mx,NearestMipmapLinearFilter:Bd,LinearFilter:Jn,LinearMipmapNearestFilter:Yh,LinearMipmapLinearFilter:Ia};class iI extends Vi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Yl.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{i&&i(h)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return Yl.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){i&&i(h),Yl.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Yl.add(e,u),s.manager.itemStart(e)}}let jy;class Kw{static getContext(){return jy===void 0&&(jy=new(window.AudioContext||window.webkitAudioContext)),jy}static setContext(e){jy=e}}class KF extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new Gi(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{const h=u.slice(0);Kw.getContext().decodeAudioData(h,function(m){t(m)}).catch(l)}catch(h){l(h)}},n,i);function l(u){i?i(u):console.error(u),s.manager.itemError(e)}}}const P1=new nn,B1=new nn,yd=new nn;class YF{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yd.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,a=t.near*Math.tan(qd*t.fov*.5)/t.zoom;let l,u;B1.elements[12]=-i,P1.elements[12]=i,l=-a*t.aspect+s,u=a*t.aspect+s,yd.elements[0]=2*t.near/(u-l),yd.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(yd),l=-a*t.aspect-s,u=a*t.aspect-s,yd.elements[0]=2*t.near/(u-l),yd.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(yd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(B1),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(P1)}}class sI extends Gr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=D1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=D1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function D1(){return performance.now()}const xd=new Z,L1=new ii,ZF=new Z,_d=new Z;class QF extends On{constructor(){super(),this.type="AudioListener",this.context=Kw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Yw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xd,L1,ZF),_d.set(0,0,-1).applyQuaternion(L1),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(xd.x,i),t.positionY.linearRampToValueAtTime(xd.y,i),t.positionZ.linearRampToValueAtTime(xd.z,i),t.forwardX.linearRampToValueAtTime(_d.x,i),t.forwardY.linearRampToValueAtTime(_d.y,i),t.forwardZ.linearRampToValueAtTime(_d.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(xd.x,xd.y,xd.z),t.setOrientation(_d.x,_d.y,_d.z,n.x,n.y,n.z)}}class aI extends On{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Ad=new Z,N1=new ii,qF=new Z,Sd=new Z;class $F extends aI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ad,N1,qF),Sd.set(0,0,1).applyQuaternion(N1);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ad.x,n),t.positionY.linearRampToValueAtTime(Ad.y,n),t.positionZ.linearRampToValueAtTime(Ad.z,n),t.orientationX.linearRampToValueAtTime(Sd.x,n),t.orientationY.linearRampToValueAtTime(Sd.y,n),t.orientationZ.linearRampToValueAtTime(Sd.z,n)}else t.setPosition(Ad.x,Ad.y,Ad.z),t.setOrientation(Sd.x,Sd.y,Sd.z)}}class e3{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class oI{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==i;++l)n[s+l]=n[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(n,s,0,l,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(n,i,u,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(n[u]!==n[u+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,a=i;s!==a;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){ii.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const a=this._workIndex*s;ii.multiplyQuaternionsFlat(e,a,e,t,e,n),ii.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,s){const a=1-i;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*a+e[n+l]*i}}_lerpAdditive(e,t,n,i,s){for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]+e[n+a]*i}}}const Zw="\\[\\]\\.:\\/",t3=new RegExp("["+Zw+"]","g"),Qw="[^"+Zw+"]",n3="[^"+Zw.replace("\\.","")+"]",r3=/((?:WC+[\/:])*)/.source.replace("WC",Qw),i3=/(WCOD+)?/.source.replace("WCOD",n3),s3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qw),a3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qw),o3=new RegExp("^"+r3+i3+s3+a3+"$"),l3=["material","materials","bones","map"];class c3{constructor(e,t,n){const i=n||Vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Vn{constructor(e,t,n){this.path=t,this.parsedPath=n||Vn.parseTrackName(t),this.node=Vn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Vn.Composite(e,t,n):new Vn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(t3,"")}static parseTrackName(e){const t=o3.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);l3.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===t||l.uuid===t)return l;const u=n(l.children);if(u)return u}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Vn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===h){h=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const a=e[i];if(a===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vn.Composite=c3;Vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Vn.prototype.GetterByBindingType=[Vn.prototype._getValue_direct,Vn.prototype._getValue_array,Vn.prototype._getValue_arrayElement,Vn.prototype._getValue_toArray];Vn.prototype.SetterByBindingTypeAndVersioning=[[Vn.prototype._setValue_direct,Vn.prototype._setValue_direct_setNeedsUpdate,Vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_array,Vn.prototype._setValue_array_setNeedsUpdate,Vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_arrayElement,Vn.prototype._setValue_arrayElement_setNeedsUpdate,Vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vn.prototype._setValue_fromArray,Vn.prototype._setValue_fromArray_setNeedsUpdate,Vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class u3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=oa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const v=arguments[p],y=v.uuid;let _=t[y];if(_===void 0){_=u++,t[y]=_,e.push(v);for(let M=0,w=a;M!==w;++M)s[M].push(new Vn(v,n[M],i[M]))}else if(_<h){l=e[_];const M=--h,w=e[M];t[w.uuid]=_,e[_]=w,t[y]=M,e[M]=v;for(let S=0,T=a;S!==T;++S){const R=s[S],C=R[M];let k=R[_];R[_]=C,k===void 0&&(k=new Vn(v,n[S],i[S])),R[M]=k}}else e[_]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,p=t[h];if(p!==void 0&&p>=s){const m=s++,v=e[m];t[v.uuid]=p,e[p]=v,t[h]=m,e[m]=u;for(let y=0,_=i;y!==_;++y){const M=n[y],w=M[m],S=M[p];M[p]=w,M[m]=S}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],p=h.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const v=--s,y=e[v],_=--a,M=e[_];t[y.uuid]=m,e[m]=y,t[M.uuid]=v,e[v]=M,e.pop();for(let w=0,S=i;w!==S;++w){const T=n[w],R=T[v],C=T[_];T[m]=R,T[v]=C,T.pop()}}else{const v=--a,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let _=0,M=i;_!==M;++_){const w=n[_];w[m]=w[v],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const a=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,p=this.nCachedObjects_,m=new Array(h);i=s.length,n[e]=i,a.push(e),l.push(t),s.push(m);for(let v=p,y=u.length;v!==y;++v){const _=u[v];m[v]=new Vn(_,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],h=e[l];t[h]=n,a[n]=u,a.pop(),s[n]=s[l],s.pop(),i[n]=i[l],i.pop()}}}class lI{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,a=s.length,l=new Array(a),u={endingStart:Dd,endingEnd:Dd};for(let h=0;h!==a;++h){const p=s[h].createInterpolant(null);l[h]=p,p.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=eR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,a=s/i,l=i/s;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+n,h[0]=e/a,h[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*n;u<0||n===0?t=0:(this._startTime=null,t=n*u)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case vw:for(let p=0,m=u.length;p!==m;++p)u[p].evaluate(a),h[p].accumulateAdditive(l);break;case Sx:default:for(let p=0,m=u.length;p!==m;++p)u[p].evaluate(a),h[p].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===tR;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(n===$T){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Ld,i.endingEnd=Ld):(e?i.endingStart=this.zeroSlopeAtStart?Ld:Dd:i.endingStart=wg,t?i.endingEnd=this.zeroSlopeAtEnd?Ld:Dd:i.endingEnd=wg)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=n,this}}const d3=new Float32Array(1);class f3 extends Qo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,l=e._interpolants,u=n.uuid,h=this._bindingsByRootAndName;let p=h[u];p===void 0&&(p={},h[u]=p);for(let m=0;m!==s;++m){const v=i[m],y=v.name;let _=p[y];if(_!==void 0)++_.referenceCount,a[m]=_;else{if(_=a[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,u,y));continue}const M=t&&t._propertyBindings[m].binding.parsedPath;_=new oI(Vn.create(n,y,M),v.ValueTypeName,v.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,u,y),a[m]=_}l[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],u=l.knownActions,h=u[u.length-1],p=e._byClipCacheIndex;h._byClipCacheIndex=p,u[p]=h,u.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],u.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,l=a[i],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Hw(new Float32Array(2),new Float32Array(2),1,d3),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?Ap.findByName(i,e):e;const l=a!==null?a.uuid:e,u=this._actionsByClip[l];let h=null;if(n===void 0&&(a!==null?n=a.blendMode:n=Sx),u!==void 0){const m=u.actionByRoot[s];if(m!==void 0&&m.blendMode===n)return m;h=u.knownActions[0],a===null&&(a=h._clip)}if(a===null)return null;const p=new lI(this,a,t,n);return this._bindAction(p,h),this._addInactiveAction(p,l,s),p}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Ap.findByName(n,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(i,e,s,a);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let l=0,u=a.length;l!==u;++l){const h=a[l];this._deactivateAction(h);const p=h._cacheIndex,m=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const l=n[a].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class qw{constructor(e){this.value=e}clone(){return new qw(this.value.clone===void 0?this.value:this.value.clone())}}let h3=0;class p3 extends Qo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:h3++}),this.name="",this.usage=Eg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class m3 extends tv{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class g3{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const F1=new nn;class $w{constructor(e,t,n=0,i=1/0){this.ray=new gf(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new $d,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return F1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(F1),this}intersectObject(e,t=!0,n=[]){return bS(e,this,n,t),n.sort(O1),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)bS(e[i],this,n,t);return n.sort(O1),n}}function O1(r,e){return r.distance-e.distance}function bS(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let a=0,l=s.length;a<l;a++)bS(s[a],e,t,!0)}}class TS{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=pn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(pn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class v3{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class eM{constructor(e,t,n,i){eM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const U1=new Je;class y3{constructor(e=new Je(1/0,1/0),t=new Je(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=U1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,U1).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const k1=new Z,Wy=new Z;class x3{constructor(e=new Z,t=new Z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){k1.subVectors(e,this.start),Wy.subVectors(this.end,this.start);const n=Wy.dot(Wy);let s=Wy.dot(k1)/n;return t&&(s=pn(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const z1=new Z;class _3 extends On{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new xn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const h=a/u*Math.PI*2,p=l/u*Math.PI*2;i.push(Math.cos(h),Math.sin(h),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Jt(i,3));const s=new rs({fog:!1,toneMapped:!1});this.cone=new go(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),z1.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(z1),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xc=new Z,Xy=new nn,hA=new nn;class A3 extends go{constructor(e){const t=cI(e),n=new xn,i=[],s=[],a=new wt(0,0,1),l=new wt(0,1,0);for(let h=0;h<t.length;h++){const p=t[h];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new Jt(i,3)),n.setAttribute("color",new Jt(s,3));const u=new rs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");hA.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Xy.multiplyMatrices(hA,l.matrixWorld),Xc.setFromMatrixPosition(Xy),i.setXYZ(a,Xc.x,Xc.y,Xc.z),Xy.multiplyMatrices(hA,l.parent.matrixWorld),Xc.setFromMatrixPosition(Xy),i.setXYZ(a+1,Xc.x,Xc.y,Xc.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function cI(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,cI(r.children[t]));return e}class S3 extends Tr{constructor(e,t,n){const i=new ov(t,4,2),s=new Ws({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const w3=new Z,H1=new wt,G1=new wt;class M3 extends On{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new av(t);i.rotateY(Math.PI*.5),this.material=new Ws({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),a=new Float32Array(s.count*3);i.setAttribute("color",new Kn(a,3)),this.add(new Tr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");H1.copy(this.light.color),G1.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?H1:G1;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(w3.setFromMatrixPosition(this.light.matrixWorld).negate())}}class E3 extends go{constructor(e=10,t=10,n=4473924,i=8947848){n=new wt(n),i=new wt(i);const s=t/2,a=e/t,l=e/2,u=[],h=[];for(let v=0,y=0,_=-l;v<=t;v++,_+=a){u.push(-l,0,_,l,0,_),u.push(_,0,-l,_,0,l);const M=v===s?n:i;M.toArray(h,y),y+=3,M.toArray(h,y),y+=3,M.toArray(h,y),y+=3,M.toArray(h,y),y+=3}const p=new xn;p.setAttribute("position",new Jt(u,3)),p.setAttribute("color",new Jt(h,3));const m=new rs({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class C3 extends go{constructor(e=10,t=16,n=8,i=64,s=4473924,a=8947848){s=new wt(s),a=new wt(a);const l=[],u=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,_=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,_);const M=m&1?s:a;u.push(M.r,M.g,M.b),u.push(M.r,M.g,M.b)}for(let m=0;m<n;m++){const v=m&1?s:a,y=e-e/n*m;for(let _=0;_<i;_++){let M=_/i*(Math.PI*2),w=Math.sin(M)*y,S=Math.cos(M)*y;l.push(w,0,S),u.push(v.r,v.g,v.b),M=(_+1)/i*(Math.PI*2),w=Math.sin(M)*y,S=Math.cos(M)*y,l.push(w,0,S),u.push(v.r,v.g,v.b)}}const h=new xn;h.setAttribute("position",new Jt(l,3)),h.setAttribute("color",new Jt(u,3));const p=new rs({vertexColors:!0,toneMapped:!1});super(h,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const V1=new Z,Jy=new Z,j1=new Z;class b3 extends On{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new xn;i.setAttribute("position",new Jt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new rs({fog:!1,toneMapped:!1});this.lightPlane=new tc(i,s),this.add(this.lightPlane),i=new xn,i.setAttribute("position",new Jt([0,0,0,0,0,1],3)),this.targetLine=new tc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),V1.setFromMatrixPosition(this.light.matrixWorld),Jy.setFromMatrixPosition(this.light.target.matrixWorld),j1.subVectors(Jy,V1),this.lightPlane.lookAt(Jy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Jy),this.targetLine.scale.z=j1.length()}}const Ky=new Z,kr=new $g;class T3 extends go{constructor(e){const t=new xn,n=new rs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(_,M){u(_),u(M)}function u(_){i.push(0,0,0),s.push(0,0,0),a[_]===void 0&&(a[_]=[]),a[_].push(i.length/3-1)}t.setAttribute("position",new Jt(i,3)),t.setAttribute("color",new Jt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new wt(16755200),p=new wt(16711680),m=new wt(43775),v=new wt(16777215),y=new wt(3355443);this.setColors(h,p,m,v,y)}setColors(e,t,n,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;kr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xr("c",t,e,kr,0,0,-1),Xr("t",t,e,kr,0,0,1),Xr("n1",t,e,kr,-n,-i,-1),Xr("n2",t,e,kr,n,-i,-1),Xr("n3",t,e,kr,-n,i,-1),Xr("n4",t,e,kr,n,i,-1),Xr("f1",t,e,kr,-n,-i,1),Xr("f2",t,e,kr,n,-i,1),Xr("f3",t,e,kr,-n,i,1),Xr("f4",t,e,kr,n,i,1),Xr("u1",t,e,kr,n*.7,i*1.1,-1),Xr("u2",t,e,kr,-n*.7,i*1.1,-1),Xr("u3",t,e,kr,0,i*2,-1),Xr("cf1",t,e,kr,-n,0,1),Xr("cf2",t,e,kr,n,0,1),Xr("cf3",t,e,kr,0,-i,1),Xr("cf4",t,e,kr,0,i,1),Xr("cn1",t,e,kr,-n,0,-1),Xr("cn2",t,e,kr,n,0,-1),Xr("cn3",t,e,kr,0,-i,-1),Xr("cn4",t,e,kr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Xr(r,e,t,n,i,s,a){Ky.set(i,s,a).unproject(n);const l=e[r];if(l!==void 0){const u=t.getAttribute("position");for(let h=0,p=l.length;h<p;h++)u.setXYZ(l[h],Ky.x,Ky.y,Ky.z)}}const Yy=new ns;class R3 extends go{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new xn;s.setIndex(new Kn(n,1)),s.setAttribute("position",new Kn(i,3)),super(s,new rs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Yy.setFromObject(this.object),Yy.isEmpty())return;const t=Yy.min,n=Yy.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class I3 extends go{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new xn;s.setIndex(new Kn(n,1)),s.setAttribute("position",new Jt(i,3)),super(s,new rs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class P3 extends tc{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new xn;a.setAttribute("position",new Jt(s,3)),a.computeBoundingSphere(),super(a,new rs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new xn;u.setAttribute("position",new Jt(l,3)),u.computeBoundingSphere(),this.add(new Tr(u,new Ws({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const W1=new Z;let Zy,pA;class B3 extends On{constructor(e=new Z(0,0,1),t=new Z(0,0,0),n=1,i=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",Zy===void 0&&(Zy=new xn,Zy.setAttribute("position",new Jt([0,0,0,0,1,0],3)),pA=new Fp(0,.5,1,5,1),pA.translate(0,-.5,0)),this.position.copy(t),this.line=new tc(Zy,new rs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Tr(pA,new Ws({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{W1.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(W1,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class D3 extends go{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new xn;i.setAttribute("position",new Jt(t,3)),i.setAttribute("color",new Jt(n,3));const s=new rs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new wt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class L3{constructor(){this.type="ShapePath",this.color=new wt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Tg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,a){return this.currentPath.bezierCurveTo(e,t,n,i,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(S){const T=[];for(let R=0,C=S.length;R<C;R++){const k=S[R],O=new ef;O.curves=k.curves,T.push(O)}return T}function n(S,T){const R=T.length;let C=!1;for(let k=R-1,O=0;O<R;k=O++){let V=T[k],z=T[O],F=z.x-V.x,L=z.y-V.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(V=T[O],F=-F,z=T[k],L=-L),S.y<V.y||S.y>z.y)continue;if(S.y===V.y){if(S.x===V.x)return!0}else{const W=L*(S.x-V.x)-F*(S.y-V.y);if(W===0)return!0;if(W<0)continue;C=!C}}else{if(S.y!==V.y)continue;if(z.x<=S.x&&S.x<=V.x||V.x<=S.x&&S.x<=z.x)return!0}}return C}const i=jo.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,u;const h=[];if(s.length===1)return l=s[0],u=new ef,u.curves=l.curves,h.push(u),h;let p=!i(s[0].getPoints());p=e?!p:p;const m=[],v=[];let y=[],_=0,M;v[_]=void 0,y[_]=[];for(let S=0,T=s.length;S<T;S++)l=s[S],M=l.getPoints(),a=i(M),a=e?!a:a,a?(!p&&v[_]&&_++,v[_]={s:new ef,p:M},v[_].s.curves=l.curves,p&&_++,y[_]=[]):y[_].push({h:l,p:M[0]});if(!v[0])return t(s);if(v.length>1){let S=!1,T=0;for(let R=0,C=v.length;R<C;R++)m[R]=[];for(let R=0,C=v.length;R<C;R++){const k=y[R];for(let O=0;O<k.length;O++){const V=k[O];let z=!0;for(let F=0;F<v.length;F++)n(V.p,v[F].p)&&(R!==F&&T++,z?(z=!1,m[F].push(V)):S=!0);z&&m[R].push(V)}}T>0&&S===!1&&(y=m)}let w;for(let S=0,T=v.length;S<T;S++){u=v[S].s,h.push(u),w=y[S];for(let R=0,C=w.length;R<C;R++)u.holes.push(w[R].h)}return h}}class N3 extends Qo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function F3(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function O3(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function U3(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function RS(r,e,t,n){const i=k3(n);switch(t){case dw:return r*e;case hw:return r*e;case pw:return r*e*2;case Qg:return r*e/i.components*i.byteLength;case qg:return r*e/i.components*i.byteLength;case mw:return r*e*2/i.components*i.byteLength;case _x:return r*e*2/i.components*i.byteLength;case fw:return r*e*3/i.components*i.byteLength;case Kr:return r*e*4/i.components*i.byteLength;case Ax:return r*e*4/i.components*i.byteLength;case cg:case ug:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case dg:case fg:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case T0:case I0:return Math.max(r,16)*Math.max(e,8)/4;case b0:case R0:return Math.max(r,8)*Math.max(e,8)/2;case P0:case B0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case D0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case L0:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case N0:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case F0:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case O0:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case U0:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case k0:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case z0:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case H0:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case G0:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case V0:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case j0:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case W0:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case X0:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case J0:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case hg:case K0:case Y0:return Math.ceil(r/4)*Math.ceil(e/4)*16;case gw:case Z0:return Math.ceil(r/4)*Math.ceil(e/4)*8;case Q0:case q0:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function k3(r){switch(r){case Xs:case gx:return{byteLength:1,components:1};case gp:case vx:case vi:return{byteLength:2,components:1};case yx:case xx:return{byteLength:2,components:4};case Yo:case Zg:case br:return{byteLength:4,components:1};case uw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}const z3={contain:F3,cover:O3,fill:U3,getByteLength:RS};class H3 extends Js{constructor(e=1,t=1,n=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Dp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Dp);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function uI(){let r=null,e=!1,t=null,n=null;function i(s,a){t(s,a),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function G3(r){const e=new WeakMap;function t(l,u){const h=l.array,p=l.usage,m=h.byteLength,v=r.createBuffer();r.bindBuffer(u,v),r.bufferData(u,h,p),l.onUploadCallback();let y;if(h instanceof Float32Array)y=r.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?y=r.HALF_FLOAT:y=r.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=r.SHORT;else if(h instanceof Uint32Array)y=r.UNSIGNED_INT;else if(h instanceof Int32Array)y=r.INT;else if(h instanceof Int8Array)y=r.BYTE;else if(h instanceof Uint8Array)y=r.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:v,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:m}}function n(l,u,h){const p=u.array,m=u.updateRanges;if(r.bindBuffer(h,l),m.length===0)r.bufferSubData(h,0,p);else{m.sort((y,_)=>y.start-_.start);let v=0;for(let y=1;y<m.length;y++){const _=m[v],M=m[y];M.start<=_.start+_.count+1?_.count=Math.max(_.count,M.start+M.count-_.start):(++v,m[v]=M)}m.length=v+1;for(let y=0,_=m.length;y<_;y++){const M=m[y];r.bufferSubData(h,M.start*p.BYTES_PER_ELEMENT,p,M.start,M.count)}u.clearUpdateRanges()}u.onUploadCallback()}function i(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(r.deleteBuffer(u.buffer),e.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version<l.version){if(h.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(h.buffer,l,u),h.version=l.version}}return{get:i,remove:s,update:a}}var V3=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,j3=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,W3=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,X3=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,J3=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,K3=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Y3=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Z3=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Q3=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,q3=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,$3=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,eO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tO=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,nO=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,sO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,aO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,cO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,uO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,dO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,fO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,hO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,pO=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,gO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,vO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xO="gl_FragColor = linearToOutputTexel( gl_FragColor );",_O=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,AO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,SO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,wO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,MO=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,EO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CO=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bO=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,TO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,RO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,IO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,BO=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,DO=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,LO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,NO=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,FO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,OO=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,UO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kO=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,zO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,HO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,GO=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,VO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,jO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,WO=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,XO=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,JO=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KO=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,YO=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ZO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,QO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qO=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$O=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,eU=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tU=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,nU=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,rU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,iU=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,sU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,aU=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,oU=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,lU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,cU=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,uU=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,dU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,fU=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,hU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,pU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,mU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,gU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,yU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,xU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_U=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,AU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,SU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,MU=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,EU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,CU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,bU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,TU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,RU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,IU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,PU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,BU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,DU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,LU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,NU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,FU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,OU=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,UU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,zU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,HU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const GU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,VU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,WU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KU=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,YU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ZU=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,QU=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,$U=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ek=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nk=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ik=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sk=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ak=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ok=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lk=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ck=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uk=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dk=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fk=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hk=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pk=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mk=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gk=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,vk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yk=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xk=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_k=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ak=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cn={alphahash_fragment:V3,alphahash_pars_fragment:j3,alphamap_fragment:W3,alphamap_pars_fragment:X3,alphatest_fragment:J3,alphatest_pars_fragment:K3,aomap_fragment:Y3,aomap_pars_fragment:Z3,batching_pars_vertex:Q3,batching_vertex:q3,begin_vertex:$3,beginnormal_vertex:eO,bsdfs:tO,iridescence_fragment:nO,bumpmap_pars_fragment:rO,clipping_planes_fragment:iO,clipping_planes_pars_fragment:sO,clipping_planes_pars_vertex:aO,clipping_planes_vertex:oO,color_fragment:lO,color_pars_fragment:cO,color_pars_vertex:uO,color_vertex:dO,common:fO,cube_uv_reflection_fragment:hO,defaultnormal_vertex:pO,displacementmap_pars_vertex:mO,displacementmap_vertex:gO,emissivemap_fragment:vO,emissivemap_pars_fragment:yO,colorspace_fragment:xO,colorspace_pars_fragment:_O,envmap_fragment:AO,envmap_common_pars_fragment:SO,envmap_pars_fragment:wO,envmap_pars_vertex:MO,envmap_physical_pars_fragment:NO,envmap_vertex:EO,fog_vertex:CO,fog_pars_vertex:bO,fog_fragment:TO,fog_pars_fragment:RO,gradientmap_pars_fragment:IO,lightmap_pars_fragment:PO,lights_lambert_fragment:BO,lights_lambert_pars_fragment:DO,lights_pars_begin:LO,lights_toon_fragment:FO,lights_toon_pars_fragment:OO,lights_phong_fragment:UO,lights_phong_pars_fragment:kO,lights_physical_fragment:zO,lights_physical_pars_fragment:HO,lights_fragment_begin:GO,lights_fragment_maps:VO,lights_fragment_end:jO,logdepthbuf_fragment:WO,logdepthbuf_pars_fragment:XO,logdepthbuf_pars_vertex:JO,logdepthbuf_vertex:KO,map_fragment:YO,map_pars_fragment:ZO,map_particle_fragment:QO,map_particle_pars_fragment:qO,metalnessmap_fragment:$O,metalnessmap_pars_fragment:eU,morphinstance_vertex:tU,morphcolor_vertex:nU,morphnormal_vertex:rU,morphtarget_pars_vertex:iU,morphtarget_vertex:sU,normal_fragment_begin:aU,normal_fragment_maps:oU,normal_pars_fragment:lU,normal_pars_vertex:cU,normal_vertex:uU,normalmap_pars_fragment:dU,clearcoat_normal_fragment_begin:fU,clearcoat_normal_fragment_maps:hU,clearcoat_pars_fragment:pU,iridescence_pars_fragment:mU,opaque_fragment:gU,packing:vU,premultiplied_alpha_fragment:yU,project_vertex:xU,dithering_fragment:_U,dithering_pars_fragment:AU,roughnessmap_fragment:SU,roughnessmap_pars_fragment:wU,shadowmap_pars_fragment:MU,shadowmap_pars_vertex:EU,shadowmap_vertex:CU,shadowmask_pars_fragment:bU,skinbase_vertex:TU,skinning_pars_vertex:RU,skinning_vertex:IU,skinnormal_vertex:PU,specularmap_fragment:BU,specularmap_pars_fragment:DU,tonemapping_fragment:LU,tonemapping_pars_fragment:NU,transmission_fragment:FU,transmission_pars_fragment:OU,uv_pars_fragment:UU,uv_pars_vertex:kU,uv_vertex:zU,worldpos_vertex:HU,background_vert:GU,background_frag:VU,backgroundCube_vert:jU,backgroundCube_frag:WU,cube_vert:XU,cube_frag:JU,depth_vert:KU,depth_frag:YU,distanceRGBA_vert:ZU,distanceRGBA_frag:QU,equirect_vert:qU,equirect_frag:$U,linedashed_vert:ek,linedashed_frag:tk,meshbasic_vert:nk,meshbasic_frag:rk,meshlambert_vert:ik,meshlambert_frag:sk,meshmatcap_vert:ak,meshmatcap_frag:ok,meshnormal_vert:lk,meshnormal_frag:ck,meshphong_vert:uk,meshphong_frag:dk,meshphysical_vert:fk,meshphysical_frag:hk,meshtoon_vert:pk,meshtoon_frag:mk,points_vert:gk,points_frag:vk,shadow_vert:yk,shadow_frag:xk,sprite_vert:_k,sprite_frag:Ak},Ct={common:{diffuse:{value:new wt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yn}},envmap:{envMap:{value:null},envMapRotation:{value:new yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yn},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new wt(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}}},fo={basic:{uniforms:vs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.fog]),vertexShader:Cn.meshbasic_vert,fragmentShader:Cn.meshbasic_frag},lambert:{uniforms:vs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)}}]),vertexShader:Cn.meshlambert_vert,fragmentShader:Cn.meshlambert_frag},phong:{uniforms:vs([Ct.common,Ct.specularmap,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)},specular:{value:new wt(1118481)},shininess:{value:30}}]),vertexShader:Cn.meshphong_vert,fragmentShader:Cn.meshphong_frag},standard:{uniforms:vs([Ct.common,Ct.envmap,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.roughnessmap,Ct.metalnessmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag},toon:{uniforms:vs([Ct.common,Ct.aomap,Ct.lightmap,Ct.emissivemap,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.gradientmap,Ct.fog,Ct.lights,{emissive:{value:new wt(0)}}]),vertexShader:Cn.meshtoon_vert,fragmentShader:Cn.meshtoon_frag},matcap:{uniforms:vs([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,Ct.fog,{matcap:{value:null}}]),vertexShader:Cn.meshmatcap_vert,fragmentShader:Cn.meshmatcap_frag},points:{uniforms:vs([Ct.points,Ct.fog]),vertexShader:Cn.points_vert,fragmentShader:Cn.points_frag},dashed:{uniforms:vs([Ct.common,Ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Cn.linedashed_vert,fragmentShader:Cn.linedashed_frag},depth:{uniforms:vs([Ct.common,Ct.displacementmap]),vertexShader:Cn.depth_vert,fragmentShader:Cn.depth_frag},normal:{uniforms:vs([Ct.common,Ct.bumpmap,Ct.normalmap,Ct.displacementmap,{opacity:{value:1}}]),vertexShader:Cn.meshnormal_vert,fragmentShader:Cn.meshnormal_frag},sprite:{uniforms:vs([Ct.sprite,Ct.fog]),vertexShader:Cn.sprite_vert,fragmentShader:Cn.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Cn.background_vert,fragmentShader:Cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yn}},vertexShader:Cn.backgroundCube_vert,fragmentShader:Cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Cn.cube_vert,fragmentShader:Cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Cn.equirect_vert,fragmentShader:Cn.equirect_frag},distanceRGBA:{uniforms:vs([Ct.common,Ct.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Cn.distanceRGBA_vert,fragmentShader:Cn.distanceRGBA_frag},shadow:{uniforms:vs([Ct.lights,Ct.fog,{color:{value:new wt(0)},opacity:{value:1}}]),vertexShader:Cn.shadow_vert,fragmentShader:Cn.shadow_frag}};fo.physical={uniforms:vs([fo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yn},clearcoatNormalScale:{value:new Je(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yn},sheen:{value:0},sheenColor:{value:new wt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yn},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yn},attenuationDistance:{value:0},attenuationColor:{value:new wt(0)},specularColor:{value:new wt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yn},anisotropyVector:{value:new Je},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yn}}]),vertexShader:Cn.meshphysical_vert,fragmentShader:Cn.meshphysical_frag};const Qy={r:0,b:0,g:0},wd=new ca,Sk=new nn;function wk(r,e,t,n,i,s,a){const l=new wt(0);let u=s===!0?0:1,h,p,m=null,v=0,y=null;function _(R){let C=R.isScene===!0?R.background:null;return C&&C.isTexture&&(C=(R.backgroundBlurriness>0?t:e).get(C)),C}function M(R){let C=!1;const k=_(R);k===null?S(l,u):k&&k.isColor&&(S(k,1),C=!0);const O=r.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,a):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||C)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function w(R,C){const k=_(C);k&&(k.isCubeTexture||k.mapping===Lp)?(p===void 0&&(p=new Tr(new vf(1,1,1),new Cs({name:"BackgroundCubeMaterial",uniforms:_p(fo.backgroundCube.uniforms),vertexShader:fo.backgroundCube.vertexShader,fragmentShader:fo.backgroundCube.fragmentShader,side:ts,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(O,V,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),wd.copy(C.backgroundRotation),wd.x*=-1,wd.y*=-1,wd.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(wd.y*=-1,wd.z*=-1),p.material.uniforms.envMap.value=k,p.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(Sk.makeRotationFromEuler(wd)),p.material.toneMapped=jn.getTransfer(k.colorSpace)!==sr,(m!==k||v!==k.version||y!==r.toneMapping)&&(p.material.needsUpdate=!0,m=k,v=k.version,y=r.toneMapping),p.layers.enableAll(),R.unshift(p,p.geometry,p.material,0,0,null)):k&&k.isTexture&&(h===void 0&&(h=new Tr(new Eu(2,2),new Cs({name:"BackgroundMaterial",uniforms:_p(fo.background.uniforms),vertexShader:fo.background.vertexShader,fragmentShader:fo.background.fragmentShader,side:Jo,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=k,h.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,h.material.toneMapped=jn.getTransfer(k.colorSpace)!==sr,k.matrixAutoUpdate===!0&&k.updateMatrix(),h.material.uniforms.uvTransform.value.copy(k.matrix),(m!==k||v!==k.version||y!==r.toneMapping)&&(h.material.needsUpdate=!0,m=k,v=k.version,y=r.toneMapping),h.layers.enableAll(),R.unshift(h,h.geometry,h.material,0,0,null))}function S(R,C){R.getRGB(Qy,yR(r)),n.buffers.color.setClear(Qy.r,Qy.g,Qy.b,C,a)}function T(){p!==void 0&&(p.geometry.dispose(),p.material.dispose()),h!==void 0&&(h.geometry.dispose(),h.material.dispose())}return{getClearColor:function(){return l},setClearColor:function(R,C=1){l.set(R),u=C,S(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(R){u=R,S(l,u)},render:M,addToRenderList:w,dispose:T}}function Mk(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=v(null);let s=i,a=!1;function l(L,W,q,re,oe){let Se=!1;const he=m(re,q,W);s!==he&&(s=he,h(s.object)),Se=y(L,re,q,oe),Se&&_(L,re,q,oe),oe!==null&&e.update(oe,r.ELEMENT_ARRAY_BUFFER),(Se||a)&&(a=!1,C(L,W,q,re),oe!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(oe).buffer))}function u(){return r.createVertexArray()}function h(L){return r.bindVertexArray(L)}function p(L){return r.deleteVertexArray(L)}function m(L,W,q){const re=q.wireframe===!0;let oe=n[L.id];oe===void 0&&(oe={},n[L.id]=oe);let Se=oe[W.id];Se===void 0&&(Se={},oe[W.id]=Se);let he=Se[re];return he===void 0&&(he=v(u()),Se[re]=he),he}function v(L){const W=[],q=[],re=[];for(let oe=0;oe<t;oe++)W[oe]=0,q[oe]=0,re[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:q,attributeDivisors:re,object:L,attributes:{},index:null}}function y(L,W,q,re){const oe=s.attributes,Se=W.attributes;let he=0;const Ee=q.getAttributes();for(const Y in Ee)if(Ee[Y].location>=0){const se=oe[Y];let K=Se[Y];if(K===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&(K=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&(K=L.instanceColor)),se===void 0||se.attribute!==K||K&&se.data!==K.data)return!0;he++}return s.attributesNum!==he||s.index!==re}function _(L,W,q,re){const oe={},Se=W.attributes;let he=0;const Ee=q.getAttributes();for(const Y in Ee)if(Ee[Y].location>=0){let se=Se[Y];se===void 0&&(Y==="instanceMatrix"&&L.instanceMatrix&&(se=L.instanceMatrix),Y==="instanceColor"&&L.instanceColor&&(se=L.instanceColor));const K={};K.attribute=se,se&&se.data&&(K.data=se.data),oe[Y]=K,he++}s.attributes=oe,s.attributesNum=he,s.index=re}function M(){const L=s.newAttributes;for(let W=0,q=L.length;W<q;W++)L[W]=0}function w(L){S(L,0)}function S(L,W){const q=s.newAttributes,re=s.enabledAttributes,oe=s.attributeDivisors;q[L]=1,re[L]===0&&(r.enableVertexAttribArray(L),re[L]=1),oe[L]!==W&&(r.vertexAttribDivisor(L,W),oe[L]=W)}function T(){const L=s.newAttributes,W=s.enabledAttributes;for(let q=0,re=W.length;q<re;q++)W[q]!==L[q]&&(r.disableVertexAttribArray(q),W[q]=0)}function R(L,W,q,re,oe,Se,he){he===!0?r.vertexAttribIPointer(L,W,q,oe,Se):r.vertexAttribPointer(L,W,q,re,oe,Se)}function C(L,W,q,re){M();const oe=re.attributes,Se=q.getAttributes(),he=W.defaultAttributeValues;for(const Ee in Se){const Y=Se[Ee];if(Y.location>=0){let ge=oe[Ee];if(ge===void 0&&(Ee==="instanceMatrix"&&L.instanceMatrix&&(ge=L.instanceMatrix),Ee==="instanceColor"&&L.instanceColor&&(ge=L.instanceColor)),ge!==void 0){const se=ge.normalized,K=ge.itemSize,ve=e.get(ge);if(ve===void 0)continue;const We=ve.buffer,we=ve.type,Le=ve.bytesPerElement,Fe=we===r.INT||we===r.UNSIGNED_INT||ge.gpuType===Zg;if(ge.isInterleavedBufferAttribute){const He=ge.data,rt=He.stride,yt=ge.offset;if(He.isInstancedInterleavedBuffer){for(let Rt=0;Rt<Y.locationSize;Rt++)S(Y.location+Rt,He.meshPerAttribute);L.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=He.meshPerAttribute*He.count)}else for(let Rt=0;Rt<Y.locationSize;Rt++)w(Y.location+Rt);r.bindBuffer(r.ARRAY_BUFFER,We);for(let Rt=0;Rt<Y.locationSize;Rt++)R(Y.location+Rt,K/Y.locationSize,we,se,rt*Le,(yt+K/Y.locationSize*Rt)*Le,Fe)}else{if(ge.isInstancedBufferAttribute){for(let He=0;He<Y.locationSize;He++)S(Y.location+He,ge.meshPerAttribute);L.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let He=0;He<Y.locationSize;He++)w(Y.location+He);r.bindBuffer(r.ARRAY_BUFFER,We);for(let He=0;He<Y.locationSize;He++)R(Y.location+He,K/Y.locationSize,we,se,K*Le,K/Y.locationSize*He*Le,Fe)}}else if(he!==void 0){const se=he[Ee];if(se!==void 0)switch(se.length){case 2:r.vertexAttrib2fv(Y.location,se);break;case 3:r.vertexAttrib3fv(Y.location,se);break;case 4:r.vertexAttrib4fv(Y.location,se);break;default:r.vertexAttrib1fv(Y.location,se)}}}}T()}function k(){z();for(const L in n){const W=n[L];for(const q in W){const re=W[q];for(const oe in re)p(re[oe].object),delete re[oe];delete W[q]}delete n[L]}}function O(L){if(n[L.id]===void 0)return;const W=n[L.id];for(const q in W){const re=W[q];for(const oe in re)p(re[oe].object),delete re[oe];delete W[q]}delete n[L.id]}function V(L){for(const W in n){const q=n[W];if(q[L.id]===void 0)continue;const re=q[L.id];for(const oe in re)p(re[oe].object),delete re[oe];delete q[L.id]}}function z(){F(),a=!0,s!==i&&(s=i,h(s.object))}function F(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:l,reset:z,resetDefaultState:F,dispose:k,releaseStatesOfGeometry:O,releaseStatesOfProgram:V,initAttributes:M,enableAttribute:w,disableUnusedAttributes:T}}function Ek(r,e,t){let n;function i(h){n=h}function s(h,p){r.drawArrays(n,h,p),t.update(p,n,1)}function a(h,p,m){m!==0&&(r.drawArraysInstanced(n,h,p,m),t.update(p,n,m))}function l(h,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,h,0,p,0,m);let y=0;for(let _=0;_<m;_++)y+=p[_];t.update(y,n,1)}function u(h,p,m,v){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<h.length;_++)a(h[_],p[_],v[_]);else{y.multiDrawArraysInstancedWEBGL(n,h,0,p,0,v,0,m);let _=0;for(let M=0;M<m;M++)_+=p[M]*v[M];t.update(_,n,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function Ck(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(V){return!(V!==Kr&&n.convert(V)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(V){const z=V===vi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(V!==Xs&&n.convert(V)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&V!==br&&!z)}function u(V){if(V==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const p=u(h);p!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",p,"instead."),h=p);const m=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),_=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=r.getParameter(r.MAX_TEXTURE_SIZE),w=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),S=r.getParameter(r.MAX_VERTEX_ATTRIBS),T=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),R=r.getParameter(r.MAX_VARYING_VECTORS),C=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),k=_>0,O=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:m,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:_,maxTextureSize:M,maxCubemapSize:w,maxAttributes:S,maxVertexUniforms:T,maxVaryings:R,maxFragmentUniforms:C,vertexTextures:k,maxSamples:O}}function bk(r){const e=this;let t=null,n=0,i=!1,s=!1;const a=new ko,l=new yn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||n!==0||i;return i=v,n=m.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,v){t=p(m,v,0)},this.setState=function(m,v,y){const _=m.clippingPlanes,M=m.clipIntersection,w=m.clipShadows,S=r.get(m);if(!i||_===null||_.length===0||s&&!w)s?p(null):h();else{const T=s?0:n,R=T*4;let C=S.clippingState||null;u.value=C,C=p(_,v,R,y);for(let k=0;k!==R;++k)C[k]=t[k];S.clippingState=C,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=T}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(m,v,y,_){const M=m!==null?m.length:0;let w=null;if(M!==0){if(w=u.value,_!==!0||w===null){const S=y+M*4,T=v.matrixWorldInverse;l.getNormalMatrix(T),(w===null||w.length<S)&&(w=new Float32Array(S));for(let R=0,C=y;R!==M;++R,C+=4)a.copy(m[R]).applyMatrix4(T,l),a.normal.toArray(w,C),w[C+3]=a.constant}u.value=w,u.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,w}}function Tk(r){let e=new WeakMap;function t(a,l){return l===pp?a.mapping=Ko:l===Sg&&(a.mapping=yu),a}function n(a){if(a&&a.isTexture){const l=a.mapping;if(l===pp||l===Sg)if(e.has(a)){const u=e.get(a).texture;return t(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const h=new Cw(u.height);return h.fromEquirectangularTexture(r,a),e.set(a,h),a.addEventListener("dispose",i),t(h.texture,a.mapping)}else return null}}return a}function i(a){const l=a.target;l.removeEventListener("dispose",i);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const Xh=4,X1=[.125,.215,.35,.446,.526,.582],Id=20,mA=new Wo,J1=new wt;let gA=null,vA=0,yA=0,xA=!1;const Rd=(1+Math.sqrt(5))/2,Lh=1/Rd,K1=[new Z(-Rd,Lh,0),new Z(Rd,Lh,0),new Z(-Lh,0,Rd),new Z(Lh,0,Rd),new Z(0,Rd,-Lh),new Z(0,Rd,Lh),new Z(-1,1,-1),new Z(1,1,-1),new Z(-1,1,1),new Z(1,1,1)];class IS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){gA=this._renderer.getRenderTarget(),vA=this._renderer.getActiveCubeFace(),yA=this._renderer.getActiveMipmapLevel(),xA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Q1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Z1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(gA,vA,yA),this._renderer.xr.enabled=xA,e.scissorTest=!1,qy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ko||e.mapping===yu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),gA=this._renderer.getRenderTarget(),vA=this._renderer.getActiveCubeFace(),yA=this._renderer.getActiveMipmapLevel(),xA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Jn,minFilter:Jn,generateMipmaps:!1,type:vi,format:Kr,colorSpace:Zo,depthBuffer:!1},i=Y1(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Y1(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Rk(s)),this._blurMaterial=Ik(s,e,t)}return i}_compileMaterial(e){const t=new Tr(this._lodPlanes[0],e);this._renderer.compile(t,mA)}_sceneToCubeUV(e,t,n,i){const l=new Gr(90,1,t,n),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,v=p.toneMapping;p.getClearColor(J1),p.toneMapping=Vo,p.autoClear=!1;const y=new Ws({name:"PMREM.Background",side:ts,depthWrite:!1,depthTest:!1}),_=new Tr(new vf,y);let M=!1;const w=e.background;w?w.isColor&&(y.color.copy(w),e.background=null,M=!0):(y.color.copy(J1),M=!0);for(let S=0;S<6;S++){const T=S%3;T===0?(l.up.set(0,u[S],0),l.lookAt(h[S],0,0)):T===1?(l.up.set(0,0,u[S]),l.lookAt(0,h[S],0)):(l.up.set(0,u[S],0),l.lookAt(0,0,h[S]));const R=this._cubeSize;qy(i,T*R,S>2?R:0,R,R),p.setRenderTarget(i),M&&p.render(_,l),p.render(e,l)}_.geometry.dispose(),_.material.dispose(),p.toneMapping=v,p.autoClear=m,e.background=w}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Ko||e.mapping===yu;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Q1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Z1());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Tr(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;qy(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(a,mA)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=K1[(i-s-1)%K1.length];this._blur(e,s-1,s,a,l)}t.autoClear=n}_blur(e,t,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,a,l){const u=this._renderer,h=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new Tr(this._lodPlanes[i],h),v=h.uniforms,y=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Id-1),M=s/_,w=isFinite(s)?1+Math.floor(p*M):Id;w>Id&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Id}`);const S=[];let T=0;for(let V=0;V<Id;++V){const z=V/M,F=Math.exp(-z*z/2);S.push(F),V===0?T+=F:V<w&&(T+=2*F)}for(let V=0;V<S.length;V++)S[V]=S[V]/T;v.envMap.value=e.texture,v.samples.value=w,v.weights.value=S,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:R}=this;v.dTheta.value=_,v.mipInt.value=R-n;const C=this._sizeLods[i],k=3*C*(i>R-Xh?i-R+Xh:0),O=4*(this._cubeSize-C);qy(t,k,O,3*C,2*C),u.setRenderTarget(t),u.render(m,mA)}}function Rk(r){const e=[],t=[],n=[];let i=r;const s=r-Xh+1+X1.length;for(let a=0;a<s;a++){const l=Math.pow(2,i);t.push(l);let u=1/l;a>r-Xh?u=X1[a-r+Xh-1]:a===0&&(u=0),n.push(u);const h=1/(l-2),p=-h,m=1+h,v=[p,p,m,p,m,m,p,p,m,m,p,m],y=6,_=6,M=3,w=2,S=1,T=new Float32Array(M*_*y),R=new Float32Array(w*_*y),C=new Float32Array(S*_*y);for(let O=0;O<y;O++){const V=O%3*2/3-1,z=O>2?0:-1,F=[V,z,0,V+2/3,z,0,V+2/3,z+1,0,V,z,0,V+2/3,z+1,0,V,z+1,0];T.set(F,M*_*O),R.set(v,w*_*O);const L=[O,O,O,O,O,O];C.set(L,S*_*O)}const k=new xn;k.setAttribute("position",new Kn(T,M)),k.setAttribute("uv",new Kn(R,w)),k.setAttribute("faceIndex",new Kn(C,S)),e.push(k),i>Xh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Y1(r,e,t){const n=new Js(r,e,t);return n.texture.mapping=Lp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function qy(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function Ik(r,e,t){const n=new Float32Array(Id),i=new Z(0,1,0);return new Cs({name:"SphericalGaussianBlur",defines:{n:Id,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:tM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Go,depthTest:!1,depthWrite:!1})}function Z1(){return new Cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:tM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Go,depthTest:!1,depthWrite:!1})}function Q1(){return new Cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:tM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Go,depthTest:!1,depthWrite:!1})}function tM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Pk(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const u=l.mapping,h=u===pp||u===Sg,p=u===Ko||u===yu;if(h||p){let m=e.get(l);const v=m!==void 0?m.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new IS(r)),m=h?t.fromEquirectangular(l,m):t.fromCubemap(l,m),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),m.texture;if(m!==void 0)return m.texture;{const y=l.image;return h&&y&&y.height>0||p&&y&&i(y)?(t===null&&(t=new IS(r)),m=h?t.fromEquirectangular(l):t.fromCubemap(l),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),l.addEventListener("dispose",s),m.texture):null}}}return l}function i(l){let u=0;const h=6;for(let p=0;p<h;p++)l[p]!==void 0&&u++;return u===h}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function Bk(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&kh("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function Dk(r,e,t,n){const i={},s=new WeakMap;function a(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const _ in v.attributes)e.remove(v.attributes[_]);v.removeEventListener("dispose",a),delete i[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(m,v){return i[v.id]===!0||(v.addEventListener("dispose",a),i[v.id]=!0,t.memory.geometries++),v}function u(m){const v=m.attributes;for(const y in v)e.update(v[y],r.ARRAY_BUFFER)}function h(m){const v=[],y=m.index,_=m.attributes.position;let M=0;if(y!==null){const T=y.array;M=y.version;for(let R=0,C=T.length;R<C;R+=3){const k=T[R+0],O=T[R+1],V=T[R+2];v.push(k,O,O,V,V,k)}}else if(_!==void 0){const T=_.array;M=_.version;for(let R=0,C=T.length/3-1;R<C;R+=3){const k=R+0,O=R+1,V=R+2;v.push(k,O,O,V,V,k)}}else return;const w=new(hR(v)?Mw:ww)(v,1);w.version=M;const S=s.get(m);S&&e.remove(S),s.set(m,w)}function p(m){const v=s.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&h(m)}else h(m);return s.get(m)}return{get:l,update:u,getWireframeAttribute:p}}function Lk(r,e,t){let n;function i(v){n=v}let s,a;function l(v){s=v.type,a=v.bytesPerElement}function u(v,y){r.drawElements(n,y,s,v*a),t.update(y,n,1)}function h(v,y,_){_!==0&&(r.drawElementsInstanced(n,y,s,v*a,_),t.update(y,n,_))}function p(v,y,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,s,v,0,_);let w=0;for(let S=0;S<_;S++)w+=y[S];t.update(w,n,1)}function m(v,y,_,M){if(_===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let S=0;S<v.length;S++)h(v[S]/a,y[S],M[S]);else{w.multiDrawElementsInstancedWEBGL(n,y,0,s,v,0,M,0,_);let S=0;for(let T=0;T<_;T++)S+=y[T]*M[T];t.update(S,n,1)}}this.setMode=i,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=p,this.renderMultiDrawInstances=m}function Nk(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,l){switch(t.calls++,a){case r.TRIANGLES:t.triangles+=l*(s/3);break;case r.LINES:t.lines+=l*(s/2);break;case r.LINE_STRIP:t.lines+=l*(s-1);break;case r.LINE_LOOP:t.lines+=l*s;break;case r.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function Fk(r,e,t){const n=new WeakMap,i=new Xn;function s(a,l,u){const h=a.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=p!==void 0?p.length:0;let v=n.get(l);if(v===void 0||v.count!==m){let L=function(){z.dispose(),n.delete(l),l.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const _=l.morphAttributes.position!==void 0,M=l.morphAttributes.normal!==void 0,w=l.morphAttributes.color!==void 0,S=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],R=l.morphAttributes.color||[];let C=0;_===!0&&(C=1),M===!0&&(C=2),w===!0&&(C=3);let k=l.attributes.position.count*C,O=1;k>e.maxTextureSize&&(O=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const V=new Float32Array(k*O*4*m),z=new wx(V,k,O,m);z.type=br,z.needsUpdate=!0;const F=C*4;for(let W=0;W<m;W++){const q=S[W],re=T[W],oe=R[W],Se=k*O*4*W;for(let he=0;he<q.count;he++){const Ee=he*F;_===!0&&(i.fromBufferAttribute(q,he),V[Se+Ee+0]=i.x,V[Se+Ee+1]=i.y,V[Se+Ee+2]=i.z,V[Se+Ee+3]=0),M===!0&&(i.fromBufferAttribute(re,he),V[Se+Ee+4]=i.x,V[Se+Ee+5]=i.y,V[Se+Ee+6]=i.z,V[Se+Ee+7]=0),w===!0&&(i.fromBufferAttribute(oe,he),V[Se+Ee+8]=i.x,V[Se+Ee+9]=i.y,V[Se+Ee+10]=i.z,V[Se+Ee+11]=oe.itemSize===4?i.w:1)}}v={count:m,texture:z,size:new Je(k,O)},n.set(l,v),l.addEventListener("dispose",L)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(r,"morphTexture",a.morphTexture,t);else{let _=0;for(let w=0;w<h.length;w++)_+=h[w];const M=l.morphTargetsRelative?1:1-_;u.getUniforms().setValue(r,"morphTargetBaseInfluence",M),u.getUniforms().setValue(r,"morphTargetInfluences",h)}u.getUniforms().setValue(r,"morphTargetsTexture",v.texture,t),u.getUniforms().setValue(r,"morphTargetsTextureSize",v.size)}return{update:s}}function Ok(r,e,t,n){let i=new WeakMap;function s(u){const h=n.render.frame,p=u.geometry,m=e.get(u,p);if(i.get(m)!==h&&(e.update(m),i.set(m,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),i.get(u)!==h&&(t.update(u.instanceMatrix,r.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,r.ARRAY_BUFFER),i.set(u,h))),u.isSkinnedMesh){const v=u.skeleton;i.get(v)!==h&&(v.update(),i.set(v,h))}return m}function a(){i=new WeakMap}function l(u){const h=u.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:a}}const dI=new nr,q1=new Rx(1,1),fI=new wx,hI=new Sw,pI=new ev,$1=[],eC=[],tC=new Float32Array(16),nC=new Float32Array(9),rC=new Float32Array(4);function Up(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=$1[i];if(s===void 0&&(s=new Float32Array(i),$1[i]=s),e!==0){n.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,r[a].toArray(s,l)}return s}function xi(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function _i(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Wx(r,e){let t=eC[e];t===void 0&&(t=new Int32Array(e),eC[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function Uk(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function kk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;r.uniform2fv(this.addr,e),_i(t,e)}}function zk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(xi(t,e))return;r.uniform3fv(this.addr,e),_i(t,e)}}function Hk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;r.uniform4fv(this.addr,e),_i(t,e)}}function Gk(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(xi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),_i(t,e)}else{if(xi(t,n))return;rC.set(n),r.uniformMatrix2fv(this.addr,!1,rC),_i(t,n)}}function Vk(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(xi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),_i(t,e)}else{if(xi(t,n))return;nC.set(n),r.uniformMatrix3fv(this.addr,!1,nC),_i(t,n)}}function jk(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(xi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),_i(t,e)}else{if(xi(t,n))return;tC.set(n),r.uniformMatrix4fv(this.addr,!1,tC),_i(t,n)}}function Wk(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Xk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;r.uniform2iv(this.addr,e),_i(t,e)}}function Jk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(xi(t,e))return;r.uniform3iv(this.addr,e),_i(t,e)}}function Kk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;r.uniform4iv(this.addr,e),_i(t,e)}}function Yk(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Zk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;r.uniform2uiv(this.addr,e),_i(t,e)}}function Qk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(xi(t,e))return;r.uniform3uiv(this.addr,e),_i(t,e)}}function qk(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;r.uniform4uiv(this.addr,e),_i(t,e)}}function $k(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(q1.compareFunction=xw,s=q1):s=dI,t.setTexture2D(e||s,i)}function e4(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||hI,i)}function t4(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||pI,i)}function n4(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||fI,i)}function r4(r){switch(r){case 5126:return Uk;case 35664:return kk;case 35665:return zk;case 35666:return Hk;case 35674:return Gk;case 35675:return Vk;case 35676:return jk;case 5124:case 35670:return Wk;case 35667:case 35671:return Xk;case 35668:case 35672:return Jk;case 35669:case 35673:return Kk;case 5125:return Yk;case 36294:return Zk;case 36295:return Qk;case 36296:return qk;case 35678:case 36198:case 36298:case 36306:case 35682:return $k;case 35679:case 36299:case 36307:return e4;case 35680:case 36300:case 36308:case 36293:return t4;case 36289:case 36303:case 36311:case 36292:return n4}}function i4(r,e){r.uniform1fv(this.addr,e)}function s4(r,e){const t=Up(e,this.size,2);r.uniform2fv(this.addr,t)}function a4(r,e){const t=Up(e,this.size,3);r.uniform3fv(this.addr,t)}function o4(r,e){const t=Up(e,this.size,4);r.uniform4fv(this.addr,t)}function l4(r,e){const t=Up(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function c4(r,e){const t=Up(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function u4(r,e){const t=Up(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function d4(r,e){r.uniform1iv(this.addr,e)}function f4(r,e){r.uniform2iv(this.addr,e)}function h4(r,e){r.uniform3iv(this.addr,e)}function p4(r,e){r.uniform4iv(this.addr,e)}function m4(r,e){r.uniform1uiv(this.addr,e)}function g4(r,e){r.uniform2uiv(this.addr,e)}function v4(r,e){r.uniform3uiv(this.addr,e)}function y4(r,e){r.uniform4uiv(this.addr,e)}function x4(r,e,t){const n=this.cache,i=e.length,s=Wx(t,i);xi(n,s)||(r.uniform1iv(this.addr,s),_i(n,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||dI,s[a])}function _4(r,e,t){const n=this.cache,i=e.length,s=Wx(t,i);xi(n,s)||(r.uniform1iv(this.addr,s),_i(n,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||hI,s[a])}function A4(r,e,t){const n=this.cache,i=e.length,s=Wx(t,i);xi(n,s)||(r.uniform1iv(this.addr,s),_i(n,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||pI,s[a])}function S4(r,e,t){const n=this.cache,i=e.length,s=Wx(t,i);xi(n,s)||(r.uniform1iv(this.addr,s),_i(n,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||fI,s[a])}function w4(r){switch(r){case 5126:return i4;case 35664:return s4;case 35665:return a4;case 35666:return o4;case 35674:return l4;case 35675:return c4;case 35676:return u4;case 5124:case 35670:return d4;case 35667:case 35671:return f4;case 35668:case 35672:return h4;case 35669:case 35673:return p4;case 5125:return m4;case 36294:return g4;case 36295:return v4;case 36296:return y4;case 35678:case 36198:case 36298:case 36306:case 35682:return x4;case 35679:case 36299:case 36307:return _4;case 35680:case 36300:case 36308:case 36293:return A4;case 36289:case 36303:case 36311:case 36292:return S4}}class M4{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=r4(t.type)}}class E4{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=w4(t.type)}}class C4{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const l=i[s];l.setValue(e,t[l.id],n)}}}const _A=/(\w+)(\])?(\[|\.)?/g;function iC(r,e){r.seq.push(e),r.map[e.id]=e}function b4(r,e,t){const n=r.name,i=n.length;for(_A.lastIndex=0;;){const s=_A.exec(n),a=_A.lastIndex;let l=s[1];const u=s[2]==="]",h=s[3];if(u&&(l=l|0),h===void 0||h==="["&&a+2===i){iC(t,h===void 0?new M4(l,r,e):new E4(l,r,e));break}else{let m=t.map[l];m===void 0&&(m=new C4(l),iC(t,m)),t=m}}}class d0{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);b4(s,a,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,a=t.length;s!==a;++s){const l=t[s],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function sC(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const T4=37297;let R4=0;function I4(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const l=a+1;n.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return n.join(`
`)}const aC=new yn;function P4(r){jn._getMatrix(aC,jn.workingColorSpace,r);const e=`mat3( ${aC.elements.map(t=>t.toFixed(4))} )`;switch(jn.getTransfer(r)){case Mg:return[e,"LinearTransferOETF"];case sr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function oC(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+I4(r.getShaderSource(e),a)}else return i}function B4(r,e){const t=P4(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function D4(r,e){let t;switch(e){case XT:t="Linear";break;case JT:t="Reinhard";break;case KT:t="Cineon";break;case cw:t="ACESFilmic";break;case ZT:t="AgX";break;case QT:t="Neutral";break;case YT:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const $y=new Z;function L4(){jn.getLuminanceCoefficients($y);const r=$y.x.toFixed(4),e=$y.y.toFixed(4),t=$y.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function N4(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ig).join(`
`)}function F4(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function O4(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),a=s.name;let l=1;s.type===r.FLOAT_MAT2&&(l=2),s.type===r.FLOAT_MAT3&&(l=3),s.type===r.FLOAT_MAT4&&(l=4),t[a]={type:s.type,location:r.getAttribLocation(e,a),locationSize:l}}return t}function ig(r){return r!==""}function lC(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cC(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const U4=/^[ \t]*#include +<([\w\d./]+)>/gm;function PS(r){return r.replace(U4,z4)}const k4=new Map;function z4(r,e){let t=Cn[e];if(t===void 0){const n=k4.get(e);if(n!==void 0)t=Cn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return PS(t)}const H4=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uC(r){return r.replace(H4,G4)}function G4(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function dC(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function V4(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===px?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===lg?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===lo&&(e="SHADOWMAP_TYPE_VSM"),e}function j4(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ko:case yu:e="ENVMAP_TYPE_CUBE";break;case Lp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function W4(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case yu:e="ENVMAP_MODE_REFRACTION";break}return e}function X4(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Yg:e="ENVMAP_BLENDING_MULTIPLY";break;case jT:e="ENVMAP_BLENDING_MIX";break;case WT:e="ENVMAP_BLENDING_ADD";break}return e}function J4(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function K4(r,e,t,n){const i=r.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const u=V4(t),h=j4(t),p=W4(t),m=X4(t),v=J4(t),y=N4(t),_=F4(s),M=i.createProgram();let w,S,T=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(ig).join(`
`),w.length>0&&(w+=`
`),S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(ig).join(`
`),S.length>0&&(S+=`
`)):(w=[dC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ig).join(`
`),S=[dC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Vo?"#define TONE_MAPPING":"",t.toneMapping!==Vo?Cn.tonemapping_pars_fragment:"",t.toneMapping!==Vo?D4("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Cn.colorspace_pars_fragment,B4("linearToOutputTexel",t.outputColorSpace),L4(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ig).join(`
`)),a=PS(a),a=lC(a,t),a=cC(a,t),l=PS(l),l=lC(l,t),l=cC(l,t),a=uC(a),l=uC(l),t.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,w=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,S=["#define varying in",t.glslVersion===SS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===SS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+S);const R=T+w+a,C=T+S+l,k=sC(i,i.VERTEX_SHADER,R),O=sC(i,i.FRAGMENT_SHADER,C);i.attachShader(M,k),i.attachShader(M,O),t.index0AttributeName!==void 0?i.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(M,0,"position"),i.linkProgram(M);function V(W){if(r.debug.checkShaderErrors){const q=i.getProgramInfoLog(M).trim(),re=i.getShaderInfoLog(k).trim(),oe=i.getShaderInfoLog(O).trim();let Se=!0,he=!0;if(i.getProgramParameter(M,i.LINK_STATUS)===!1)if(Se=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,M,k,O);else{const Ee=oC(i,k,"vertex"),Y=oC(i,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(M,i.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+q+`
`+Ee+`
`+Y)}else q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",q):(re===""||oe==="")&&(he=!1);he&&(W.diagnostics={runnable:Se,programLog:q,vertexShader:{log:re,prefix:w},fragmentShader:{log:oe,prefix:S}})}i.deleteShader(k),i.deleteShader(O),z=new d0(i,M),F=O4(i,M)}let z;this.getUniforms=function(){return z===void 0&&V(this),z};let F;this.getAttributes=function(){return F===void 0&&V(this),F};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(M,T4)),L},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=R4++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=k,this.fragmentShader=O,this}let Y4=0;class Z4{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Q4(e),t.set(e,n)),n}}class Q4{constructor(e){this.id=Y4++,this.code=e,this.usedTimes=0}}function q4(r,e,t,n,i,s,a){const l=new $d,u=new Z4,h=new Set,p=[],m=i.logarithmicDepthBuffer,v=i.vertexTextures;let y=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(F){return h.add(F),F===0?"uv":`uv${F}`}function w(F,L,W,q,re){const oe=q.fog,Se=re.geometry,he=F.isMeshStandardMaterial?q.environment:null,Ee=(F.isMeshStandardMaterial?t:e).get(F.envMap||he),Y=Ee&&Ee.mapping===Lp?Ee.image.height:null,ge=_[F.type];F.precision!==null&&(y=i.getMaxPrecision(F.precision),y!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",y,"instead."));const se=Se.morphAttributes.position||Se.morphAttributes.normal||Se.morphAttributes.color,K=se!==void 0?se.length:0;let ve=0;Se.morphAttributes.position!==void 0&&(ve=1),Se.morphAttributes.normal!==void 0&&(ve=2),Se.morphAttributes.color!==void 0&&(ve=3);let We,we,Le,Fe;if(ge){const fn=fo[ge];We=fn.vertexShader,we=fn.fragmentShader}else We=F.vertexShader,we=F.fragmentShader,u.update(F),Le=u.getVertexShaderID(F),Fe=u.getFragmentShaderID(F);const He=r.getRenderTarget(),rt=r.state.buffers.depth.getReversed(),yt=re.isInstancedMesh===!0,Rt=re.isBatchedMesh===!0,Qt=!!F.map,Ke=!!F.matcap,Ze=!!Ee,ee=!!F.aoMap,Dt=!!F.lightMap,et=!!F.bumpMap,At=!!F.normalMap,at=!!F.displacementMap,Kt=!!F.emissiveMap,ht=!!F.metalnessMap,N=!!F.roughnessMap,D=F.anisotropy>0,Q=F.clearcoat>0,ye=F.dispersion>0,xe=F.iridescence>0,pe=F.sheen>0,je=F.transmission>0,Ye=D&&!!F.anisotropyMap,$e=Q&&!!F.clearcoatMap,kt=Q&&!!F.clearcoatNormalMap,qe=Q&&!!F.clearcoatRoughnessMap,xt=xe&&!!F.iridescenceMap,zt=xe&&!!F.iridescenceThicknessMap,Bt=pe&&!!F.sheenColorMap,St=pe&&!!F.sheenRoughnessMap,de=!!F.specularMap,De=!!F.specularColorMap,it=!!F.specularIntensityMap,le=je&&!!F.transmissionMap,Ce=je&&!!F.thicknessMap,Pe=!!F.gradientMap,Ge=!!F.alphaMap,Mt=F.alphaTest>0,vt=!!F.alphaHash,qt=!!F.extensions;let Rn=Vo;F.toneMapped&&(He===null||He.isXRRenderTarget===!0)&&(Rn=r.toneMapping);const $n={shaderID:ge,shaderType:F.type,shaderName:F.name,vertexShader:We,fragmentShader:we,defines:F.defines,customVertexShaderID:Le,customFragmentShaderID:Fe,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:y,batching:Rt,batchingColor:Rt&&re._colorsTexture!==null,instancing:yt,instancingColor:yt&&re.instanceColor!==null,instancingMorph:yt&&re.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:He===null?r.outputColorSpace:He.isXRRenderTarget===!0?He.texture.colorSpace:Zo,alphaToCoverage:!!F.alphaToCoverage,map:Qt,matcap:Ke,envMap:Ze,envMapMode:Ze&&Ee.mapping,envMapCubeUVHeight:Y,aoMap:ee,lightMap:Dt,bumpMap:et,normalMap:At,displacementMap:v&&at,emissiveMap:Kt,normalMapObjectSpace:At&&F.normalMapType===sR,normalMapTangentSpace:At&&F.normalMapType===wu,metalnessMap:ht,roughnessMap:N,anisotropy:D,anisotropyMap:Ye,clearcoat:Q,clearcoatMap:$e,clearcoatNormalMap:kt,clearcoatRoughnessMap:qe,dispersion:ye,iridescence:xe,iridescenceMap:xt,iridescenceThicknessMap:zt,sheen:pe,sheenColorMap:Bt,sheenRoughnessMap:St,specularMap:de,specularColorMap:De,specularIntensityMap:it,transmission:je,transmissionMap:le,thicknessMap:Ce,gradientMap:Pe,opaque:F.transparent===!1&&F.blending===Zd&&F.alphaToCoverage===!1,alphaMap:Ge,alphaTest:Mt,alphaHash:vt,combine:F.combine,mapUv:Qt&&M(F.map.channel),aoMapUv:ee&&M(F.aoMap.channel),lightMapUv:Dt&&M(F.lightMap.channel),bumpMapUv:et&&M(F.bumpMap.channel),normalMapUv:At&&M(F.normalMap.channel),displacementMapUv:at&&M(F.displacementMap.channel),emissiveMapUv:Kt&&M(F.emissiveMap.channel),metalnessMapUv:ht&&M(F.metalnessMap.channel),roughnessMapUv:N&&M(F.roughnessMap.channel),anisotropyMapUv:Ye&&M(F.anisotropyMap.channel),clearcoatMapUv:$e&&M(F.clearcoatMap.channel),clearcoatNormalMapUv:kt&&M(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:qe&&M(F.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&M(F.iridescenceMap.channel),iridescenceThicknessMapUv:zt&&M(F.iridescenceThicknessMap.channel),sheenColorMapUv:Bt&&M(F.sheenColorMap.channel),sheenRoughnessMapUv:St&&M(F.sheenRoughnessMap.channel),specularMapUv:de&&M(F.specularMap.channel),specularColorMapUv:De&&M(F.specularColorMap.channel),specularIntensityMapUv:it&&M(F.specularIntensityMap.channel),transmissionMapUv:le&&M(F.transmissionMap.channel),thicknessMapUv:Ce&&M(F.thicknessMap.channel),alphaMapUv:Ge&&M(F.alphaMap.channel),vertexTangents:!!Se.attributes.tangent&&(At||D),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!Se.attributes.color&&Se.attributes.color.itemSize===4,pointsUvs:re.isPoints===!0&&!!Se.attributes.uv&&(Qt||Ge),fog:!!oe,useFog:F.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:rt,skinning:re.isSkinnedMesh===!0,morphTargets:Se.morphAttributes.position!==void 0,morphNormals:Se.morphAttributes.normal!==void 0,morphColors:Se.morphAttributes.color!==void 0,morphTargetsCount:K,morphTextureStride:ve,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:F.dithering,shadowMapEnabled:r.shadowMap.enabled&&W.length>0,shadowMapType:r.shadowMap.type,toneMapping:Rn,decodeVideoTexture:Qt&&F.map.isVideoTexture===!0&&jn.getTransfer(F.map.colorSpace)===sr,decodeVideoTextureEmissive:Kt&&F.emissiveMap.isVideoTexture===!0&&jn.getTransfer(F.emissiveMap.colorSpace)===sr,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Ta,flipSided:F.side===ts,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:qt&&F.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qt&&F.extensions.multiDraw===!0||Rt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return $n.vertexUv1s=h.has(1),$n.vertexUv2s=h.has(2),$n.vertexUv3s=h.has(3),h.clear(),$n}function S(F){const L=[];if(F.shaderID?L.push(F.shaderID):(L.push(F.customVertexShaderID),L.push(F.customFragmentShaderID)),F.defines!==void 0)for(const W in F.defines)L.push(W),L.push(F.defines[W]);return F.isRawShaderMaterial===!1&&(T(L,F),R(L,F),L.push(r.outputColorSpace)),L.push(F.customProgramCacheKey),L.join()}function T(F,L){F.push(L.precision),F.push(L.outputColorSpace),F.push(L.envMapMode),F.push(L.envMapCubeUVHeight),F.push(L.mapUv),F.push(L.alphaMapUv),F.push(L.lightMapUv),F.push(L.aoMapUv),F.push(L.bumpMapUv),F.push(L.normalMapUv),F.push(L.displacementMapUv),F.push(L.emissiveMapUv),F.push(L.metalnessMapUv),F.push(L.roughnessMapUv),F.push(L.anisotropyMapUv),F.push(L.clearcoatMapUv),F.push(L.clearcoatNormalMapUv),F.push(L.clearcoatRoughnessMapUv),F.push(L.iridescenceMapUv),F.push(L.iridescenceThicknessMapUv),F.push(L.sheenColorMapUv),F.push(L.sheenRoughnessMapUv),F.push(L.specularMapUv),F.push(L.specularColorMapUv),F.push(L.specularIntensityMapUv),F.push(L.transmissionMapUv),F.push(L.thicknessMapUv),F.push(L.combine),F.push(L.fogExp2),F.push(L.sizeAttenuation),F.push(L.morphTargetsCount),F.push(L.morphAttributeCount),F.push(L.numDirLights),F.push(L.numPointLights),F.push(L.numSpotLights),F.push(L.numSpotLightMaps),F.push(L.numHemiLights),F.push(L.numRectAreaLights),F.push(L.numDirLightShadows),F.push(L.numPointLightShadows),F.push(L.numSpotLightShadows),F.push(L.numSpotLightShadowsWithMaps),F.push(L.numLightProbes),F.push(L.shadowMapType),F.push(L.toneMapping),F.push(L.numClippingPlanes),F.push(L.numClipIntersection),F.push(L.depthPacking)}function R(F,L){l.disableAll(),L.supportsVertexTextures&&l.enable(0),L.instancing&&l.enable(1),L.instancingColor&&l.enable(2),L.instancingMorph&&l.enable(3),L.matcap&&l.enable(4),L.envMap&&l.enable(5),L.normalMapObjectSpace&&l.enable(6),L.normalMapTangentSpace&&l.enable(7),L.clearcoat&&l.enable(8),L.iridescence&&l.enable(9),L.alphaTest&&l.enable(10),L.vertexColors&&l.enable(11),L.vertexAlphas&&l.enable(12),L.vertexUv1s&&l.enable(13),L.vertexUv2s&&l.enable(14),L.vertexUv3s&&l.enable(15),L.vertexTangents&&l.enable(16),L.anisotropy&&l.enable(17),L.alphaHash&&l.enable(18),L.batching&&l.enable(19),L.dispersion&&l.enable(20),L.batchingColor&&l.enable(21),F.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reverseDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.decodeVideoTextureEmissive&&l.enable(20),L.alphaToCoverage&&l.enable(21),F.push(l.mask)}function C(F){const L=_[F.type];let W;if(L){const q=fo[L];W=Ew.clone(q.uniforms)}else W=F.uniforms;return W}function k(F,L){let W;for(let q=0,re=p.length;q<re;q++){const oe=p[q];if(oe.cacheKey===L){W=oe,++W.usedTimes;break}}return W===void 0&&(W=new K4(r,L,F,s),p.push(W)),W}function O(F){if(--F.usedTimes===0){const L=p.indexOf(F);p[L]=p[p.length-1],p.pop(),F.destroy()}}function V(F){u.remove(F)}function z(){u.dispose()}return{getParameters:w,getProgramCacheKey:S,getUniforms:C,acquireProgram:k,releaseProgram:O,releaseShaderCache:V,programs:p,dispose:z}}function $4(){let r=new WeakMap;function e(a){return r.has(a)}function t(a){let l=r.get(a);return l===void 0&&(l={},r.set(a,l)),l}function n(a){r.delete(a)}function i(a,l,u){r.get(a)[l]=u}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function ez(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function fC(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function hC(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function a(m,v,y,_,M,w){let S=r[e];return S===void 0?(S={id:m.id,object:m,geometry:v,material:y,groupOrder:_,renderOrder:m.renderOrder,z:M,group:w},r[e]=S):(S.id=m.id,S.object=m,S.geometry=v,S.material=y,S.groupOrder=_,S.renderOrder=m.renderOrder,S.z=M,S.group=w),e++,S}function l(m,v,y,_,M,w){const S=a(m,v,y,_,M,w);y.transmission>0?n.push(S):y.transparent===!0?i.push(S):t.push(S)}function u(m,v,y,_,M,w){const S=a(m,v,y,_,M,w);y.transmission>0?n.unshift(S):y.transparent===!0?i.unshift(S):t.unshift(S)}function h(m,v){t.length>1&&t.sort(m||ez),n.length>1&&n.sort(v||fC),i.length>1&&i.sort(v||fC)}function p(){for(let m=e,v=r.length;m<v;m++){const y=r[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:l,unshift:u,finish:p,sort:h}}function tz(){let r=new WeakMap;function e(n,i){const s=r.get(n);let a;return s===void 0?(a=new hC,r.set(n,[a])):i>=s.length?(a=new hC,s.push(a)):a=s[i],a}function t(){r=new WeakMap}return{get:e,dispose:t}}function nz(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new wt};break;case"SpotLight":t={position:new Z,direction:new Z,color:new wt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new wt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new wt,groundColor:new wt};break;case"RectAreaLight":t={color:new wt,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return r[e.id]=t,t}}}function rz(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let iz=0;function sz(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function az(r){const e=new nz,t=rz(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)n.probe.push(new Z);const i=new Z,s=new nn,a=new nn;function l(h){let p=0,m=0,v=0;for(let F=0;F<9;F++)n.probe[F].set(0,0,0);let y=0,_=0,M=0,w=0,S=0,T=0,R=0,C=0,k=0,O=0,V=0;h.sort(sz);for(let F=0,L=h.length;F<L;F++){const W=h[F],q=W.color,re=W.intensity,oe=W.distance,Se=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)p+=q.r*re,m+=q.g*re,v+=q.b*re;else if(W.isLightProbe){for(let he=0;he<9;he++)n.probe[he].addScaledVector(W.sh.coefficients[he],re);V++}else if(W.isDirectionalLight){const he=e.get(W);if(he.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const Ee=W.shadow,Y=t.get(W);Y.shadowIntensity=Ee.intensity,Y.shadowBias=Ee.bias,Y.shadowNormalBias=Ee.normalBias,Y.shadowRadius=Ee.radius,Y.shadowMapSize=Ee.mapSize,n.directionalShadow[y]=Y,n.directionalShadowMap[y]=Se,n.directionalShadowMatrix[y]=W.shadow.matrix,T++}n.directional[y]=he,y++}else if(W.isSpotLight){const he=e.get(W);he.position.setFromMatrixPosition(W.matrixWorld),he.color.copy(q).multiplyScalar(re),he.distance=oe,he.coneCos=Math.cos(W.angle),he.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),he.decay=W.decay,n.spot[M]=he;const Ee=W.shadow;if(W.map&&(n.spotLightMap[k]=W.map,k++,Ee.updateMatrices(W),W.castShadow&&O++),n.spotLightMatrix[M]=Ee.matrix,W.castShadow){const Y=t.get(W);Y.shadowIntensity=Ee.intensity,Y.shadowBias=Ee.bias,Y.shadowNormalBias=Ee.normalBias,Y.shadowRadius=Ee.radius,Y.shadowMapSize=Ee.mapSize,n.spotShadow[M]=Y,n.spotShadowMap[M]=Se,C++}M++}else if(W.isRectAreaLight){const he=e.get(W);he.color.copy(q).multiplyScalar(re),he.halfWidth.set(W.width*.5,0,0),he.halfHeight.set(0,W.height*.5,0),n.rectArea[w]=he,w++}else if(W.isPointLight){const he=e.get(W);if(he.color.copy(W.color).multiplyScalar(W.intensity),he.distance=W.distance,he.decay=W.decay,W.castShadow){const Ee=W.shadow,Y=t.get(W);Y.shadowIntensity=Ee.intensity,Y.shadowBias=Ee.bias,Y.shadowNormalBias=Ee.normalBias,Y.shadowRadius=Ee.radius,Y.shadowMapSize=Ee.mapSize,Y.shadowCameraNear=Ee.camera.near,Y.shadowCameraFar=Ee.camera.far,n.pointShadow[_]=Y,n.pointShadowMap[_]=Se,n.pointShadowMatrix[_]=W.shadow.matrix,R++}n.point[_]=he,_++}else if(W.isHemisphereLight){const he=e.get(W);he.skyColor.copy(W.color).multiplyScalar(re),he.groundColor.copy(W.groundColor).multiplyScalar(re),n.hemi[S]=he,S++}}w>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ct.LTC_FLOAT_1,n.rectAreaLTC2=Ct.LTC_FLOAT_2):(n.rectAreaLTC1=Ct.LTC_HALF_1,n.rectAreaLTC2=Ct.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=m,n.ambient[2]=v;const z=n.hash;(z.directionalLength!==y||z.pointLength!==_||z.spotLength!==M||z.rectAreaLength!==w||z.hemiLength!==S||z.numDirectionalShadows!==T||z.numPointShadows!==R||z.numSpotShadows!==C||z.numSpotMaps!==k||z.numLightProbes!==V)&&(n.directional.length=y,n.spot.length=M,n.rectArea.length=w,n.point.length=_,n.hemi.length=S,n.directionalShadow.length=T,n.directionalShadowMap.length=T,n.pointShadow.length=R,n.pointShadowMap.length=R,n.spotShadow.length=C,n.spotShadowMap.length=C,n.directionalShadowMatrix.length=T,n.pointShadowMatrix.length=R,n.spotLightMatrix.length=C+k-O,n.spotLightMap.length=k,n.numSpotLightShadowsWithMaps=O,n.numLightProbes=V,z.directionalLength=y,z.pointLength=_,z.spotLength=M,z.rectAreaLength=w,z.hemiLength=S,z.numDirectionalShadows=T,z.numPointShadows=R,z.numSpotShadows=C,z.numSpotMaps=k,z.numLightProbes=V,n.version=iz++)}function u(h,p){let m=0,v=0,y=0,_=0,M=0;const w=p.matrixWorldInverse;for(let S=0,T=h.length;S<T;S++){const R=h[S];if(R.isDirectionalLight){const C=n.directional[m];C.direction.setFromMatrixPosition(R.matrixWorld),i.setFromMatrixPosition(R.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(w),m++}else if(R.isSpotLight){const C=n.spot[y];C.position.setFromMatrixPosition(R.matrixWorld),C.position.applyMatrix4(w),C.direction.setFromMatrixPosition(R.matrixWorld),i.setFromMatrixPosition(R.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(w),y++}else if(R.isRectAreaLight){const C=n.rectArea[_];C.position.setFromMatrixPosition(R.matrixWorld),C.position.applyMatrix4(w),a.identity(),s.copy(R.matrixWorld),s.premultiply(w),a.extractRotation(s),C.halfWidth.set(R.width*.5,0,0),C.halfHeight.set(0,R.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),_++}else if(R.isPointLight){const C=n.point[v];C.position.setFromMatrixPosition(R.matrixWorld),C.position.applyMatrix4(w),v++}else if(R.isHemisphereLight){const C=n.hemi[M];C.direction.setFromMatrixPosition(R.matrixWorld),C.direction.transformDirection(w),M++}}}return{setup:l,setupView:u,state:n}}function pC(r){const e=new az(r),t=[],n=[];function i(p){h.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function a(p){n.push(p)}function l(){e.setup(t)}function u(p){e.setupView(t,p)}const h={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:h,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function oz(r){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let l;return a===void 0?(l=new pC(r),e.set(i,[l])):s>=a.length?(l=new pC(r),a.push(l)):l=a[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const lz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,cz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function uz(r,e,t){let n=new rv;const i=new Je,s=new Je,a=new Xn,l=new Uw({depthPacking:iR}),u=new kw,h={},p=t.maxTextureSize,m={[Jo]:ts,[ts]:Jo,[Ta]:Ta},v=new Cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:lz,fragmentShader:cz}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const _=new xn;_.setAttribute("position",new Kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Tr(_,v),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=px;let S=this.type;this.render=function(O,V,z){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||O.length===0)return;const F=r.getRenderTarget(),L=r.getActiveCubeFace(),W=r.getActiveMipmapLevel(),q=r.state;q.setBlending(Go),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);const re=S!==lo&&this.type===lo,oe=S===lo&&this.type!==lo;for(let Se=0,he=O.length;Se<he;Se++){const Ee=O[Se],Y=Ee.shadow;if(Y===void 0){console.warn("THREE.WebGLShadowMap:",Ee,"has no shadow.");continue}if(Y.autoUpdate===!1&&Y.needsUpdate===!1)continue;i.copy(Y.mapSize);const ge=Y.getFrameExtents();if(i.multiply(ge),s.copy(Y.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/ge.x),i.x=s.x*ge.x,Y.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/ge.y),i.y=s.y*ge.y,Y.mapSize.y=s.y)),Y.map===null||re===!0||oe===!0){const K=this.type!==lo?{minFilter:Ii,magFilter:Ii}:{};Y.map!==null&&Y.map.dispose(),Y.map=new Js(i.x,i.y,K),Y.map.texture.name=Ee.name+".shadowMap",Y.camera.updateProjectionMatrix()}r.setRenderTarget(Y.map),r.clear();const se=Y.getViewportCount();for(let K=0;K<se;K++){const ve=Y.getViewport(K);a.set(s.x*ve.x,s.y*ve.y,s.x*ve.z,s.y*ve.w),q.viewport(a),Y.updateMatrices(Ee,K),n=Y.getFrustum(),C(V,z,Y.camera,Ee,this.type)}Y.isPointLightShadow!==!0&&this.type===lo&&T(Y,z),Y.needsUpdate=!1}S=this.type,w.needsUpdate=!1,r.setRenderTarget(F,L,W)};function T(O,V){const z=e.update(M);v.defines.VSM_SAMPLES!==O.blurSamples&&(v.defines.VSM_SAMPLES=O.blurSamples,y.defines.VSM_SAMPLES=O.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Js(i.x,i.y)),v.uniforms.shadow_pass.value=O.map.texture,v.uniforms.resolution.value=O.mapSize,v.uniforms.radius.value=O.radius,r.setRenderTarget(O.mapPass),r.clear(),r.renderBufferDirect(V,null,z,v,M,null),y.uniforms.shadow_pass.value=O.mapPass.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,r.setRenderTarget(O.map),r.clear(),r.renderBufferDirect(V,null,z,y,M,null)}function R(O,V,z,F){let L=null;const W=z.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(W!==void 0)L=W;else if(L=z.isPointLight===!0?u:l,r.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0){const q=L.uuid,re=V.uuid;let oe=h[q];oe===void 0&&(oe={},h[q]=oe);let Se=oe[re];Se===void 0&&(Se=L.clone(),oe[re]=Se,V.addEventListener("dispose",k)),L=Se}if(L.visible=V.visible,L.wireframe=V.wireframe,F===lo?L.side=V.shadowSide!==null?V.shadowSide:V.side:L.side=V.shadowSide!==null?V.shadowSide:m[V.side],L.alphaMap=V.alphaMap,L.alphaTest=V.alphaTest,L.map=V.map,L.clipShadows=V.clipShadows,L.clippingPlanes=V.clippingPlanes,L.clipIntersection=V.clipIntersection,L.displacementMap=V.displacementMap,L.displacementScale=V.displacementScale,L.displacementBias=V.displacementBias,L.wireframeLinewidth=V.wireframeLinewidth,L.linewidth=V.linewidth,z.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const q=r.properties.get(L);q.light=z}return L}function C(O,V,z,F,L){if(O.visible===!1)return;if(O.layers.test(V.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&L===lo)&&(!O.frustumCulled||n.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,O.matrixWorld);const re=e.update(O),oe=O.material;if(Array.isArray(oe)){const Se=re.groups;for(let he=0,Ee=Se.length;he<Ee;he++){const Y=Se[he],ge=oe[Y.materialIndex];if(ge&&ge.visible){const se=R(O,ge,F,L);O.onBeforeShadow(r,O,V,z,re,se,Y),r.renderBufferDirect(z,null,re,se,O,Y),O.onAfterShadow(r,O,V,z,re,se,Y)}}}else if(oe.visible){const Se=R(O,oe,F,L);O.onBeforeShadow(r,O,V,z,re,Se,null),r.renderBufferDirect(z,null,re,Se,O,null),O.onAfterShadow(r,O,V,z,re,Se,null)}}const q=O.children;for(let re=0,oe=q.length;re<oe;re++)C(q[re],V,z,F,L)}function k(O){O.target.removeEventListener("dispose",k);for(const z in h){const F=h[z],L=O.target.uuid;L in F&&(F[L].dispose(),delete F[L])}}}const dz={[_0]:A0,[S0]:E0,[w0]:C0,[af]:M0,[A0]:_0,[E0]:S0,[C0]:w0,[M0]:af};function fz(r,e){function t(){let le=!1;const Ce=new Xn;let Pe=null;const Ge=new Xn(0,0,0,0);return{setMask:function(Mt){Pe!==Mt&&!le&&(r.colorMask(Mt,Mt,Mt,Mt),Pe=Mt)},setLocked:function(Mt){le=Mt},setClear:function(Mt,vt,qt,Rn,$n){$n===!0&&(Mt*=Rn,vt*=Rn,qt*=Rn),Ce.set(Mt,vt,qt,Rn),Ge.equals(Ce)===!1&&(r.clearColor(Mt,vt,qt,Rn),Ge.copy(Ce))},reset:function(){le=!1,Pe=null,Ge.set(-1,0,0,0)}}}function n(){let le=!1,Ce=!1,Pe=null,Ge=null,Mt=null;return{setReversed:function(vt){if(Ce!==vt){const qt=e.get("EXT_clip_control");Ce?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT);const Rn=Mt;Mt=null,this.setClear(Rn)}Ce=vt},getReversed:function(){return Ce},setTest:function(vt){vt?He(r.DEPTH_TEST):rt(r.DEPTH_TEST)},setMask:function(vt){Pe!==vt&&!le&&(r.depthMask(vt),Pe=vt)},setFunc:function(vt){if(Ce&&(vt=dz[vt]),Ge!==vt){switch(vt){case _0:r.depthFunc(r.NEVER);break;case A0:r.depthFunc(r.ALWAYS);break;case S0:r.depthFunc(r.LESS);break;case af:r.depthFunc(r.LEQUAL);break;case w0:r.depthFunc(r.EQUAL);break;case M0:r.depthFunc(r.GEQUAL);break;case E0:r.depthFunc(r.GREATER);break;case C0:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ge=vt}},setLocked:function(vt){le=vt},setClear:function(vt){Mt!==vt&&(Ce&&(vt=1-vt),r.clearDepth(vt),Mt=vt)},reset:function(){le=!1,Pe=null,Ge=null,Mt=null,Ce=!1}}}function i(){let le=!1,Ce=null,Pe=null,Ge=null,Mt=null,vt=null,qt=null,Rn=null,$n=null;return{setTest:function(fn){le||(fn?He(r.STENCIL_TEST):rt(r.STENCIL_TEST))},setMask:function(fn){Ce!==fn&&!le&&(r.stencilMask(fn),Ce=fn)},setFunc:function(fn,vr,wr){(Pe!==fn||Ge!==vr||Mt!==wr)&&(r.stencilFunc(fn,vr,wr),Pe=fn,Ge=vr,Mt=wr)},setOp:function(fn,vr,wr){(vt!==fn||qt!==vr||Rn!==wr)&&(r.stencilOp(fn,vr,wr),vt=fn,qt=vr,Rn=wr)},setLocked:function(fn){le=fn},setClear:function(fn){$n!==fn&&(r.clearStencil(fn),$n=fn)},reset:function(){le=!1,Ce=null,Pe=null,Ge=null,Mt=null,vt=null,qt=null,Rn=null,$n=null}}}const s=new t,a=new n,l=new i,u=new WeakMap,h=new WeakMap;let p={},m={},v=new WeakMap,y=[],_=null,M=!1,w=null,S=null,T=null,R=null,C=null,k=null,O=null,V=new wt(0,0,0),z=0,F=!1,L=null,W=null,q=null,re=null,oe=null;const Se=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let he=!1,Ee=0;const Y=r.getParameter(r.VERSION);Y.indexOf("WebGL")!==-1?(Ee=parseFloat(/^WebGL (\d)/.exec(Y)[1]),he=Ee>=1):Y.indexOf("OpenGL ES")!==-1&&(Ee=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),he=Ee>=2);let ge=null,se={};const K=r.getParameter(r.SCISSOR_BOX),ve=r.getParameter(r.VIEWPORT),We=new Xn().fromArray(K),we=new Xn().fromArray(ve);function Le(le,Ce,Pe,Ge){const Mt=new Uint8Array(4),vt=r.createTexture();r.bindTexture(le,vt),r.texParameteri(le,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(le,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let qt=0;qt<Pe;qt++)le===r.TEXTURE_3D||le===r.TEXTURE_2D_ARRAY?r.texImage3D(Ce,0,r.RGBA,1,1,Ge,0,r.RGBA,r.UNSIGNED_BYTE,Mt):r.texImage2D(Ce+qt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Mt);return vt}const Fe={};Fe[r.TEXTURE_2D]=Le(r.TEXTURE_2D,r.TEXTURE_2D,1),Fe[r.TEXTURE_CUBE_MAP]=Le(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),Fe[r.TEXTURE_2D_ARRAY]=Le(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Fe[r.TEXTURE_3D]=Le(r.TEXTURE_3D,r.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),He(r.DEPTH_TEST),a.setFunc(af),et(!1),At(mS),He(r.CULL_FACE),ee(Go);function He(le){p[le]!==!0&&(r.enable(le),p[le]=!0)}function rt(le){p[le]!==!1&&(r.disable(le),p[le]=!1)}function yt(le,Ce){return m[le]!==Ce?(r.bindFramebuffer(le,Ce),m[le]=Ce,le===r.DRAW_FRAMEBUFFER&&(m[r.FRAMEBUFFER]=Ce),le===r.FRAMEBUFFER&&(m[r.DRAW_FRAMEBUFFER]=Ce),!0):!1}function Rt(le,Ce){let Pe=y,Ge=!1;if(le){Pe=v.get(Ce),Pe===void 0&&(Pe=[],v.set(Ce,Pe));const Mt=le.textures;if(Pe.length!==Mt.length||Pe[0]!==r.COLOR_ATTACHMENT0){for(let vt=0,qt=Mt.length;vt<qt;vt++)Pe[vt]=r.COLOR_ATTACHMENT0+vt;Pe.length=Mt.length,Ge=!0}}else Pe[0]!==r.BACK&&(Pe[0]=r.BACK,Ge=!0);Ge&&r.drawBuffers(Pe)}function Qt(le){return _!==le?(r.useProgram(le),_=le,!0):!1}const Ke={[$c]:r.FUNC_ADD,[bT]:r.FUNC_SUBTRACT,[TT]:r.FUNC_REVERSE_SUBTRACT};Ke[RT]=r.MIN,Ke[IT]=r.MAX;const Ze={[PT]:r.ZERO,[BT]:r.ONE,[DT]:r.SRC_COLOR,[y0]:r.SRC_ALPHA,[kT]:r.SRC_ALPHA_SATURATE,[OT]:r.DST_COLOR,[NT]:r.DST_ALPHA,[LT]:r.ONE_MINUS_SRC_COLOR,[x0]:r.ONE_MINUS_SRC_ALPHA,[UT]:r.ONE_MINUS_DST_COLOR,[FT]:r.ONE_MINUS_DST_ALPHA,[zT]:r.CONSTANT_COLOR,[HT]:r.ONE_MINUS_CONSTANT_COLOR,[GT]:r.CONSTANT_ALPHA,[VT]:r.ONE_MINUS_CONSTANT_ALPHA};function ee(le,Ce,Pe,Ge,Mt,vt,qt,Rn,$n,fn){if(le===Go){M===!0&&(rt(r.BLEND),M=!1);return}if(M===!1&&(He(r.BLEND),M=!0),le!==CT){if(le!==w||fn!==F){if((S!==$c||C!==$c)&&(r.blendEquation(r.FUNC_ADD),S=$c,C=$c),fn)switch(le){case Zd:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case gS:r.blendFunc(r.ONE,r.ONE);break;case vS:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case yS:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Zd:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case gS:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case vS:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case yS:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}T=null,R=null,k=null,O=null,V.set(0,0,0),z=0,w=le,F=fn}return}Mt=Mt||Ce,vt=vt||Pe,qt=qt||Ge,(Ce!==S||Mt!==C)&&(r.blendEquationSeparate(Ke[Ce],Ke[Mt]),S=Ce,C=Mt),(Pe!==T||Ge!==R||vt!==k||qt!==O)&&(r.blendFuncSeparate(Ze[Pe],Ze[Ge],Ze[vt],Ze[qt]),T=Pe,R=Ge,k=vt,O=qt),(Rn.equals(V)===!1||$n!==z)&&(r.blendColor(Rn.r,Rn.g,Rn.b,$n),V.copy(Rn),z=$n),w=le,F=!1}function Dt(le,Ce){le.side===Ta?rt(r.CULL_FACE):He(r.CULL_FACE);let Pe=le.side===ts;Ce&&(Pe=!Pe),et(Pe),le.blending===Zd&&le.transparent===!1?ee(Go):ee(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),a.setFunc(le.depthFunc),a.setTest(le.depthTest),a.setMask(le.depthWrite),s.setMask(le.colorWrite);const Ge=le.stencilWrite;l.setTest(Ge),Ge&&(l.setMask(le.stencilWriteMask),l.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),l.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),Kt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?He(r.SAMPLE_ALPHA_TO_COVERAGE):rt(r.SAMPLE_ALPHA_TO_COVERAGE)}function et(le){L!==le&&(le?r.frontFace(r.CW):r.frontFace(r.CCW),L=le)}function At(le){le!==wT?(He(r.CULL_FACE),le!==W&&(le===mS?r.cullFace(r.BACK):le===MT?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):rt(r.CULL_FACE),W=le}function at(le){le!==q&&(he&&r.lineWidth(le),q=le)}function Kt(le,Ce,Pe){le?(He(r.POLYGON_OFFSET_FILL),(re!==Ce||oe!==Pe)&&(r.polygonOffset(Ce,Pe),re=Ce,oe=Pe)):rt(r.POLYGON_OFFSET_FILL)}function ht(le){le?He(r.SCISSOR_TEST):rt(r.SCISSOR_TEST)}function N(le){le===void 0&&(le=r.TEXTURE0+Se-1),ge!==le&&(r.activeTexture(le),ge=le)}function D(le,Ce,Pe){Pe===void 0&&(ge===null?Pe=r.TEXTURE0+Se-1:Pe=ge);let Ge=se[Pe];Ge===void 0&&(Ge={type:void 0,texture:void 0},se[Pe]=Ge),(Ge.type!==le||Ge.texture!==Ce)&&(ge!==Pe&&(r.activeTexture(Pe),ge=Pe),r.bindTexture(le,Ce||Fe[le]),Ge.type=le,Ge.texture=Ce)}function Q(){const le=se[ge];le!==void 0&&le.type!==void 0&&(r.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function ye(){try{r.compressedTexImage2D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function xe(){try{r.compressedTexImage3D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function pe(){try{r.texSubImage2D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function je(){try{r.texSubImage3D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ye(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function $e(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function kt(){try{r.texStorage2D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function qe(){try{r.texStorage3D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function xt(){try{r.texImage2D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function zt(){try{r.texImage3D.apply(r,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Bt(le){We.equals(le)===!1&&(r.scissor(le.x,le.y,le.z,le.w),We.copy(le))}function St(le){we.equals(le)===!1&&(r.viewport(le.x,le.y,le.z,le.w),we.copy(le))}function de(le,Ce){let Pe=h.get(Ce);Pe===void 0&&(Pe=new WeakMap,h.set(Ce,Pe));let Ge=Pe.get(le);Ge===void 0&&(Ge=r.getUniformBlockIndex(Ce,le.name),Pe.set(le,Ge))}function De(le,Ce){const Ge=h.get(Ce).get(le);u.get(Ce)!==Ge&&(r.uniformBlockBinding(Ce,Ge,le.__bindingPointIndex),u.set(Ce,Ge))}function it(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),a.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),p={},ge=null,se={},m={},v=new WeakMap,y=[],_=null,M=!1,w=null,S=null,T=null,R=null,C=null,k=null,O=null,V=new wt(0,0,0),z=0,F=!1,L=null,W=null,q=null,re=null,oe=null,We.set(0,0,r.canvas.width,r.canvas.height),we.set(0,0,r.canvas.width,r.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:He,disable:rt,bindFramebuffer:yt,drawBuffers:Rt,useProgram:Qt,setBlending:ee,setMaterial:Dt,setFlipSided:et,setCullFace:At,setLineWidth:at,setPolygonOffset:Kt,setScissorTest:ht,activeTexture:N,bindTexture:D,unbindTexture:Q,compressedTexImage2D:ye,compressedTexImage3D:xe,texImage2D:xt,texImage3D:zt,updateUBOMapping:de,uniformBlockBinding:De,texStorage2D:kt,texStorage3D:qe,texSubImage2D:pe,texSubImage3D:je,compressedTexSubImage2D:Ye,compressedTexSubImage3D:$e,scissor:Bt,viewport:St,reset:it}}function hz(r,e,t,n,i,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Je,p=new WeakMap;let m;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(N,D){return y?new OffscreenCanvas(N,D):bg("canvas")}function M(N,D,Q){let ye=1;const xe=ht(N);if((xe.width>Q||xe.height>Q)&&(ye=Q/Math.max(xe.width,xe.height)),ye<1)if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){const pe=Math.floor(ye*xe.width),je=Math.floor(ye*xe.height);m===void 0&&(m=_(pe,je));const Ye=D?_(pe,je):m;return Ye.width=pe,Ye.height=je,Ye.getContext("2d").drawImage(N,0,0,pe,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+pe+"x"+je+")."),Ye}else return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),N;return N}function w(N){return N.generateMipmaps}function S(N){r.generateMipmap(N)}function T(N){return N.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:N.isWebGL3DRenderTarget?r.TEXTURE_3D:N.isWebGLArrayRenderTarget||N.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function R(N,D,Q,ye,xe=!1){if(N!==null){if(r[N]!==void 0)return r[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let pe=D;if(D===r.RED&&(Q===r.FLOAT&&(pe=r.R32F),Q===r.HALF_FLOAT&&(pe=r.R16F),Q===r.UNSIGNED_BYTE&&(pe=r.R8)),D===r.RED_INTEGER&&(Q===r.UNSIGNED_BYTE&&(pe=r.R8UI),Q===r.UNSIGNED_SHORT&&(pe=r.R16UI),Q===r.UNSIGNED_INT&&(pe=r.R32UI),Q===r.BYTE&&(pe=r.R8I),Q===r.SHORT&&(pe=r.R16I),Q===r.INT&&(pe=r.R32I)),D===r.RG&&(Q===r.FLOAT&&(pe=r.RG32F),Q===r.HALF_FLOAT&&(pe=r.RG16F),Q===r.UNSIGNED_BYTE&&(pe=r.RG8)),D===r.RG_INTEGER&&(Q===r.UNSIGNED_BYTE&&(pe=r.RG8UI),Q===r.UNSIGNED_SHORT&&(pe=r.RG16UI),Q===r.UNSIGNED_INT&&(pe=r.RG32UI),Q===r.BYTE&&(pe=r.RG8I),Q===r.SHORT&&(pe=r.RG16I),Q===r.INT&&(pe=r.RG32I)),D===r.RGB_INTEGER&&(Q===r.UNSIGNED_BYTE&&(pe=r.RGB8UI),Q===r.UNSIGNED_SHORT&&(pe=r.RGB16UI),Q===r.UNSIGNED_INT&&(pe=r.RGB32UI),Q===r.BYTE&&(pe=r.RGB8I),Q===r.SHORT&&(pe=r.RGB16I),Q===r.INT&&(pe=r.RGB32I)),D===r.RGBA_INTEGER&&(Q===r.UNSIGNED_BYTE&&(pe=r.RGBA8UI),Q===r.UNSIGNED_SHORT&&(pe=r.RGBA16UI),Q===r.UNSIGNED_INT&&(pe=r.RGBA32UI),Q===r.BYTE&&(pe=r.RGBA8I),Q===r.SHORT&&(pe=r.RGBA16I),Q===r.INT&&(pe=r.RGBA32I)),D===r.RGB&&Q===r.UNSIGNED_INT_5_9_9_9_REV&&(pe=r.RGB9_E5),D===r.RGBA){const je=xe?Mg:jn.getTransfer(ye);Q===r.FLOAT&&(pe=r.RGBA32F),Q===r.HALF_FLOAT&&(pe=r.RGBA16F),Q===r.UNSIGNED_BYTE&&(pe=je===sr?r.SRGB8_ALPHA8:r.RGBA8),Q===r.UNSIGNED_SHORT_4_4_4_4&&(pe=r.RGBA4),Q===r.UNSIGNED_SHORT_5_5_5_1&&(pe=r.RGB5_A1)}return(pe===r.R16F||pe===r.R32F||pe===r.RG16F||pe===r.RG32F||pe===r.RGBA16F||pe===r.RGBA32F)&&e.get("EXT_color_buffer_float"),pe}function C(N,D){let Q;return N?D===null||D===Yo||D===of?Q=r.DEPTH24_STENCIL8:D===br?Q=r.DEPTH32F_STENCIL8:D===gp&&(Q=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):D===null||D===Yo||D===of?Q=r.DEPTH_COMPONENT24:D===br?Q=r.DEPTH_COMPONENT32F:D===gp&&(Q=r.DEPTH_COMPONENT16),Q}function k(N,D){return w(N)===!0||N.isFramebufferTexture&&N.minFilter!==Ii&&N.minFilter!==Jn?Math.log2(Math.max(D.width,D.height))+1:N.mipmaps!==void 0&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?D.mipmaps.length:1}function O(N){const D=N.target;D.removeEventListener("dispose",O),z(D),D.isVideoTexture&&p.delete(D)}function V(N){const D=N.target;D.removeEventListener("dispose",V),L(D)}function z(N){const D=n.get(N);if(D.__webglInit===void 0)return;const Q=N.source,ye=v.get(Q);if(ye){const xe=ye[D.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&F(N),Object.keys(ye).length===0&&v.delete(Q)}n.remove(N)}function F(N){const D=n.get(N);r.deleteTexture(D.__webglTexture);const Q=N.source,ye=v.get(Q);delete ye[D.__cacheKey],a.memory.textures--}function L(N){const D=n.get(N);if(N.depthTexture&&(N.depthTexture.dispose(),n.remove(N.depthTexture)),N.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(D.__webglFramebuffer[ye]))for(let xe=0;xe<D.__webglFramebuffer[ye].length;xe++)r.deleteFramebuffer(D.__webglFramebuffer[ye][xe]);else r.deleteFramebuffer(D.__webglFramebuffer[ye]);D.__webglDepthbuffer&&r.deleteRenderbuffer(D.__webglDepthbuffer[ye])}else{if(Array.isArray(D.__webglFramebuffer))for(let ye=0;ye<D.__webglFramebuffer.length;ye++)r.deleteFramebuffer(D.__webglFramebuffer[ye]);else r.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&r.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&r.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let ye=0;ye<D.__webglColorRenderbuffer.length;ye++)D.__webglColorRenderbuffer[ye]&&r.deleteRenderbuffer(D.__webglColorRenderbuffer[ye]);D.__webglDepthRenderbuffer&&r.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const Q=N.textures;for(let ye=0,xe=Q.length;ye<xe;ye++){const pe=n.get(Q[ye]);pe.__webglTexture&&(r.deleteTexture(pe.__webglTexture),a.memory.textures--),n.remove(Q[ye])}n.remove(N)}let W=0;function q(){W=0}function re(){const N=W;return N>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+i.maxTextures),W+=1,N}function oe(N){const D=[];return D.push(N.wrapS),D.push(N.wrapT),D.push(N.wrapR||0),D.push(N.magFilter),D.push(N.minFilter),D.push(N.anisotropy),D.push(N.internalFormat),D.push(N.format),D.push(N.type),D.push(N.generateMipmaps),D.push(N.premultiplyAlpha),D.push(N.flipY),D.push(N.unpackAlignment),D.push(N.colorSpace),D.join()}function Se(N,D){const Q=n.get(N);if(N.isVideoTexture&&at(N),N.isRenderTargetTexture===!1&&N.version>0&&Q.__version!==N.version){const ye=N.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(Q,N,D);return}}t.bindTexture(r.TEXTURE_2D,Q.__webglTexture,r.TEXTURE0+D)}function he(N,D){const Q=n.get(N);if(N.version>0&&Q.__version!==N.version){we(Q,N,D);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Q.__webglTexture,r.TEXTURE0+D)}function Ee(N,D){const Q=n.get(N);if(N.version>0&&Q.__version!==N.version){we(Q,N,D);return}t.bindTexture(r.TEXTURE_3D,Q.__webglTexture,r.TEXTURE0+D)}function Y(N,D){const Q=n.get(N);if(N.version>0&&Q.__version!==N.version){Le(Q,N,D);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Q.__webglTexture,r.TEXTURE0+D)}const ge={[xu]:r.REPEAT,[Jr]:r.CLAMP_TO_EDGE,[mp]:r.MIRRORED_REPEAT},se={[Ii]:r.NEAREST,[mx]:r.NEAREST_MIPMAP_NEAREST,[Bd]:r.NEAREST_MIPMAP_LINEAR,[Jn]:r.LINEAR,[Yh]:r.LINEAR_MIPMAP_NEAREST,[Ia]:r.LINEAR_MIPMAP_LINEAR},K={[aR]:r.NEVER,[fR]:r.ALWAYS,[oR]:r.LESS,[xw]:r.LEQUAL,[lR]:r.EQUAL,[dR]:r.GEQUAL,[cR]:r.GREATER,[uR]:r.NOTEQUAL};function ve(N,D){if(D.type===br&&e.has("OES_texture_float_linear")===!1&&(D.magFilter===Jn||D.magFilter===Yh||D.magFilter===Bd||D.magFilter===Ia||D.minFilter===Jn||D.minFilter===Yh||D.minFilter===Bd||D.minFilter===Ia)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(N,r.TEXTURE_WRAP_S,ge[D.wrapS]),r.texParameteri(N,r.TEXTURE_WRAP_T,ge[D.wrapT]),(N===r.TEXTURE_3D||N===r.TEXTURE_2D_ARRAY)&&r.texParameteri(N,r.TEXTURE_WRAP_R,ge[D.wrapR]),r.texParameteri(N,r.TEXTURE_MAG_FILTER,se[D.magFilter]),r.texParameteri(N,r.TEXTURE_MIN_FILTER,se[D.minFilter]),D.compareFunction&&(r.texParameteri(N,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(N,r.TEXTURE_COMPARE_FUNC,K[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===Ii||D.minFilter!==Bd&&D.minFilter!==Ia||D.type===br&&e.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||n.get(D).__currentAnisotropy){const Q=e.get("EXT_texture_filter_anisotropic");r.texParameterf(N,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy}}}function We(N,D){let Q=!1;N.__webglInit===void 0&&(N.__webglInit=!0,D.addEventListener("dispose",O));const ye=D.source;let xe=v.get(ye);xe===void 0&&(xe={},v.set(ye,xe));const pe=oe(D);if(pe!==N.__cacheKey){xe[pe]===void 0&&(xe[pe]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,Q=!0),xe[pe].usedTimes++;const je=xe[N.__cacheKey];je!==void 0&&(xe[N.__cacheKey].usedTimes--,je.usedTimes===0&&F(D)),N.__cacheKey=pe,N.__webglTexture=xe[pe].texture}return Q}function we(N,D,Q){let ye=r.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(ye=r.TEXTURE_2D_ARRAY),D.isData3DTexture&&(ye=r.TEXTURE_3D);const xe=We(N,D),pe=D.source;t.bindTexture(ye,N.__webglTexture,r.TEXTURE0+Q);const je=n.get(pe);if(pe.version!==je.__version||xe===!0){t.activeTexture(r.TEXTURE0+Q);const Ye=jn.getPrimaries(jn.workingColorSpace),$e=D.colorSpace===Xl?null:jn.getPrimaries(D.colorSpace),kt=D.colorSpace===Xl||Ye===$e?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,D.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,D.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,kt);let qe=M(D.image,!1,i.maxTextureSize);qe=Kt(D,qe);const xt=s.convert(D.format,D.colorSpace),zt=s.convert(D.type);let Bt=R(D.internalFormat,xt,zt,D.colorSpace,D.isVideoTexture);ve(ye,D);let St;const de=D.mipmaps,De=D.isVideoTexture!==!0,it=je.__version===void 0||xe===!0,le=pe.dataReady,Ce=k(D,qe);if(D.isDepthTexture)Bt=C(D.format===lf,D.type),it&&(De?t.texStorage2D(r.TEXTURE_2D,1,Bt,qe.width,qe.height):t.texImage2D(r.TEXTURE_2D,0,Bt,qe.width,qe.height,0,xt,zt,null));else if(D.isDataTexture)if(de.length>0){De&&it&&t.texStorage2D(r.TEXTURE_2D,Ce,Bt,de[0].width,de[0].height);for(let Pe=0,Ge=de.length;Pe<Ge;Pe++)St=de[Pe],De?le&&t.texSubImage2D(r.TEXTURE_2D,Pe,0,0,St.width,St.height,xt,zt,St.data):t.texImage2D(r.TEXTURE_2D,Pe,Bt,St.width,St.height,0,xt,zt,St.data);D.generateMipmaps=!1}else De?(it&&t.texStorage2D(r.TEXTURE_2D,Ce,Bt,qe.width,qe.height),le&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,qe.width,qe.height,xt,zt,qe.data)):t.texImage2D(r.TEXTURE_2D,0,Bt,qe.width,qe.height,0,xt,zt,qe.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){De&&it&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ce,Bt,de[0].width,de[0].height,qe.depth);for(let Pe=0,Ge=de.length;Pe<Ge;Pe++)if(St=de[Pe],D.format!==Kr)if(xt!==null)if(De){if(le)if(D.layerUpdates.size>0){const Mt=RS(St.width,St.height,D.format,D.type);for(const vt of D.layerUpdates){const qt=St.data.subarray(vt*Mt/St.data.BYTES_PER_ELEMENT,(vt+1)*Mt/St.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Pe,0,0,vt,St.width,St.height,1,xt,qt)}D.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Pe,0,0,0,St.width,St.height,qe.depth,xt,St.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Pe,Bt,St.width,St.height,qe.depth,0,St.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else De?le&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Pe,0,0,0,St.width,St.height,qe.depth,xt,zt,St.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Pe,Bt,St.width,St.height,qe.depth,0,xt,zt,St.data)}else{De&&it&&t.texStorage2D(r.TEXTURE_2D,Ce,Bt,de[0].width,de[0].height);for(let Pe=0,Ge=de.length;Pe<Ge;Pe++)St=de[Pe],D.format!==Kr?xt!==null?De?le&&t.compressedTexSubImage2D(r.TEXTURE_2D,Pe,0,0,St.width,St.height,xt,St.data):t.compressedTexImage2D(r.TEXTURE_2D,Pe,Bt,St.width,St.height,0,St.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?le&&t.texSubImage2D(r.TEXTURE_2D,Pe,0,0,St.width,St.height,xt,zt,St.data):t.texImage2D(r.TEXTURE_2D,Pe,Bt,St.width,St.height,0,xt,zt,St.data)}else if(D.isDataArrayTexture)if(De){if(it&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ce,Bt,qe.width,qe.height,qe.depth),le)if(D.layerUpdates.size>0){const Pe=RS(qe.width,qe.height,D.format,D.type);for(const Ge of D.layerUpdates){const Mt=qe.data.subarray(Ge*Pe/qe.data.BYTES_PER_ELEMENT,(Ge+1)*Pe/qe.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ge,qe.width,qe.height,1,xt,zt,Mt)}D.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,qe.width,qe.height,qe.depth,xt,zt,qe.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,Bt,qe.width,qe.height,qe.depth,0,xt,zt,qe.data);else if(D.isData3DTexture)De?(it&&t.texStorage3D(r.TEXTURE_3D,Ce,Bt,qe.width,qe.height,qe.depth),le&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,qe.width,qe.height,qe.depth,xt,zt,qe.data)):t.texImage3D(r.TEXTURE_3D,0,Bt,qe.width,qe.height,qe.depth,0,xt,zt,qe.data);else if(D.isFramebufferTexture){if(it)if(De)t.texStorage2D(r.TEXTURE_2D,Ce,Bt,qe.width,qe.height);else{let Pe=qe.width,Ge=qe.height;for(let Mt=0;Mt<Ce;Mt++)t.texImage2D(r.TEXTURE_2D,Mt,Bt,Pe,Ge,0,xt,zt,null),Pe>>=1,Ge>>=1}}else if(de.length>0){if(De&&it){const Pe=ht(de[0]);t.texStorage2D(r.TEXTURE_2D,Ce,Bt,Pe.width,Pe.height)}for(let Pe=0,Ge=de.length;Pe<Ge;Pe++)St=de[Pe],De?le&&t.texSubImage2D(r.TEXTURE_2D,Pe,0,0,xt,zt,St):t.texImage2D(r.TEXTURE_2D,Pe,Bt,xt,zt,St);D.generateMipmaps=!1}else if(De){if(it){const Pe=ht(qe);t.texStorage2D(r.TEXTURE_2D,Ce,Bt,Pe.width,Pe.height)}le&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,xt,zt,qe)}else t.texImage2D(r.TEXTURE_2D,0,Bt,xt,zt,qe);w(D)&&S(ye),je.__version=pe.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function Le(N,D,Q){if(D.image.length!==6)return;const ye=We(N,D),xe=D.source;t.bindTexture(r.TEXTURE_CUBE_MAP,N.__webglTexture,r.TEXTURE0+Q);const pe=n.get(xe);if(xe.version!==pe.__version||ye===!0){t.activeTexture(r.TEXTURE0+Q);const je=jn.getPrimaries(jn.workingColorSpace),Ye=D.colorSpace===Xl?null:jn.getPrimaries(D.colorSpace),$e=D.colorSpace===Xl||je===Ye?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,D.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,D.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,$e);const kt=D.isCompressedTexture||D.image[0].isCompressedTexture,qe=D.image[0]&&D.image[0].isDataTexture,xt=[];for(let Ge=0;Ge<6;Ge++)!kt&&!qe?xt[Ge]=M(D.image[Ge],!0,i.maxCubemapSize):xt[Ge]=qe?D.image[Ge].image:D.image[Ge],xt[Ge]=Kt(D,xt[Ge]);const zt=xt[0],Bt=s.convert(D.format,D.colorSpace),St=s.convert(D.type),de=R(D.internalFormat,Bt,St,D.colorSpace),De=D.isVideoTexture!==!0,it=pe.__version===void 0||ye===!0,le=xe.dataReady;let Ce=k(D,zt);ve(r.TEXTURE_CUBE_MAP,D);let Pe;if(kt){De&&it&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Ce,de,zt.width,zt.height);for(let Ge=0;Ge<6;Ge++){Pe=xt[Ge].mipmaps;for(let Mt=0;Mt<Pe.length;Mt++){const vt=Pe[Mt];D.format!==Kr?Bt!==null?De?le&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt,0,0,vt.width,vt.height,Bt,vt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt,de,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):De?le&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt,0,0,vt.width,vt.height,Bt,St,vt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt,de,vt.width,vt.height,0,Bt,St,vt.data)}}}else{if(Pe=D.mipmaps,De&&it){Pe.length>0&&Ce++;const Ge=ht(xt[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Ce,de,Ge.width,Ge.height)}for(let Ge=0;Ge<6;Ge++)if(qe){De?le&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,xt[Ge].width,xt[Ge].height,Bt,St,xt[Ge].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,de,xt[Ge].width,xt[Ge].height,0,Bt,St,xt[Ge].data);for(let Mt=0;Mt<Pe.length;Mt++){const qt=Pe[Mt].image[Ge].image;De?le&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt+1,0,0,qt.width,qt.height,Bt,St,qt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt+1,de,qt.width,qt.height,0,Bt,St,qt.data)}}else{De?le&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,Bt,St,xt[Ge]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,de,Bt,St,xt[Ge]);for(let Mt=0;Mt<Pe.length;Mt++){const vt=Pe[Mt];De?le&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt+1,0,0,Bt,St,vt.image[Ge]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Mt+1,de,Bt,St,vt.image[Ge])}}}w(D)&&S(r.TEXTURE_CUBE_MAP),pe.__version=xe.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function Fe(N,D,Q,ye,xe,pe){const je=s.convert(Q.format,Q.colorSpace),Ye=s.convert(Q.type),$e=R(Q.internalFormat,je,Ye,Q.colorSpace),kt=n.get(D),qe=n.get(Q);if(qe.__renderTarget=D,!kt.__hasExternalTextures){const xt=Math.max(1,D.width>>pe),zt=Math.max(1,D.height>>pe);xe===r.TEXTURE_3D||xe===r.TEXTURE_2D_ARRAY?t.texImage3D(xe,pe,$e,xt,zt,D.depth,0,je,Ye,null):t.texImage2D(xe,pe,$e,xt,zt,0,je,Ye,null)}t.bindFramebuffer(r.FRAMEBUFFER,N),At(D)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,ye,xe,qe.__webglTexture,0,et(D)):(xe===r.TEXTURE_2D||xe>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,ye,xe,qe.__webglTexture,pe),t.bindFramebuffer(r.FRAMEBUFFER,null)}function He(N,D,Q){if(r.bindRenderbuffer(r.RENDERBUFFER,N),D.depthBuffer){const ye=D.depthTexture,xe=ye&&ye.isDepthTexture?ye.type:null,pe=C(D.stencilBuffer,xe),je=D.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ye=et(D);At(D)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ye,pe,D.width,D.height):Q?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ye,pe,D.width,D.height):r.renderbufferStorage(r.RENDERBUFFER,pe,D.width,D.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,je,r.RENDERBUFFER,N)}else{const ye=D.textures;for(let xe=0;xe<ye.length;xe++){const pe=ye[xe],je=s.convert(pe.format,pe.colorSpace),Ye=s.convert(pe.type),$e=R(pe.internalFormat,je,Ye,pe.colorSpace),kt=et(D);Q&&At(D)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,kt,$e,D.width,D.height):At(D)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,kt,$e,D.width,D.height):r.renderbufferStorage(r.RENDERBUFFER,$e,D.width,D.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function rt(N,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,N),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ye=n.get(D.depthTexture);ye.__renderTarget=D,(!ye.__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),Se(D.depthTexture,0);const xe=ye.__webglTexture,pe=et(D);if(D.depthTexture.format===Qd)At(D)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,xe,0,pe):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,xe,0);else if(D.depthTexture.format===lf)At(D)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,xe,0,pe):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function yt(N){const D=n.get(N),Q=N.isWebGLCubeRenderTarget===!0;if(D.__boundDepthTexture!==N.depthTexture){const ye=N.depthTexture;if(D.__depthDisposeCallback&&D.__depthDisposeCallback(),ye){const xe=()=>{delete D.__boundDepthTexture,delete D.__depthDisposeCallback,ye.removeEventListener("dispose",xe)};ye.addEventListener("dispose",xe),D.__depthDisposeCallback=xe}D.__boundDepthTexture=ye}if(N.depthTexture&&!D.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");rt(D.__webglFramebuffer,N)}else if(Q){D.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)if(t.bindFramebuffer(r.FRAMEBUFFER,D.__webglFramebuffer[ye]),D.__webglDepthbuffer[ye]===void 0)D.__webglDepthbuffer[ye]=r.createRenderbuffer(),He(D.__webglDepthbuffer[ye],N,!1);else{const xe=N.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,pe=D.__webglDepthbuffer[ye];r.bindRenderbuffer(r.RENDERBUFFER,pe),r.framebufferRenderbuffer(r.FRAMEBUFFER,xe,r.RENDERBUFFER,pe)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer===void 0)D.__webglDepthbuffer=r.createRenderbuffer(),He(D.__webglDepthbuffer,N,!1);else{const ye=N.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,xe=D.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,xe),r.framebufferRenderbuffer(r.FRAMEBUFFER,ye,r.RENDERBUFFER,xe)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Rt(N,D,Q){const ye=n.get(N);D!==void 0&&Fe(ye.__webglFramebuffer,N,N.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Q!==void 0&&yt(N)}function Qt(N){const D=N.texture,Q=n.get(N),ye=n.get(D);N.addEventListener("dispose",V);const xe=N.textures,pe=N.isWebGLCubeRenderTarget===!0,je=xe.length>1;if(je||(ye.__webglTexture===void 0&&(ye.__webglTexture=r.createTexture()),ye.__version=D.version,a.memory.textures++),pe){Q.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)if(D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer[Ye]=[];for(let $e=0;$e<D.mipmaps.length;$e++)Q.__webglFramebuffer[Ye][$e]=r.createFramebuffer()}else Q.__webglFramebuffer[Ye]=r.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer=[];for(let Ye=0;Ye<D.mipmaps.length;Ye++)Q.__webglFramebuffer[Ye]=r.createFramebuffer()}else Q.__webglFramebuffer=r.createFramebuffer();if(je)for(let Ye=0,$e=xe.length;Ye<$e;Ye++){const kt=n.get(xe[Ye]);kt.__webglTexture===void 0&&(kt.__webglTexture=r.createTexture(),a.memory.textures++)}if(N.samples>0&&At(N)===!1){Q.__webglMultisampledFramebuffer=r.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Ye=0;Ye<xe.length;Ye++){const $e=xe[Ye];Q.__webglColorRenderbuffer[Ye]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Q.__webglColorRenderbuffer[Ye]);const kt=s.convert($e.format,$e.colorSpace),qe=s.convert($e.type),xt=R($e.internalFormat,kt,qe,$e.colorSpace,N.isXRRenderTarget===!0),zt=et(N);r.renderbufferStorageMultisample(r.RENDERBUFFER,zt,xt,N.width,N.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ye,r.RENDERBUFFER,Q.__webglColorRenderbuffer[Ye])}r.bindRenderbuffer(r.RENDERBUFFER,null),N.depthBuffer&&(Q.__webglDepthRenderbuffer=r.createRenderbuffer(),He(Q.__webglDepthRenderbuffer,N,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(pe){t.bindTexture(r.TEXTURE_CUBE_MAP,ye.__webglTexture),ve(r.TEXTURE_CUBE_MAP,D);for(let Ye=0;Ye<6;Ye++)if(D.mipmaps&&D.mipmaps.length>0)for(let $e=0;$e<D.mipmaps.length;$e++)Fe(Q.__webglFramebuffer[Ye][$e],N,D,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,$e);else Fe(Q.__webglFramebuffer[Ye],N,D,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0);w(D)&&S(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(je){for(let Ye=0,$e=xe.length;Ye<$e;Ye++){const kt=xe[Ye],qe=n.get(kt);t.bindTexture(r.TEXTURE_2D,qe.__webglTexture),ve(r.TEXTURE_2D,kt),Fe(Q.__webglFramebuffer,N,kt,r.COLOR_ATTACHMENT0+Ye,r.TEXTURE_2D,0),w(kt)&&S(r.TEXTURE_2D)}t.unbindTexture()}else{let Ye=r.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(Ye=N.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Ye,ye.__webglTexture),ve(Ye,D),D.mipmaps&&D.mipmaps.length>0)for(let $e=0;$e<D.mipmaps.length;$e++)Fe(Q.__webglFramebuffer[$e],N,D,r.COLOR_ATTACHMENT0,Ye,$e);else Fe(Q.__webglFramebuffer,N,D,r.COLOR_ATTACHMENT0,Ye,0);w(D)&&S(Ye),t.unbindTexture()}N.depthBuffer&&yt(N)}function Ke(N){const D=N.textures;for(let Q=0,ye=D.length;Q<ye;Q++){const xe=D[Q];if(w(xe)){const pe=T(N),je=n.get(xe).__webglTexture;t.bindTexture(pe,je),S(pe),t.unbindTexture()}}}const Ze=[],ee=[];function Dt(N){if(N.samples>0){if(At(N)===!1){const D=N.textures,Q=N.width,ye=N.height;let xe=r.COLOR_BUFFER_BIT;const pe=N.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,je=n.get(N),Ye=D.length>1;if(Ye)for(let $e=0;$e<D.length;$e++)t.bindFramebuffer(r.FRAMEBUFFER,je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+$e,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+$e,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let $e=0;$e<D.length;$e++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(xe|=r.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(xe|=r.STENCIL_BUFFER_BIT)),Ye){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,je.__webglColorRenderbuffer[$e]);const kt=n.get(D[$e]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,kt,0)}r.blitFramebuffer(0,0,Q,ye,0,0,Q,ye,xe,r.NEAREST),u===!0&&(Ze.length=0,ee.length=0,Ze.push(r.COLOR_ATTACHMENT0+$e),N.depthBuffer&&N.resolveDepthBuffer===!1&&(Ze.push(pe),ee.push(pe),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ee)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ze))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Ye)for(let $e=0;$e<D.length;$e++){t.bindFramebuffer(r.FRAMEBUFFER,je.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+$e,r.RENDERBUFFER,je.__webglColorRenderbuffer[$e]);const kt=n.get(D[$e]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,je.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+$e,r.TEXTURE_2D,kt,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}else if(N.depthBuffer&&N.resolveDepthBuffer===!1&&u){const D=N.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[D])}}}function et(N){return Math.min(i.maxSamples,N.samples)}function At(N){const D=n.get(N);return N.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function at(N){const D=a.render.frame;p.get(N)!==D&&(p.set(N,D),N.update())}function Kt(N,D){const Q=N.colorSpace,ye=N.format,xe=N.type;return N.isCompressedTexture===!0||N.isVideoTexture===!0||Q!==Zo&&Q!==Xl&&(jn.getTransfer(Q)===sr?(ye!==Kr||xe!==Xs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),D}function ht(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(h.width=N.naturalWidth||N.width,h.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(h.width=N.displayWidth,h.height=N.displayHeight):(h.width=N.width,h.height=N.height),h}this.allocateTextureUnit=re,this.resetTextureUnits=q,this.setTexture2D=Se,this.setTexture2DArray=he,this.setTexture3D=Ee,this.setTextureCube=Y,this.rebindTextures=Rt,this.setupRenderTarget=Qt,this.updateRenderTargetMipmap=Ke,this.updateMultisampleRenderTarget=Dt,this.setupDepthRenderbuffer=yt,this.setupFrameBufferTexture=Fe,this.useMultisampledRTT=At}function mI(r,e){function t(n,i=Xl){let s;const a=jn.getTransfer(i);if(n===Xs)return r.UNSIGNED_BYTE;if(n===yx)return r.UNSIGNED_SHORT_4_4_4_4;if(n===xx)return r.UNSIGNED_SHORT_5_5_5_1;if(n===uw)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===gx)return r.BYTE;if(n===vx)return r.SHORT;if(n===gp)return r.UNSIGNED_SHORT;if(n===Zg)return r.INT;if(n===Yo)return r.UNSIGNED_INT;if(n===br)return r.FLOAT;if(n===vi)return r.HALF_FLOAT;if(n===dw)return r.ALPHA;if(n===fw)return r.RGB;if(n===Kr)return r.RGBA;if(n===hw)return r.LUMINANCE;if(n===pw)return r.LUMINANCE_ALPHA;if(n===Qd)return r.DEPTH_COMPONENT;if(n===lf)return r.DEPTH_STENCIL;if(n===Qg)return r.RED;if(n===qg)return r.RED_INTEGER;if(n===mw)return r.RG;if(n===_x)return r.RG_INTEGER;if(n===Ax)return r.RGBA_INTEGER;if(n===cg||n===ug||n===dg||n===fg)if(a===sr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===cg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===ug)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===dg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===fg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===cg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ug)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===dg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===fg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===b0||n===T0||n===R0||n===I0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===b0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===T0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===R0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===I0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===P0||n===B0||n===D0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===P0||n===B0)return a===sr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===D0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===L0||n===N0||n===F0||n===O0||n===U0||n===k0||n===z0||n===H0||n===G0||n===V0||n===j0||n===W0||n===X0||n===J0)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===L0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===N0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===F0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===O0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===U0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===k0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===z0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===H0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===G0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===V0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===j0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===W0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===X0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===J0)return a===sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===hg||n===K0||n===Y0)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===hg)return a===sr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===K0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Y0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===gw||n===Z0||n===Q0||n===q0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===hg)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Z0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Q0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===q0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===of?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}const pz={type:"move"};class AA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,a=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){a=!0;for(const M of e.hand.values()){const w=t.getJointPose(M,n),S=this._getHandJoint(h,M);w!==null&&(S.matrix.fromArray(w.transform.matrix),S.matrix.decompose(S.position,S.rotation,S.scale),S.matrixWorldNeedsUpdate=!0,S.jointRadius=w.radius),S.visible=w!==null}const p=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],v=p.position.distanceTo(m.position),y=.02,_=.005;h.inputState.pinching&&v>y+_?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=y-_&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(pz)))}return l!==null&&(l.visible=i!==null),u!==null&&(u.visible=s!==null),h!==null&&(h.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Kl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const mz=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,gz=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class vz{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new nr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Cs({vertexShader:mz,fragmentShader:gz,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Tr(new Eu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class yz extends Qo{constructor(e,t){super();const n=this;let i=null,s=1,a=null,l="local-floor",u=1,h=null,p=null,m=null,v=null,y=null,_=null;const M=new vz,w=t.getContextAttributes();let S=null,T=null;const R=[],C=[],k=new Je;let O=null;const V=new Gr;V.viewport=new Xn;const z=new Gr;z.viewport=new Xn;const F=[V,z],L=new sI;let W=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(we){let Le=R[we];return Le===void 0&&(Le=new AA,R[we]=Le),Le.getTargetRaySpace()},this.getControllerGrip=function(we){let Le=R[we];return Le===void 0&&(Le=new AA,R[we]=Le),Le.getGripSpace()},this.getHand=function(we){let Le=R[we];return Le===void 0&&(Le=new AA,R[we]=Le),Le.getHandSpace()};function re(we){const Le=C.indexOf(we.inputSource);if(Le===-1)return;const Fe=R[Le];Fe!==void 0&&(Fe.update(we.inputSource,we.frame,h||a),Fe.dispatchEvent({type:we.type,data:we.inputSource}))}function oe(){i.removeEventListener("select",re),i.removeEventListener("selectstart",re),i.removeEventListener("selectend",re),i.removeEventListener("squeeze",re),i.removeEventListener("squeezestart",re),i.removeEventListener("squeezeend",re),i.removeEventListener("end",oe),i.removeEventListener("inputsourceschange",Se);for(let we=0;we<R.length;we++){const Le=C[we];Le!==null&&(C[we]=null,R[we].disconnect(Le))}W=null,q=null,M.reset(),e.setRenderTarget(S),y=null,v=null,m=null,i=null,T=null,We.stop(),n.isPresenting=!1,e.setPixelRatio(O),e.setSize(k.width,k.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(we){s=we,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(we){l=we,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||a},this.setReferenceSpace=function(we){h=we},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(we){if(i=we,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",re),i.addEventListener("selectstart",re),i.addEventListener("selectend",re),i.addEventListener("squeeze",re),i.addEventListener("squeezestart",re),i.addEventListener("squeezeend",re),i.addEventListener("end",oe),i.addEventListener("inputsourceschange",Se),w.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(k),i.renderState.layers===void 0){const Le={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(i,t,Le),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),T=new Js(y.framebufferWidth,y.framebufferHeight,{format:Kr,type:Xs,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let Le=null,Fe=null,He=null;w.depth&&(He=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Le=w.stencil?lf:Qd,Fe=w.stencil?of:Yo);const rt={colorFormat:t.RGBA8,depthFormat:He,scaleFactor:s};m=new XRWebGLBinding(i,t),v=m.createProjectionLayer(rt),i.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),T=new Js(v.textureWidth,v.textureHeight,{format:Kr,type:Xs,depthTexture:new Rx(v.textureWidth,v.textureHeight,Fe,void 0,void 0,void 0,void 0,void 0,void 0,Le),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(u),h=null,a=await i.requestReferenceSpace(l),We.setContext(i),We.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function Se(we){for(let Le=0;Le<we.removed.length;Le++){const Fe=we.removed[Le],He=C.indexOf(Fe);He>=0&&(C[He]=null,R[He].disconnect(Fe))}for(let Le=0;Le<we.added.length;Le++){const Fe=we.added[Le];let He=C.indexOf(Fe);if(He===-1){for(let yt=0;yt<R.length;yt++)if(yt>=C.length){C.push(Fe),He=yt;break}else if(C[yt]===null){C[yt]=Fe,He=yt;break}if(He===-1)break}const rt=R[He];rt&&rt.connect(Fe)}}const he=new Z,Ee=new Z;function Y(we,Le,Fe){he.setFromMatrixPosition(Le.matrixWorld),Ee.setFromMatrixPosition(Fe.matrixWorld);const He=he.distanceTo(Ee),rt=Le.projectionMatrix.elements,yt=Fe.projectionMatrix.elements,Rt=rt[14]/(rt[10]-1),Qt=rt[14]/(rt[10]+1),Ke=(rt[9]+1)/rt[5],Ze=(rt[9]-1)/rt[5],ee=(rt[8]-1)/rt[0],Dt=(yt[8]+1)/yt[0],et=Rt*ee,At=Rt*Dt,at=He/(-ee+Dt),Kt=at*-ee;if(Le.matrixWorld.decompose(we.position,we.quaternion,we.scale),we.translateX(Kt),we.translateZ(at),we.matrixWorld.compose(we.position,we.quaternion,we.scale),we.matrixWorldInverse.copy(we.matrixWorld).invert(),rt[10]===-1)we.projectionMatrix.copy(Le.projectionMatrix),we.projectionMatrixInverse.copy(Le.projectionMatrixInverse);else{const ht=Rt+at,N=Qt+at,D=et-Kt,Q=At+(He-Kt),ye=Ke*Qt/N*ht,xe=Ze*Qt/N*ht;we.projectionMatrix.makePerspective(D,Q,ye,xe,ht,N),we.projectionMatrixInverse.copy(we.projectionMatrix).invert()}}function ge(we,Le){Le===null?we.matrixWorld.copy(we.matrix):we.matrixWorld.multiplyMatrices(Le.matrixWorld,we.matrix),we.matrixWorldInverse.copy(we.matrixWorld).invert()}this.updateCamera=function(we){if(i===null)return;let Le=we.near,Fe=we.far;M.texture!==null&&(M.depthNear>0&&(Le=M.depthNear),M.depthFar>0&&(Fe=M.depthFar)),L.near=z.near=V.near=Le,L.far=z.far=V.far=Fe,(W!==L.near||q!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),W=L.near,q=L.far),V.layers.mask=we.layers.mask|2,z.layers.mask=we.layers.mask|4,L.layers.mask=V.layers.mask|z.layers.mask;const He=we.parent,rt=L.cameras;ge(L,He);for(let yt=0;yt<rt.length;yt++)ge(rt[yt],He);rt.length===2?Y(L,V,z):L.projectionMatrix.copy(V.projectionMatrix),se(we,L,He)};function se(we,Le,Fe){Fe===null?we.matrix.copy(Le.matrixWorld):(we.matrix.copy(Fe.matrixWorld),we.matrix.invert(),we.matrix.multiply(Le.matrixWorld)),we.matrix.decompose(we.position,we.quaternion,we.scale),we.updateMatrixWorld(!0),we.projectionMatrix.copy(Le.projectionMatrix),we.projectionMatrixInverse.copy(Le.projectionMatrixInverse),we.isPerspectiveCamera&&(we.fov=xp*2*Math.atan(1/we.projectionMatrix.elements[5]),we.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(v===null&&y===null))return u},this.setFoveation=function(we){u=we,v!==null&&(v.fixedFoveation=we),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=we)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(L)};let K=null;function ve(we,Le){if(p=Le.getViewerPose(h||a),_=Le,p!==null){const Fe=p.views;y!==null&&(e.setRenderTargetFramebuffer(T,y.framebuffer),e.setRenderTarget(T));let He=!1;Fe.length!==L.cameras.length&&(L.cameras.length=0,He=!0);for(let yt=0;yt<Fe.length;yt++){const Rt=Fe[yt];let Qt=null;if(y!==null)Qt=y.getViewport(Rt);else{const Ze=m.getViewSubImage(v,Rt);Qt=Ze.viewport,yt===0&&(e.setRenderTargetTextures(T,Ze.colorTexture,v.ignoreDepthValues?void 0:Ze.depthStencilTexture),e.setRenderTarget(T))}let Ke=F[yt];Ke===void 0&&(Ke=new Gr,Ke.layers.enable(yt),Ke.viewport=new Xn,F[yt]=Ke),Ke.matrix.fromArray(Rt.transform.matrix),Ke.matrix.decompose(Ke.position,Ke.quaternion,Ke.scale),Ke.projectionMatrix.fromArray(Rt.projectionMatrix),Ke.projectionMatrixInverse.copy(Ke.projectionMatrix).invert(),Ke.viewport.set(Qt.x,Qt.y,Qt.width,Qt.height),yt===0&&(L.matrix.copy(Ke.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),He===!0&&L.cameras.push(Ke)}const rt=i.enabledFeatures;if(rt&&rt.includes("depth-sensing")){const yt=m.getDepthInformation(Fe[0]);yt&&yt.isValid&&yt.texture&&M.init(e,yt,i.renderState)}}for(let Fe=0;Fe<R.length;Fe++){const He=C[Fe],rt=R[Fe];He!==null&&rt!==void 0&&rt.update(He,Le,h||a)}K&&K(we,Le),Le.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Le}),_=null}const We=new uI;We.setAnimationLoop(ve),this.setAnimationLoop=function(we){K=we},this.dispose=function(){}}}const Md=new ca,xz=new nn;function _z(r,e){function t(w,S){w.matrixAutoUpdate===!0&&w.updateMatrix(),S.value.copy(w.matrix)}function n(w,S){S.color.getRGB(w.fogColor.value,yR(r)),S.isFog?(w.fogNear.value=S.near,w.fogFar.value=S.far):S.isFogExp2&&(w.fogDensity.value=S.density)}function i(w,S,T,R,C){S.isMeshBasicMaterial||S.isMeshLambertMaterial?s(w,S):S.isMeshToonMaterial?(s(w,S),m(w,S)):S.isMeshPhongMaterial?(s(w,S),p(w,S)):S.isMeshStandardMaterial?(s(w,S),v(w,S),S.isMeshPhysicalMaterial&&y(w,S,C)):S.isMeshMatcapMaterial?(s(w,S),_(w,S)):S.isMeshDepthMaterial?s(w,S):S.isMeshDistanceMaterial?(s(w,S),M(w,S)):S.isMeshNormalMaterial?s(w,S):S.isLineBasicMaterial?(a(w,S),S.isLineDashedMaterial&&l(w,S)):S.isPointsMaterial?u(w,S,T,R):S.isSpriteMaterial?h(w,S):S.isShadowMaterial?(w.color.value.copy(S.color),w.opacity.value=S.opacity):S.isShaderMaterial&&(S.uniformsNeedUpdate=!1)}function s(w,S){w.opacity.value=S.opacity,S.color&&w.diffuse.value.copy(S.color),S.emissive&&w.emissive.value.copy(S.emissive).multiplyScalar(S.emissiveIntensity),S.map&&(w.map.value=S.map,t(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.bumpMap&&(w.bumpMap.value=S.bumpMap,t(S.bumpMap,w.bumpMapTransform),w.bumpScale.value=S.bumpScale,S.side===ts&&(w.bumpScale.value*=-1)),S.normalMap&&(w.normalMap.value=S.normalMap,t(S.normalMap,w.normalMapTransform),w.normalScale.value.copy(S.normalScale),S.side===ts&&w.normalScale.value.negate()),S.displacementMap&&(w.displacementMap.value=S.displacementMap,t(S.displacementMap,w.displacementMapTransform),w.displacementScale.value=S.displacementScale,w.displacementBias.value=S.displacementBias),S.emissiveMap&&(w.emissiveMap.value=S.emissiveMap,t(S.emissiveMap,w.emissiveMapTransform)),S.specularMap&&(w.specularMap.value=S.specularMap,t(S.specularMap,w.specularMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest);const T=e.get(S),R=T.envMap,C=T.envMapRotation;R&&(w.envMap.value=R,Md.copy(C),Md.x*=-1,Md.y*=-1,Md.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(Md.y*=-1,Md.z*=-1),w.envMapRotation.value.setFromMatrix4(xz.makeRotationFromEuler(Md)),w.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=S.reflectivity,w.ior.value=S.ior,w.refractionRatio.value=S.refractionRatio),S.lightMap&&(w.lightMap.value=S.lightMap,w.lightMapIntensity.value=S.lightMapIntensity,t(S.lightMap,w.lightMapTransform)),S.aoMap&&(w.aoMap.value=S.aoMap,w.aoMapIntensity.value=S.aoMapIntensity,t(S.aoMap,w.aoMapTransform))}function a(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,S.map&&(w.map.value=S.map,t(S.map,w.mapTransform))}function l(w,S){w.dashSize.value=S.dashSize,w.totalSize.value=S.dashSize+S.gapSize,w.scale.value=S.scale}function u(w,S,T,R){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.size.value=S.size*T,w.scale.value=R*.5,S.map&&(w.map.value=S.map,t(S.map,w.uvTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function h(w,S){w.diffuse.value.copy(S.color),w.opacity.value=S.opacity,w.rotation.value=S.rotation,S.map&&(w.map.value=S.map,t(S.map,w.mapTransform)),S.alphaMap&&(w.alphaMap.value=S.alphaMap,t(S.alphaMap,w.alphaMapTransform)),S.alphaTest>0&&(w.alphaTest.value=S.alphaTest)}function p(w,S){w.specular.value.copy(S.specular),w.shininess.value=Math.max(S.shininess,1e-4)}function m(w,S){S.gradientMap&&(w.gradientMap.value=S.gradientMap)}function v(w,S){w.metalness.value=S.metalness,S.metalnessMap&&(w.metalnessMap.value=S.metalnessMap,t(S.metalnessMap,w.metalnessMapTransform)),w.roughness.value=S.roughness,S.roughnessMap&&(w.roughnessMap.value=S.roughnessMap,t(S.roughnessMap,w.roughnessMapTransform)),S.envMap&&(w.envMapIntensity.value=S.envMapIntensity)}function y(w,S,T){w.ior.value=S.ior,S.sheen>0&&(w.sheenColor.value.copy(S.sheenColor).multiplyScalar(S.sheen),w.sheenRoughness.value=S.sheenRoughness,S.sheenColorMap&&(w.sheenColorMap.value=S.sheenColorMap,t(S.sheenColorMap,w.sheenColorMapTransform)),S.sheenRoughnessMap&&(w.sheenRoughnessMap.value=S.sheenRoughnessMap,t(S.sheenRoughnessMap,w.sheenRoughnessMapTransform))),S.clearcoat>0&&(w.clearcoat.value=S.clearcoat,w.clearcoatRoughness.value=S.clearcoatRoughness,S.clearcoatMap&&(w.clearcoatMap.value=S.clearcoatMap,t(S.clearcoatMap,w.clearcoatMapTransform)),S.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=S.clearcoatRoughnessMap,t(S.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),S.clearcoatNormalMap&&(w.clearcoatNormalMap.value=S.clearcoatNormalMap,t(S.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(S.clearcoatNormalScale),S.side===ts&&w.clearcoatNormalScale.value.negate())),S.dispersion>0&&(w.dispersion.value=S.dispersion),S.iridescence>0&&(w.iridescence.value=S.iridescence,w.iridescenceIOR.value=S.iridescenceIOR,w.iridescenceThicknessMinimum.value=S.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=S.iridescenceThicknessRange[1],S.iridescenceMap&&(w.iridescenceMap.value=S.iridescenceMap,t(S.iridescenceMap,w.iridescenceMapTransform)),S.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=S.iridescenceThicknessMap,t(S.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),S.transmission>0&&(w.transmission.value=S.transmission,w.transmissionSamplerMap.value=T.texture,w.transmissionSamplerSize.value.set(T.width,T.height),S.transmissionMap&&(w.transmissionMap.value=S.transmissionMap,t(S.transmissionMap,w.transmissionMapTransform)),w.thickness.value=S.thickness,S.thicknessMap&&(w.thicknessMap.value=S.thicknessMap,t(S.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=S.attenuationDistance,w.attenuationColor.value.copy(S.attenuationColor)),S.anisotropy>0&&(w.anisotropyVector.value.set(S.anisotropy*Math.cos(S.anisotropyRotation),S.anisotropy*Math.sin(S.anisotropyRotation)),S.anisotropyMap&&(w.anisotropyMap.value=S.anisotropyMap,t(S.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=S.specularIntensity,w.specularColor.value.copy(S.specularColor),S.specularColorMap&&(w.specularColorMap.value=S.specularColorMap,t(S.specularColorMap,w.specularColorMapTransform)),S.specularIntensityMap&&(w.specularIntensityMap.value=S.specularIntensityMap,t(S.specularIntensityMap,w.specularIntensityMapTransform))}function _(w,S){S.matcap&&(w.matcap.value=S.matcap)}function M(w,S){const T=e.get(S).light;w.referencePosition.value.setFromMatrixPosition(T.matrixWorld),w.nearDistance.value=T.shadow.camera.near,w.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Az(r,e,t,n){let i={},s={},a=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function u(T,R){const C=R.program;n.uniformBlockBinding(T,C)}function h(T,R){let C=i[T.id];C===void 0&&(_(T),C=p(T),i[T.id]=C,T.addEventListener("dispose",w));const k=R.program;n.updateUBOMapping(T,k);const O=e.render.frame;s[T.id]!==O&&(v(T),s[T.id]=O)}function p(T){const R=m();T.__bindingPointIndex=R;const C=r.createBuffer(),k=T.__size,O=T.usage;return r.bindBuffer(r.UNIFORM_BUFFER,C),r.bufferData(r.UNIFORM_BUFFER,k,O),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,R,C),C}function m(){for(let T=0;T<l;T++)if(a.indexOf(T)===-1)return a.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(T){const R=i[T.id],C=T.uniforms,k=T.__cache;r.bindBuffer(r.UNIFORM_BUFFER,R);for(let O=0,V=C.length;O<V;O++){const z=Array.isArray(C[O])?C[O]:[C[O]];for(let F=0,L=z.length;F<L;F++){const W=z[F];if(y(W,O,F,k)===!0){const q=W.__offset,re=Array.isArray(W.value)?W.value:[W.value];let oe=0;for(let Se=0;Se<re.length;Se++){const he=re[Se],Ee=M(he);typeof he=="number"||typeof he=="boolean"?(W.__data[0]=he,r.bufferSubData(r.UNIFORM_BUFFER,q+oe,W.__data)):he.isMatrix3?(W.__data[0]=he.elements[0],W.__data[1]=he.elements[1],W.__data[2]=he.elements[2],W.__data[3]=0,W.__data[4]=he.elements[3],W.__data[5]=he.elements[4],W.__data[6]=he.elements[5],W.__data[7]=0,W.__data[8]=he.elements[6],W.__data[9]=he.elements[7],W.__data[10]=he.elements[8],W.__data[11]=0):(he.toArray(W.__data,oe),oe+=Ee.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,q,W.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function y(T,R,C,k){const O=T.value,V=R+"_"+C;if(k[V]===void 0)return typeof O=="number"||typeof O=="boolean"?k[V]=O:k[V]=O.clone(),!0;{const z=k[V];if(typeof O=="number"||typeof O=="boolean"){if(z!==O)return k[V]=O,!0}else if(z.equals(O)===!1)return z.copy(O),!0}return!1}function _(T){const R=T.uniforms;let C=0;const k=16;for(let V=0,z=R.length;V<z;V++){const F=Array.isArray(R[V])?R[V]:[R[V]];for(let L=0,W=F.length;L<W;L++){const q=F[L],re=Array.isArray(q.value)?q.value:[q.value];for(let oe=0,Se=re.length;oe<Se;oe++){const he=re[oe],Ee=M(he),Y=C%k,ge=Y%Ee.boundary,se=Y+ge;C+=ge,se!==0&&k-se<Ee.storage&&(C+=k-se),q.__data=new Float32Array(Ee.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=C,C+=Ee.storage}}}const O=C%k;return O>0&&(C+=k-O),T.__size=C,T.__cache={},this}function M(T){const R={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(R.boundary=4,R.storage=4):T.isVector2?(R.boundary=8,R.storage=8):T.isVector3||T.isColor?(R.boundary=16,R.storage=12):T.isVector4?(R.boundary=16,R.storage=16):T.isMatrix3?(R.boundary=48,R.storage=48):T.isMatrix4?(R.boundary=64,R.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),R}function w(T){const R=T.target;R.removeEventListener("dispose",w);const C=a.indexOf(R.__bindingPointIndex);a.splice(C,1),r.deleteBuffer(i[R.id]),delete i[R.id],delete s[R.id]}function S(){for(const T in i)r.deleteBuffer(i[T]);a=[],i={},s={}}return{bind:u,update:h,dispose:S}}class nM{constructor(e={}){const{canvas:t=pR(),context:n=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=a;const _=new Uint32Array(4),M=new Int32Array(4);let w=null,S=null;const T=[],R=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=As,this.toneMapping=Vo,this.toneMappingExposure=1;const C=this;let k=!1,O=0,V=0,z=null,F=-1,L=null;const W=new Xn,q=new Xn;let re=null;const oe=new wt(0);let Se=0,he=t.width,Ee=t.height,Y=1,ge=null,se=null;const K=new Xn(0,0,he,Ee),ve=new Xn(0,0,he,Ee);let We=!1;const we=new rv;let Le=!1,Fe=!1;const He=new nn,rt=new nn,yt=new Z,Rt=new Xn,Qt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ke=!1;function Ze(){return z===null?Y:1}let ee=n;function Dt(H,ne){return t.getContext(H,ne)}try{const H={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Dp}`),t.addEventListener("webglcontextlost",Ge,!1),t.addEventListener("webglcontextrestored",Mt,!1),t.addEventListener("webglcontextcreationerror",vt,!1),ee===null){const ne="webgl2";if(ee=Dt(ne,H),ee===null)throw Dt(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let et,At,at,Kt,ht,N,D,Q,ye,xe,pe,je,Ye,$e,kt,qe,xt,zt,Bt,St,de,De,it,le;function Ce(){et=new Bk(ee),et.init(),De=new mI(ee,et),At=new Ck(ee,et,e,De),at=new fz(ee,et),At.reverseDepthBuffer&&v&&at.buffers.depth.setReversed(!0),Kt=new Nk(ee),ht=new $4,N=new hz(ee,et,at,ht,At,De,Kt),D=new Tk(C),Q=new Pk(C),ye=new G3(ee),it=new Mk(ee,ye),xe=new Dk(ee,ye,Kt,it),pe=new Ok(ee,xe,ye,Kt),Bt=new Fk(ee,At,N),qe=new bk(ht),je=new q4(C,D,Q,et,At,it,qe),Ye=new _z(C,ht),$e=new tz,kt=new oz(et),zt=new wk(C,D,Q,at,pe,y,u),xt=new uz(C,pe,At),le=new Az(ee,Kt,At,at),St=new Ek(ee,et,Kt),de=new Lk(ee,et,Kt),Kt.programs=je.programs,C.capabilities=At,C.extensions=et,C.properties=ht,C.renderLists=$e,C.shadowMap=xt,C.state=at,C.info=Kt}Ce();const Pe=new yz(C,ee);this.xr=Pe,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const H=et.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=et.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(H){H!==void 0&&(Y=H,this.setSize(he,Ee,!1))},this.getSize=function(H){return H.set(he,Ee)},this.setSize=function(H,ne,ae=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}he=H,Ee=ne,t.width=Math.floor(H*Y),t.height=Math.floor(ne*Y),ae===!0&&(t.style.width=H+"px",t.style.height=ne+"px"),this.setViewport(0,0,H,ne)},this.getDrawingBufferSize=function(H){return H.set(he*Y,Ee*Y).floor()},this.setDrawingBufferSize=function(H,ne,ae){he=H,Ee=ne,Y=ae,t.width=Math.floor(H*ae),t.height=Math.floor(ne*ae),this.setViewport(0,0,H,ne)},this.getCurrentViewport=function(H){return H.copy(W)},this.getViewport=function(H){return H.copy(K)},this.setViewport=function(H,ne,ae,ce){H.isVector4?K.set(H.x,H.y,H.z,H.w):K.set(H,ne,ae,ce),at.viewport(W.copy(K).multiplyScalar(Y).round())},this.getScissor=function(H){return H.copy(ve)},this.setScissor=function(H,ne,ae,ce){H.isVector4?ve.set(H.x,H.y,H.z,H.w):ve.set(H,ne,ae,ce),at.scissor(q.copy(ve).multiplyScalar(Y).round())},this.getScissorTest=function(){return We},this.setScissorTest=function(H){at.setScissorTest(We=H)},this.setOpaqueSort=function(H){ge=H},this.setTransparentSort=function(H){se=H},this.getClearColor=function(H){return H.copy(zt.getClearColor())},this.setClearColor=function(){zt.setClearColor.apply(zt,arguments)},this.getClearAlpha=function(){return zt.getClearAlpha()},this.setClearAlpha=function(){zt.setClearAlpha.apply(zt,arguments)},this.clear=function(H=!0,ne=!0,ae=!0){let ce=0;if(H){let $=!1;if(z!==null){const Xe=z.texture.format;$=Xe===Ax||Xe===_x||Xe===qg}if($){const Xe=z.texture.type,Oe=Xe===Xs||Xe===Yo||Xe===gp||Xe===of||Xe===yx||Xe===xx,Ve=zt.getClearColor(),Qe=zt.getClearAlpha(),ut=Ve.r,gt=Ve.g,lt=Ve.b;Oe?(_[0]=ut,_[1]=gt,_[2]=lt,_[3]=Qe,ee.clearBufferuiv(ee.COLOR,0,_)):(M[0]=ut,M[1]=gt,M[2]=lt,M[3]=Qe,ee.clearBufferiv(ee.COLOR,0,M))}else ce|=ee.COLOR_BUFFER_BIT}ne&&(ce|=ee.DEPTH_BUFFER_BIT),ae&&(ce|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ge,!1),t.removeEventListener("webglcontextrestored",Mt,!1),t.removeEventListener("webglcontextcreationerror",vt,!1),zt.dispose(),$e.dispose(),kt.dispose(),ht.dispose(),D.dispose(),Q.dispose(),pe.dispose(),it.dispose(),le.dispose(),je.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",xo),Pe.removeEventListener("sessionend",fa),Pi.stop()};function Ge(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Mt(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1;const H=Kt.autoReset,ne=xt.enabled,ae=xt.autoUpdate,ce=xt.needsUpdate,$=xt.type;Ce(),Kt.autoReset=H,xt.enabled=ne,xt.autoUpdate=ae,xt.needsUpdate=ce,xt.type=$}function vt(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function qt(H){const ne=H.target;ne.removeEventListener("dispose",qt),Rn(ne)}function Rn(H){$n(H),ht.remove(H)}function $n(H){const ne=ht.get(H).programs;ne!==void 0&&(ne.forEach(function(ae){je.releaseProgram(ae)}),H.isShaderMaterial&&je.releaseShaderCache(H))}this.renderBufferDirect=function(H,ne,ae,ce,$,Xe){ne===null&&(ne=Qt);const Oe=$.isMesh&&$.matrixWorld.determinant()<0,Ve=fe(H,ne,ae,ce,$);at.setMaterial(ce,Oe);let Qe=ae.index,ut=1;if(ce.wireframe===!0){if(Qe=xe.getWireframeAttribute(ae),Qe===void 0)return;ut=2}const gt=ae.drawRange,lt=ae.attributes.position;let dt=gt.start*ut,bt=(gt.start+gt.count)*ut;Xe!==null&&(dt=Math.max(dt,Xe.start*ut),bt=Math.min(bt,(Xe.start+Xe.count)*ut)),Qe!==null?(dt=Math.max(dt,0),bt=Math.min(bt,Qe.count)):lt!=null&&(dt=Math.max(dt,0),bt=Math.min(bt,lt.count));const Ft=bt-dt;if(Ft<0||Ft===1/0)return;it.setup($,ce,Ve,ae,Qe);let rn,Tt=St;if(Qe!==null&&(rn=ye.get(Qe),Tt=de,Tt.setIndex(rn)),$.isMesh)ce.wireframe===!0?(at.setLineWidth(ce.wireframeLinewidth*Ze()),Tt.setMode(ee.LINES)):Tt.setMode(ee.TRIANGLES);else if($.isLine){let _t=ce.linewidth;_t===void 0&&(_t=1),at.setLineWidth(_t*Ze()),$.isLineSegments?Tt.setMode(ee.LINES):$.isLineLoop?Tt.setMode(ee.LINE_LOOP):Tt.setMode(ee.LINE_STRIP)}else $.isPoints?Tt.setMode(ee.POINTS):$.isSprite&&Tt.setMode(ee.TRIANGLES);if($.isBatchedMesh)if($._multiDrawInstances!==null)Tt.renderMultiDrawInstances($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount,$._multiDrawInstances);else if(et.get("WEBGL_multi_draw"))Tt.renderMultiDraw($._multiDrawStarts,$._multiDrawCounts,$._multiDrawCount);else{const _t=$._multiDrawStarts,In=$._multiDrawCounts,$t=$._multiDrawCount,Un=Qe?ye.get(Qe).bytesPerElement:1,_n=ht.get(ce).currentProgram.getUniforms();for(let kn=0;kn<$t;kn++)_n.setValue(ee,"_gl_DrawID",kn),Tt.render(_t[kn]/Un,In[kn])}else if($.isInstancedMesh)Tt.renderInstances(dt,Ft,$.count);else if(ae.isInstancedBufferGeometry){const _t=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,In=Math.min(ae.instanceCount,_t);Tt.renderInstances(dt,Ft,In)}else Tt.render(dt,Ft)};function fn(H,ne,ae){H.transparent===!0&&H.side===Ta&&H.forceSinglePass===!1?(H.side=ts,H.needsUpdate=!0,_o(H,ne,ae),H.side=Jo,H.needsUpdate=!0,_o(H,ne,ae),H.side=Ta):_o(H,ne,ae)}this.compile=function(H,ne,ae=null){ae===null&&(ae=H),S=kt.get(ae),S.init(ne),R.push(S),ae.traverseVisible(function($){$.isLight&&$.layers.test(ne.layers)&&(S.pushLight($),$.castShadow&&S.pushShadow($))}),H!==ae&&H.traverseVisible(function($){$.isLight&&$.layers.test(ne.layers)&&(S.pushLight($),$.castShadow&&S.pushShadow($))}),S.setupLights();const ce=new Set;return H.traverse(function($){if(!($.isMesh||$.isPoints||$.isLine||$.isSprite))return;const Xe=$.material;if(Xe)if(Array.isArray(Xe))for(let Oe=0;Oe<Xe.length;Oe++){const Ve=Xe[Oe];fn(Ve,ae,$),ce.add(Ve)}else fn(Xe,ae,$),ce.add(Xe)}),R.pop(),S=null,ce},this.compileAsync=function(H,ne,ae=null){const ce=this.compile(H,ne,ae);return new Promise($=>{function Xe(){if(ce.forEach(function(Oe){ht.get(Oe).currentProgram.isReady()&&ce.delete(Oe)}),ce.size===0){$(H);return}setTimeout(Xe,10)}et.get("KHR_parallel_shader_compile")!==null?Xe():setTimeout(Xe,10)})};let vr=null;function wr(H){vr&&vr(H)}function xo(){Pi.stop()}function fa(){Pi.start()}const Pi=new uI;Pi.setAnimationLoop(wr),typeof self<"u"&&Pi.setContext(self),this.setAnimationLoop=function(H){vr=H,Pe.setAnimationLoop(H),H===null?Pi.stop():Pi.start()},Pe.addEventListener("sessionstart",xo),Pe.addEventListener("sessionend",fa),this.render=function(H,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(k===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(ne),ne=Pe.getCamera()),H.isScene===!0&&H.onBeforeRender(C,H,ne,z),S=kt.get(H,R.length),S.init(ne),R.push(S),rt.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),we.setFromProjectionMatrix(rt),Fe=this.localClippingEnabled,Le=qe.init(this.clippingPlanes,Fe),w=$e.get(H,T.length),w.init(),T.push(w),Pe.enabled===!0&&Pe.isPresenting===!0){const Xe=C.xr.getDepthSensingMesh();Xe!==null&&is(Xe,ne,-1/0,C.sortObjects)}is(H,ne,0,C.sortObjects),w.finish(),C.sortObjects===!0&&w.sort(ge,se),Ke=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,Ke&&zt.addToRenderList(w,H),this.info.render.frame++,Le===!0&&qe.beginShadows();const ae=S.state.shadowsArray;xt.render(ae,H,ne),Le===!0&&qe.endShadows(),this.info.autoReset===!0&&this.info.reset();const ce=w.opaque,$=w.transmissive;if(S.setupLights(),ne.isArrayCamera){const Xe=ne.cameras;if($.length>0)for(let Oe=0,Ve=Xe.length;Oe<Ve;Oe++){const Qe=Xe[Oe];ai(ce,$,H,Qe)}Ke&&zt.render(H);for(let Oe=0,Ve=Xe.length;Oe<Ve;Oe++){const Qe=Xe[Oe];ss(w,H,Qe,Qe.viewport)}}else $.length>0&&ai(ce,$,H,ne),Ke&&zt.render(H),ss(w,H,ne);z!==null&&(N.updateMultisampleRenderTarget(z),N.updateRenderTargetMipmap(z)),H.isScene===!0&&H.onAfterRender(C,H,ne),it.resetDefaultState(),F=-1,L=null,R.pop(),R.length>0?(S=R[R.length-1],Le===!0&&qe.setGlobalState(C.clippingPlanes,S.state.camera)):S=null,T.pop(),T.length>0?w=T[T.length-1]:w=null};function is(H,ne,ae,ce){if(H.visible===!1)return;if(H.layers.test(ne.layers)){if(H.isGroup)ae=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ne);else if(H.isLight)S.pushLight(H),H.castShadow&&S.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||we.intersectsSprite(H)){ce&&Rt.setFromMatrixPosition(H.matrixWorld).applyMatrix4(rt);const Oe=pe.update(H),Ve=H.material;Ve.visible&&w.push(H,Oe,Ve,ae,Rt.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||we.intersectsObject(H))){const Oe=pe.update(H),Ve=H.material;if(ce&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),Rt.copy(H.boundingSphere.center)):(Oe.boundingSphere===null&&Oe.computeBoundingSphere(),Rt.copy(Oe.boundingSphere.center)),Rt.applyMatrix4(H.matrixWorld).applyMatrix4(rt)),Array.isArray(Ve)){const Qe=Oe.groups;for(let ut=0,gt=Qe.length;ut<gt;ut++){const lt=Qe[ut],dt=Ve[lt.materialIndex];dt&&dt.visible&&w.push(H,Oe,dt,ae,Rt.z,lt)}}else Ve.visible&&w.push(H,Oe,Ve,ae,Rt.z,null)}}const Xe=H.children;for(let Oe=0,Ve=Xe.length;Oe<Ve;Oe++)is(Xe[Oe],ne,ae,ce)}function ss(H,ne,ae,ce){const $=H.opaque,Xe=H.transmissive,Oe=H.transparent;S.setupLightsView(ae),Le===!0&&qe.setGlobalState(C.clippingPlanes,ae),ce&&at.viewport(W.copy(ce)),$.length>0&&cn($,ne,ae),Xe.length>0&&cn(Xe,ne,ae),Oe.length>0&&cn(Oe,ne,ae),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function ai(H,ne,ae,ce){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[ce.id]===void 0&&(S.state.transmissionRenderTarget[ce.id]=new Js(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")||et.has("EXT_color_buffer_float")?vi:Xs,minFilter:Ia,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:jn.workingColorSpace}));const Xe=S.state.transmissionRenderTarget[ce.id],Oe=ce.viewport||W;Xe.setSize(Oe.z,Oe.w);const Ve=C.getRenderTarget();C.setRenderTarget(Xe),C.getClearColor(oe),Se=C.getClearAlpha(),Se<1&&C.setClearColor(16777215,.5),C.clear(),Ke&&zt.render(ae);const Qe=C.toneMapping;C.toneMapping=Vo;const ut=ce.viewport;if(ce.viewport!==void 0&&(ce.viewport=void 0),S.setupLightsView(ce),Le===!0&&qe.setGlobalState(C.clippingPlanes,ce),cn(H,ae,ce),N.updateMultisampleRenderTarget(Xe),N.updateRenderTargetMipmap(Xe),et.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let lt=0,dt=ne.length;lt<dt;lt++){const bt=ne[lt],Ft=bt.object,rn=bt.geometry,Tt=bt.material,_t=bt.group;if(Tt.side===Ta&&Ft.layers.test(ce.layers)){const In=Tt.side;Tt.side=ts,Tt.needsUpdate=!0,qo(Ft,ae,ce,rn,Tt,_t),Tt.side=In,Tt.needsUpdate=!0,gt=!0}}gt===!0&&(N.updateMultisampleRenderTarget(Xe),N.updateRenderTargetMipmap(Xe))}C.setRenderTarget(Ve),C.setClearColor(oe,Se),ut!==void 0&&(ce.viewport=ut),C.toneMapping=Qe}function cn(H,ne,ae){const ce=ne.isScene===!0?ne.overrideMaterial:null;for(let $=0,Xe=H.length;$<Xe;$++){const Oe=H[$],Ve=Oe.object,Qe=Oe.geometry,ut=ce===null?Oe.material:ce,gt=Oe.group;Ve.layers.test(ae.layers)&&qo(Ve,ne,ae,Qe,ut,gt)}}function qo(H,ne,ae,ce,$,Xe){H.onBeforeRender(C,ne,ae,ce,$,Xe),H.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),$.onBeforeRender(C,ne,ae,ce,H,Xe),$.transparent===!0&&$.side===Ta&&$.forceSinglePass===!1?($.side=ts,$.needsUpdate=!0,C.renderBufferDirect(ae,ne,ce,$,H,Xe),$.side=Jo,$.needsUpdate=!0,C.renderBufferDirect(ae,ne,ce,$,H,Xe),$.side=Ta):C.renderBufferDirect(ae,ne,ce,$,H,Xe),H.onAfterRender(C,ne,ae,ce,$,Xe)}function _o(H,ne,ae){ne.isScene!==!0&&(ne=Qt);const ce=ht.get(H),$=S.state.lights,Xe=S.state.shadowsArray,Oe=$.state.version,Ve=je.getParameters(H,$.state,Xe,ne,ae),Qe=je.getProgramCacheKey(Ve);let ut=ce.programs;ce.environment=H.isMeshStandardMaterial?ne.environment:null,ce.fog=ne.fog,ce.envMap=(H.isMeshStandardMaterial?Q:D).get(H.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&H.envMap===null?ne.environmentRotation:H.envMapRotation,ut===void 0&&(H.addEventListener("dispose",qt),ut=new Map,ce.programs=ut);let gt=ut.get(Qe);if(gt!==void 0){if(ce.currentProgram===gt&&ce.lightsStateVersion===Oe)return J(H,Ve),gt}else Ve.uniforms=je.getUniforms(H),H.onBeforeCompile(Ve,C),gt=je.acquireProgram(Ve,Qe),ut.set(Qe,gt),ce.uniforms=Ve.uniforms;const lt=ce.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(lt.clippingPlanes=qe.uniform),J(H,Ve),ce.needsLights=Ue(H),ce.lightsStateVersion=Oe,ce.needsLights&&(lt.ambientLightColor.value=$.state.ambient,lt.lightProbe.value=$.state.probe,lt.directionalLights.value=$.state.directional,lt.directionalLightShadows.value=$.state.directionalShadow,lt.spotLights.value=$.state.spot,lt.spotLightShadows.value=$.state.spotShadow,lt.rectAreaLights.value=$.state.rectArea,lt.ltc_1.value=$.state.rectAreaLTC1,lt.ltc_2.value=$.state.rectAreaLTC2,lt.pointLights.value=$.state.point,lt.pointLightShadows.value=$.state.pointShadow,lt.hemisphereLights.value=$.state.hemi,lt.directionalShadowMap.value=$.state.directionalShadowMap,lt.directionalShadowMatrix.value=$.state.directionalShadowMatrix,lt.spotShadowMap.value=$.state.spotShadowMap,lt.spotLightMatrix.value=$.state.spotLightMatrix,lt.spotLightMap.value=$.state.spotLightMap,lt.pointShadowMap.value=$.state.pointShadowMap,lt.pointShadowMatrix.value=$.state.pointShadowMatrix),ce.currentProgram=gt,ce.uniformsList=null,gt}function G(H){if(H.uniformsList===null){const ne=H.currentProgram.getUniforms();H.uniformsList=d0.seqWithValue(ne.seq,H.uniforms)}return H.uniformsList}function J(H,ne){const ae=ht.get(H);ae.outputColorSpace=ne.outputColorSpace,ae.batching=ne.batching,ae.batchingColor=ne.batchingColor,ae.instancing=ne.instancing,ae.instancingColor=ne.instancingColor,ae.instancingMorph=ne.instancingMorph,ae.skinning=ne.skinning,ae.morphTargets=ne.morphTargets,ae.morphNormals=ne.morphNormals,ae.morphColors=ne.morphColors,ae.morphTargetsCount=ne.morphTargetsCount,ae.numClippingPlanes=ne.numClippingPlanes,ae.numIntersection=ne.numClipIntersection,ae.vertexAlphas=ne.vertexAlphas,ae.vertexTangents=ne.vertexTangents,ae.toneMapping=ne.toneMapping}function fe(H,ne,ae,ce,$){ne.isScene!==!0&&(ne=Qt),N.resetTextureUnits();const Xe=ne.fog,Oe=ce.isMeshStandardMaterial?ne.environment:null,Ve=z===null?C.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:Zo,Qe=(ce.isMeshStandardMaterial?Q:D).get(ce.envMap||Oe),ut=ce.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,gt=!!ae.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),lt=!!ae.morphAttributes.position,dt=!!ae.morphAttributes.normal,bt=!!ae.morphAttributes.color;let Ft=Vo;ce.toneMapped&&(z===null||z.isXRRenderTarget===!0)&&(Ft=C.toneMapping);const rn=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Tt=rn!==void 0?rn.length:0,_t=ht.get(ce),In=S.state.lights;if(Le===!0&&(Fe===!0||H!==L)){const Ln=H===L&&ce.id===F;qe.setState(ce,H,Ln)}let $t=!1;ce.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==In.state.version||_t.outputColorSpace!==Ve||$.isBatchedMesh&&_t.batching===!1||!$.isBatchedMesh&&_t.batching===!0||$.isBatchedMesh&&_t.batchingColor===!0&&$.colorTexture===null||$.isBatchedMesh&&_t.batchingColor===!1&&$.colorTexture!==null||$.isInstancedMesh&&_t.instancing===!1||!$.isInstancedMesh&&_t.instancing===!0||$.isSkinnedMesh&&_t.skinning===!1||!$.isSkinnedMesh&&_t.skinning===!0||$.isInstancedMesh&&_t.instancingColor===!0&&$.instanceColor===null||$.isInstancedMesh&&_t.instancingColor===!1&&$.instanceColor!==null||$.isInstancedMesh&&_t.instancingMorph===!0&&$.morphTexture===null||$.isInstancedMesh&&_t.instancingMorph===!1&&$.morphTexture!==null||_t.envMap!==Qe||ce.fog===!0&&_t.fog!==Xe||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==qe.numPlanes||_t.numIntersection!==qe.numIntersection)||_t.vertexAlphas!==ut||_t.vertexTangents!==gt||_t.morphTargets!==lt||_t.morphNormals!==dt||_t.morphColors!==bt||_t.toneMapping!==Ft||_t.morphTargetsCount!==Tt)&&($t=!0):($t=!0,_t.__version=ce.version);let Un=_t.currentProgram;$t===!0&&(Un=_o(ce,ne,$));let _n=!1,kn=!1,Dn=!1;const Wt=Un.getUniforms(),bn=_t.uniforms;if(at.useProgram(Un.program)&&(_n=!0,kn=!0,Dn=!0),ce.id!==F&&(F=ce.id,kn=!0),_n||L!==H){at.buffers.depth.getReversed()?(He.copy(H.projectionMatrix),_N(He),AN(He),Wt.setValue(ee,"projectionMatrix",He)):Wt.setValue(ee,"projectionMatrix",H.projectionMatrix),Wt.setValue(ee,"viewMatrix",H.matrixWorldInverse);const cr=Wt.map.cameraPosition;cr!==void 0&&cr.setValue(ee,yt.setFromMatrixPosition(H.matrixWorld)),At.logarithmicDepthBuffer&&Wt.setValue(ee,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&Wt.setValue(ee,"isOrthographic",H.isOrthographicCamera===!0),L!==H&&(L=H,kn=!0,Dn=!0)}if($.isSkinnedMesh){Wt.setOptional(ee,$,"bindMatrix"),Wt.setOptional(ee,$,"bindMatrixInverse");const Ln=$.skeleton;Ln&&(Ln.boneTexture===null&&Ln.computeBoneTexture(),Wt.setValue(ee,"boneTexture",Ln.boneTexture,N))}$.isBatchedMesh&&(Wt.setOptional(ee,$,"batchingTexture"),Wt.setValue(ee,"batchingTexture",$._matricesTexture,N),Wt.setOptional(ee,$,"batchingIdTexture"),Wt.setValue(ee,"batchingIdTexture",$._indirectTexture,N),Wt.setOptional(ee,$,"batchingColorTexture"),$._colorsTexture!==null&&Wt.setValue(ee,"batchingColorTexture",$._colorsTexture,N));const hr=ae.morphAttributes;if((hr.position!==void 0||hr.normal!==void 0||hr.color!==void 0)&&Bt.update($,ae,Un),(kn||_t.receiveShadow!==$.receiveShadow)&&(_t.receiveShadow=$.receiveShadow,Wt.setValue(ee,"receiveShadow",$.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(bn.envMap.value=Qe,bn.flipEnvMap.value=Qe.isCubeTexture&&Qe.isRenderTargetTexture===!1?-1:1),ce.isMeshStandardMaterial&&ce.envMap===null&&ne.environment!==null&&(bn.envMapIntensity.value=ne.environmentIntensity),kn&&(Wt.setValue(ee,"toneMappingExposure",C.toneMappingExposure),_t.needsLights&&Ie(bn,Dn),Xe&&ce.fog===!0&&Ye.refreshFogUniforms(bn,Xe),Ye.refreshMaterialUniforms(bn,ce,Y,Ee,S.state.transmissionRenderTarget[H.id]),d0.upload(ee,G(_t),bn,N)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(d0.upload(ee,G(_t),bn,N),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&Wt.setValue(ee,"center",$.center),Wt.setValue(ee,"modelViewMatrix",$.modelViewMatrix),Wt.setValue(ee,"normalMatrix",$.normalMatrix),Wt.setValue(ee,"modelMatrix",$.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Ln=ce.uniformsGroups;for(let cr=0,ha=Ln.length;cr<ha;cr++){const An=Ln[cr];le.update(An,Un),le.bind(An,Un)}}return Un}function Ie(H,ne){H.ambientLightColor.needsUpdate=ne,H.lightProbe.needsUpdate=ne,H.directionalLights.needsUpdate=ne,H.directionalLightShadows.needsUpdate=ne,H.pointLights.needsUpdate=ne,H.pointLightShadows.needsUpdate=ne,H.spotLights.needsUpdate=ne,H.spotLightShadows.needsUpdate=ne,H.rectAreaLights.needsUpdate=ne,H.hemisphereLights.needsUpdate=ne}function Ue(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(H,ne,ae){ht.get(H.texture).__webglTexture=ne,ht.get(H.depthTexture).__webglTexture=ae;const ce=ht.get(H);ce.__hasExternalTextures=!0,ce.__autoAllocateDepthBuffer=ae===void 0,ce.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,ne){const ae=ht.get(H);ae.__webglFramebuffer=ne,ae.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(H,ne=0,ae=0){z=H,O=ne,V=ae;let ce=!0,$=null,Xe=!1,Oe=!1;if(H){const Qe=ht.get(H);if(Qe.__useDefaultFramebuffer!==void 0)at.bindFramebuffer(ee.FRAMEBUFFER,null),ce=!1;else if(Qe.__webglFramebuffer===void 0)N.setupRenderTarget(H);else if(Qe.__hasExternalTextures)N.rebindTextures(H,ht.get(H.texture).__webglTexture,ht.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const lt=H.depthTexture;if(Qe.__boundDepthTexture!==lt){if(lt!==null&&ht.has(lt)&&(H.width!==lt.image.width||H.height!==lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");N.setupDepthRenderbuffer(H)}}const ut=H.texture;(ut.isData3DTexture||ut.isDataArrayTexture||ut.isCompressedArrayTexture)&&(Oe=!0);const gt=ht.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(gt[ne])?$=gt[ne][ae]:$=gt[ne],Xe=!0):H.samples>0&&N.useMultisampledRTT(H)===!1?$=ht.get(H).__webglMultisampledFramebuffer:Array.isArray(gt)?$=gt[ae]:$=gt,W.copy(H.viewport),q.copy(H.scissor),re=H.scissorTest}else W.copy(K).multiplyScalar(Y).floor(),q.copy(ve).multiplyScalar(Y).floor(),re=We;if(at.bindFramebuffer(ee.FRAMEBUFFER,$)&&ce&&at.drawBuffers(H,$),at.viewport(W),at.scissor(q),at.setScissorTest(re),Xe){const Qe=ht.get(H.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+ne,Qe.__webglTexture,ae)}else if(Oe){const Qe=ht.get(H.texture),ut=ne||0;ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Qe.__webglTexture,ae||0,ut)}F=-1},this.readRenderTargetPixels=function(H,ne,ae,ce,$,Xe,Oe){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ve=ht.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ve=Ve[Oe]),Ve){at.bindFramebuffer(ee.FRAMEBUFFER,Ve);try{const Qe=H.texture,ut=Qe.format,gt=Qe.type;if(!At.textureFormatReadable(ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!At.textureTypeReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=H.width-ce&&ae>=0&&ae<=H.height-$&&ee.readPixels(ne,ae,ce,$,De.convert(ut),De.convert(gt),Xe)}finally{const Qe=z!==null?ht.get(z).__webglFramebuffer:null;at.bindFramebuffer(ee.FRAMEBUFFER,Qe)}}},this.readRenderTargetPixelsAsync=async function(H,ne,ae,ce,$,Xe,Oe){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ve=ht.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Oe!==void 0&&(Ve=Ve[Oe]),Ve){const Qe=H.texture,ut=Qe.format,gt=Qe.type;if(!At.textureFormatReadable(ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!At.textureTypeReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ne>=0&&ne<=H.width-ce&&ae>=0&&ae<=H.height-$){at.bindFramebuffer(ee.FRAMEBUFFER,Ve);const lt=ee.createBuffer();ee.bindBuffer(ee.PIXEL_PACK_BUFFER,lt),ee.bufferData(ee.PIXEL_PACK_BUFFER,Xe.byteLength,ee.STREAM_READ),ee.readPixels(ne,ae,ce,$,De.convert(ut),De.convert(gt),0);const dt=z!==null?ht.get(z).__webglFramebuffer:null;at.bindFramebuffer(ee.FRAMEBUFFER,dt);const bt=ee.fenceSync(ee.SYNC_GPU_COMMANDS_COMPLETE,0);return ee.flush(),await xN(ee,bt,4),ee.bindBuffer(ee.PIXEL_PACK_BUFFER,lt),ee.getBufferSubData(ee.PIXEL_PACK_BUFFER,0,Xe),ee.deleteBuffer(lt),ee.deleteSync(bt),Xe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(H,ne=null,ae=0){H.isTexture!==!0&&(kh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ne=arguments[0]||null,H=arguments[1]);const ce=Math.pow(2,-ae),$=Math.floor(H.image.width*ce),Xe=Math.floor(H.image.height*ce),Oe=ne!==null?ne.x:0,Ve=ne!==null?ne.y:0;N.setTexture2D(H,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,ae,0,0,Oe,Ve,$,Xe),at.unbindTexture()};const ke=ee.createFramebuffer(),ot=ee.createFramebuffer();this.copyTextureToTexture=function(H,ne,ae=null,ce=null,$=0,Xe=null){H.isTexture!==!0&&(kh("WebGLRenderer: copyTextureToTexture function signature has changed."),ce=arguments[0]||null,H=arguments[1],ne=arguments[2],Xe=arguments[3]||0,ae=null),Xe===null&&($!==0?(kh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Xe=$,$=0):Xe=0);let Oe,Ve,Qe,ut,gt,lt,dt,bt,Ft;const rn=H.isCompressedTexture?H.mipmaps[Xe]:H.image;if(ae!==null)Oe=ae.max.x-ae.min.x,Ve=ae.max.y-ae.min.y,Qe=ae.isBox3?ae.max.z-ae.min.z:1,ut=ae.min.x,gt=ae.min.y,lt=ae.isBox3?ae.min.z:0;else{const hr=Math.pow(2,-$);Oe=Math.floor(rn.width*hr),Ve=Math.floor(rn.height*hr),H.isDataArrayTexture?Qe=rn.depth:H.isData3DTexture?Qe=Math.floor(rn.depth*hr):Qe=1,ut=0,gt=0,lt=0}ce!==null?(dt=ce.x,bt=ce.y,Ft=ce.z):(dt=0,bt=0,Ft=0);const Tt=De.convert(ne.format),_t=De.convert(ne.type);let In;ne.isData3DTexture?(N.setTexture3D(ne,0),In=ee.TEXTURE_3D):ne.isDataArrayTexture||ne.isCompressedArrayTexture?(N.setTexture2DArray(ne,0),In=ee.TEXTURE_2D_ARRAY):(N.setTexture2D(ne,0),In=ee.TEXTURE_2D),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,ne.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,ne.unpackAlignment);const $t=ee.getParameter(ee.UNPACK_ROW_LENGTH),Un=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),_n=ee.getParameter(ee.UNPACK_SKIP_PIXELS),kn=ee.getParameter(ee.UNPACK_SKIP_ROWS),Dn=ee.getParameter(ee.UNPACK_SKIP_IMAGES);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,rn.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,rn.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,ut),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,gt),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,lt);const Wt=H.isDataArrayTexture||H.isData3DTexture,bn=ne.isDataArrayTexture||ne.isData3DTexture;if(H.isDepthTexture){const hr=ht.get(H),Ln=ht.get(ne),cr=ht.get(hr.__renderTarget),ha=ht.get(Ln.__renderTarget);at.bindFramebuffer(ee.READ_FRAMEBUFFER,cr.__webglFramebuffer),at.bindFramebuffer(ee.DRAW_FRAMEBUFFER,ha.__webglFramebuffer);for(let An=0;An<Qe;An++)Wt&&(ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ht.get(H).__webglTexture,$,lt+An),ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ht.get(ne).__webglTexture,Xe,Ft+An)),ee.blitFramebuffer(ut,gt,Oe,Ve,dt,bt,Oe,Ve,ee.DEPTH_BUFFER_BIT,ee.NEAREST);at.bindFramebuffer(ee.READ_FRAMEBUFFER,null),at.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else if($!==0||H.isRenderTargetTexture||ht.has(H)){const hr=ht.get(H),Ln=ht.get(ne);at.bindFramebuffer(ee.READ_FRAMEBUFFER,ke),at.bindFramebuffer(ee.DRAW_FRAMEBUFFER,ot);for(let cr=0;cr<Qe;cr++)Wt?ee.framebufferTextureLayer(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,hr.__webglTexture,$,lt+cr):ee.framebufferTexture2D(ee.READ_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,hr.__webglTexture,$),bn?ee.framebufferTextureLayer(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Ln.__webglTexture,Xe,Ft+cr):ee.framebufferTexture2D(ee.DRAW_FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Ln.__webglTexture,Xe),$!==0?ee.blitFramebuffer(ut,gt,Oe,Ve,dt,bt,Oe,Ve,ee.COLOR_BUFFER_BIT,ee.NEAREST):bn?ee.copyTexSubImage3D(In,Xe,dt,bt,Ft+cr,ut,gt,Oe,Ve):ee.copyTexSubImage2D(In,Xe,dt,bt,ut,gt,Oe,Ve);at.bindFramebuffer(ee.READ_FRAMEBUFFER,null),at.bindFramebuffer(ee.DRAW_FRAMEBUFFER,null)}else bn?H.isDataTexture||H.isData3DTexture?ee.texSubImage3D(In,Xe,dt,bt,Ft,Oe,Ve,Qe,Tt,_t,rn.data):ne.isCompressedArrayTexture?ee.compressedTexSubImage3D(In,Xe,dt,bt,Ft,Oe,Ve,Qe,Tt,rn.data):ee.texSubImage3D(In,Xe,dt,bt,Ft,Oe,Ve,Qe,Tt,_t,rn):H.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,Xe,dt,bt,Oe,Ve,Tt,_t,rn.data):H.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,Xe,dt,bt,rn.width,rn.height,Tt,rn.data):ee.texSubImage2D(ee.TEXTURE_2D,Xe,dt,bt,Oe,Ve,Tt,_t,rn);ee.pixelStorei(ee.UNPACK_ROW_LENGTH,$t),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,Un),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,_n),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,kn),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,Dn),Xe===0&&ne.generateMipmaps&&ee.generateMipmap(In),at.unbindTexture()},this.copyTextureToTexture3D=function(H,ne,ae=null,ce=null,$=0){return H.isTexture!==!0&&(kh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ae=arguments[0]||null,ce=arguments[1]||null,H=arguments[2],ne=arguments[3],$=arguments[4]||0),kh('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(H,ne,ae,ce,$)},this.initRenderTarget=function(H){ht.get(H).__webglFramebuffer===void 0&&N.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?N.setTextureCube(H,0):H.isData3DTexture?N.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?N.setTexture2DArray(H,0):N.setTexture2D(H,0),at.unbindTexture()},this.resetState=function(){O=0,V=0,z=null,at.reset(),it.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return zo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=jn._getDrawingBufferColorSpace(e),t.unpackColorSpace=jn._getUnpackColorSpace()}}const Sz=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:cw,AddEquation:$c,AddOperation:WT,AdditiveAnimationBlendMode:vw,AdditiveBlending:gS,AgXToneMapping:ZT,AlphaFormat:dw,AlwaysCompare:fR,AlwaysDepth:A0,AlwaysStencilFunc:AS,AmbientLight:qR,AnimationAction:lI,AnimationClip:Ap,AnimationLoader:HF,AnimationMixer:f3,AnimationObjectGroup:u3,AnimationUtils:OF,ArcCurve:ER,ArrayCamera:sI,ArrowHelper:B3,AttachedBindMode:xS,Audio:aI,AudioAnalyser:e3,AudioContext:Kw,AudioListener:QF,AudioLoader:KF,AxesHelper:D3,BackSide:ts,BasicDepthPacking:rR,BasicShadowMap:ET,BatchedMesh:wR,Bone:Cx,BooleanKeyframeTrack:yf,Box2:y3,Box3:ns,Box3Helper:I3,BoxGeometry:vf,BoxHelper:R3,BufferAttribute:Kn,BufferGeometry:xn,BufferGeometryLoader:rI,ByteType:gx,Cache:Yl,Camera:$g,CameraHelper:T3,CanvasTexture:MR,CapsuleGeometry:Px,CatmullRomCurve3:CR,CineonToneMapping:KT,CircleGeometry:Bx,ClampToEdgeWrapping:Jr,Clock:Yw,Color:wt,ColorKeyframeTrack:Gw,ColorManagement:jn,CompressedArrayTexture:aF,CompressedCubeTexture:oF,CompressedTexture:Tx,CompressedTextureLoader:GF,ConeGeometry:Dx,ConstantAlphaFactor:GT,ConstantColorFactor:zT,Controls:N3,CubeCamera:xR,CubeReflectionMapping:Ko,CubeRefractionMapping:yu,CubeTexture:ev,CubeTextureLoader:YR,CubeUVReflectionMapping:Lp,CubicBezierCurve:Dw,CubicBezierCurve3:bR,CubicInterpolant:WR,CullFaceBack:mS,CullFaceFront:MT,CullFaceFrontBack:CL,CullFaceNone:wT,Curve:vo,CurvePath:RR,CustomBlending:CT,CustomToneMapping:YT,CylinderGeometry:Fp,Cylindrical:v3,Data3DTexture:Sw,DataArrayTexture:wx,DataTexture:mo,DataTextureLoader:Vw,DataUtils:Fd,DecrementStencilOp:FL,DecrementWrapStencilOp:UL,DefaultLoadingManager:KR,DepthFormat:Qd,DepthStencilFormat:lf,DepthTexture:Rx,DetachedBindMode:qT,DirectionalLight:Jw,DirectionalLightHelper:b3,DiscreteInterpolant:XR,DodecahedronGeometry:Lx,DoubleSide:Ta,DstAlphaFactor:NT,DstColorFactor:OT,DynamicCopyUsage:$L,DynamicDrawUsage:JL,DynamicReadUsage:ZL,EdgesGeometry:IR,EllipseCurve:Ix,EqualCompare:lR,EqualDepth:w0,EqualStencilFunc:GL,EquirectangularReflectionMapping:pp,EquirectangularRefractionMapping:Sg,Euler:ca,EventDispatcher:Qo,ExtrudeGeometry:Fx,FileLoader:Gi,Float16BufferAttribute:HN,Float32BufferAttribute:Jt,FloatType:br,Fog:Ex,FogExp2:Mx,FramebufferTexture:sF,FrontSide:Jo,Frustum:rv,GLBufferAttribute:g3,GLSL1:tN,GLSL3:SS,GreaterCompare:cR,GreaterDepth:E0,GreaterEqualCompare:dR,GreaterEqualDepth:M0,GreaterEqualStencilFunc:XL,GreaterStencilFunc:jL,GridHelper:E3,Group:Kl,HalfFloatType:vi,HemisphereLight:QR,HemisphereLightHelper:M3,IcosahedronGeometry:sv,ImageBitmapLoader:iI,ImageLoader:Bg,ImageUtils:mR,IncrementStencilOp:NL,IncrementWrapStencilOp:OL,InstancedBufferAttribute:cf,InstancedBufferGeometry:nI,InstancedInterleavedBuffer:m3,InstancedMesh:Rw,Int16BufferAttribute:kN,Int32BufferAttribute:zN,Int8BufferAttribute:FN,IntType:Zg,InterleavedBuffer:tv,InterleavedBufferAttribute:_u,Interpolant:Op,InterpolateDiscrete:vp,InterpolateLinear:yp,InterpolateSmooth:u0,InvertStencilOp:kL,KeepStencilOp:Td,KeyframeTrack:yo,LOD:SR,LatheGeometry:iv,Layers:$d,LessCompare:oR,LessDepth:S0,LessEqualCompare:xw,LessEqualDepth:af,LessEqualStencilFunc:VL,LessStencilFunc:HL,Light:Cu,LightProbe:tI,Line:tc,Line3:x3,LineBasicMaterial:rs,LineCurve:Lw,LineCurve3:TR,LineDashedMaterial:GR,LineLoop:Iw,LineSegments:go,LinearFilter:Jn,LinearInterpolant:Hw,LinearMipMapLinearFilter:_S,LinearMipMapNearestFilter:RL,LinearMipmapLinearFilter:Ia,LinearMipmapNearestFilter:Yh,LinearSRGBColorSpace:Zo,LinearToneMapping:XT,LinearTransfer:Mg,Loader:Vi,LoaderUtils:hu,LoadingManager:Vx,LoopOnce:$T,LoopPingPong:tR,LoopRepeat:eR,LuminanceAlphaFormat:pw,LuminanceFormat:hw,MOUSE:Cd,Material:yi,MaterialLoader:jx,MathUtils:Aw,Matrix2:eM,Matrix3:yn,Matrix4:nn,MaxEquation:IT,Mesh:Tr,MeshBasicMaterial:Ws,MeshDepthMaterial:Uw,MeshDistanceMaterial:kw,MeshLambertMaterial:zR,MeshMatcapMaterial:HR,MeshNormalMaterial:kR,MeshPhongMaterial:OR,MeshPhysicalMaterial:Da,MeshStandardMaterial:lv,MeshToonMaterial:UR,MinEquation:RT,MirroredRepeatWrapping:mp,MixOperation:jT,MultiplyBlending:yS,MultiplyOperation:Yg,NearestFilter:Ii,NearestMipMapLinearFilter:TL,NearestMipMapNearestFilter:bL,NearestMipmapLinearFilter:Bd,NearestMipmapNearestFilter:mx,NeutralToneMapping:QT,NeverCompare:aR,NeverDepth:_0,NeverStencilFunc:zL,NoBlending:Go,NoColorSpace:Xl,NoToneMapping:Vo,NormalAnimationBlendMode:Sx,NormalBlending:Zd,NotEqualCompare:uR,NotEqualDepth:C0,NotEqualStencilFunc:WL,NumberKeyframeTrack:df,Object3D:On,ObjectLoader:XF,ObjectSpaceNormalMap:sR,OctahedronGeometry:av,OneFactor:BT,OneMinusConstantAlphaFactor:VT,OneMinusConstantColorFactor:HT,OneMinusDstAlphaFactor:FT,OneMinusDstColorFactor:UT,OneMinusSrcAlphaFactor:x0,OneMinusSrcColorFactor:LT,OrthographicCamera:Wo,PCFShadowMap:px,PCFSoftShadowMap:lg,PMREMGenerator:IS,Path:Tg,PerspectiveCamera:Gr,Plane:ko,PlaneGeometry:Eu,PlaneHelper:P3,PointLight:Xw,PointLightHelper:S3,Points:Pw,PointsMaterial:bx,PolarGridHelper:C3,PolyhedronGeometry:Mu,PositionalAudio:$F,PropertyBinding:Vn,PropertyMixer:oI,QuadraticBezierCurve:Nw,QuadraticBezierCurve3:Fw,Quaternion:ii,QuaternionKeyframeTrack:ff,QuaternionLinearInterpolant:JR,RED_GREEN_RGTC2_Format:Q0,RED_RGTC1_Format:gw,REVISION:Dp,RGBADepthPacking:iR,RGBAFormat:Kr,RGBAIntegerFormat:Ax,RGBA_ASTC_10x10_Format:W0,RGBA_ASTC_10x5_Format:G0,RGBA_ASTC_10x6_Format:V0,RGBA_ASTC_10x8_Format:j0,RGBA_ASTC_12x10_Format:X0,RGBA_ASTC_12x12_Format:J0,RGBA_ASTC_4x4_Format:L0,RGBA_ASTC_5x4_Format:N0,RGBA_ASTC_5x5_Format:F0,RGBA_ASTC_6x5_Format:O0,RGBA_ASTC_6x6_Format:U0,RGBA_ASTC_8x5_Format:k0,RGBA_ASTC_8x6_Format:z0,RGBA_ASTC_8x8_Format:H0,RGBA_BPTC_Format:hg,RGBA_ETC2_EAC_Format:D0,RGBA_PVRTC_2BPPV1_Format:I0,RGBA_PVRTC_4BPPV1_Format:R0,RGBA_S3TC_DXT1_Format:ug,RGBA_S3TC_DXT3_Format:dg,RGBA_S3TC_DXT5_Format:fg,RGBDepthPacking:PL,RGBFormat:fw,RGBIntegerFormat:IL,RGB_BPTC_SIGNED_Format:K0,RGB_BPTC_UNSIGNED_Format:Y0,RGB_ETC1_Format:P0,RGB_ETC2_Format:B0,RGB_PVRTC_2BPPV1_Format:T0,RGB_PVRTC_4BPPV1_Format:b0,RGB_S3TC_DXT1_Format:cg,RGDepthPacking:BL,RGFormat:mw,RGIntegerFormat:_x,RawShaderMaterial:FR,Ray:gf,Raycaster:$w,RectAreaLight:$R,RedFormat:Qg,RedIntegerFormat:qg,ReinhardToneMapping:JT,RenderTarget:gR,RepeatWrapping:xu,ReplaceStencilOp:LL,ReverseSubtractEquation:TT,RingGeometry:Ox,SIGNED_RED_GREEN_RGTC2_Format:q0,SIGNED_RED_RGTC1_Format:Z0,SRGBColorSpace:As,SRGBTransfer:sr,Scene:Np,ShaderChunk:Cn,ShaderLib:fo,ShaderMaterial:Cs,ShadowMaterial:NR,Shape:ef,ShapeGeometry:Ux,ShapePath:L3,ShapeUtils:jo,ShortType:vx,Skeleton:nv,SkeletonHelper:A3,SkinnedMesh:Tw,Source:Nd,Sphere:Hi,SphereGeometry:ov,Spherical:TS,SphericalHarmonics3:eI,SplineCurve:Ow,SpotLight:Ww,SpotLightHelper:_3,Sprite:AR,SpriteMaterial:bw,SrcAlphaFactor:y0,SrcAlphaSaturateFactor:kT,SrcColorFactor:DT,StaticCopyUsage:qL,StaticDrawUsage:Eg,StaticReadUsage:YL,StereoCamera:YF,StreamCopyUsage:eN,StreamDrawUsage:KL,StreamReadUsage:QL,StringKeyframeTrack:xf,SubtractEquation:bT,SubtractiveBlending:vS,TOUCH:bd,TangentSpaceNormalMap:wu,TetrahedronGeometry:kx,Texture:nr,TextureLoader:ZR,TextureUtils:z3,TorusGeometry:zx,TorusKnotGeometry:Hx,Triangle:js,TriangleFanDrawMode:$0,TriangleStripDrawMode:yw,TrianglesDrawMode:nR,TubeGeometry:Gx,UVMapping:vu,Uint16BufferAttribute:ww,Uint32BufferAttribute:Mw,Uint8BufferAttribute:ON,Uint8ClampedBufferAttribute:UN,Uniform:qw,UniformsGroup:p3,UniformsLib:Ct,UniformsUtils:Ew,UnsignedByteType:Xs,UnsignedInt248Type:of,UnsignedInt5999Type:uw,UnsignedIntType:Yo,UnsignedShort4444Type:yx,UnsignedShort5551Type:xx,UnsignedShortType:gp,VSMShadowMap:lo,Vector2:Je,Vector3:Z,Vector4:Xn,VectorKeyframeTrack:hf,VideoTexture:iF,WebGL3DRenderTarget:CN,WebGLArrayRenderTarget:EN,WebGLCoordinateSystem:zo,WebGLCubeRenderTarget:Cw,WebGLMultipleRenderTargets:H3,WebGLRenderTarget:Js,WebGLRenderer:nM,WebGLUtils:mI,WebGPUCoordinateSystem:Cg,WireframeGeometry:LR,WrapAroundEnding:wg,ZeroCurvatureEnding:Dd,ZeroFactor:PT,ZeroSlopeEnding:Ld,ZeroStencilOp:DL,createCanvasElement:pR},Symbol.toStringTag,{value:"Module"}));var SA={exports:{}},Jc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC;function wz(){return mC||(mC=1,Jc.ConcurrentRoot=1,Jc.ContinuousEventPriority=4,Jc.DefaultEventPriority=16,Jc.DiscreteEventPriority=1,Jc.IdleEventPriority=536870912,Jc.LegacyRoot=0),Jc}var gC;function Mz(){return gC||(gC=1,SA.exports=wz()),SA.exports}var Jh=Mz();function Ez(r){let e;const t=new Set,n=(h,p)=>{const m=typeof h=="function"?h(e):h;if(m!==e){const v=e;e=p?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},i=()=>e,s=(h,p=i,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function y(){const _=p(e);if(!m(v,_)){const M=v;h(v=_,M)}}return t.add(y),()=>t.delete(y)},u={setState:n,getState:i,subscribe:(h,p,m)=>p||m?s(h,p,m):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=r(n,i,u),u}const Cz=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),vC=Cz?X.useEffect:X.useLayoutEffect;function gI(r){const e=typeof r=="function"?Ez(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=X.useReducer(w=>w+1,0),a=e.getState(),l=X.useRef(a),u=X.useRef(n),h=X.useRef(i),p=X.useRef(!1),m=X.useRef();m.current===void 0&&(m.current=n(a));let v,y=!1;(l.current!==a||u.current!==n||h.current!==i||p.current)&&(v=n(a),y=!i(m.current,v)),vC(()=>{y&&(m.current=v),l.current=a,u.current=n,h.current=i,p.current=!1});const _=X.useRef(a);vC(()=>{const w=()=>{try{const T=e.getState(),R=u.current(T);h.current(m.current,R)||(l.current=T,m.current=R,s())}catch{p.current=!0,s()}},S=e.subscribe(w);return e.getState()!==_.current&&w(),S},[]);const M=y?v:m.current;return X.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const bz=r=>typeof r=="object"&&typeof r.then=="function",Ud=[];function vI(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function yI(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of Ud)if(vI(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=Ud.indexOf(i);s!==-1&&Ud.splice(s,1)},promise:(bz(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(Ud.push(i),!t)throw i.promise}const Tz=(r,e,t)=>yI(r,e,!1,t),Rz=(r,e,t)=>void yI(r,e,!0,t),Iz=r=>{if(r===void 0||r.length===0)Ud.splice(0,Ud.length);else{const e=Ud.find(t=>vI(r,t.keys,t.equal));e&&e.remove()}};var wA={exports:{}},MA={exports:{}},EA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC;function Pz(){return yC||(yC=1,(function(r){function e(Y,ge){var se=Y.length;Y.push(ge);e:for(;0<se;){var K=se-1>>>1,ve=Y[K];if(0<i(ve,ge))Y[K]=ge,Y[se]=ve,se=K;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ge=Y[0],se=Y.pop();if(se!==ge){Y[0]=se;e:for(var K=0,ve=Y.length,We=ve>>>1;K<We;){var we=2*(K+1)-1,Le=Y[we],Fe=we+1,He=Y[Fe];if(0>i(Le,se))Fe<ve&&0>i(He,Le)?(Y[K]=He,Y[Fe]=se,K=Fe):(Y[K]=Le,Y[we]=se,K=we);else if(Fe<ve&&0>i(He,se))Y[K]=He,Y[Fe]=se,K=Fe;else break e}}return ge}function i(Y,ge){var se=Y.sortIndex-ge.sortIndex;return se!==0?se:Y.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();r.unstable_now=function(){return a.now()-l}}var u=[],h=[],p=1,m=null,v=3,y=!1,_=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Y){for(var ge=t(h);ge!==null;){if(ge.callback===null)n(h);else if(ge.startTime<=Y)n(h),ge.sortIndex=ge.expirationTime,e(u,ge);else break;ge=t(h)}}function C(Y){if(M=!1,R(Y),!_)if(t(u)!==null)_=!0,he(k);else{var ge=t(h);ge!==null&&Ee(C,ge.startTime-Y)}}function k(Y,ge){_=!1,M&&(M=!1,S(z),z=-1),y=!0;var se=v;try{for(R(ge),m=t(u);m!==null&&(!(m.expirationTime>ge)||Y&&!W());){var K=m.callback;if(typeof K=="function"){m.callback=null,v=m.priorityLevel;var ve=K(m.expirationTime<=ge);ge=r.unstable_now(),typeof ve=="function"?m.callback=ve:m===t(u)&&n(u),R(ge)}else n(u);m=t(u)}if(m!==null)var We=!0;else{var we=t(h);we!==null&&Ee(C,we.startTime-ge),We=!1}return We}finally{m=null,v=se,y=!1}}var O=!1,V=null,z=-1,F=5,L=-1;function W(){return!(r.unstable_now()-L<F)}function q(){if(V!==null){var Y=r.unstable_now();L=Y;var ge=!0;try{ge=V(!0,Y)}finally{ge?re():(O=!1,V=null)}}else O=!1}var re;if(typeof T=="function")re=function(){T(q)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Se=oe.port2;oe.port1.onmessage=q,re=function(){Se.postMessage(null)}}else re=function(){w(q,0)};function he(Y){V=Y,O||(O=!0,re())}function Ee(Y,ge){z=w(function(){Y(r.unstable_now())},ge)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,he(k))},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var ge=3;break;default:ge=v}var se=v;v=ge;try{return Y()}finally{v=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Y,ge){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var se=v;v=Y;try{return ge()}finally{v=se}},r.unstable_scheduleCallback=function(Y,ge,se){var K=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?K+se:K):se=K,Y){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=se+ve,Y={id:p++,callback:ge,priorityLevel:Y,startTime:se,expirationTime:ve,sortIndex:-1},se>K?(Y.sortIndex=se,e(h,Y),t(u)===null&&Y===t(h)&&(M?(S(z),z=-1):M=!0,Ee(C,se-K))):(Y.sortIndex=ve,e(u,Y),_||y||(_=!0,he(k))),Y},r.unstable_shouldYield=W,r.unstable_wrapCallback=function(Y){var ge=v;return function(){var se=v;v=ge;try{return Y.apply(this,arguments)}finally{v=se}}}})(EA)),EA}var xC;function xI(){return xC||(xC=1,MA.exports=Pz()),MA.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CA,_C;function Bz(){return _C||(_C=1,CA=function(e){var t={},n=dx(),i=xI(),s=Object.assign;function a(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),k=Symbol.iterator;function O(d){return d===null||typeof d!="object"?null:(d=k&&d[k]||d["@@iterator"],typeof d=="function"?d:null)}function V(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case p:return"Fragment";case h:return"Portal";case v:return"Profiler";case m:return"StrictMode";case w:return"Suspense";case S:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case _:return(d.displayName||"Context")+".Consumer";case y:return(d._context.displayName||"Context")+".Provider";case M:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case T:return f=d.displayName||null,f!==null?f:V(d.type)||"Memo";case R:f=d._payload,d=d._init;try{return V(d(f))}catch{}}return null}function z(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(f);case 8:return f===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function F(d){var f=d,x=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(x=f.return),d=f.return;while(d)}return f.tag===3?x:null}function L(d){if(F(d)!==d)throw Error(a(188))}function W(d){var f=d.alternate;if(!f){if(f=F(d),f===null)throw Error(a(188));return f!==d?null:d}for(var x=d,E=f;;){var I=x.return;if(I===null)break;var U=I.alternate;if(U===null){if(E=I.return,E!==null){x=E;continue}break}if(I.child===U.child){for(U=I.child;U;){if(U===x)return L(I),d;if(U===E)return L(I),f;U=U.sibling}throw Error(a(188))}if(x.return!==E.return)x=I,E=U;else{for(var te=!1,Ae=I.child;Ae;){if(Ae===x){te=!0,x=I,E=U;break}if(Ae===E){te=!0,E=I,x=U;break}Ae=Ae.sibling}if(!te){for(Ae=U.child;Ae;){if(Ae===x){te=!0,x=U,E=I;break}if(Ae===E){te=!0,E=U,x=I;break}Ae=Ae.sibling}if(!te)throw Error(a(189))}}if(x.alternate!==E)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?d:f}function q(d){return d=W(d),d!==null?re(d):null}function re(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=re(d);if(f!==null)return f;d=d.sibling}return null}function oe(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var f=oe(d);if(f!==null)return f}d=d.sibling}return null}var Se=Array.isArray,he=e.getPublicInstance,Ee=e.getRootHostContext,Y=e.getChildHostContext,ge=e.prepareForCommit,se=e.resetAfterCommit,K=e.createInstance,ve=e.appendInitialChild,We=e.finalizeInitialChildren,we=e.prepareUpdate,Le=e.shouldSetTextContent,Fe=e.createTextInstance,He=e.scheduleTimeout,rt=e.cancelTimeout,yt=e.noTimeout,Rt=e.isPrimaryRenderer,Qt=e.supportsMutation,Ke=e.supportsPersistence,Ze=e.supportsHydration,ee=e.getInstanceFromNode,Dt=e.preparePortalMount,et=e.getCurrentEventPriority,At=e.detachDeletedInstance,at=e.supportsMicrotasks,Kt=e.scheduleMicrotask,ht=e.supportsTestSelectors,N=e.findFiberRoot,D=e.getBoundingRect,Q=e.getTextContent,ye=e.isHiddenSubtree,xe=e.matchAccessibilityRole,pe=e.setFocusIfFocusable,je=e.setupIntersectionObserver,Ye=e.appendChild,$e=e.appendChildToContainer,kt=e.commitTextUpdate,qe=e.commitMount,xt=e.commitUpdate,zt=e.insertBefore,Bt=e.insertInContainerBefore,St=e.removeChild,de=e.removeChildFromContainer,De=e.resetTextContent,it=e.hideInstance,le=e.hideTextInstance,Ce=e.unhideInstance,Pe=e.unhideTextInstance,Ge=e.clearContainer,Mt=e.cloneInstance,vt=e.createContainerChildSet,qt=e.appendChildToContainerChildSet,Rn=e.finalizeContainerChildren,$n=e.replaceContainerChildren,fn=e.cloneHiddenInstance,vr=e.cloneHiddenTextInstance,wr=e.canHydrateInstance,xo=e.canHydrateTextInstance,fa=e.canHydrateSuspenseInstance,Pi=e.isSuspenseInstancePending,is=e.isSuspenseInstanceFallback,ss=e.registerSuspenseInstanceRetry,ai=e.getNextHydratableSibling,cn=e.getFirstHydratableChild,qo=e.getFirstHydratableChildWithinContainer,_o=e.getFirstHydratableChildWithinSuspenseInstance,G=e.hydrateInstance,J=e.hydrateTextInstance,fe=e.hydrateSuspenseInstance,Ie=e.getNextHydratableInstanceAfterSuspenseInstance,Ue=e.commitHydratedContainer,ke=e.commitHydratedSuspenseInstance,ot=e.clearSuspenseBoundary,H=e.clearSuspenseBoundaryFromContainer,ne=e.shouldDeleteUnhydratedTailInstances,ae=e.didNotMatchHydratedContainerTextInstance,ce=e.didNotMatchHydratedTextInstance,$;function Xe(d){if($===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);$=f&&f[1]||""}return`
`+$+d}var Oe=!1;function Ve(d,f){if(!d||Oe)return"";Oe=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(ct){var E=ct}Reflect.construct(d,[],f)}else{try{f.call()}catch(ct){E=ct}d.call(f.prototype)}else{try{throw Error()}catch(ct){E=ct}d()}}catch(ct){if(ct&&E&&typeof ct.stack=="string"){for(var I=ct.stack.split(`
`),U=E.stack.split(`
`),te=I.length-1,Ae=U.length-1;1<=te&&0<=Ae&&I[te]!==U[Ae];)Ae--;for(;1<=te&&0<=Ae;te--,Ae--)if(I[te]!==U[Ae]){if(te!==1||Ae!==1)do if(te--,Ae--,0>Ae||I[te]!==U[Ae]){var ze=`
`+I[te].replace(" at new "," at ");return d.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",d.displayName)),ze}while(1<=te&&0<=Ae);break}}}finally{Oe=!1,Error.prepareStackTrace=x}return(d=d?d.displayName||d.name:"")?Xe(d):""}var Qe=Object.prototype.hasOwnProperty,ut=[],gt=-1;function lt(d){return{current:d}}function dt(d){0>gt||(d.current=ut[gt],ut[gt]=null,gt--)}function bt(d,f){gt++,ut[gt]=d.current,d.current=f}var Ft={},rn=lt(Ft),Tt=lt(!1),_t=Ft;function In(d,f){var x=d.type.contextTypes;if(!x)return Ft;var E=d.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var I={},U;for(U in x)I[U]=f[U];return E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=I),I}function $t(d){return d=d.childContextTypes,d!=null}function Un(){dt(Tt),dt(rn)}function _n(d,f,x){if(rn.current!==Ft)throw Error(a(168));bt(rn,f),bt(Tt,x)}function kn(d,f,x){var E=d.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var I in E)if(!(I in f))throw Error(a(108,z(d)||"Unknown",I));return s({},x,E)}function Dn(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Ft,_t=rn.current,bt(rn,d),bt(Tt,Tt.current),!0}function Wt(d,f,x){var E=d.stateNode;if(!E)throw Error(a(169));x?(d=kn(d,f,_t),E.__reactInternalMemoizedMergedChildContext=d,dt(Tt),dt(rn),bt(rn,d)):dt(Tt),bt(Tt,x)}var bn=Math.clz32?Math.clz32:cr,hr=Math.log,Ln=Math.LN2;function cr(d){return d>>>=0,d===0?32:31-(hr(d)/Ln|0)|0}var ha=64,An=4194304;function oc(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function bu(d,f){var x=d.pendingLanes;if(x===0)return 0;var E=0,I=d.suspendedLanes,U=d.pingedLanes,te=x&268435455;if(te!==0){var Ae=te&~I;Ae!==0?E=oc(Ae):(U&=te,U!==0&&(E=oc(U)))}else te=x&~I,te!==0?E=oc(te):U!==0&&(E=oc(U));if(E===0)return 0;if(f!==0&&f!==E&&(f&I)===0&&(I=E&-E,U=f&-f,I>=U||I===16&&(U&4194240)!==0))return f;if((E&4)!==0&&(E|=x&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=E;0<f;)x=31-bn(f),I=1<<x,E|=d[x],f&=~I;return E}function zp(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fv(d,f){for(var x=d.suspendedLanes,E=d.pingedLanes,I=d.expirationTimes,U=d.pendingLanes;0<U;){var te=31-bn(U),Ae=1<<te,ze=I[te];ze===-1?((Ae&x)===0||(Ae&E)!==0)&&(I[te]=zp(Ae,f)):ze<=f&&(d.expiredLanes|=Ae),U&=~Ae}}function _f(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Af(d){for(var f=[],x=0;31>x;x++)f.push(d);return f}function $o(d,f,x){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-bn(f),d[f]=x}function Sf(d,f){var x=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var E=d.eventTimes;for(d=d.expirationTimes;0<x;){var I=31-bn(x),U=1<<I;f[I]=0,E[I]=-1,d[I]=-1,x&=~U}}function pa(d,f){var x=d.entangledLanes|=f;for(d=d.entanglements;x;){var E=31-bn(x),I=1<<E;I&f|d[E]&f&&(d[E]|=f),x&=~I}}var Mn=0;function Na(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var el=i.unstable_scheduleCallback,lc=i.unstable_cancelCallback,Ao=i.unstable_shouldYield,Yx=i.unstable_requestPaint,Vr=i.unstable_now,tl=i.unstable_ImmediatePriority,Zx=i.unstable_UserBlockingPriority,wf=i.unstable_NormalPriority,Mf=i.unstable_IdlePriority,Tu=null,ma=null;function Ru(d){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(Tu,d,void 0,(d.current.flags&128)===128)}catch{}}function Iu(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var Bi=typeof Object.is=="function"?Object.is:Iu,bs=null,Ef=!1,Hp=!1;function Cf(d){bs===null?bs=[d]:bs.push(d)}function bf(d){Ef=!0,Cf(d)}function Ts(){if(!Hp&&bs!==null){Hp=!0;var d=0,f=Mn;try{var x=bs;for(Mn=1;d<x.length;d++){var E=x[d];do E=E(!0);while(E!==null)}bs=null,Ef=!1}catch(I){throw bs!==null&&(bs=bs.slice(d+1)),el(tl,Ts),I}finally{Mn=f,Hp=!1}}return null}var hv=l.ReactCurrentBatchConfig;function Ks(d,f){if(Bi(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var x=Object.keys(d),E=Object.keys(f);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var I=x[E];if(!Qe.call(f,I)||!Bi(d[I],f[I]))return!1}return!0}function Gp(d){switch(d.tag){case 5:return Xe(d.type);case 16:return Xe("Lazy");case 13:return Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 2:case 15:return d=Ve(d.type,!1),d;case 11:return d=Ve(d.type.render,!1),d;case 1:return d=Ve(d.type,!0),d;default:return""}}function ji(d,f){if(d&&d.defaultProps){f=s({},f),d=d.defaultProps;for(var x in d)f[x]===void 0&&(f[x]=d[x]);return f}return f}var Pu=lt(null),nl=null,Fa=null,Tf=null;function Di(){Tf=Fa=nl=null}function rl(d,f,x){Rt?(bt(Pu,f._currentValue),f._currentValue=x):(bt(Pu,f._currentValue2),f._currentValue2=x)}function Bu(d){var f=Pu.current;dt(Pu),Rt?d._currentValue=f:d._currentValue2=f}function il(d,f,x){for(;d!==null;){var E=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),d===x)break;d=d.return}}function cc(d,f){nl=d,Tf=Fa=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&f)!==0&&(qr=!0),d.firstContext=null)}function Wi(d){var f=Rt?d._currentValue:d._currentValue2;if(Tf!==d)if(d={context:d,memoizedValue:f,next:null},Fa===null){if(nl===null)throw Error(a(308));Fa=d,nl.dependencies={lanes:0,firstContext:d}}else Fa=Fa.next=d;return f}var Rs=null,Is=!1;function uc(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vp(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Oa(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function So(d,f){var x=d.updateQueue;x!==null&&(x=x.shared,Br!==null&&(d.mode&1)!==0&&(vn&2)===0?(d=x.interleaved,d===null?(f.next=f,Rs===null?Rs=[x]:Rs.push(x)):(f.next=d.next,d.next=f),x.interleaved=f):(d=x.pending,d===null?f.next=f:(f.next=d.next,d.next=f),x.pending=f))}function Rf(d,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var E=f.lanes;E&=d.pendingLanes,x|=E,f.lanes=x,pa(d,x)}}function If(d,f){var x=d.updateQueue,E=d.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var I=null,U=null;if(x=x.firstBaseUpdate,x!==null){do{var te={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};U===null?I=U=te:U=U.next=te,x=x.next}while(x!==null);U===null?I=U=f:U=U.next=f}else I=U=f;x={baseState:E.baseState,firstBaseUpdate:I,lastBaseUpdate:U,shared:E.shared,effects:E.effects},d.updateQueue=x;return}d=x.lastBaseUpdate,d===null?x.firstBaseUpdate=f:d.next=f,x.lastBaseUpdate=f}function Pf(d,f,x,E){var I=d.updateQueue;Is=!1;var U=I.firstBaseUpdate,te=I.lastBaseUpdate,Ae=I.shared.pending;if(Ae!==null){I.shared.pending=null;var ze=Ae,ct=ze.next;ze.next=null,te===null?U=ct:te.next=ct,te=ze;var Ot=d.alternate;Ot!==null&&(Ot=Ot.updateQueue,Ae=Ot.lastBaseUpdate,Ae!==te&&(Ae===null?Ot.firstBaseUpdate=ct:Ae.next=ct,Ot.lastBaseUpdate=ze))}if(U!==null){var un=I.baseState;te=0,Ot=ct=ze=null,Ae=U;do{var tn=Ae.lane,Sn=Ae.eventTime;if((E&tn)===tn){Ot!==null&&(Ot=Ot.next={eventTime:Sn,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var It=d,fi=Ae;switch(tn=f,Sn=x,fi.tag){case 1:if(It=fi.payload,typeof It=="function"){un=It.call(Sn,un,tn);break e}un=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=fi.payload,tn=typeof It=="function"?It.call(Sn,un,tn):It,tn==null)break e;un=s({},un,tn);break e;case 2:Is=!0}}Ae.callback!==null&&Ae.lane!==0&&(d.flags|=64,tn=I.effects,tn===null?I.effects=[Ae]:tn.push(Ae))}else Sn={eventTime:Sn,lane:tn,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Ot===null?(ct=Ot=Sn,ze=un):Ot=Ot.next=Sn,te|=tn;if(Ae=Ae.next,Ae===null){if(Ae=I.shared.pending,Ae===null)break;tn=Ae,Ae=tn.next,tn.next=null,I.lastBaseUpdate=tn,I.shared.pending=null}}while(!0);if(Ot===null&&(ze=un),I.baseState=ze,I.firstBaseUpdate=ct,I.lastBaseUpdate=Ot,f=I.shared.interleaved,f!==null){I=f;do te|=I.lane,I=I.next;while(I!==f)}else U===null&&(I.shared.lanes=0);xa|=te,d.lanes=te,d.memoizedState=un}}function pv(d,f,x){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var E=d[f],I=E.callback;if(I!==null){if(E.callback=null,E=x,typeof I!="function")throw Error(a(191,I));I.call(E)}}}var mv=new n.Component().refs;function jp(d,f,x,E){f=d.memoizedState,x=x(E,f),x=x==null?f:s({},f,x),d.memoizedState=x,d.lanes===0&&(d.updateQueue.baseState=x)}var Bf={isMounted:function(d){return(d=d._reactInternals)?F(d)===d:!1},enqueueSetState:function(d,f,x){d=d._reactInternals;var E=Gn(),I=ta(d),U=Oa(E,I);U.payload=f,x!=null&&(U.callback=x),So(d,U),f=wi(d,I,E),f!==null&&Rf(f,d,I)},enqueueReplaceState:function(d,f,x){d=d._reactInternals;var E=Gn(),I=ta(d),U=Oa(E,I);U.tag=1,U.payload=f,x!=null&&(U.callback=x),So(d,U),f=wi(d,I,E),f!==null&&Rf(f,d,I)},enqueueForceUpdate:function(d,f){d=d._reactInternals;var x=Gn(),E=ta(d),I=Oa(x,E);I.tag=2,f!=null&&(I.callback=f),So(d,I),f=wi(d,E,x),f!==null&&Rf(f,d,E)}};function Wp(d,f,x,E,I,U,te){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(E,U,te):f.prototype&&f.prototype.isPureReactComponent?!Ks(x,E)||!Ks(I,U):!0}function gv(d,f,x){var E=!1,I=Ft,U=f.contextType;return typeof U=="object"&&U!==null?U=Wi(U):(I=$t(f)?_t:rn.current,E=f.contextTypes,U=(E=E!=null)?In(d,I):Ft),f=new f(x,U),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Bf,d.stateNode=f,f._reactInternals=d,E&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=I,d.__reactInternalMemoizedMaskedChildContext=U),f}function vv(d,f,x,E){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,E),f.state!==d&&Bf.enqueueReplaceState(f,f.state,null)}function Xp(d,f,x,E){var I=d.stateNode;I.props=x,I.state=d.memoizedState,I.refs=mv,uc(d);var U=f.contextType;typeof U=="object"&&U!==null?I.context=Wi(U):(U=$t(f)?_t:rn.current,I.context=In(d,U)),I.state=d.memoizedState,U=f.getDerivedStateFromProps,typeof U=="function"&&(jp(d,f,U,x),I.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(f=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),f!==I.state&&Bf.enqueueReplaceState(I,I.state,null),Pf(d,x,I,E),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308)}var dc=[],wo=0,Df=null,Lf=0,Ps=[],as=0,sl=null,Ua=1,ka="";function al(d,f){dc[wo++]=Lf,dc[wo++]=Df,Df=d,Lf=f}function yv(d,f,x){Ps[as++]=Ua,Ps[as++]=ka,Ps[as++]=sl,sl=d;var E=Ua;d=ka;var I=32-bn(E)-1;E&=~(1<<I),x+=1;var U=32-bn(f)+I;if(30<U){var te=I-I%5;U=(E&(1<<te)-1).toString(32),E>>=te,I-=te,Ua=1<<32-bn(f)+I|x<<I|E,ka=U+d}else Ua=1<<U|x<<I|E,ka=d}function Jp(d){d.return!==null&&(al(d,1),yv(d,1,0))}function Kp(d){for(;d===Df;)Df=dc[--wo],dc[wo]=null,Lf=dc[--wo],dc[wo]=null;for(;d===sl;)sl=Ps[--as],Ps[as]=null,ka=Ps[--as],Ps[as]=null,Ua=Ps[--as],Ps[as]=null}var Li=null,oi=null,pr=!1,fc=!1,Bs=null;function Yp(d,f){var x=hs(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=d,f=d.deletions,f===null?(d.deletions=[x],d.flags|=16):f.push(x)}function Zp(d,f){switch(d.tag){case 5:return f=wr(f,d.type,d.pendingProps),f!==null?(d.stateNode=f,Li=d,oi=cn(f),!0):!1;case 6:return f=xo(f,d.pendingProps),f!==null?(d.stateNode=f,Li=d,oi=null,!0):!1;case 13:if(f=fa(f),f!==null){var x=sl!==null?{id:Ua,overflow:ka}:null;return d.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=hs(18,null,null,0),x.stateNode=f,x.return=d,d.child=x,Li=d,oi=null,!0}return!1;default:return!1}}function Nf(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Mo(d){if(pr){var f=oi;if(f){var x=f;if(!Zp(d,f)){if(Nf(d))throw Error(a(418));f=ai(x);var E=Li;f&&Zp(d,f)?Yp(E,x):(d.flags=d.flags&-4097|2,pr=!1,Li=d)}}else{if(Nf(d))throw Error(a(418));d.flags=d.flags&-4097|2,pr=!1,Li=d}}}function xv(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Li=d}function Du(d){if(!Ze||d!==Li)return!1;if(!pr)return xv(d),pr=!0,!1;if(d.tag!==3&&(d.tag!==5||ne(d.type)&&!Le(d.type,d.memoizedProps))){var f=oi;if(f){if(Nf(d)){for(d=oi;d;)d=ai(d);throw Error(a(418))}for(;f;)Yp(d,f),f=ai(f)}}if(xv(d),d.tag===13){if(!Ze)throw Error(a(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));oi=Ie(d)}else oi=Li?ai(d.stateNode):null;return!0}function hc(){Ze&&(oi=Li=null,fc=pr=!1)}function Ff(d){Bs===null?Bs=[d]:Bs.push(d)}function pc(d,f,x){if(d=x.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var E=x.stateNode}if(!E)throw Error(a(147,d));var I=E,U=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===U?f.ref:(f=function(te){var Ae=I.refs;Ae===mv&&(Ae=I.refs={}),te===null?delete Ae[U]:Ae[U]=te},f._stringRef=U,f)}if(typeof d!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,d))}return d}function Eo(d,f){throw d=Object.prototype.toString.call(f),Error(a(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function mc(d){var f=d._init;return f(d._payload)}function _v(d){function f(Re,Me){if(d){var Ne=Re.deletions;Ne===null?(Re.deletions=[Me],Re.flags|=16):Ne.push(Me)}}function x(Re,Me){if(!d)return null;for(;Me!==null;)f(Re,Me),Me=Me.sibling;return null}function E(Re,Me){for(Re=new Map;Me!==null;)Me.key!==null?Re.set(Me.key,Me):Re.set(Me.index,Me),Me=Me.sibling;return Re}function I(Re,Me){return Re=$a(Re,Me),Re.index=0,Re.sibling=null,Re}function U(Re,Me,Ne){return Re.index=Ne,d?(Ne=Re.alternate,Ne!==null?(Ne=Ne.index,Ne<Me?(Re.flags|=2,Me):Ne):(Re.flags|=2,Me)):(Re.flags|=1048576,Me)}function te(Re){return d&&Re.alternate===null&&(Re.flags|=2),Re}function Ae(Re,Me,Ne,Et){return Me===null||Me.tag!==6?(Me=ch(Ne,Re.mode,Et),Me.return=Re,Me):(Me=I(Me,Ne),Me.return=Re,Me)}function ze(Re,Me,Ne,Et){var Xt=Ne.type;return Xt===p?Ot(Re,Me,Ne.props.children,Et,Ne.key):Me!==null&&(Me.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===R&&mc(Xt)===Me.type)?(Et=I(Me,Ne.props),Et.ref=pc(Re,Me,Ne),Et.return=Re,Et):(Et=lh(Ne.type,Ne.key,Ne.props,null,Re.mode,Et),Et.ref=pc(Re,Me,Ne),Et.return=Re,Et)}function ct(Re,Me,Ne,Et){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==Ne.containerInfo||Me.stateNode.implementation!==Ne.implementation?(Me=uh(Ne,Re.mode,Et),Me.return=Re,Me):(Me=I(Me,Ne.children||[]),Me.return=Re,Me)}function Ot(Re,Me,Ne,Et,Xt){return Me===null||Me.tag!==7?(Me=Tl(Ne,Re.mode,Et,Xt),Me.return=Re,Me):(Me=I(Me,Ne),Me.return=Re,Me)}function un(Re,Me,Ne){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Me=ch(""+Me,Re.mode,Ne),Me.return=Re,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case u:return Ne=lh(Me.type,Me.key,Me.props,null,Re.mode,Ne),Ne.ref=pc(Re,null,Me),Ne.return=Re,Ne;case h:return Me=uh(Me,Re.mode,Ne),Me.return=Re,Me;case R:var Et=Me._init;return un(Re,Et(Me._payload),Ne)}if(Se(Me)||O(Me))return Me=Tl(Me,Re.mode,Ne,null),Me.return=Re,Me;Eo(Re,Me)}return null}function tn(Re,Me,Ne,Et){var Xt=Me!==null?Me.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Xt!==null?null:Ae(Re,Me,""+Ne,Et);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case u:return Ne.key===Xt?ze(Re,Me,Ne,Et):null;case h:return Ne.key===Xt?ct(Re,Me,Ne,Et):null;case R:return Xt=Ne._init,tn(Re,Me,Xt(Ne._payload),Et)}if(Se(Ne)||O(Ne))return Xt!==null?null:Ot(Re,Me,Ne,Et,null);Eo(Re,Ne)}return null}function Sn(Re,Me,Ne,Et,Xt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Re=Re.get(Ne)||null,Ae(Me,Re,""+Et,Xt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case u:return Re=Re.get(Et.key===null?Ne:Et.key)||null,ze(Me,Re,Et,Xt);case h:return Re=Re.get(Et.key===null?Ne:Et.key)||null,ct(Me,Re,Et,Xt);case R:var hn=Et._init;return Sn(Re,Me,Ne,hn(Et._payload),Xt)}if(Se(Et)||O(Et))return Re=Re.get(Ne)||null,Ot(Me,Re,Et,Xt,null);Eo(Me,Et)}return null}function It(Re,Me,Ne,Et){for(var Xt=null,hn=null,dn=Me,zn=Me=0,Fr=null;dn!==null&&zn<Ne.length;zn++){dn.index>zn?(Fr=dn,dn=null):Fr=dn.sibling;var Fn=tn(Re,dn,Ne[zn],Et);if(Fn===null){dn===null&&(dn=Fr);break}d&&dn&&Fn.alternate===null&&f(Re,dn),Me=U(Fn,Me,zn),hn===null?Xt=Fn:hn.sibling=Fn,hn=Fn,dn=Fr}if(zn===Ne.length)return x(Re,dn),pr&&al(Re,zn),Xt;if(dn===null){for(;zn<Ne.length;zn++)dn=un(Re,Ne[zn],Et),dn!==null&&(Me=U(dn,Me,zn),hn===null?Xt=dn:hn.sibling=dn,hn=dn);return pr&&al(Re,zn),Xt}for(dn=E(Re,dn);zn<Ne.length;zn++)Fr=Sn(dn,Re,zn,Ne[zn],Et),Fr!==null&&(d&&Fr.alternate!==null&&dn.delete(Fr.key===null?zn:Fr.key),Me=U(Fr,Me,zn),hn===null?Xt=Fr:hn.sibling=Fr,hn=Fr);return d&&dn.forEach(function(eo){return f(Re,eo)}),pr&&al(Re,zn),Xt}function fi(Re,Me,Ne,Et){var Xt=O(Ne);if(typeof Xt!="function")throw Error(a(150));if(Ne=Xt.call(Ne),Ne==null)throw Error(a(151));for(var hn=Xt=null,dn=Me,zn=Me=0,Fr=null,Fn=Ne.next();dn!==null&&!Fn.done;zn++,Fn=Ne.next()){dn.index>zn?(Fr=dn,dn=null):Fr=dn.sibling;var eo=tn(Re,dn,Fn.value,Et);if(eo===null){dn===null&&(dn=Fr);break}d&&dn&&eo.alternate===null&&f(Re,dn),Me=U(eo,Me,zn),hn===null?Xt=eo:hn.sibling=eo,hn=eo,dn=Fr}if(Fn.done)return x(Re,dn),pr&&al(Re,zn),Xt;if(dn===null){for(;!Fn.done;zn++,Fn=Ne.next())Fn=un(Re,Fn.value,Et),Fn!==null&&(Me=U(Fn,Me,zn),hn===null?Xt=Fn:hn.sibling=Fn,hn=Fn);return pr&&al(Re,zn),Xt}for(dn=E(Re,dn);!Fn.done;zn++,Fn=Ne.next())Fn=Sn(dn,Re,zn,Fn.value,Et),Fn!==null&&(d&&Fn.alternate!==null&&dn.delete(Fn.key===null?zn:Fn.key),Me=U(Fn,Me,zn),hn===null?Xt=Fn:hn.sibling=Fn,hn=Fn);return d&&dn.forEach(function(bm){return f(Re,bm)}),pr&&al(Re,zn),Xt}function ps(Re,Me,Ne,Et){if(typeof Ne=="object"&&Ne!==null&&Ne.type===p&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case u:e:{for(var Xt=Ne.key,hn=Me;hn!==null;){if(hn.key===Xt){if(Xt=Ne.type,Xt===p){if(hn.tag===7){x(Re,hn.sibling),Me=I(hn,Ne.props.children),Me.return=Re,Re=Me;break e}}else if(hn.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===R&&mc(Xt)===hn.type){x(Re,hn.sibling),Me=I(hn,Ne.props),Me.ref=pc(Re,hn,Ne),Me.return=Re,Re=Me;break e}x(Re,hn);break}else f(Re,hn);hn=hn.sibling}Ne.type===p?(Me=Tl(Ne.props.children,Re.mode,Et,Ne.key),Me.return=Re,Re=Me):(Et=lh(Ne.type,Ne.key,Ne.props,null,Re.mode,Et),Et.ref=pc(Re,Me,Ne),Et.return=Re,Re=Et)}return te(Re);case h:e:{for(hn=Ne.key;Me!==null;){if(Me.key===hn)if(Me.tag===4&&Me.stateNode.containerInfo===Ne.containerInfo&&Me.stateNode.implementation===Ne.implementation){x(Re,Me.sibling),Me=I(Me,Ne.children||[]),Me.return=Re,Re=Me;break e}else{x(Re,Me);break}else f(Re,Me);Me=Me.sibling}Me=uh(Ne,Re.mode,Et),Me.return=Re,Re=Me}return te(Re);case R:return hn=Ne._init,ps(Re,Me,hn(Ne._payload),Et)}if(Se(Ne))return It(Re,Me,Ne,Et);if(O(Ne))return fi(Re,Me,Ne,Et);Eo(Re,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,Me!==null&&Me.tag===6?(x(Re,Me.sibling),Me=I(Me,Ne),Me.return=Re,Re=Me):(x(Re,Me),Me=ch(Ne,Re.mode,Et),Me.return=Re,Re=Me),te(Re)):x(Re,Me)}return ps}var za=_v(!0),Av=_v(!1),gc={},Xi=lt(gc),ol=lt(gc),ll=lt(gc);function Ys(d){if(d===gc)throw Error(a(174));return d}function Of(d,f){bt(ll,f),bt(ol,d),bt(Xi,gc),d=Ee(f),dt(Xi),bt(Xi,d)}function vc(){dt(Xi),dt(ol),dt(ll)}function Sv(d){var f=Ys(ll.current),x=Ys(Xi.current);f=Y(x,d.type,f),x!==f&&(bt(ol,d),bt(Xi,f))}function Qp(d){ol.current===d&&(dt(Xi),dt(ol))}var yr=lt(0);function Uf(d){for(var f=d;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Pi(x)||is(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var os=[];function cl(){for(var d=0;d<os.length;d++){var f=os[d];Rt?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}os.length=0}var Lu=l.ReactCurrentDispatcher,ls=l.ReactCurrentBatchConfig,ul=0,xr=null,Yr=null,Zr=null,kf=!1,ga=!1,dl=0,Nu=0;function Qr(){throw Error(a(321))}function zf(d,f){if(f===null)return!1;for(var x=0;x<f.length&&x<d.length;x++)if(!Bi(d[x],f[x]))return!1;return!0}function yc(d,f,x,E,I,U){if(ul=U,xr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Lu.current=d===null||d.memoizedState===null?rm:im,d=x(E,I),ga){U=0;do{if(ga=!1,dl=0,25<=U)throw Error(a(301));U+=1,Zr=Yr=null,f.updateQueue=null,Lu.current=sm,d=x(E,I)}while(ga)}if(Lu.current=Sc,f=Yr!==null&&Yr.next!==null,ul=0,Zr=Yr=xr=null,kf=!1,f)throw Error(a(300));return d}function Co(){var d=dl!==0;return dl=0,d}function Zs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zr===null?xr.memoizedState=Zr=d:Zr=Zr.next=d,Zr}function Qs(){if(Yr===null){var d=xr.alternate;d=d!==null?d.memoizedState:null}else d=Yr.next;var f=Zr===null?xr.memoizedState:Zr.next;if(f!==null)Zr=f,Yr=d;else{if(d===null)throw Error(a(310));Yr=d,d={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},Zr===null?xr.memoizedState=Zr=d:Zr=Zr.next=d}return Zr}function va(d,f){return typeof f=="function"?f(d):f}function Fu(d){var f=Qs(),x=f.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=d;var E=Yr,I=E.baseQueue,U=x.pending;if(U!==null){if(I!==null){var te=I.next;I.next=U.next,U.next=te}E.baseQueue=I=U,x.pending=null}if(I!==null){U=I.next,E=E.baseState;var Ae=te=null,ze=null,ct=U;do{var Ot=ct.lane;if((ul&Ot)===Ot)ze!==null&&(ze=ze.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),E=ct.hasEagerState?ct.eagerState:d(E,ct.action);else{var un={lane:Ot,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};ze===null?(Ae=ze=un,te=E):ze=ze.next=un,xr.lanes|=Ot,xa|=Ot}ct=ct.next}while(ct!==null&&ct!==U);ze===null?te=E:ze.next=Ae,Bi(E,f.memoizedState)||(qr=!0),f.memoizedState=E,f.baseState=te,f.baseQueue=ze,x.lastRenderedState=E}if(d=x.interleaved,d!==null){I=d;do U=I.lane,xr.lanes|=U,xa|=U,I=I.next;while(I!==d)}else I===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function Ou(d){var f=Qs(),x=f.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=d;var E=x.dispatch,I=x.pending,U=f.memoizedState;if(I!==null){x.pending=null;var te=I=I.next;do U=d(U,te.action),te=te.next;while(te!==I);Bi(U,f.memoizedState)||(qr=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),x.lastRenderedState=U}return[U,E]}function qp(){}function $p(d,f){var x=xr,E=Qs(),I=f(),U=!Bi(E.memoizedState,I);if(U&&(E.memoizedState=I,qr=!0),E=E.queue,xc(Ha.bind(null,x,E,d),[d]),E.getSnapshot!==f||U||Zr!==null&&Zr.memoizedState.tag&1){if(x.flags|=2048,ku(9,tm.bind(null,x,E,I,f),void 0,null),Br===null)throw Error(a(349));(ul&30)!==0||em(x,f,I)}return I}function em(d,f,x){d.flags|=16384,d={getSnapshot:f,value:x},f=xr.updateQueue,f===null?(f={lastEffect:null,stores:null},xr.updateQueue=f,f.stores=[d]):(x=f.stores,x===null?f.stores=[d]:x.push(d))}function tm(d,f,x,E){f.value=x,f.getSnapshot=E,Hf(f)&&wi(d,1,-1)}function Ha(d,f,x){return x(function(){Hf(f)&&wi(d,1,-1)})}function Hf(d){var f=d.getSnapshot;d=d.value;try{var x=f();return!Bi(d,x)}catch{return!0}}function Uu(d){var f=Zs();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:d},f.queue=d,d=d.dispatch=Qx.bind(null,xr,d),[f.memoizedState,d]}function ku(d,f,x,E){return d={tag:d,create:f,destroy:x,deps:E,next:null},f=xr.updateQueue,f===null?(f={lastEffect:null,stores:null},xr.updateQueue=f,f.lastEffect=d.next=d):(x=f.lastEffect,x===null?f.lastEffect=d.next=d:(E=x.next,x.next=d,d.next=E,f.lastEffect=d)),d}function wv(){return Qs().memoizedState}function bo(d,f,x,E){var I=Zs();xr.flags|=d,I.memoizedState=ku(1|f,x,void 0,E===void 0?null:E)}function Gf(d,f,x,E){var I=Qs();E=E===void 0?null:E;var U=void 0;if(Yr!==null){var te=Yr.memoizedState;if(U=te.destroy,E!==null&&zf(E,te.deps)){I.memoizedState=ku(f,x,U,E);return}}xr.flags|=d,I.memoizedState=ku(1|f,x,U,E)}function Vf(d,f){return bo(8390656,8,d,f)}function xc(d,f){return Gf(2048,8,d,f)}function ar(d,f){return Gf(4,2,d,f)}function jf(d,f){return Gf(4,4,d,f)}function zu(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function _c(d,f,x){return x=x!=null?x.concat([d]):null,Gf(4,4,zu.bind(null,f,d),x)}function Wf(){}function Xf(d,f){var x=Qs();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&zf(f,E[1])?E[0]:(x.memoizedState=[d,f],d)}function Ac(d,f){var x=Qs();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&zf(f,E[1])?E[0]:(d=d(),x.memoizedState=[d,f],d)}function Jf(d,f){var x=Mn;Mn=x!==0&&4>x?x:4,d(!0);var E=ls.transition;ls.transition={};try{d(!1),f()}finally{Mn=x,ls.transition=E}}function fl(){return Qs().memoizedState}function Mv(d,f,x){var E=ta(d);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},Ev(d)?nm(f,x):(Hu(d,f,x),x=Gn(),d=wi(d,E,x),d!==null&&Gu(d,f,E))}function Qx(d,f,x){var E=ta(d),I={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ev(d))nm(f,I);else{Hu(d,f,I);var U=d.alternate;if(d.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var te=f.lastRenderedState,Ae=U(te,x);if(I.hasEagerState=!0,I.eagerState=Ae,Bi(Ae,te))return}catch{}finally{}x=Gn(),d=wi(d,E,x),d!==null&&Gu(d,f,E)}}function Ev(d){var f=d.alternate;return d===xr||f!==null&&f===xr}function nm(d,f){ga=kf=!0;var x=d.pending;x===null?f.next=f:(f.next=x.next,x.next=f),d.pending=f}function Hu(d,f,x){Br!==null&&(d.mode&1)!==0&&(vn&2)===0?(d=f.interleaved,d===null?(x.next=x,Rs===null?Rs=[f]:Rs.push(f)):(x.next=d.next,d.next=x),f.interleaved=x):(d=f.pending,d===null?x.next=x:(x.next=d.next,d.next=x),f.pending=x)}function Gu(d,f,x){if((x&4194240)!==0){var E=f.lanes;E&=d.pendingLanes,x|=E,f.lanes=x,pa(d,x)}}var Sc={readContext:Wi,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},rm={readContext:Wi,useCallback:function(d,f){return Zs().memoizedState=[d,f===void 0?null:f],d},useContext:Wi,useEffect:Vf,useImperativeHandle:function(d,f,x){return x=x!=null?x.concat([d]):null,bo(4194308,4,zu.bind(null,f,d),x)},useLayoutEffect:function(d,f){return bo(4194308,4,d,f)},useInsertionEffect:function(d,f){return bo(4,2,d,f)},useMemo:function(d,f){var x=Zs();return f=f===void 0?null:f,d=d(),x.memoizedState=[d,f],d},useReducer:function(d,f,x){var E=Zs();return f=x!==void 0?x(f):f,E.memoizedState=E.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},E.queue=d,d=d.dispatch=Mv.bind(null,xr,d),[E.memoizedState,d]},useRef:function(d){var f=Zs();return d={current:d},f.memoizedState=d},useState:Uu,useDebugValue:Wf,useDeferredValue:function(d){var f=Uu(d),x=f[0],E=f[1];return Vf(function(){var I=ls.transition;ls.transition={};try{E(d)}finally{ls.transition=I}},[d]),x},useTransition:function(){var d=Uu(!1),f=d[0];return d=Jf.bind(null,d[1]),Zs().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,x){var E=xr,I=Zs();if(pr){if(x===void 0)throw Error(a(407));x=x()}else{if(x=f(),Br===null)throw Error(a(349));(ul&30)!==0||em(E,f,x)}I.memoizedState=x;var U={value:x,getSnapshot:f};return I.queue=U,Vf(Ha.bind(null,E,U,d),[d]),E.flags|=2048,ku(9,tm.bind(null,E,U,x,f),void 0,null),x},useId:function(){var d=Zs(),f=Br.identifierPrefix;if(pr){var x=ka,E=Ua;x=(E&~(1<<32-bn(E)-1)).toString(32)+x,f=":"+f+"R"+x,x=dl++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=Nu++,f=":"+f+"r"+x.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},im={readContext:Wi,useCallback:Xf,useContext:Wi,useEffect:xc,useImperativeHandle:_c,useInsertionEffect:ar,useLayoutEffect:jf,useMemo:Ac,useReducer:Fu,useRef:wv,useState:function(){return Fu(va)},useDebugValue:Wf,useDeferredValue:function(d){var f=Fu(va),x=f[0],E=f[1];return xc(function(){var I=ls.transition;ls.transition={};try{E(d)}finally{ls.transition=I}},[d]),x},useTransition:function(){var d=Fu(va)[0],f=Qs().memoizedState;return[d,f]},useMutableSource:qp,useSyncExternalStore:$p,useId:fl,unstable_isNewReconciler:!1},sm={readContext:Wi,useCallback:Xf,useContext:Wi,useEffect:xc,useImperativeHandle:_c,useInsertionEffect:ar,useLayoutEffect:jf,useMemo:Ac,useReducer:Ou,useRef:wv,useState:function(){return Ou(va)},useDebugValue:Wf,useDeferredValue:function(d){var f=Ou(va),x=f[0],E=f[1];return xc(function(){var I=ls.transition;ls.transition={};try{E(d)}finally{ls.transition=I}},[d]),x},useTransition:function(){var d=Ou(va)[0],f=Qs().memoizedState;return[d,f]},useMutableSource:qp,useSyncExternalStore:$p,useId:fl,unstable_isNewReconciler:!1};function am(d,f){try{var x="",E=f;do x+=Gp(E),E=E.return;while(E);var I=x}catch(U){I=`
Error generating stack: `+U.message+`
`+U.stack}return{value:d,source:f,stack:I}}function Kf(d,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var qx=typeof WeakMap=="function"?WeakMap:Map;function Cv(d,f,x){x=Oa(-1,x),x.tag=3,x.payload={element:null};var E=f.value;return x.callback=function(){Tc||(Tc=!0,dr=E),Kf(d,f)},x}function Yf(d,f,x){x=Oa(-1,x),x.tag=3;var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var I=f.value;x.payload=function(){return E(I)},x.callback=function(){Kf(d,f)}}var U=d.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(x.callback=function(){Kf(d,f),typeof E!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var te=f.stack;this.componentDidCatch(f.value,{componentStack:te!==null?te:""})}),x}function Ga(d,f,x){var E=d.pingCache;if(E===null){E=d.pingCache=new qx;var I=new Set;E.set(f,I)}else I=E.get(f),I===void 0&&(I=new Set,E.set(f,I));I.has(x)||(I.add(x),d=Mm.bind(null,d,f,x),f.then(d,d))}function om(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function hl(d,f,x,E,I){return(d.mode&1)===0?(d===f?d.flags|=65536:(d.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=Oa(-1,1),f.tag=2,So(x,f))),x.lanes|=1),d):(d.flags|=65536,d.lanes=I,d)}function jr(d){d.flags|=4}function wc(d,f){if(d!==null&&d.child===f.child)return!0;if((f.flags&16)!==0)return!1;for(d=f.child;d!==null;){if((d.flags&12854)!==0||(d.subtreeFlags&12854)!==0)return!1;d=d.sibling}return!0}var cs,pl,Zf,Qf;if(Qt)cs=function(d,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)ve(d,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},pl=function(){},Zf=function(d,f,x,E,I){if(d=d.memoizedProps,d!==E){var U=f.stateNode,te=Ys(Xi.current);x=we(U,x,d,E,I,te),(f.updateQueue=x)&&jr(f)}},Qf=function(d,f,x,E){x!==E&&jr(f)};else if(Ke){cs=function(d,f,x,E){for(var I=f.child;I!==null;){if(I.tag===5){var U=I.stateNode;x&&E&&(U=fn(U,I.type,I.memoizedProps,I)),ve(d,U)}else if(I.tag===6)U=I.stateNode,x&&E&&(U=vr(U,I.memoizedProps,I)),ve(d,U);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)U=I.child,U!==null&&(U.return=I),cs(d,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===f)break;for(;I.sibling===null;){if(I.return===null||I.return===f)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var To=function(d,f,x,E){for(var I=f.child;I!==null;){if(I.tag===5){var U=I.stateNode;x&&E&&(U=fn(U,I.type,I.memoizedProps,I)),qt(d,U)}else if(I.tag===6)U=I.stateNode,x&&E&&(U=vr(U,I.memoizedProps,I)),qt(d,U);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)U=I.child,U!==null&&(U.return=I),To(d,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===f)break;for(;I.sibling===null;){if(I.return===null||I.return===f)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};pl=function(d,f){var x=f.stateNode;if(!wc(d,f)){d=x.containerInfo;var E=vt(d);To(E,f,!1,!1),x.pendingChildren=E,jr(f),Rn(d,E)}},Zf=function(d,f,x,E,I){var U=d.stateNode,te=d.memoizedProps;if((d=wc(d,f))&&te===E)f.stateNode=U;else{var Ae=f.stateNode,ze=Ys(Xi.current),ct=null;te!==E&&(ct=we(Ae,x,te,E,I,ze)),d&&ct===null?f.stateNode=U:(U=Mt(U,ct,x,te,E,f,d,Ae),We(U,x,E,I,ze)&&jr(f),f.stateNode=U,d?jr(f):cs(U,f,!1,!1))}},Qf=function(d,f,x,E){x!==E?(d=Ys(ll.current),x=Ys(Xi.current),f.stateNode=Fe(E,d,x,f),jr(f)):f.stateNode=d.stateNode}}else pl=function(){},Zf=function(){},Qf=function(){};function Va(d,f){if(!pr)switch(d.tailMode){case"hidden":f=d.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?d.tail=null:x.sibling=null;break;case"collapsed":x=d.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:E.sibling=null}}function Pr(d){var f=d.alternate!==null&&d.alternate.child===d.child,x=0,E=0;if(f)for(var I=d.child;I!==null;)x|=I.lanes|I.childLanes,E|=I.subtreeFlags&14680064,E|=I.flags&14680064,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)x|=I.lanes|I.childLanes,E|=I.subtreeFlags,E|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=E,d.childLanes=x,f}function qf(d,f,x){var E=f.pendingProps;switch(Kp(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(f),null;case 1:return $t(f.type)&&Un(),Pr(f),null;case 3:return E=f.stateNode,vc(),dt(Tt),dt(rn),cl(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(Du(f)?jr(f):d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,Bs!==null&&(td(Bs),Bs=null))),pl(d,f),Pr(f),null;case 5:Qp(f),x=Ys(ll.current);var I=f.type;if(d!==null&&f.stateNode!=null)Zf(d,f,I,E,x),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(a(166));return Pr(f),null}if(d=Ys(Xi.current),Du(f)){if(!Ze)throw Error(a(175));d=G(f.stateNode,f.type,f.memoizedProps,x,d,f,!fc),f.updateQueue=d,d!==null&&jr(f)}else{var U=K(I,E,x,d,f);cs(U,f,!1,!1),f.stateNode=U,We(U,I,E,x,d)&&jr(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Pr(f),null;case 6:if(d&&f.stateNode!=null)Qf(d,f,d.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(a(166));if(d=Ys(ll.current),x=Ys(Xi.current),Du(f)){if(!Ze)throw Error(a(176));if(d=f.stateNode,E=f.memoizedProps,(x=J(d,E,f,!fc))&&(I=Li,I!==null))switch(U=(I.mode&1)!==0,I.tag){case 3:ae(I.stateNode.containerInfo,d,E,U);break;case 5:ce(I.type,I.memoizedProps,I.stateNode,d,E,U)}x&&jr(f)}else f.stateNode=Fe(E,d,x,f)}return Pr(f),null;case 13:if(dt(yr),E=f.memoizedState,pr&&oi!==null&&(f.mode&1)!==0&&(f.flags&128)===0){for(d=oi;d;)d=ai(d);return hc(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=Du(f),d===null){if(!E)throw Error(a(318));if(!Ze)throw Error(a(344));if(d=f.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));fe(d,f)}else hc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;return Pr(f),null}return Bs!==null&&(td(Bs),Bs=null),(f.flags&128)!==0?(f.lanes=x,f):(E=E!==null,x=!1,d===null?Du(f):x=d.memoizedState!==null,E&&!x&&(f.child.flags|=8192,(f.mode&1)!==0&&(d===null||(yr.current&1)!==0?Er===0&&(Er=3):sh())),f.updateQueue!==null&&(f.flags|=4),Pr(f),null);case 4:return vc(),pl(d,f),d===null&&Dt(f.stateNode.containerInfo),Pr(f),null;case 10:return Bu(f.type._context),Pr(f),null;case 17:return $t(f.type)&&Un(),Pr(f),null;case 19:if(dt(yr),I=f.memoizedState,I===null)return Pr(f),null;if(E=(f.flags&128)!==0,U=I.rendering,U===null)if(E)Va(I,!1);else{if(Er!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(U=Uf(d),U!==null){for(f.flags|=128,Va(I,!1),d=U.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),f.subtreeFlags=0,d=x,E=f.child;E!==null;)x=E,I=d,x.flags&=14680066,U=x.alternate,U===null?(x.childLanes=0,x.lanes=I,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=U.childLanes,x.lanes=U.lanes,x.child=U.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=U.memoizedProps,x.memoizedState=U.memoizedState,x.updateQueue=U.updateQueue,x.type=U.type,I=U.dependencies,x.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),E=E.sibling;return bt(yr,yr.current&1|2),f.child}d=d.sibling}I.tail!==null&&Vr()>Po&&(f.flags|=128,E=!0,Va(I,!1),f.lanes=4194304)}else{if(!E)if(d=Uf(U),d!==null){if(f.flags|=128,E=!0,d=d.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),Va(I,!0),I.tail===null&&I.tailMode==="hidden"&&!U.alternate&&!pr)return Pr(f),null}else 2*Vr()-I.renderingStartTime>Po&&x!==1073741824&&(f.flags|=128,E=!0,Va(I,!1),f.lanes=4194304);I.isBackwards?(U.sibling=f.child,f.child=U):(d=I.last,d!==null?d.sibling=U:f.child=U,I.last=U)}return I.tail!==null?(f=I.tail,I.rendering=f,I.tail=f.sibling,I.renderingStartTime=Vr(),f.sibling=null,d=yr.current,bt(yr,E?d&1|2:d&1),f):(Pr(f),null);case 22:case 23:return nd(),E=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==E&&(f.flags|=8192),E&&(f.mode&1)!==0?(Si&1073741824)!==0&&(Pr(f),Qt&&f.subtreeFlags&6&&(f.flags|=8192)):Pr(f),null;case 24:return null;case 25:return null}throw Error(a(156,f.tag))}var lm=l.ReactCurrentOwner,qr=!1;function Mr(d,f,x,E){f.child=d===null?Av(f,null,x,E):za(f,d.child,x,E)}function or(d,f,x,E,I){x=x.render;var U=f.ref;return cc(f,I),E=yc(d,f,x,E,U,I),x=Co(),d!==null&&!qr?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~I,Ji(d,f,I)):(pr&&x&&Jp(f),f.flags|=1,Mr(d,f,E,I),f.child)}function ir(d,f,x,E,I){if(d===null){var U=x.type;return typeof U=="function"&&!oh(U)&&U.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=U,ja(d,f,U,E,I)):(d=lh(x.type,null,E,f,f.mode,I),d.ref=f.ref,d.return=f,f.child=d)}if(U=d.child,(d.lanes&I)===0){var te=U.memoizedProps;if(x=x.compare,x=x!==null?x:Ks,x(te,E)&&d.ref===f.ref)return Ji(d,f,I)}return f.flags|=1,d=$a(U,E),d.ref=f.ref,d.return=f,f.child=d}function ja(d,f,x,E,I){if(d!==null&&Ks(d.memoizedProps,E)&&d.ref===f.ref)if(qr=!1,(d.lanes&I)!==0)(d.flags&131072)!==0&&(qr=!0);else return f.lanes=d.lanes,Ji(d,f,I);return Wa(d,f,x,E,I)}function li(d,f,x){var E=f.pendingProps,I=E.children,U=d!==null?d.memoizedState:null;if(E.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null},bt(wl,Si),Si|=x;else if((x&1073741824)!==0)f.memoizedState={baseLanes:0,cachePool:null},E=U!==null?U.baseLanes:x,bt(wl,Si),Si|=E;else return d=U!==null?U.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null},f.updateQueue=null,bt(wl,Si),Si|=d,null;else U!==null?(E=U.baseLanes|x,f.memoizedState=null):E=x,bt(wl,Si),Si|=E;return Mr(d,f,I,x),f.child}function Ni(d,f){var x=f.ref;(d===null&&x!==null||d!==null&&d.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function Wa(d,f,x,E,I){var U=$t(x)?_t:rn.current;return U=In(f,U),cc(f,I),x=yc(d,f,x,E,U,I),E=Co(),d!==null&&!qr?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~I,Ji(d,f,I)):(pr&&E&&Jp(f),f.flags|=1,Mr(d,f,x,I),f.child)}function ml(d,f,x,E,I){if($t(x)){var U=!0;Dn(f)}else U=!1;if(cc(f,I),f.stateNode===null)d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),gv(f,x,E),Xp(f,x,E,I),E=!0;else if(d===null){var te=f.stateNode,Ae=f.memoizedProps;te.props=Ae;var ze=te.context,ct=x.contextType;typeof ct=="object"&&ct!==null?ct=Wi(ct):(ct=$t(x)?_t:rn.current,ct=In(f,ct));var Ot=x.getDerivedStateFromProps,un=typeof Ot=="function"||typeof te.getSnapshotBeforeUpdate=="function";un||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Ae!==E||ze!==ct)&&vv(f,te,E,ct),Is=!1;var tn=f.memoizedState;te.state=tn,Pf(f,E,te,I),ze=f.memoizedState,Ae!==E||tn!==ze||Tt.current||Is?(typeof Ot=="function"&&(jp(f,x,Ot,E),ze=f.memoizedState),(Ae=Is||Wp(f,x,Ae,E,tn,ze,ct))?(un||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(f.flags|=4194308)):(typeof te.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=ze),te.props=E,te.state=ze,te.context=ct,E=Ae):(typeof te.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{te=f.stateNode,Vp(d,f),Ae=f.memoizedProps,ct=f.type===f.elementType?Ae:ji(f.type,Ae),te.props=ct,un=f.pendingProps,tn=te.context,ze=x.contextType,typeof ze=="object"&&ze!==null?ze=Wi(ze):(ze=$t(x)?_t:rn.current,ze=In(f,ze));var Sn=x.getDerivedStateFromProps;(Ot=typeof Sn=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Ae!==un||tn!==ze)&&vv(f,te,E,ze),Is=!1,tn=f.memoizedState,te.state=tn,Pf(f,E,te,I);var It=f.memoizedState;Ae!==un||tn!==It||Tt.current||Is?(typeof Sn=="function"&&(jp(f,x,Sn,E),It=f.memoizedState),(ct=Is||Wp(f,x,ct,E,tn,It,ze)||!1)?(Ot||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(E,It,ze),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(E,It,ze)),typeof te.componentDidUpdate=="function"&&(f.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof te.componentDidUpdate!="function"||Ae===d.memoizedProps&&tn===d.memoizedState||(f.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Ae===d.memoizedProps&&tn===d.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=It),te.props=E,te.state=It,te.context=ze,E=ct):(typeof te.componentDidUpdate!="function"||Ae===d.memoizedProps&&tn===d.memoizedState||(f.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Ae===d.memoizedProps&&tn===d.memoizedState||(f.flags|=1024),E=!1)}return Ai(d,f,x,E,U,I)}function Ai(d,f,x,E,I,U){Ni(d,f);var te=(f.flags&128)!==0;if(!E&&!te)return I&&Wt(f,x,!1),Ji(d,f,U);E=f.stateNode,lm.current=f;var Ae=te&&typeof x.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,d!==null&&te?(f.child=za(f,d.child,null,U),f.child=za(f,null,Ae,U)):Mr(d,f,Ae,U),f.memoizedState=E.state,I&&Wt(f,x,!0),f.child}function Vu(d){var f=d.stateNode;f.pendingContext?_n(d,f.pendingContext,f.pendingContext!==f.context):f.context&&_n(d,f.context,!1),Of(d,f.containerInfo)}function cm(d,f,x,E,I){return hc(),Ff(I),f.flags|=256,Mr(d,f,x,E),f.child}var ju={dehydrated:null,treeContext:null,retryLane:0};function gl(d){return{baseLanes:d,cachePool:null}}function um(d,f,x){var E=f.pendingProps,I=yr.current,U=!1,te=(f.flags&128)!==0,Ae;if((Ae=te)||(Ae=d!==null&&d.memoizedState===null?!1:(I&2)!==0),Ae?(U=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(I|=1),bt(yr,I&1),d===null)return Mo(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((f.mode&1)===0?f.lanes=1:is(d)?f.lanes=8:f.lanes=1073741824,null):(I=E.children,d=E.fallback,U?(E=f.mode,U=f.child,I={mode:"hidden",children:I},(E&1)===0&&U!==null?(U.childLanes=0,U.pendingProps=I):U=sd(I,E,0,null),d=Tl(d,E,x,null),U.return=f,d.return=f,U.sibling=d,f.child=U,f.child.memoizedState=gl(x),f.memoizedState=ju,d):qs(f,I));if(I=d.memoizedState,I!==null){if(Ae=I.dehydrated,Ae!==null){if(te)return f.flags&256?(f.flags&=-257,Xu(d,f,x,Error(a(422)))):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(U=E.fallback,I=f.mode,E=sd({mode:"visible",children:E.children},I,0,null),U=Tl(U,I,x,null),U.flags|=2,E.return=f,U.return=f,E.sibling=U,f.child=E,(f.mode&1)!==0&&za(f,d.child,null,x),f.child.memoizedState=gl(x),f.memoizedState=ju,U);if((f.mode&1)===0)f=Xu(d,f,x,null);else if(is(Ae))f=Xu(d,f,x,Error(a(419)));else if(E=(x&d.childLanes)!==0,qr||E){if(E=Br,E!==null){switch(x&-x){case 4:U=2;break;case 16:U=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:U=32;break;case 536870912:U=268435456;break;default:U=0}E=(U&(E.suspendedLanes|x))!==0?0:U,E!==0&&E!==I.retryLane&&(I.retryLane=E,wi(d,E,-1))}sh(),f=Xu(d,f,x,Error(a(421)))}else Pi(Ae)?(f.flags|=128,f.child=d.child,f=Pv.bind(null,d),ss(Ae,f),f=null):(x=I.treeContext,Ze&&(oi=_o(Ae),Li=f,pr=!0,Bs=null,fc=!1,x!==null&&(Ps[as++]=Ua,Ps[as++]=ka,Ps[as++]=sl,Ua=x.id,ka=x.overflow,sl=f)),f=qs(f,f.pendingProps.children),f.flags|=4096);return f}return U?(E=$f(d,f,E.children,E.fallback,x),U=f.child,I=d.child.memoizedState,U.memoizedState=I===null?gl(x):{baseLanes:I.baseLanes|x,cachePool:null},U.childLanes=d.childLanes&~x,f.memoizedState=ju,E):(x=Wu(d,f,E.children,x),f.memoizedState=null,x)}return U?(E=$f(d,f,E.children,E.fallback,x),U=f.child,I=d.child.memoizedState,U.memoizedState=I===null?gl(x):{baseLanes:I.baseLanes|x,cachePool:null},U.childLanes=d.childLanes&~x,f.memoizedState=ju,E):(x=Wu(d,f,E.children,x),f.memoizedState=null,x)}function qs(d,f){return f=sd({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function Wu(d,f,x,E){var I=d.child;return d=I.sibling,x=$a(I,{mode:"visible",children:x}),(f.mode&1)===0&&(x.lanes=E),x.return=f,x.sibling=null,d!==null&&(E=f.deletions,E===null?(f.deletions=[d],f.flags|=16):E.push(d)),f.child=x}function $f(d,f,x,E,I){var U=f.mode;d=d.child;var te=d.sibling,Ae={mode:"hidden",children:x};return(U&1)===0&&f.child!==d?(x=f.child,x.childLanes=0,x.pendingProps=Ae,f.deletions=null):(x=$a(d,Ae),x.subtreeFlags=d.subtreeFlags&14680064),te!==null?E=$a(te,E):(E=Tl(E,U,I,null),E.flags|=2),E.return=f,x.return=f,x.sibling=E,f.child=x,E}function Xu(d,f,x,E){return E!==null&&Ff(E),za(f,d.child,null,x),d=qs(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function bv(d,f,x){d.lanes|=f;var E=d.alternate;E!==null&&(E.lanes|=f),il(d.return,f,x)}function ya(d,f,x,E,I){var U=d.memoizedState;U===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:I}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=E,U.tail=x,U.tailMode=I)}function vl(d,f,x){var E=f.pendingProps,I=E.revealOrder,U=E.tail;if(Mr(d,f,E.children,x),E=yr.current,(E&2)!==0)E=E&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&bv(d,x,f);else if(d.tag===19)bv(d,x,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}E&=1}if(bt(yr,E),(f.mode&1)===0)f.memoizedState=null;else switch(I){case"forwards":for(x=f.child,I=null;x!==null;)d=x.alternate,d!==null&&Uf(d)===null&&(I=x),x=x.sibling;x=I,x===null?(I=f.child,f.child=null):(I=x.sibling,x.sibling=null),ya(f,!1,I,x,U);break;case"backwards":for(x=null,I=f.child,f.child=null;I!==null;){if(d=I.alternate,d!==null&&Uf(d)===null){f.child=I;break}d=I.sibling,I.sibling=x,x=I,I=d}ya(f,!0,x,null,U);break;case"together":ya(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ji(d,f,x){if(d!==null&&(f.dependencies=d.dependencies),xa|=f.lanes,(x&f.childLanes)===0)return null;if(d!==null&&f.child!==d.child)throw Error(a(153));if(f.child!==null){for(d=f.child,x=$a(d,d.pendingProps),f.child=x,x.return=f;d.sibling!==null;)d=d.sibling,x=x.sibling=$a(d,d.pendingProps),x.return=f;x.sibling=null}return f.child}function eh(d,f,x){switch(f.tag){case 3:Vu(f),hc();break;case 5:Sv(f);break;case 1:$t(f.type)&&Dn(f);break;case 4:Of(f,f.stateNode.containerInfo);break;case 10:rl(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(bt(yr,yr.current&1),f.flags|=128,null):(x&f.child.childLanes)!==0?um(d,f,x):(bt(yr,yr.current&1),d=Ji(d,f,x),d!==null?d.sibling:null);bt(yr,yr.current&1);break;case 19:if(E=(x&f.childLanes)!==0,(d.flags&128)!==0){if(E)return vl(d,f,x);f.flags|=128}var I=f.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),bt(yr,yr.current),E)break;return null;case 22:case 23:return f.lanes=0,li(d,f,x)}return Ji(d,f,x)}function th(d,f){switch(Kp(f),f.tag){case 1:return $t(f.type)&&Un(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return vc(),dt(Tt),dt(rn),cl(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 5:return Qp(f),null;case 13:if(dt(yr),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(a(340));hc()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return dt(yr),null;case 4:return vc(),null;case 10:return Bu(f.type._context),null;case 22:case 23:return nd(),null;case 24:return null;default:return null}}var Fi=!1,$r=!1,yl=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Ds(d,f){var x=d.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){Ui(d,f,E)}else x.current=null}function Xa(d,f,x){try{x()}catch(E){Ui(d,f,E)}}var dm=!1;function fm(d,f){for(ge(d.containerInfo),mt=f;mt!==null;)if(d=mt,f=d.child,(d.subtreeFlags&1028)!==0&&f!==null)f.return=d,mt=f;else for(;mt!==null;){d=mt;try{var x=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,I=x.memoizedState,U=d.stateNode,te=U.getSnapshotBeforeUpdate(d.elementType===d.type?E:ji(d.type,E),I);U.__reactInternalSnapshotBeforeUpdate=te}break;case 3:Qt&&Ge(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ae){Ui(d,d.return,Ae)}if(f=d.sibling,f!==null){f.return=d.return,mt=f;break}mt=d.return}return x=dm,dm=!1,x}function Ja(d,f,x){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var I=E=E.next;do{if((I.tag&d)===d){var U=I.destroy;I.destroy=void 0,U!==void 0&&Xa(f,x,U)}I=I.next}while(I!==E)}}function ci(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&d)===d){var E=x.create;x.destroy=E()}x=x.next}while(x!==f)}}function Oi(d){var f=d.ref;if(f!==null){var x=d.stateNode;switch(d.tag){case 5:d=he(x);break;default:d=x}typeof f=="function"?f(d):f.current=d}}function ur(d,f,x){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(Tu,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(d=f.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var E=d=d.next;do{var I=E,U=I.destroy;I=I.tag,U!==void 0&&((I&2)!==0||(I&4)!==0)&&Xa(f,x,U),E=E.next}while(E!==d)}break;case 1:if(Ds(f,x),d=f.stateNode,typeof d.componentWillUnmount=="function")try{d.props=f.memoizedProps,d.state=f.memoizedState,d.componentWillUnmount()}catch(te){Ui(f,x,te)}break;case 5:Ds(f,x);break;case 4:Qt?mm(d,f,x):Ke&&Ke&&(f=f.stateNode.containerInfo,x=vt(f),$n(f,x))}}function Ls(d,f,x){for(var E=f;;)if(ur(d,E,x),E.child===null||Qt&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function hm(d){var f=d.alternate;f!==null&&(d.alternate=null,hm(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&At(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function pm(d){return d.tag===5||d.tag===3||d.tag===4}function nh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||pm(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function rh(d){if(Qt){e:{for(var f=d.return;f!==null;){if(pm(f))break e;f=f.return}throw Error(a(160))}var x=f;switch(x.tag){case 5:f=x.stateNode,x.flags&32&&(De(f),x.flags&=-33),x=nh(d),Mc(d,x,f);break;case 3:case 4:f=x.stateNode.containerInfo,x=nh(d),ih(d,x,f);break;default:throw Error(a(161))}}}function ih(d,f,x){var E=d.tag;if(E===5||E===6)d=d.stateNode,f?Bt(x,d,f):$e(x,d);else if(E!==4&&(d=d.child,d!==null))for(ih(d,f,x),d=d.sibling;d!==null;)ih(d,f,x),d=d.sibling}function Mc(d,f,x){var E=d.tag;if(E===5||E===6)d=d.stateNode,f?zt(x,d,f):Ye(x,d);else if(E!==4&&(d=d.child,d!==null))for(Mc(d,f,x),d=d.sibling;d!==null;)Mc(d,f,x),d=d.sibling}function mm(d,f,x){for(var E=f,I=!1,U,te;;){if(!I){I=E.return;e:for(;;){if(I===null)throw Error(a(160));switch(U=I.stateNode,I.tag){case 5:te=!1;break e;case 3:U=U.containerInfo,te=!0;break e;case 4:U=U.containerInfo,te=!0;break e}I=I.return}I=!0}if(E.tag===5||E.tag===6)Ls(d,E,x),te?de(U,E.stateNode):St(U,E.stateNode);else if(E.tag===18)te?H(U,E.stateNode):ot(U,E.stateNode);else if(E.tag===4){if(E.child!==null){U=E.stateNode.containerInfo,te=!0,E.child.return=E,E=E.child;continue}}else if(ur(d,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(I=!1)}E.sibling.return=E.return,E=E.sibling}}function Ro(d,f){if(Qt){switch(f.tag){case 0:case 11:case 14:case 15:Ja(3,f,f.return),ci(3,f),Ja(5,f,f.return);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var E=f.memoizedProps;d=d!==null?d.memoizedProps:E;var I=f.type,U=f.updateQueue;f.updateQueue=null,U!==null&&xt(x,U,I,d,E,f)}return;case 6:if(f.stateNode===null)throw Error(a(162));x=f.memoizedProps,kt(f.stateNode,d!==null?d.memoizedProps:x,x);return;case 3:Ze&&d!==null&&d.memoizedState.isDehydrated&&Ue(f.stateNode.containerInfo);return;case 12:return;case 13:Ec(f);return;case 19:Ec(f);return;case 17:return}throw Error(a(163))}switch(f.tag){case 0:case 11:case 14:case 15:Ja(3,f,f.return),ci(3,f),Ja(5,f,f.return);return;case 12:return;case 13:Ec(f);return;case 19:Ec(f);return;case 3:Ze&&d!==null&&d.memoizedState.isDehydrated&&Ue(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ke){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,$n(f.containerInfo,f.pendingChildren);break e}throw Error(a(163))}}function Ec(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var x=d.stateNode;x===null&&(x=d.stateNode=new yl),f.forEach(function(E){var I=Bv.bind(null,d,E);x.has(E)||(x.add(E),E.then(I,I))})}}function $x(d,f){for(mt=f;mt!==null;){f=mt;var x=f.deletions;if(x!==null)for(var E=0;E<x.length;E++){var I=x[E];try{var U=d;Qt?mm(U,I,f):Ls(U,I,f);var te=I.alternate;te!==null&&(te.return=null),I.return=null}catch(Xt){Ui(I,f,Xt)}}if(x=f.child,(f.subtreeFlags&12854)!==0&&x!==null)x.return=f,mt=x;else for(;mt!==null;){f=mt;try{var Ae=f.flags;if(Ae&32&&Qt&&De(f.stateNode),Ae&512){var ze=f.alternate;if(ze!==null){var ct=ze.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Ae&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Ot=f.alternate;(Ot===null||Ot.memoizedState===null)&&($u=Vr())}break;case 22:var un=f.memoizedState!==null,tn=f.alternate,Sn=tn!==null&&tn.memoizedState!==null;if(x=f,Qt){e:if(E=x,I=un,U=null,Qt)for(var It=E;;){if(It.tag===5){if(U===null){U=It;var fi=It.stateNode;I?it(fi):Ce(It.stateNode,It.memoizedProps)}}else if(It.tag===6){if(U===null){var ps=It.stateNode;I?le(ps):Pe(ps,It.memoizedProps)}}else if((It.tag!==22&&It.tag!==23||It.memoizedState===null||It===E)&&It.child!==null){It.child.return=It,It=It.child;continue}if(It===E)break;for(;It.sibling===null;){if(It.return===null||It.return===E)break e;U===It&&(U=null),It=It.return}U===It&&(U=null),It.sibling.return=It.return,It=It.sibling}}if(un&&!Sn&&(x.mode&1)!==0){mt=x;for(var Re=x.child;Re!==null;){for(x=mt=Re;mt!==null;){E=mt;var Me=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Ja(4,E,E.return);break;case 1:Ds(E,E.return);var Ne=E.stateNode;if(typeof Ne.componentWillUnmount=="function"){var Et=E.return;try{Ne.props=E.memoizedProps,Ne.state=E.memoizedState,Ne.componentWillUnmount()}catch(Xt){Ui(E,Et,Xt)}}break;case 5:Ds(E,E.return);break;case 22:if(E.memoizedState!==null){vm(x);continue}}Me!==null?(Me.return=E,mt=Me):vm(x)}Re=Re.sibling}}}switch(Ae&4102){case 2:rh(f),f.flags&=-3;break;case 6:rh(f),f.flags&=-3,Ro(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Ro(f.alternate,f);break;case 4:Ro(f.alternate,f)}}catch(Xt){Ui(f,f.return,Xt)}if(x=f.sibling,x!==null){x.return=f.return,mt=x;break}mt=f.return}}}function Ju(d,f,x){mt=d,Ku(d)}function Ku(d,f,x){for(var E=(d.mode&1)!==0;mt!==null;){var I=mt,U=I.child;if(I.tag===22&&E){var te=I.memoizedState!==null||Fi;if(!te){var Ae=I.alternate,ze=Ae!==null&&Ae.memoizedState!==null||$r;Ae=Fi;var ct=$r;if(Fi=te,($r=ze)&&!ct)for(mt=I;mt!==null;)te=mt,ze=te.child,te.tag===22&&te.memoizedState!==null?xl(I):ze!==null?(ze.return=te,mt=ze):xl(I);for(;U!==null;)mt=U,Ku(U),U=U.sibling;mt=I,Fi=Ae,$r=ct}gm(d)}else(I.subtreeFlags&8772)!==0&&U!==null?(U.return=I,mt=U):gm(d)}}function gm(d){for(;mt!==null;){var f=mt;if((f.flags&8772)!==0){var x=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:$r||ci(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!$r)if(x===null)E.componentDidMount();else{var I=f.elementType===f.type?x.memoizedProps:ji(f.type,x.memoizedProps);E.componentDidUpdate(I,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var U=f.updateQueue;U!==null&&pv(f,U,E);break;case 3:var te=f.updateQueue;if(te!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=he(f.child.stateNode);break;case 1:x=f.child.stateNode}pv(f,te,x)}break;case 5:var Ae=f.stateNode;x===null&&f.flags&4&&qe(Ae,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Ze&&f.memoizedState===null){var ze=f.alternate;if(ze!==null){var ct=ze.memoizedState;if(ct!==null){var Ot=ct.dehydrated;Ot!==null&&ke(Ot)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}$r||f.flags&512&&Oi(f)}catch(un){Ui(f,f.return,un)}}if(f===d){mt=null;break}if(x=f.sibling,x!==null){x.return=f.return,mt=x;break}mt=f.return}}function vm(d){for(;mt!==null;){var f=mt;if(f===d){mt=null;break}var x=f.sibling;if(x!==null){x.return=f.return,mt=x;break}mt=f.return}}function xl(d){for(;mt!==null;){var f=mt;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{ci(4,f)}catch(ze){Ui(f,x,ze)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var I=f.return;try{E.componentDidMount()}catch(ze){Ui(f,I,ze)}}var U=f.return;try{Oi(f)}catch(ze){Ui(f,U,ze)}break;case 5:var te=f.return;try{Oi(f)}catch(ze){Ui(f,te,ze)}}}catch(ze){Ui(f,f.return,ze)}if(f===d){mt=null;break}var Ae=f.sibling;if(Ae!==null){Ae.return=f.return,mt=Ae;break}mt=f.return}}var Yu=0,_l=1,Al=2,Ka=3,Cc=4;if(typeof Symbol=="function"&&Symbol.for){var Sl=Symbol.for;Yu=Sl("selector.component"),_l=Sl("selector.has_pseudo_class"),Al=Sl("selector.role"),Ka=Sl("selector.test_id"),Cc=Sl("selector.text")}function Zu(d){var f=ee(d);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(d=N(d),d===null)throw Error(a(362));return d.stateNode.current}function Qu(d,f){switch(f.$$typeof){case Yu:if(d.type===f.value)return!0;break;case _l:e:{f=f.value,d=[d,0];for(var x=0;x<d.length;){var E=d[x++],I=d[x++],U=f[I];if(E.tag!==5||!ye(E)){for(;U!=null&&Qu(E,U);)I++,U=f[I];if(I===f.length){f=!0;break e}else for(E=E.child;E!==null;)d.push(E,I),E=E.sibling}}f=!1}return f;case Al:if(d.tag===5&&xe(d.stateNode,f.value))return!0;break;case Cc:if((d.tag===5||d.tag===6)&&(d=Q(d),d!==null&&0<=d.indexOf(f.value)))return!0;break;case Ka:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Io(d){switch(d.$$typeof){case Yu:return"<"+(V(d.value)||"Unknown")+">";case _l:return":has("+(Io(d)||"")+")";case Al:return'[role="'+d.value+'"]';case Cc:return'"'+d.value+'"';case Ka:return'[data-testname="'+d.value+'"]';default:throw Error(a(365))}}function us(d,f){var x=[];d=[d,0];for(var E=0;E<d.length;){var I=d[E++],U=d[E++],te=f[U];if(I.tag!==5||!ye(I)){for(;te!=null&&Qu(I,te);)U++,te=f[U];if(U===f.length)x.push(I);else for(I=I.child;I!==null;)d.push(I,U),I=I.sibling}}return x}function Ya(d,f){if(!ht)throw Error(a(363));d=Zu(d),d=us(d,f),f=[],d=Array.from(d);for(var x=0;x<d.length;){var E=d[x++];if(E.tag===5)ye(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)d.push(E),E=E.sibling}return f}var ym=Math.ceil,qu=l.ReactCurrentDispatcher,$s=l.ReactCurrentOwner,er=l.ReactCurrentBatchConfig,vn=0,Br=null,tr=null,mr=0,Si=0,wl=lt(0),Er=0,bc=null,xa=0,ds=0,Ml=0,Za=null,Nr=null,$u=0,Po=1/0;function El(){Po=Vr()+500}var Tc=!1,dr=null,ea=null,Rc=!1,_a=null,Cl=0,bl=0,Qa=null,lr=-1,Cr=0;function Gn(){return(vn&6)!==0?Vr():lr!==-1?lr:lr=Vr()}function ta(d){return(d.mode&1)===0?1:(vn&2)!==0&&mr!==0?mr&-mr:hv.transition!==null?(Cr===0&&(d=ha,ha<<=1,(ha&4194240)===0&&(ha=64),Cr=d),Cr):(d=Mn,d!==0?d:et())}function wi(d,f,x){if(50<bl)throw bl=0,Qa=null,Error(a(185));var E=Bo(d,f);return E===null?null:($o(E,f,x),((vn&2)===0||E!==Br)&&(E===Br&&((vn&2)===0&&(ds|=f),Er===4&&di(E,mr)),Ki(E,x),f===1&&vn===0&&(d.mode&1)===0&&(El(),Ef&&Ts())),E)}function Bo(d,f){d.lanes|=f;var x=d.alternate;for(x!==null&&(x.lanes|=f),x=d,d=d.return;d!==null;)d.childLanes|=f,x=d.alternate,x!==null&&(x.childLanes|=f),x=d,d=d.return;return x.tag===3?x.stateNode:null}function Ki(d,f){var x=d.callbackNode;fv(d,f);var E=bu(d,d===Br?mr:0);if(E===0)x!==null&&lc(x),d.callbackNode=null,d.callbackPriority=0;else if(f=E&-E,d.callbackPriority!==f){if(x!=null&&lc(x),f===1)d.tag===0?bf(fs.bind(null,d)):Cf(fs.bind(null,d)),at?Kt(function(){vn===0&&Ts()}):el(tl,Ts),x=null;else{switch(Na(E)){case 1:x=tl;break;case 4:x=Zx;break;case 16:x=wf;break;case 536870912:x=Mf;break;default:x=wf}x=ah(x,ui.bind(null,d))}d.callbackPriority=f,d.callbackNode=x}}function ui(d,f){if(lr=-1,Cr=0,(vn&6)!==0)throw Error(a(327));var x=d.callbackNode;if(Aa()&&d.callbackNode!==x)return null;var E=bu(d,d===Br?mr:0);if(E===0)return null;if((E&30)!==0||(E&d.expiredLanes)!==0||f)f=rd(d,E);else{f=E;var I=vn;vn|=2;var U=Am();(Br!==d||mr!==f)&&(El(),qa(d,f));do try{Rv();break}catch(Ae){_m(d,Ae)}while(!0);Di(),qu.current=U,vn=I,tr!==null?f=0:(Br=null,mr=0,f=Er)}if(f!==0){if(f===2&&(I=_f(d),I!==0&&(E=I,f=ed(d,I))),f===1)throw x=bc,qa(d,0),di(d,E),Ki(d,Vr()),x;if(f===6)di(d,E);else{if(I=d.current.alternate,(E&30)===0&&!xm(I)&&(f=rd(d,E),f===2&&(U=_f(d),U!==0&&(E=U,f=ed(d,U))),f===1))throw x=bc,qa(d,0),di(d,E),Ki(d,Vr()),x;switch(d.finishedWork=I,d.finishedLanes=E,f){case 0:case 1:throw Error(a(345));case 2:na(d,Nr);break;case 3:if(di(d,E),(E&130023424)===E&&(f=$u+500-Vr(),10<f)){if(bu(d,0)!==0)break;if(I=d.suspendedLanes,(I&E)!==E){Gn(),d.pingedLanes|=d.suspendedLanes&I;break}d.timeoutHandle=He(na.bind(null,d,Nr),f);break}na(d,Nr);break;case 4:if(di(d,E),(E&4194240)===E)break;for(f=d.eventTimes,I=-1;0<E;){var te=31-bn(E);U=1<<te,te=f[te],te>I&&(I=te),E&=~U}if(E=I,E=Vr()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*ym(E/1960))-E,10<E){d.timeoutHandle=He(na.bind(null,d,Nr),E);break}na(d,Nr);break;case 5:na(d,Nr);break;default:throw Error(a(329))}}}return Ki(d,Vr()),d.callbackNode===x?ui.bind(null,d):null}function ed(d,f){var x=Za;return d.current.memoizedState.isDehydrated&&(qa(d,f).flags|=256),d=rd(d,f),d!==2&&(f=Nr,Nr=x,f!==null&&td(f)),d}function td(d){Nr===null?Nr=d:Nr.push.apply(Nr,d)}function xm(d){for(var f=d;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var I=x[E],U=I.getSnapshot;I=I.value;try{if(!Bi(U(),I))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function di(d,f){for(f&=~Ml,f&=~ds,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var x=31-bn(f),E=1<<x;d[x]=-1,f&=~E}}function fs(d){if((vn&6)!==0)throw Error(a(327));Aa();var f=bu(d,0);if((f&1)===0)return Ki(d,Vr()),null;var x=rd(d,f);if(d.tag!==0&&x===2){var E=_f(d);E!==0&&(f=E,x=ed(d,E))}if(x===1)throw x=bc,qa(d,0),di(d,f),Ki(d,Vr()),x;if(x===6)throw Error(a(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,na(d,Nr),Ki(d,Vr()),null}function Ic(d){_a!==null&&_a.tag===0&&(vn&6)===0&&Aa();var f=vn;vn|=1;var x=er.transition,E=Mn;try{if(er.transition=null,Mn=1,d)return d()}finally{Mn=E,er.transition=x,vn=f,(vn&6)===0&&Ts()}}function nd(){Si=wl.current,dt(wl)}function qa(d,f){d.finishedWork=null,d.finishedLanes=0;var x=d.timeoutHandle;if(x!==yt&&(d.timeoutHandle=yt,rt(x)),tr!==null)for(x=tr.return;x!==null;){var E=x;switch(Kp(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Un();break;case 3:vc(),dt(Tt),dt(rn),cl();break;case 5:Qp(E);break;case 4:vc();break;case 13:dt(yr);break;case 19:dt(yr);break;case 10:Bu(E.type._context);break;case 22:case 23:nd()}x=x.return}if(Br=d,tr=d=$a(d.current,null),mr=Si=f,Er=0,bc=null,Ml=ds=xa=0,Nr=Za=null,Rs!==null){for(f=0;f<Rs.length;f++)if(x=Rs[f],E=x.interleaved,E!==null){x.interleaved=null;var I=E.next,U=x.pending;if(U!==null){var te=U.next;U.next=I,E.next=te}x.pending=E}Rs=null}return d}function _m(d,f){do{var x=tr;try{if(Di(),Lu.current=Sc,kf){for(var E=xr.memoizedState;E!==null;){var I=E.queue;I!==null&&(I.pending=null),E=E.next}kf=!1}if(ul=0,Zr=Yr=xr=null,ga=!1,dl=0,$s.current=null,x===null||x.return===null){Er=1,bc=f,tr=null;break}e:{var U=d,te=x.return,Ae=x,ze=f;if(f=mr,Ae.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ct=ze,Ot=Ae,un=Ot.tag;if((Ot.mode&1)===0&&(un===0||un===11||un===15)){var tn=Ot.alternate;tn?(Ot.updateQueue=tn.updateQueue,Ot.memoizedState=tn.memoizedState,Ot.lanes=tn.lanes):(Ot.updateQueue=null,Ot.memoizedState=null)}var Sn=om(te);if(Sn!==null){Sn.flags&=-257,hl(Sn,te,Ae,U,f),Sn.mode&1&&Ga(U,ct,f),f=Sn,ze=ct;var It=f.updateQueue;if(It===null){var fi=new Set;fi.add(ze),f.updateQueue=fi}else It.add(ze);break e}else{if((f&1)===0){Ga(U,ct,f),sh();break e}ze=Error(a(426))}}else if(pr&&Ae.mode&1){var ps=om(te);if(ps!==null){(ps.flags&65536)===0&&(ps.flags|=256),hl(ps,te,Ae,U,f),Ff(ze);break e}}U=ze,Er!==4&&(Er=2),Za===null?Za=[U]:Za.push(U),ze=am(ze,Ae),Ae=te;do{switch(Ae.tag){case 3:Ae.flags|=65536,f&=-f,Ae.lanes|=f;var Re=Cv(Ae,ze,f);If(Ae,Re);break e;case 1:U=ze;var Me=Ae.type,Ne=Ae.stateNode;if((Ae.flags&128)===0&&(typeof Me.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(ea===null||!ea.has(Ne)))){Ae.flags|=65536,f&=-f,Ae.lanes|=f;var Et=Yf(Ae,U,f);If(Ae,Et);break e}}Ae=Ae.return}while(Ae!==null)}wm(x)}catch(Xt){f=Xt,tr===x&&x!==null&&(tr=x=x.return);continue}break}while(!0)}function Am(){var d=qu.current;return qu.current=Sc,d===null?Sc:d}function sh(){(Er===0||Er===3||Er===2)&&(Er=4),Br===null||(xa&268435455)===0&&(ds&268435455)===0||di(Br,mr)}function rd(d,f){var x=vn;vn|=2;var E=Am();Br===d&&mr===f||qa(d,f);do try{Tv();break}catch(I){_m(d,I)}while(!0);if(Di(),vn=x,qu.current=E,tr!==null)throw Error(a(261));return Br=null,mr=0,Er}function Tv(){for(;tr!==null;)Sm(tr)}function Rv(){for(;tr!==null&&!Ao();)Sm(tr)}function Sm(d){var f=Cm(d.alternate,d,Si);d.memoizedProps=d.pendingProps,f===null?wm(d):tr=f,$s.current=null}function wm(d){var f=d;do{var x=f.alternate;if(d=f.return,(f.flags&32768)===0){if(x=qf(x,f,Si),x!==null){tr=x;return}}else{if(x=th(x,f),x!==null){x.flags&=32767,tr=x;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Er=6,tr=null;return}}if(f=f.sibling,f!==null){tr=f;return}tr=f=d}while(f!==null);Er===0&&(Er=5)}function na(d,f){var x=Mn,E=er.transition;try{er.transition=null,Mn=1,Iv(d,f,x)}finally{er.transition=E,Mn=x}return null}function Iv(d,f,x){do Aa();while(_a!==null);if((vn&6)!==0)throw Error(a(327));var E=d.finishedWork,I=d.finishedLanes;if(E===null)return null;if(d.finishedWork=null,d.finishedLanes=0,E===d.current)throw Error(a(177));d.callbackNode=null,d.callbackPriority=0;var U=E.lanes|E.childLanes;if(Sf(d,U),d===Br&&(tr=Br=null,mr=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||Rc||(Rc=!0,ah(wf,function(){return Aa(),null})),U=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||U){U=er.transition,er.transition=null;var te=Mn;Mn=1;var Ae=vn;vn|=4,$s.current=null,fm(d,E),$x(d,E),se(d.containerInfo),d.current=E,Ju(E),Yx(),vn=Ae,Mn=te,er.transition=U}else d.current=E;if(Rc&&(Rc=!1,_a=d,Cl=I),U=d.pendingLanes,U===0&&(ea=null),Ru(E.stateNode),Ki(d,Vr()),f!==null)for(x=d.onRecoverableError,E=0;E<f.length;E++)x(f[E]);if(Tc)throw Tc=!1,d=dr,dr=null,d;return(Cl&1)!==0&&d.tag!==0&&Aa(),U=d.pendingLanes,(U&1)!==0?d===Qa?bl++:(bl=0,Qa=d):bl=0,Ts(),null}function Aa(){if(_a!==null){var d=Na(Cl),f=er.transition,x=Mn;try{if(er.transition=null,Mn=16>d?16:d,_a===null)var E=!1;else{if(d=_a,_a=null,Cl=0,(vn&6)!==0)throw Error(a(331));var I=vn;for(vn|=4,mt=d.current;mt!==null;){var U=mt,te=U.child;if((mt.flags&16)!==0){var Ae=U.deletions;if(Ae!==null){for(var ze=0;ze<Ae.length;ze++){var ct=Ae[ze];for(mt=ct;mt!==null;){var Ot=mt;switch(Ot.tag){case 0:case 11:case 15:Ja(8,Ot,U)}var un=Ot.child;if(un!==null)un.return=Ot,mt=un;else for(;mt!==null;){Ot=mt;var tn=Ot.sibling,Sn=Ot.return;if(hm(Ot),Ot===ct){mt=null;break}if(tn!==null){tn.return=Sn,mt=tn;break}mt=Sn}}}var It=U.alternate;if(It!==null){var fi=It.child;if(fi!==null){It.child=null;do{var ps=fi.sibling;fi.sibling=null,fi=ps}while(fi!==null)}}mt=U}}if((U.subtreeFlags&2064)!==0&&te!==null)te.return=U,mt=te;else e:for(;mt!==null;){if(U=mt,(U.flags&2048)!==0)switch(U.tag){case 0:case 11:case 15:Ja(9,U,U.return)}var Re=U.sibling;if(Re!==null){Re.return=U.return,mt=Re;break e}mt=U.return}}var Me=d.current;for(mt=Me;mt!==null;){te=mt;var Ne=te.child;if((te.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=te,mt=Ne;else e:for(te=Me;mt!==null;){if(Ae=mt,(Ae.flags&2048)!==0)try{switch(Ae.tag){case 0:case 11:case 15:ci(9,Ae)}}catch(Xt){Ui(Ae,Ae.return,Xt)}if(Ae===te){mt=null;break e}var Et=Ae.sibling;if(Et!==null){Et.return=Ae.return,mt=Et;break e}mt=Ae.return}}if(vn=I,Ts(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(Tu,d)}catch{}E=!0}return E}finally{Mn=x,er.transition=f}}return!1}function id(d,f,x){f=am(x,f),f=Cv(d,f,1),So(d,f),f=Gn(),d=Bo(d,1),d!==null&&($o(d,1,f),Ki(d,f))}function Ui(d,f,x){if(d.tag===3)id(d,d,x);else for(;f!==null;){if(f.tag===3){id(f,d,x);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(ea===null||!ea.has(E))){d=am(x,d),d=Yf(f,d,1),So(f,d),d=Gn(),f=Bo(f,1),f!==null&&($o(f,1,d),Ki(f,d));break}}f=f.return}}function Mm(d,f,x){var E=d.pingCache;E!==null&&E.delete(f),f=Gn(),d.pingedLanes|=d.suspendedLanes&x,Br===d&&(mr&x)===x&&(Er===4||Er===3&&(mr&130023424)===mr&&500>Vr()-$u?qa(d,0):Ml|=x),Ki(d,f)}function Em(d,f){f===0&&((d.mode&1)===0?f=1:(f=An,An<<=1,(An&130023424)===0&&(An=4194304)));var x=Gn();d=Bo(d,f),d!==null&&($o(d,f,x),Ki(d,x))}function Pv(d){var f=d.memoizedState,x=0;f!==null&&(x=f.retryLane),Em(d,x)}function Bv(d,f){var x=0;switch(d.tag){case 13:var E=d.stateNode,I=d.memoizedState;I!==null&&(x=I.retryLane);break;case 19:E=d.stateNode;break;default:throw Error(a(314))}E!==null&&E.delete(f),Em(d,x)}var Cm;Cm=function(d,f,x){if(d!==null)if(d.memoizedProps!==f.pendingProps||Tt.current)qr=!0;else{if((d.lanes&x)===0&&(f.flags&128)===0)return qr=!1,eh(d,f,x);qr=(d.flags&131072)!==0}else qr=!1,pr&&(f.flags&1048576)!==0&&yv(f,Lf,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps;var I=In(f,rn.current);cc(f,x),I=yc(null,f,E,d,I,x);var U=Co();return f.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,$t(E)?(U=!0,Dn(f)):U=!1,f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,uc(f),I.updater=Bf,f.stateNode=I,I._reactInternals=f,Xp(f,E,d,x),f=Ai(null,f,E,!0,U,x)):(f.tag=0,pr&&U&&Jp(f),Mr(null,f,I,x),f=f.child),f;case 16:E=f.elementType;e:{switch(d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps,I=E._init,E=I(E._payload),f.type=E,I=f.tag=e_(E),d=ji(E,d),I){case 0:f=Wa(null,f,E,d,x);break e;case 1:f=ml(null,f,E,d,x);break e;case 11:f=or(null,f,E,d,x);break e;case 14:f=ir(null,f,E,ji(E.type,d),x);break e}throw Error(a(306,E,""))}return f;case 0:return E=f.type,I=f.pendingProps,I=f.elementType===E?I:ji(E,I),Wa(d,f,E,I,x);case 1:return E=f.type,I=f.pendingProps,I=f.elementType===E?I:ji(E,I),ml(d,f,E,I,x);case 3:e:{if(Vu(f),d===null)throw Error(a(387));E=f.pendingProps,U=f.memoizedState,I=U.element,Vp(d,f),Pf(f,E,null,x);var te=f.memoizedState;if(E=te.element,Ze&&U.isDehydrated)if(U={element:E,isDehydrated:!1,cache:te.cache,transitions:te.transitions},f.updateQueue.baseState=U,f.memoizedState=U,f.flags&256){I=Error(a(423)),f=cm(d,f,E,x,I);break e}else if(E!==I){I=Error(a(424)),f=cm(d,f,E,x,I);break e}else for(Ze&&(oi=qo(f.stateNode.containerInfo),Li=f,pr=!0,Bs=null,fc=!1),x=Av(f,null,E,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(hc(),E===I){f=Ji(d,f,x);break e}Mr(d,f,E,x)}f=f.child}return f;case 5:return Sv(f),d===null&&Mo(f),E=f.type,I=f.pendingProps,U=d!==null?d.memoizedProps:null,te=I.children,Le(E,I)?te=null:U!==null&&Le(E,U)&&(f.flags|=32),Ni(d,f),Mr(d,f,te,x),f.child;case 6:return d===null&&Mo(f),null;case 13:return um(d,f,x);case 4:return Of(f,f.stateNode.containerInfo),E=f.pendingProps,d===null?f.child=za(f,null,E,x):Mr(d,f,E,x),f.child;case 11:return E=f.type,I=f.pendingProps,I=f.elementType===E?I:ji(E,I),or(d,f,E,I,x);case 7:return Mr(d,f,f.pendingProps,x),f.child;case 8:return Mr(d,f,f.pendingProps.children,x),f.child;case 12:return Mr(d,f,f.pendingProps.children,x),f.child;case 10:e:{if(E=f.type._context,I=f.pendingProps,U=f.memoizedProps,te=I.value,rl(f,E,te),U!==null)if(Bi(U.value,te)){if(U.children===I.children&&!Tt.current){f=Ji(d,f,x);break e}}else for(U=f.child,U!==null&&(U.return=f);U!==null;){var Ae=U.dependencies;if(Ae!==null){te=U.child;for(var ze=Ae.firstContext;ze!==null;){if(ze.context===E){if(U.tag===1){ze=Oa(-1,x&-x),ze.tag=2;var ct=U.updateQueue;if(ct!==null){ct=ct.shared;var Ot=ct.pending;Ot===null?ze.next=ze:(ze.next=Ot.next,Ot.next=ze),ct.pending=ze}}U.lanes|=x,ze=U.alternate,ze!==null&&(ze.lanes|=x),il(U.return,x,f),Ae.lanes|=x;break}ze=ze.next}}else if(U.tag===10)te=U.type===f.type?null:U.child;else if(U.tag===18){if(te=U.return,te===null)throw Error(a(341));te.lanes|=x,Ae=te.alternate,Ae!==null&&(Ae.lanes|=x),il(te,x,f),te=U.sibling}else te=U.child;if(te!==null)te.return=U;else for(te=U;te!==null;){if(te===f){te=null;break}if(U=te.sibling,U!==null){U.return=te.return,te=U;break}te=te.return}U=te}Mr(d,f,I.children,x),f=f.child}return f;case 9:return I=f.type,E=f.pendingProps.children,cc(f,x),I=Wi(I),E=E(I),f.flags|=1,Mr(d,f,E,x),f.child;case 14:return E=f.type,I=ji(E,f.pendingProps),I=ji(E.type,I),ir(d,f,E,I,x);case 15:return ja(d,f,f.type,f.pendingProps,x);case 17:return E=f.type,I=f.pendingProps,I=f.elementType===E?I:ji(E,I),d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,$t(E)?(d=!0,Dn(f)):d=!1,cc(f,x),gv(f,E,I),Xp(f,E,I,x),Ai(null,f,E,!0,d,x);case 19:return vl(d,f,x);case 22:return li(d,f,x)}throw Error(a(156,f.tag))};function ah(d,f){return el(d,f)}function Dv(d,f,x,E){this.tag=d,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(d,f,x,E){return new Dv(d,f,x,E)}function oh(d){return d=d.prototype,!(!d||!d.isReactComponent)}function e_(d){if(typeof d=="function")return oh(d)?1:0;if(d!=null){if(d=d.$$typeof,d===M)return 11;if(d===T)return 14}return 2}function $a(d,f){var x=d.alternate;return x===null?(x=hs(d.tag,f,d.key,d.mode),x.elementType=d.elementType,x.type=d.type,x.stateNode=d.stateNode,x.alternate=d,d.alternate=x):(x.pendingProps=f,x.type=d.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=d.flags&14680064,x.childLanes=d.childLanes,x.lanes=d.lanes,x.child=d.child,x.memoizedProps=d.memoizedProps,x.memoizedState=d.memoizedState,x.updateQueue=d.updateQueue,f=d.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=d.sibling,x.index=d.index,x.ref=d.ref,x}function lh(d,f,x,E,I,U){var te=2;if(E=d,typeof d=="function")oh(d)&&(te=1);else if(typeof d=="string")te=5;else e:switch(d){case p:return Tl(x.children,I,U,f);case m:te=8,I|=8;break;case v:return d=hs(12,x,f,I|2),d.elementType=v,d.lanes=U,d;case w:return d=hs(13,x,f,I),d.elementType=w,d.lanes=U,d;case S:return d=hs(19,x,f,I),d.elementType=S,d.lanes=U,d;case C:return sd(x,I,U,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case y:te=10;break e;case _:te=9;break e;case M:te=11;break e;case T:te=14;break e;case R:te=16,E=null;break e}throw Error(a(130,d==null?d:typeof d,""))}return f=hs(te,x,f,I),f.elementType=d,f.type=E,f.lanes=U,f}function Tl(d,f,x,E){return d=hs(7,d,E,f),d.lanes=x,d}function sd(d,f,x,E){return d=hs(22,d,E,f),d.elementType=C,d.lanes=x,d.stateNode={},d}function ch(d,f,x){return d=hs(6,d,null,f),d.lanes=x,d}function uh(d,f,x){return f=hs(4,d.children!==null?d.children:[],d.key,f),f.lanes=x,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function dh(d,f,x,E,I){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=yt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Af(0),this.expirationTimes=Af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Af(0),this.identifierPrefix=E,this.onRecoverableError=I,Ze&&(this.mutableSourceEagerHydrationData=null)}function Lv(d,f,x,E,I,U,te,Ae,ze){return d=new dh(d,f,x,Ae,ze),f===1?(f=1,U===!0&&(f|=8)):f=0,U=hs(3,null,null,f),d.current=U,U.stateNode=d,U.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},uc(U),d}function Nv(d){if(!d)return Ft;d=d._reactInternals;e:{if(F(d)!==d||d.tag!==1)throw Error(a(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if($t(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(a(171))}if(d.tag===1){var x=d.type;if($t(x))return kn(d,x,f)}return f}function Fv(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(a(188)):(d=Object.keys(d).join(","),Error(a(268,d)));return d=q(f),d===null?null:d.stateNode}function Ns(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var x=d.retryLane;d.retryLane=x!==0&&x<f?x:f}}function ad(d,f){Ns(d,f),(d=d.alternate)&&Ns(d,f)}function fh(d){return d=q(d),d===null?null:d.stateNode}function Ov(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var f=Gn();wi(d,134217728,f),ad(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var f=Gn(),x=ta(d);wi(d,x,f),ad(d,x)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var x=oc(f.pendingLanes);x!==0&&(pa(f,x|1),Ki(f,Vr()),(vn&6)===0&&(El(),Ts()))}break;case 13:var E=Gn();Ic(function(){return wi(d,1,E)}),ad(d,1)}},t.batchedUpdates=function(d,f){var x=vn;vn|=1;try{return d(f)}finally{vn=x,vn===0&&(El(),Ef&&Ts())}},t.createComponentSelector=function(d){return{$$typeof:Yu,value:d}},t.createContainer=function(d,f,x,E,I,U,te){return Lv(d,f,!1,null,x,E,I,U,te)},t.createHasPseudoClassSelector=function(d){return{$$typeof:_l,value:d}},t.createHydrationContainer=function(d,f,x,E,I,U,te,Ae,ze){return d=Lv(x,E,!0,d,I,U,te,Ae,ze),d.context=Nv(null),x=d.current,E=Gn(),I=ta(x),U=Oa(E,I),U.callback=f??null,So(x,U),d.current.lanes=I,$o(d,I,E),Ki(d,E),d},t.createPortal=function(d,f,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:E==null?null:""+E,children:d,containerInfo:f,implementation:x}},t.createRoleSelector=function(d){return{$$typeof:Al,value:d}},t.createTestNameSelector=function(d){return{$$typeof:Ka,value:d}},t.createTextSelector=function(d){return{$$typeof:Cc,value:d}},t.deferredUpdates=function(d){var f=Mn,x=er.transition;try{return er.transition=null,Mn=16,d()}finally{Mn=f,er.transition=x}},t.discreteUpdates=function(d,f,x,E,I){var U=Mn,te=er.transition;try{return er.transition=null,Mn=1,d(f,x,E,I)}finally{Mn=U,er.transition=te,vn===0&&El()}},t.findAllNodes=Ya,t.findBoundingRects=function(d,f){if(!ht)throw Error(a(363));f=Ya(d,f),d=[];for(var x=0;x<f.length;x++)d.push(D(f[x]));for(f=d.length-1;0<f;f--){x=d[f];for(var E=x.x,I=E+x.width,U=x.y,te=U+x.height,Ae=f-1;0<=Ae;Ae--)if(f!==Ae){var ze=d[Ae],ct=ze.x,Ot=ct+ze.width,un=ze.y,tn=un+ze.height;if(E>=ct&&U>=un&&I<=Ot&&te<=tn){d.splice(f,1);break}else if(E!==ct||x.width!==ze.width||tn<U||un>te){if(!(U!==un||x.height!==ze.height||Ot<E||ct>I)){ct>E&&(ze.width+=ct-E,ze.x=E),Ot<I&&(ze.width=I-ct),d.splice(f,1);break}}else{un>U&&(ze.height+=un-U,ze.y=U),tn<te&&(ze.height=te-un),d.splice(f,1);break}}}return d},t.findHostInstance=Fv,t.findHostInstanceWithNoPortals=function(d){return d=W(d),d=d!==null?oe(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return Fv(d)},t.flushControlled=function(d){var f=vn;vn|=1;var x=er.transition,E=Mn;try{er.transition=null,Mn=1,d()}finally{Mn=E,er.transition=x,vn=f,vn===0&&(El(),Ts())}},t.flushPassiveEffects=Aa,t.flushSync=Ic,t.focusWithin=function(d,f){if(!ht)throw Error(a(363));for(d=Zu(d),f=us(d,f),f=Array.from(f),d=0;d<f.length;){var x=f[d++];if(!ye(x)){if(x.tag===5&&pe(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Mn},t.getFindAllNodesFailureDescription=function(d,f){if(!ht)throw Error(a(363));var x=0,E=[];d=[Zu(d),0];for(var I=0;I<d.length;){var U=d[I++],te=d[I++],Ae=f[te];if((U.tag!==5||!ye(U))&&(Qu(U,Ae)&&(E.push(Io(Ae)),te++,te>x&&(x=te)),te<f.length))for(U=U.child;U!==null;)d.push(U,te),U=U.sibling}if(x<f.length){for(d=[];x<f.length;x++)d.push(Io(f[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return he(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:fh,findFiberByHostInstance:d.findFiberByHostInstance||Ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)d=!0;else{try{Tu=f.inject(d),ma=f}catch{}d=!!f.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,f,x,E){if(!ht)throw Error(a(363));d=Ya(d,f);var I=je(d,x,E).disconnect;return{disconnect:function(){I()}}},t.registerMutableSourceForHydration=function(d,f){var x=f._getVersion;x=x(f._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[f,x]:d.mutableSourceEagerHydrationData.push(f,x)},t.runWithPriority=function(d,f){var x=Mn;try{return Mn=d,f()}finally{Mn=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,f,x,E){var I=f.current,U=Gn(),te=ta(I);return x=Nv(x),f.context===null?f.context=x:f.pendingContext=x,f=Oa(U,te),f.payload={element:d},E=E===void 0?null:E,E!==null&&(f.callback=E),So(I,f),d=wi(I,te,U),d!==null&&Rf(d,I,te),te},t}),CA}var AC;function Dz(){return AC||(AC=1,wA.exports=Bz()),wA.exports}var Lz=Dz();const Nz=XS(Lz);var SC=xI();const rM={},iM=r=>void Object.assign(rM,r);function Fz(r,e){function t(p,{args:m=[],attach:v,...y},_){let M=`${p[0].toUpperCase()}${p.slice(1)}`,w;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const S=y.object;w=zh(S,{type:p,root:_,attach:v,primitive:!0})}else{const S=rM[M];if(!S)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");w=zh(new S(...m),{type:p,root:_,attach:v,memoizedProps:{args:m}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),M!=="inject"&&RA(w,y),w}function n(p,m){let v=!1;if(m){var y,_;(y=m.__r3f)!=null&&y.attach?TA(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),v=!0),v||(_=p.__r3f)==null||_.objects.push(m),m.__r3f||zh(m,{}),m.__r3f.parent=p,DS(m),Hh(m)}}function i(p,m,v){let y=!1;if(m){var _,M;if((_=m.__r3f)!=null&&_.attach)TA(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:m});const w=p.children.filter(T=>T!==m),S=w.indexOf(v);p.children=[...w.slice(0,S),m,...w.slice(S)],y=!0}y||(M=p.__r3f)==null||M.objects.push(m),m.__r3f||zh(m,{}),m.__r3f.parent=p,DS(m),Hh(m)}}function s(p,m,v=!1){p&&[...p].forEach(y=>a(m,y,v))}function a(p,m,v){if(m){var y,_,M;if(m.__r3f&&(m.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(C=>C!==m)),(_=m.__r3f)!=null&&_.attach)bC(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var w;p.remove(m),(w=m.__r3f)!=null&&w.root&&Vz(f0(m),m)}const T=(M=m.__r3f)==null?void 0:M.primitive,R=!T&&(v===void 0?m.dispose!==null:v);if(!T){var S;s((S=m.__r3f)==null?void 0:S.objects,m,R),s(m.children,m,R)}if(delete m.__r3f,R&&m.dispose&&m.type!=="Scene"){const C=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?SC.unstable_scheduleCallback(SC.unstable_IdlePriority,C):C()}Hh(p)}}function l(p,m,v,y){var _;const M=(_=p.__r3f)==null?void 0:_.parent;if(!M)return;const w=t(m,v,p.__r3f.root);if(p.children){for(const S of p.children)S.__r3f&&n(w,S);p.children=p.children.filter(S=>!S.__r3f)}p.__r3f.objects.forEach(S=>n(w,S)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||a(M,p),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),n(M,w),w.raycast&&w.__r3f.eventCount&&f0(w).getState().internal.interaction.push(w),[y,y.alternate].forEach(S=>{S!==null&&(S.stateNode=w,S.ref&&(typeof S.ref=="function"?S.ref(w):S.ref.current=w))})}const u=()=>{};return{reconciler:Nz({createInstance:t,removeChild:a,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,n(v,m))},removeChildFromContainer:(p,m)=>{m&&a(p.getState().scene,m)},insertInContainerBefore:(p,m,v)=>{if(!m||!v)return;const y=p.getState().scene;y.__r3f&&i(y,m,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p==null?void 0:p.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,v,y){var _;if(((_=p==null?void 0:p.__r3f)!=null?_:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:w=[],children:S,...T}=y,{args:R=[],children:C,...k}=v;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((V,z)=>V!==R[z]))return[!0];const O=CI(p,T,k,!0);return O.changes.length?[!1,O]:null}},commitUpdate(p,[m,v],y,_,M,w){m?l(p,y,M,w):RA(p,v)},commitMount(p,m,v,y){var _;const M=(_=p.__r3f)!=null?_:{};p.raycast&&M.handlers&&M.eventCount&&f0(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>zh(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:v,parent:y}=(m=p.__r3f)!=null?m:{};v&&y&&bC(y,p,v),p.isObject3D&&(p.visible=!1),Hh(p)},unhideInstance(p,m){var v;const{attach:y,parent:_}=(v=p.__r3f)!=null?v:{};y&&_&&TA(_,p,y),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),Hh(p)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():Jh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gr.fun(performance.now)?performance.now:gr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:RA}}var wC,MC;const bA=r=>"colorSpace"in r||"outputColorSpace"in r,_I=()=>{var r;return(r=rM.ColorManagement)!=null?r:null},AI=r=>r&&r.isOrthographicCamera,Oz=r=>r&&r.hasOwnProperty("current"),cv=typeof window<"u"&&((wC=window.document)!=null&&wC.createElement||((MC=window.navigator)==null?void 0:MC.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function SI(r){const e=X.useRef(r);return cv(()=>void(e.current=r),[r]),e}function Uz({set:r}){return cv(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class wI extends X.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}wI.getDerivedStateFromError=()=>({error:!0});const MI="__default",EC=new Map,kz=r=>r&&!!r.memoized&&!!r.changes;function EI(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const Zm=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function f0(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const gr={obj:r=>r===Object(r)&&!gr.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(gr.str(r)||gr.num(r)||gr.boo(r))return r===e;const s=gr.obj(r);if(s&&n==="reference")return r===e;const a=gr.arr(r);if(a&&t==="reference")return r===e;if((a||s)&&r===e)return!0;let l;for(l in r)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in i?e:r)if(!gr.equ(r[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:r)if(r[l]!==e[l])return!1;if(gr.und(l)){if(a&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function zz(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function Hz(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function zh(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function BS(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,a)=>s[a],r),{target:t,key:i}}else return{target:t,key:e}}const CC=/-\d+$/;function TA(r,e,t){if(gr.str(t)){if(CC.test(t)){const s=t.replace(CC,""),{target:a,key:l}=BS(r,s);Array.isArray(a[l])||(a[l]=[])}const{target:n,key:i}=BS(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function bC(r,e,t){var n,i;if(gr.str(t)){const{target:s,key:a}=BS(r,t),l=e.__r3f.previousAttach;l===void 0?delete s[a]:s[a]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function CI(r,{children:e,key:t,ref:n,...i},{children:s,key:a,ref:l,...u}={},h=!1){const p=r.__r3f,m=Object.entries(i),v=[];if(h){const _=Object.keys(u);for(let M=0;M<_.length;M++)i.hasOwnProperty(_[M])||m.unshift([_[M],MI+"remove"])}m.forEach(([_,M])=>{var w;if((w=r.__r3f)!=null&&w.primitive&&_==="object"||gr.equ(M,u[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return v.push([_,M,!0,[]]);let S=[];_.includes("-")&&(S=_.split("-")),v.push([_,M,!1,S]);for(const T in i){const R=i[T];T.startsWith(`${_}-`)&&v.push([T,R,!1,T.split("-")])}});const y={...i};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}function RA(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:a,changes:l}=kz(e)?e:CI(r,e),u=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=a);for(let v=0;v<l.length;v++){let[y,_,M,w]=l[v];if(bA(r)){const C="srgb",k="srgb-linear";y==="encoding"?(y="colorSpace",_=_===3001?C:k):y==="outputEncoding"&&(y="outputColorSpace",_=_===3001?C:k)}let S=r,T=S[y];if(w.length&&(T=w.reduce((R,C)=>R[C],r),!(T&&T.set))){const[R,...C]=w.reverse();S=C.reverse().reduce((k,O)=>k[O],r),y=R}if(_===MI+"remove")if(S.constructor){let R=EC.get(S.constructor);R||(R=new S.constructor,EC.set(S.constructor,R)),_=R[y]}else _=0;if(M&&n)_?n.handlers[y]=_:delete n.handlers[y],n.eventCount=Object.keys(n.handlers).length;else if(T&&T.set&&(T.copy||T instanceof $d)){if(Array.isArray(_))T.fromArray?T.fromArray(_):T.set(..._);else if(T.copy&&_&&_.constructor&&T.constructor===_.constructor)T.copy(_);else if(_!==void 0){var h;const R=(h=T)==null?void 0:h.isColor;!R&&T.setScalar?T.setScalar(_):T instanceof $d&&_ instanceof $d?T.mask=_.mask:T.set(_),!_I()&&s&&!s.linear&&R&&T.convertSRGBToLinear()}}else{var p;if(S[y]=_,(p=S[y])!=null&&p.isTexture&&S[y].format===Kr&&S[y].type===Xs&&s){const R=S[y];bA(R)&&bA(s.gl)?R.colorSpace=s.gl.outputColorSpace:R.encoding=s.gl.outputEncoding}}Hh(r)}if(n&&n.parent&&r.raycast&&u!==n.eventCount){const v=f0(r).getState().internal,y=v.interaction.indexOf(r);y>-1&&v.interaction.splice(y,1),n.eventCount&&v.interaction.push(r)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=r.__r3f)!=null&&t.parent&&DS(r),r}function Hh(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function DS(r){r.onUpdate==null||r.onUpdate(r)}function bI(r,e){r.manual||(AI(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function e0(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function Gz(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Jh.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Jh.ContinuousEventPriority;default:return Jh.DefaultEventPriority}}function TI(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function Vz(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{TI(t.capturedMap,e,n,i)})}function jz(r){function e(u){const{internal:h}=r.getState(),p=u.offsetX-h.initialClick[0],m=u.offsetY-h.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(u){return u.filter(h=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=h.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function n(u,h){const p=r.getState(),m=new Set,v=[],y=h?h(p.internal.interaction):p.internal.interaction;for(let S=0;S<y.length;S++){const T=Zm(y[S]);T&&(T.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(u,p);function _(S){const T=Zm(S);if(!T||!T.events.enabled||T.raycaster.camera===null)return[];if(T.raycaster.camera===void 0){var R;T.events.compute==null||T.events.compute(u,T,(R=T.previousRoot)==null?void 0:R.getState()),T.raycaster.camera===void 0&&(T.raycaster.camera=null)}return T.raycaster.camera?T.raycaster.intersectObject(S,!0):[]}let M=y.flatMap(_).sort((S,T)=>{const R=Zm(S.object),C=Zm(T.object);return!R||!C?S.distance-T.distance:C.events.priority-R.events.priority||S.distance-T.distance}).filter(S=>{const T=e0(S);return m.has(T)?!1:(m.add(T),!0)});p.events.filter&&(M=p.events.filter(M,p));for(const S of M){let T=S.object;for(;T;){var w;(w=T.__r3f)!=null&&w.eventCount&&v.push({...S,eventObject:T}),T=T.parent}}if("pointerId"in u&&p.internal.capturedMap.has(u.pointerId))for(let S of p.internal.capturedMap.get(u.pointerId).values())m.has(e0(S.intersection))||v.push(S.intersection);return v}function i(u,h,p,m){const v=r.getState();if(u.length){const y={stopped:!1};for(const _ of u){const M=Zm(_.object)||v,{raycaster:w,pointer:S,camera:T,internal:R}=M,C=new Z(S.x,S.y,0).unproject(T),k=L=>{var W,q;return(W=(q=R.capturedMap.get(L))==null?void 0:q.has(_.eventObject))!=null?W:!1},O=L=>{const W={intersection:_,target:h.target};R.capturedMap.has(L)?R.capturedMap.get(L).set(_.eventObject,W):R.capturedMap.set(L,new Map([[_.eventObject,W]])),h.target.setPointerCapture(L)},V=L=>{const W=R.capturedMap.get(L);W&&TI(R.capturedMap,_.eventObject,W,L)};let z={};for(let L in h){let W=h[L];typeof W!="function"&&(z[L]=W)}let F={..._,...z,pointer:S,intersections:u,stopped:y.stopped,delta:p,unprojectedPoint:C,ray:w.ray,camera:T,stopPropagation(){const L="pointerId"in h&&R.capturedMap.get(h.pointerId);if((!L||L.has(_.eventObject))&&(F.stopped=y.stopped=!0,R.hovered.size&&Array.from(R.hovered.values()).find(W=>W.eventObject===_.eventObject))){const W=u.slice(0,u.indexOf(_));s([...W,_])}},target:{hasPointerCapture:k,setPointerCapture:O,releasePointerCapture:V},currentTarget:{hasPointerCapture:k,setPointerCapture:O,releasePointerCapture:V},nativeEvent:h};if(m(F),y.stopped===!0)break}}return u}function s(u){const{internal:h}=r.getState();for(const p of h.hovered.values())if(!u.length||!u.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const v=p.eventObject.__r3f,y=v==null?void 0:v.handlers;if(h.hovered.delete(e0(p)),v!=null&&v.eventCount){const _={...p,intersections:u};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function a(u,h){for(let p=0;p<h.length;p++){const m=h[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:p}=r.getState();"pointerId"in h&&p.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(h.pointerId)&&(p.capturedMap.delete(h.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:v}=r.getState();v.lastEvent.current=p;const y=u==="onPointerMove",_=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",w=n(p,y?t:void 0),S=_?e(p):0;u==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=w.map(R=>R.eventObject)),_&&!w.length&&S<=2&&(a(p,v.interaction),m&&m(p)),y&&s(w);function T(R){const C=R.eventObject,k=C.__r3f,O=k==null?void 0:k.handlers;if(k!=null&&k.eventCount)if(y){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const V=e0(R),z=v.hovered.get(V);z?z.stopped&&R.stopPropagation():(v.hovered.set(V,R),O.onPointerOver==null||O.onPointerOver(R),O.onPointerEnter==null||O.onPointerEnter(R))}O.onPointerMove==null||O.onPointerMove(R)}else{const V=O[u];V?(!_||v.initialHits.includes(C))&&(a(p,v.interaction.filter(z=>!v.initialHits.includes(z))),V(R)):_&&v.initialHits.includes(C)&&a(p,v.interaction.filter(z=>!v.initialHits.includes(z)))}}i(w,p,S,T)}}return{handlePointer:l}}const Wz=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],RI=r=>!!(r!=null&&r.render),sM=X.createContext(null),Xz=(r,e)=>{const t=gI((l,u)=>{const h=new Z,p=new Z,m=new Z;function v(S=u().camera,T=p,R=u().size){const{width:C,height:k,top:O,left:V}=R,z=C/k;T.isVector3?m.copy(T):m.set(...T);const F=S.getWorldPosition(h).distanceTo(m);if(AI(S))return{width:C/S.zoom,height:k/S.zoom,top:O,left:V,factor:1,distance:F,aspect:z};{const L=S.fov*Math.PI/180,W=2*Math.tan(L/2)*F,q=W*(C/k);return{width:q,height:W,top:O,left:V,factor:C/q,distance:F,aspect:z}}}let y;const _=S=>l(T=>({performance:{...T.performance,current:S}})),M=new Je;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(S=1)=>r(u(),S),advance:(S,T)=>e(S,T,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Yw,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const S=u();y&&clearTimeout(y),S.performance.current!==S.performance.min&&_(S.performance.min),y=setTimeout(()=>_(u().performance.max),S.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:S=>l(T=>({...T,events:{...T.events,...S}})),setSize:(S,T,R,C,k)=>{const O=u().camera,V={width:S,height:T,top:C||0,left:k||0,updateStyle:R};l(z=>({size:V,viewport:{...z.viewport,...v(O,p,V)}}))},setDpr:S=>l(T=>{const R=EI(S);return{viewport:{...T.viewport,dpr:R,initialDpr:T.viewport.initialDpr||R}}}),setFrameloop:(S="always")=>{const T=u().clock;T.stop(),T.elapsedTime=0,S!=="never"&&(T.start(),T.elapsedTime=0),l(()=>({frameloop:S}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:X.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(S,T,R)=>{const C=u().internal;return C.priority=C.priority+(T>0?1:0),C.subscribers.push({ref:S,priority:T,store:R}),C.subscribers=C.subscribers.sort((k,O)=>k.priority-O.priority),()=>{const k=u().internal;k!=null&&k.subscribers&&(k.priority=k.priority-(T>0?1:0),k.subscribers=k.subscribers.filter(O=>O.ref!==S))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:h,gl:p,set:m}=t.getState();if(u.width!==i.width||u.height!==i.height||h.dpr!==s){var v;i=u,s=h.dpr,bI(l,u),p.setPixelRatio(h.dpr);const y=(v=u.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(u.width,u.height,y)}l!==a&&(a=l,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>r(l)),t};let t0,Jz=new Set,Kz=new Set,Yz=new Set;function IA(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Qm(r,e){switch(r){case"before":return IA(Jz,e);case"after":return IA(Kz,e);case"tail":return IA(Yz,e)}}let PA,BA;function DA(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),PA=e.internal.subscribers,t0=0;t0<PA.length;t0++)BA=PA[t0],BA.ref.current(BA.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Zz(r){let e=!1,t=!1,n,i,s;function a(h){i=requestAnimationFrame(a),e=!0,n=0,Qm("before",h),t=!0;for(const m of r.values()){var p;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(n+=DA(h,s))}if(t=!1,Qm("after",h),n===0)return Qm("tail",h),e=!1,cancelAnimationFrame(i)}function l(h,p=1){var m;if(!h)return r.forEach(v=>l(v.store.getState(),p));(m=h.gl.xr)!=null&&m.isPresenting||!h.internal.active||h.frameloop==="never"||(p>1?h.internal.frames=Math.min(60,h.internal.frames+p):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function u(h,p=!0,m,v){if(p&&Qm("before",h),m)DA(h,m,v);else for(const y of r.values())DA(h,y.store.getState());p&&Qm("after",h)}return{loop:a,invalidate:l,advance:u}}function aM(){const r=X.useContext(sM);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Ar(r=t=>t,e){return aM()(r,e)}function kp(r,e=0){const t=aM(),n=t.getState().internal.subscribe,i=SI(r);return cv(()=>n(i,e,t),[e,n,t]),null}const TC=new WeakMap;function II(r,e){return function(t,...n){let i=TC.get(t);return i||(i=new t,TC.set(t,i)),r&&r(i),Promise.all(n.map(s=>new Promise((a,l)=>i.load(s,u=>{u.scene&&Object.assign(u,zz(u.scene)),a(u)},e,u=>l(new Error(`Could not load ${s}: ${u==null?void 0:u.message}`))))))}}function nc(r,e,t,n){const i=Array.isArray(e)?e:[e],s=Tz(II(t,n),[r,...i],{equal:gr.equ});return Array.isArray(e)?s:s[0]}nc.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return Rz(II(t),[r,...n])};nc.clear=function(r,e){const t=Array.isArray(e)?e:[e];return Iz([r,...t])};const Sp=new Map,{invalidate:RC,advance:IC}=Zz(Sp),{reconciler:Dg,applyProps:Qc}=Fz(Sp,Gz),Nh={objects:"shallow",strict:!1},Qz=(r,e)=>{const t=typeof r=="function"?r(e):r;return RI(t)?t:new nM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function qz(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:a,updateStyle:l=t}=e;return{width:n,height:i,top:s,left:a,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:a}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function $z(r){const e=Sp.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||Xz(RC,IC),a=t||Dg.createContainer(s,Jh.ConcurrentRoot,null,!1,null,"",i,null);e||Sp.set(r,{fiber:a,store:s});let l,u=!1,h;return{configure(p={}){let{gl:m,size:v,scene:y,events:_,onCreated:M,shadows:w=!1,linear:S=!1,flat:T=!1,legacy:R=!1,orthographic:C=!1,frameloop:k="always",dpr:O=[1,2],performance:V,raycaster:z,camera:F,onPointerMissed:L}=p,W=s.getState(),q=W.gl;W.gl||W.set({gl:q=Qz(m,r)});let re=W.raycaster;re||W.set({raycaster:re=new $w});const{params:oe,...Se}=z||{};if(gr.equ(Se,re,Nh)||Qc(re,{...Se}),gr.equ(oe,re.params,Nh)||Qc(re,{params:{...re.params,...oe}}),!W.camera||W.camera===h&&!gr.equ(h,F,Nh)){h=F;const se=F instanceof $g,K=se?F:C?new Wo(0,0,0,0,.1,1e3):new Gr(75,0,.1,1e3);se||(K.position.z=5,F&&(Qc(K,F),("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(K.manual=!0,K.updateProjectionMatrix())),!W.camera&&!(F!=null&&F.rotation)&&K.lookAt(0,0,0)),W.set({camera:K}),re.camera=K}if(!W.scene){let se;y!=null&&y.isScene?se=y:(se=new Np,y&&Qc(se,y)),W.set({scene:zh(se)})}if(!W.xr){var he;const se=(We,we)=>{const Le=s.getState();Le.frameloop!=="never"&&IC(We,!0,Le,we)},K=()=>{const We=s.getState();We.gl.xr.enabled=We.gl.xr.isPresenting,We.gl.xr.setAnimationLoop(We.gl.xr.isPresenting?se:null),We.gl.xr.isPresenting||RC(We)},ve={connect(){const We=s.getState().gl;We.xr.addEventListener("sessionstart",K),We.xr.addEventListener("sessionend",K)},disconnect(){const We=s.getState().gl;We.xr.removeEventListener("sessionstart",K),We.xr.removeEventListener("sessionend",K)}};typeof((he=q.xr)==null?void 0:he.addEventListener)=="function"&&ve.connect(),W.set({xr:ve})}if(q.shadowMap){const se=q.shadowMap.enabled,K=q.shadowMap.type;if(q.shadowMap.enabled=!!w,gr.boo(w))q.shadowMap.type=lg;else if(gr.str(w)){var Ee;const ve={basic:ET,percentage:px,soft:lg,variance:lo};q.shadowMap.type=(Ee=ve[w])!=null?Ee:lg}else gr.obj(w)&&Object.assign(q.shadowMap,w);(se!==q.shadowMap.enabled||K!==q.shadowMap.type)&&(q.shadowMap.needsUpdate=!0)}const Y=_I();Y&&("enabled"in Y?Y.enabled=!R:"legacyMode"in Y&&(Y.legacyMode=R)),u||Qc(q,{outputEncoding:S?3e3:3001,toneMapping:T?Vo:cw}),W.legacy!==R&&W.set(()=>({legacy:R})),W.linear!==S&&W.set(()=>({linear:S})),W.flat!==T&&W.set(()=>({flat:T})),m&&!gr.fun(m)&&!RI(m)&&!gr.equ(m,q,Nh)&&Qc(q,m),_&&!W.events.handlers&&W.set({events:_(s)});const ge=qz(r,v);return gr.equ(ge,W.size,Nh)||W.setSize(ge.width,ge.height,ge.updateStyle,ge.top,ge.left),O&&W.viewport.dpr!==EI(O)&&W.setDpr(O),W.frameloop!==k&&W.setFrameloop(k),W.onPointerMissed||W.set({onPointerMissed:L}),V&&!gr.equ(V,W.performance,Nh)&&W.set(se=>({performance:{...se.performance,...V}})),l=M,u=!0,this},render(p){return u||this.configure(),Dg.updateContainer(B.jsx(eH,{store:s,children:p,onCreated:l,rootElement:r}),a,null,()=>{}),s},unmount(){PI(r)}}}function eH({store:r,children:e,onCreated:t,rootElement:n}){return cv(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),B.jsx(sM.Provider,{value:r,children:e})}function PI(r,e){const t=Sp.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Dg.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,a,l,u;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=i.gl)!=null&&u.xr&&i.xr.disconnect(),Hz(i),Sp.delete(r)}catch{}},500)})}}function BI(r,e,t){return B.jsx(tH,{children:r,container:e,state:t},e.uuid)}function tH({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,a=aM(),[l]=X.useState(()=>new $w),[u]=X.useState(()=>new Je),h=X.useCallback((m,v)=>{const y={...m};Object.keys(m).forEach(M=>{(Wz.includes(M)||m[M]!==v[M]&&v[M])&&delete y[M]});let _;if(v&&i){const M=v.camera;_=m.viewport.getCurrentViewport(M,new Z,i),M!==m.camera&&bI(M,i)}return{...y,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:a,events:{...m.events,...v==null?void 0:v.events,...n},size:{...m.size,...i},viewport:{...m.viewport,..._},...s}},[r]),[p]=X.useState(()=>{const m=a.getState();return gI((y,_)=>({...m,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:a,events:{...m.events,...n},size:{...m.size,...i},...s,set:y,get:_,setEvents:M=>y(w=>({...w,events:{...w.events,...M}}))}))});return X.useEffect(()=>{const m=a.subscribe(v=>p.setState(y=>h(v,y)));return()=>{m()}},[h]),X.useEffect(()=>{p.setState(m=>h(a.getState(),m))},[h]),X.useEffect(()=>()=>{p.destroy()},[]),B.jsx(B.Fragment,{children:Dg.createPortal(B.jsx(sM.Provider,{value:p,children:e}),p,null)})}Dg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version});const LA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nH(r){const{handlePointer:e}=jz(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(LA).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(a=>({events:{...a.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([a,l])=>{const[u,h]=LA[a];t.addEventListener(u,l,{passive:h})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,a])=>{if(n&&n.connected instanceof HTMLElement){const[l]=LA[s];n.connected.removeEventListener(l,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function PC(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function rH({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=r?typeof r=="number"?r:r.scroll:null,h=r?typeof r=="number"?r:r.resize:null,p=X.useRef(!1);X.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,v,y]=X.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:T,top:R,width:C,height:k,bottom:O,right:V,x:z,y:F}=l.current.element.getBoundingClientRect(),L={left:T,top:R,width:C,height:k,bottom:O,right:V,x:z,y:F};l.current.element instanceof HTMLElement&&n&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),p.current&&!oH(l.current.lastBounds,L)&&a(l.current.lastBounds=L)};return[S,h?PC(S,h):S,u?PC(S,u):S]},[a,n,u,h]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function M(){l.current.element&&(l.current.resizeObserver=new i(y),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const w=S=>{!S||S===l.current.element||(_(),l.current.element=S,l.current.scrollContainers=DI(S),M())};return sH(y,!!e),iH(v),X.useEffect(()=>{_(),M()},[e,y,v]),X.useEffect(()=>_,[]),[w,s,m]}function iH(r){X.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function sH(r,e){X.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function DI(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...DI(r.parentElement)]}const aH=["x","y","top","bottom","left","right","width","height"],oH=(r,e)=>aH.every(t=>r[t]===e[t]);var lH=Object.defineProperty,cH=Object.defineProperties,uH=Object.getOwnPropertyDescriptors,BC=Object.getOwnPropertySymbols,dH=Object.prototype.hasOwnProperty,fH=Object.prototype.propertyIsEnumerable,DC=(r,e,t)=>e in r?lH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,LC=(r,e)=>{for(var t in e||(e={}))dH.call(e,t)&&DC(r,t,e[t]);if(BC)for(var t of BC(e))fH.call(e,t)&&DC(r,t,e[t]);return r},hH=(r,e)=>cH(r,uH(e)),NC,FC;typeof window<"u"&&((NC=window.document)!=null&&NC.createElement||((FC=window.navigator)==null?void 0:FC.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function LI(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=LI(n,e,t);if(i)return i;n=n.sibling}}function NI(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const OC=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=OC;return}return OC.apply(this,arguments)};const oM=NI(X.createContext(null));class FI extends X.Component{render(){return X.createElement(oM.Provider,{value:this._reactInternals},this.props.children)}}function pH(){const r=X.useContext(oM);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=LI(n,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[r,e])}function mH(){const r=pH(),[e]=X.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==oM&&!e.has(i)&&e.set(i,X.useContext(NI(i)))}t=t.return}return e}function gH(){const r=mH();return X.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>X.createElement(e,null,X.createElement(t.Provider,hH(LC({},n),{value:r.get(t)}))),e=>X.createElement(FI,LC({},e))),[r])}const vH=X.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:a=nH,eventSource:l,eventPrefix:u,shadows:h,linear:p,flat:m,legacy:v,orthographic:y,frameloop:_,dpr:M,performance:w,raycaster:S,camera:T,scene:R,onPointerMissed:C,onCreated:k,...O},V){X.useMemo(()=>iM(Sz),[]);const z=gH(),[F,L]=rH({scroll:!0,debounce:{scroll:50,resize:0},...n}),W=X.useRef(null),q=X.useRef(null);X.useImperativeHandle(V,()=>W.current);const re=SI(C),[oe,Se]=X.useState(!1),[he,Ee]=X.useState(!1);if(oe)throw oe;if(he)throw he;const Y=X.useRef(null);cv(()=>{const se=W.current;L.width>0&&L.height>0&&se&&(Y.current||(Y.current=$z(se)),Y.current.configure({gl:s,events:a,shadows:h,linear:p,flat:m,legacy:v,orthographic:y,frameloop:_,dpr:M,performance:w,raycaster:S,camera:T,scene:R,size:L,onPointerMissed:(...K)=>re.current==null?void 0:re.current(...K),onCreated:K=>{K.events.connect==null||K.events.connect(l?Oz(l)?l.current:l:q.current),u&&K.setEvents({compute:(ve,We)=>{const we=ve[u+"X"],Le=ve[u+"Y"];We.pointer.set(we/We.size.width*2-1,-(Le/We.size.height)*2+1),We.raycaster.setFromCamera(We.pointer,We.camera)}}),k==null||k(K)}}),Y.current.render(B.jsx(z,{children:B.jsx(wI,{set:Ee,children:B.jsx(X.Suspense,{fallback:B.jsx(Uz,{set:Se}),children:e??null})})})))}),X.useEffect(()=>{const se=W.current;if(se)return()=>PI(se)},[]);const ge=l?"none":"auto";return B.jsx("div",{ref:q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ge,...i},...O,children:B.jsx("div",{ref:F,style:{width:"100%",height:"100%"},children:B.jsx("canvas",{ref:W,style:{display:"block"},children:t})})})}),yH=X.forwardRef(function(e,t){return B.jsx(FI,{children:B.jsx(vH,{...e,ref:t})})});function Ss(){return Ss=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ss.apply(null,arguments)}const lM=parseInt(Dp.replace(/\D+/g,""));function UC(r,e){if(e===nR)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===$0||e===yw){let t=r.getIndex();if(t===null){const a=[],l=r.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);r.setIndex(a),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(t)if(e===$0)for(let a=1;a<=n;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}var Ra=Uint8Array,uu=Uint16Array,LS=Uint32Array,OI=new Ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),UI=new Ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xH=new Ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kI=function(r,e){for(var t=new uu(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new LS(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},zI=kI(OI,2),HI=zI[0],_H=zI[1];HI[28]=258,_H[258]=28;var AH=kI(UI,0),SH=AH[0],NS=new uu(32768);for(var Sr=0;Sr<32768;++Sr){var Kc=(Sr&43690)>>>1|(Sr&21845)<<1;Kc=(Kc&52428)>>>2|(Kc&13107)<<2,Kc=(Kc&61680)>>>4|(Kc&3855)<<4,NS[Sr]=((Kc&65280)>>>8|(Kc&255)<<8)>>>1}var vg=(function(r,e,t){for(var n=r.length,i=0,s=new uu(e);i<n;++i)++s[r[i]-1];var a=new uu(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(t){l=new uu(1<<e);var u=15-e;for(i=0;i<n;++i)if(r[i])for(var h=i<<4|r[i],p=e-r[i],m=a[r[i]-1]++<<p,v=m|(1<<p)-1;m<=v;++m)l[NS[m]>>>u]=h}else for(l=new uu(n),i=0;i<n;++i)r[i]&&(l[i]=NS[a[r[i]-1]++]>>>15-r[i]);return l}),uv=new Ra(288);for(var Sr=0;Sr<144;++Sr)uv[Sr]=8;for(var Sr=144;Sr<256;++Sr)uv[Sr]=9;for(var Sr=256;Sr<280;++Sr)uv[Sr]=7;for(var Sr=280;Sr<288;++Sr)uv[Sr]=8;var GI=new Ra(32);for(var Sr=0;Sr<32;++Sr)GI[Sr]=5;var wH=vg(uv,9,1),MH=vg(GI,5,1),NA=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},oo=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},FA=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},EH=function(r){return(r/8|0)+(r&7&&1)},CH=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof uu?uu:r instanceof LS?LS:Ra)(t-e);return n.set(r.subarray(e,t)),n},bH=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new Ra(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ra(n*3));var a=function(Fe){var He=e.length;if(Fe>He){var rt=new Ra(Math.max(He*2,Fe));rt.set(e),e=rt}},l=t.f||0,u=t.p||0,h=t.b||0,p=t.l,m=t.d,v=t.m,y=t.n,_=n*8;do{if(!p){t.f=l=oo(r,u,1);var M=oo(r,u+1,3);if(u+=3,M)if(M==1)p=wH,m=MH,v=9,y=5;else if(M==2){var R=oo(r,u,31)+257,C=oo(r,u+10,15)+4,k=R+oo(r,u+5,31)+1;u+=14;for(var O=new Ra(k),V=new Ra(19),z=0;z<C;++z)V[xH[z]]=oo(r,u+z*3,7);u+=C*3;for(var F=NA(V),L=(1<<F)-1,W=vg(V,F,1),z=0;z<k;){var q=W[oo(r,u,L)];u+=q&15;var w=q>>>4;if(w<16)O[z++]=w;else{var re=0,oe=0;for(w==16?(oe=3+oo(r,u,3),u+=2,re=O[z-1]):w==17?(oe=3+oo(r,u,7),u+=3):w==18&&(oe=11+oo(r,u,127),u+=7);oe--;)O[z++]=re}}var Se=O.subarray(0,R),he=O.subarray(R);v=NA(Se),y=NA(he),p=vg(Se,v,1),m=vg(he,y,1)}else throw"invalid block type";else{var w=EH(u)+4,S=r[w-4]|r[w-3]<<8,T=w+S;if(T>n){if(s)throw"unexpected EOF";break}i&&a(h+S),e.set(r.subarray(w,T),h),t.b=h+=S,t.p=u=T*8;continue}if(u>_){if(s)throw"unexpected EOF";break}}i&&a(h+131072);for(var Ee=(1<<v)-1,Y=(1<<y)-1,ge=u;;ge=u){var re=p[FA(r,u)&Ee],se=re>>>4;if(u+=re&15,u>_){if(s)throw"unexpected EOF";break}if(!re)throw"invalid length/literal";if(se<256)e[h++]=se;else if(se==256){ge=u,p=null;break}else{var K=se-254;if(se>264){var z=se-257,ve=OI[z];K=oo(r,u,(1<<ve)-1)+HI[z],u+=ve}var We=m[FA(r,u)&Y],we=We>>>4;if(!We)throw"invalid distance";u+=We&15;var he=SH[we];if(we>3){var ve=UI[we];he+=FA(r,u)&(1<<ve)-1,u+=ve}if(u>_){if(s)throw"unexpected EOF";break}i&&a(h+131072);for(var Le=h+K;h<Le;h+=4)e[h]=e[h-he],e[h+1]=e[h+1-he],e[h+2]=e[h+2-he],e[h+3]=e[h+3-he];h=Le}}t.l=p,t.p=ge,t.b=h,p&&(l=1,t.m=v,t.d=m,t.n=y)}while(!l);return h==e.length?e:CH(e,0,h)},TH=new Ra(0),RH=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function n0(r,e){return bH((RH(r),r.subarray(2,-4)),e)}var IH=typeof TextDecoder<"u"&&new TextDecoder,PH=0;try{IH.decode(TH,{stream:!0}),PH=1}catch{}const BH=r=>r&&r.isCubeTexture;class DH extends Tr{constructor(e,t){var n,i;const s=BH(e),l=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,u=Math.floor(Math.log2(l)),h=Math.pow(2,u),p=3*Math.max(h,112),m=4*h,v=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/p}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${u}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=v.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${lM>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},w=new sv(1,16),S=new Cs({uniforms:M,fragmentShader:_,vertexShader:y,side:Ta});super(w,S)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var LH=Object.defineProperty,NH=(r,e,t)=>e in r?LH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,FH=(r,e,t)=>(NH(r,e+"",t),t);class OH{constructor(){FH(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}var UH=Object.defineProperty,kH=(r,e,t)=>e in r?UH(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,on=(r,e,t)=>(kH(r,typeof e!="symbol"?e+"":e,t),t);const r0=new gf,kC=new ko,zH=Math.cos(70*(Math.PI/180)),zC=(r,e)=>(r%e+e)%e;let HH=class extends OH{constructor(e,t){super(),on(this,"object"),on(this,"domElement"),on(this,"enabled",!0),on(this,"target",new Z),on(this,"minDistance",0),on(this,"maxDistance",1/0),on(this,"minZoom",0),on(this,"maxZoom",1/0),on(this,"minPolarAngle",0),on(this,"maxPolarAngle",Math.PI),on(this,"minAzimuthAngle",-1/0),on(this,"maxAzimuthAngle",1/0),on(this,"enableDamping",!1),on(this,"dampingFactor",.05),on(this,"enableZoom",!0),on(this,"zoomSpeed",1),on(this,"enableRotate",!0),on(this,"rotateSpeed",1),on(this,"enablePan",!0),on(this,"panSpeed",1),on(this,"screenSpacePanning",!0),on(this,"keyPanSpeed",7),on(this,"zoomToCursor",!1),on(this,"autoRotate",!1),on(this,"autoRotateSpeed",2),on(this,"reverseOrbit",!1),on(this,"reverseHorizontalOrbit",!1),on(this,"reverseVerticalOrbit",!1),on(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),on(this,"mouseButtons",{LEFT:Cd.ROTATE,MIDDLE:Cd.DOLLY,RIGHT:Cd.PAN}),on(this,"touches",{ONE:bd.ROTATE,TWO:bd.DOLLY_PAN}),on(this,"target0"),on(this,"position0"),on(this,"zoom0"),on(this,"_domElementKeyEvents",null),on(this,"getPolarAngle"),on(this,"getAzimuthalAngle"),on(this,"setPolarAngle"),on(this,"setAzimuthalAngle"),on(this,"getDistance"),on(this,"getZoomScale"),on(this,"listenToKeyEvents"),on(this,"stopListenToKeyEvents"),on(this,"saveState"),on(this,"reset"),on(this,"update"),on(this,"connect"),on(this,"dispose"),on(this,"dollyIn"),on(this,"dollyOut"),on(this,"getScale"),on(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=de=>{let De=zC(de,2*Math.PI),it=p.phi;it<0&&(it+=2*Math.PI),De<0&&(De+=2*Math.PI);let le=Math.abs(De-it);2*Math.PI-le<le&&(De<it?De+=2*Math.PI:it+=2*Math.PI),m.phi=De-it,n.update()},this.setAzimuthalAngle=de=>{let De=zC(de,2*Math.PI),it=p.theta;it<0&&(it+=2*Math.PI),De<0&&(De+=2*Math.PI);let le=Math.abs(De-it);2*Math.PI-le<le&&(De<it?De+=2*Math.PI:it+=2*Math.PI),m.theta=De-it,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=de=>{de.addEventListener("keydown",Ye),this._domElementKeyEvents=de},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ye),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),u=l.NONE},this.update=(()=>{const de=new Z,De=new Z(0,1,0),it=new ii().setFromUnitVectors(e.up,De),le=it.clone().invert(),Ce=new Z,Pe=new ii,Ge=2*Math.PI;return function(){const vt=n.object.position;it.setFromUnitVectors(e.up,De),le.copy(it).invert(),de.copy(vt).sub(n.target),de.applyQuaternion(it),p.setFromVector3(de),n.autoRotate&&u===l.NONE&&oe(q()),n.enableDamping?(p.theta+=m.theta*n.dampingFactor,p.phi+=m.phi*n.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let qt=n.minAzimuthAngle,Rn=n.maxAzimuthAngle;isFinite(qt)&&isFinite(Rn)&&(qt<-Math.PI?qt+=Ge:qt>Math.PI&&(qt-=Ge),Rn<-Math.PI?Rn+=Ge:Rn>Math.PI&&(Rn-=Ge),qt<=Rn?p.theta=Math.max(qt,Math.min(Rn,p.theta)):p.theta=p.theta>(qt+Rn)/2?Math.max(qt,p.theta):Math.min(Rn,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&F||n.object.isOrthographicCamera?p.radius=We(p.radius):p.radius=We(p.radius*v),de.setFromSpherical(p),de.applyQuaternion(le),vt.copy(n.target).add(de),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let $n=!1;if(n.zoomToCursor&&F){let fn=null;if(n.object instanceof Gr&&n.object.isPerspectiveCamera){const vr=de.length();fn=We(vr*v);const wr=vr-fn;n.object.position.addScaledVector(V,wr),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const vr=new Z(z.x,z.y,0);vr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),$n=!0;const wr=new Z(z.x,z.y,0);wr.unproject(n.object),n.object.position.sub(wr).add(vr),n.object.updateMatrixWorld(),fn=de.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;fn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(fn).add(n.object.position):(r0.origin.copy(n.object.position),r0.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(r0.direction))<zH?e.lookAt(n.target):(kC.setFromNormalAndCoplanarPoint(n.object.up,n.target),r0.intersectPlane(kC,n.target))))}else n.object instanceof Wo&&n.object.isOrthographicCamera&&($n=v!==1,$n&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,F=!1,$n||Ce.distanceToSquared(n.object.position)>h||8*(1-Pe.dot(n.object.quaternion))>h?(n.dispatchEvent(i),Ce.copy(n.object.position),Pe.copy(n.object.quaternion),$n=!1,!0):!1}})(),this.connect=de=>{n.domElement=de,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",qe),n.domElement.addEventListener("pointerdown",D),n.domElement.addEventListener("pointercancel",ye),n.domElement.addEventListener("wheel",je)},this.dispose=()=>{var de,De,it,le,Ce,Pe;n.domElement&&(n.domElement.style.touchAction="auto"),(de=n.domElement)==null||de.removeEventListener("contextmenu",qe),(De=n.domElement)==null||De.removeEventListener("pointerdown",D),(it=n.domElement)==null||it.removeEventListener("pointercancel",ye),(le=n.domElement)==null||le.removeEventListener("wheel",je),(Ce=n.domElement)==null||Ce.ownerDocument.removeEventListener("pointermove",Q),(Pe=n.domElement)==null||Pe.ownerDocument.removeEventListener("pointerup",ye),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ye)};const n=this,i={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const h=1e-6,p=new TS,m=new TS;let v=1;const y=new Z,_=new Je,M=new Je,w=new Je,S=new Je,T=new Je,R=new Je,C=new Je,k=new Je,O=new Je,V=new Z,z=new Je;let F=!1;const L=[],W={};function q(){return 2*Math.PI/60/60*n.autoRotateSpeed}function re(){return Math.pow(.95,n.zoomSpeed)}function oe(de){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=de:m.theta-=de}function Se(de){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=de:m.phi-=de}const he=(()=>{const de=new Z;return function(it,le){de.setFromMatrixColumn(le,0),de.multiplyScalar(-it),y.add(de)}})(),Ee=(()=>{const de=new Z;return function(it,le){n.screenSpacePanning===!0?de.setFromMatrixColumn(le,1):(de.setFromMatrixColumn(le,0),de.crossVectors(n.object.up,de)),de.multiplyScalar(it),y.add(de)}})(),Y=(()=>{const de=new Z;return function(it,le){const Ce=n.domElement;if(Ce&&n.object instanceof Gr&&n.object.isPerspectiveCamera){const Pe=n.object.position;de.copy(Pe).sub(n.target);let Ge=de.length();Ge*=Math.tan(n.object.fov/2*Math.PI/180),he(2*it*Ge/Ce.clientHeight,n.object.matrix),Ee(2*le*Ge/Ce.clientHeight,n.object.matrix)}else Ce&&n.object instanceof Wo&&n.object.isOrthographicCamera?(he(it*(n.object.right-n.object.left)/n.object.zoom/Ce.clientWidth,n.object.matrix),Ee(le*(n.object.top-n.object.bottom)/n.object.zoom/Ce.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ge(de){n.object instanceof Gr&&n.object.isPerspectiveCamera||n.object instanceof Wo&&n.object.isOrthographicCamera?v=de:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function se(de){ge(v/de)}function K(de){ge(v*de)}function ve(de){if(!n.zoomToCursor||!n.domElement)return;F=!0;const De=n.domElement.getBoundingClientRect(),it=de.clientX-De.left,le=de.clientY-De.top,Ce=De.width,Pe=De.height;z.x=it/Ce*2-1,z.y=-(le/Pe)*2+1,V.set(z.x,z.y,1).unproject(n.object).sub(n.object.position).normalize()}function We(de){return Math.max(n.minDistance,Math.min(n.maxDistance,de))}function we(de){_.set(de.clientX,de.clientY)}function Le(de){ve(de),C.set(de.clientX,de.clientY)}function Fe(de){S.set(de.clientX,de.clientY)}function He(de){M.set(de.clientX,de.clientY),w.subVectors(M,_).multiplyScalar(n.rotateSpeed);const De=n.domElement;De&&(oe(2*Math.PI*w.x/De.clientHeight),Se(2*Math.PI*w.y/De.clientHeight)),_.copy(M),n.update()}function rt(de){k.set(de.clientX,de.clientY),O.subVectors(k,C),O.y>0?se(re()):O.y<0&&K(re()),C.copy(k),n.update()}function yt(de){T.set(de.clientX,de.clientY),R.subVectors(T,S).multiplyScalar(n.panSpeed),Y(R.x,R.y),S.copy(T),n.update()}function Rt(de){ve(de),de.deltaY<0?K(re()):de.deltaY>0&&se(re()),n.update()}function Qt(de){let De=!1;switch(de.code){case n.keys.UP:Y(0,n.keyPanSpeed),De=!0;break;case n.keys.BOTTOM:Y(0,-n.keyPanSpeed),De=!0;break;case n.keys.LEFT:Y(n.keyPanSpeed,0),De=!0;break;case n.keys.RIGHT:Y(-n.keyPanSpeed,0),De=!0;break}De&&(de.preventDefault(),n.update())}function Ke(){if(L.length==1)_.set(L[0].pageX,L[0].pageY);else{const de=.5*(L[0].pageX+L[1].pageX),De=.5*(L[0].pageY+L[1].pageY);_.set(de,De)}}function Ze(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const de=.5*(L[0].pageX+L[1].pageX),De=.5*(L[0].pageY+L[1].pageY);S.set(de,De)}}function ee(){const de=L[0].pageX-L[1].pageX,De=L[0].pageY-L[1].pageY,it=Math.sqrt(de*de+De*De);C.set(0,it)}function Dt(){n.enableZoom&&ee(),n.enablePan&&Ze()}function et(){n.enableZoom&&ee(),n.enableRotate&&Ke()}function At(de){if(L.length==1)M.set(de.pageX,de.pageY);else{const it=St(de),le=.5*(de.pageX+it.x),Ce=.5*(de.pageY+it.y);M.set(le,Ce)}w.subVectors(M,_).multiplyScalar(n.rotateSpeed);const De=n.domElement;De&&(oe(2*Math.PI*w.x/De.clientHeight),Se(2*Math.PI*w.y/De.clientHeight)),_.copy(M)}function at(de){if(L.length==1)T.set(de.pageX,de.pageY);else{const De=St(de),it=.5*(de.pageX+De.x),le=.5*(de.pageY+De.y);T.set(it,le)}R.subVectors(T,S).multiplyScalar(n.panSpeed),Y(R.x,R.y),S.copy(T)}function Kt(de){const De=St(de),it=de.pageX-De.x,le=de.pageY-De.y,Ce=Math.sqrt(it*it+le*le);k.set(0,Ce),O.set(0,Math.pow(k.y/C.y,n.zoomSpeed)),se(O.y),C.copy(k)}function ht(de){n.enableZoom&&Kt(de),n.enablePan&&at(de)}function N(de){n.enableZoom&&Kt(de),n.enableRotate&&At(de)}function D(de){var De,it;n.enabled!==!1&&(L.length===0&&((De=n.domElement)==null||De.ownerDocument.addEventListener("pointermove",Q),(it=n.domElement)==null||it.ownerDocument.addEventListener("pointerup",ye)),xt(de),de.pointerType==="touch"?$e(de):xe(de))}function Q(de){n.enabled!==!1&&(de.pointerType==="touch"?kt(de):pe(de))}function ye(de){var De,it,le;zt(de),L.length===0&&((De=n.domElement)==null||De.releasePointerCapture(de.pointerId),(it=n.domElement)==null||it.ownerDocument.removeEventListener("pointermove",Q),(le=n.domElement)==null||le.ownerDocument.removeEventListener("pointerup",ye)),n.dispatchEvent(a),u=l.NONE}function xe(de){let De;switch(de.button){case 0:De=n.mouseButtons.LEFT;break;case 1:De=n.mouseButtons.MIDDLE;break;case 2:De=n.mouseButtons.RIGHT;break;default:De=-1}switch(De){case Cd.DOLLY:if(n.enableZoom===!1)return;Le(de),u=l.DOLLY;break;case Cd.ROTATE:if(de.ctrlKey||de.metaKey||de.shiftKey){if(n.enablePan===!1)return;Fe(de),u=l.PAN}else{if(n.enableRotate===!1)return;we(de),u=l.ROTATE}break;case Cd.PAN:if(de.ctrlKey||de.metaKey||de.shiftKey){if(n.enableRotate===!1)return;we(de),u=l.ROTATE}else{if(n.enablePan===!1)return;Fe(de),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function pe(de){if(n.enabled!==!1)switch(u){case l.ROTATE:if(n.enableRotate===!1)return;He(de);break;case l.DOLLY:if(n.enableZoom===!1)return;rt(de);break;case l.PAN:if(n.enablePan===!1)return;yt(de);break}}function je(de){n.enabled===!1||n.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(de.preventDefault(),n.dispatchEvent(s),Rt(de),n.dispatchEvent(a))}function Ye(de){n.enabled===!1||n.enablePan===!1||Qt(de)}function $e(de){switch(Bt(de),L.length){case 1:switch(n.touches.ONE){case bd.ROTATE:if(n.enableRotate===!1)return;Ke(),u=l.TOUCH_ROTATE;break;case bd.PAN:if(n.enablePan===!1)return;Ze(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(n.touches.TWO){case bd.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Dt(),u=l.TOUCH_DOLLY_PAN;break;case bd.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;et(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function kt(de){switch(Bt(de),u){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;At(de),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;at(de),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ht(de),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;N(de),n.update();break;default:u=l.NONE}}function qe(de){n.enabled!==!1&&de.preventDefault()}function xt(de){L.push(de)}function zt(de){delete W[de.pointerId];for(let De=0;De<L.length;De++)if(L[De].pointerId==de.pointerId){L.splice(De,1);return}}function Bt(de){let De=W[de.pointerId];De===void 0&&(De=new Je,W[de.pointerId]=De),De.set(de.pageX,de.pageY)}function St(de){const De=de.pointerId===L[0].pointerId?L[1]:L[0];return W[De.pointerId]}this.dollyIn=(de=re())=>{K(de),n.update()},this.dollyOut=(de=re())=>{se(de),n.update()},this.getScale=()=>v,this.setScale=de=>{ge(de),n.update()},this.getZoomScale=()=>re(),t!==void 0&&this.connect(t),this.update()}};function rx(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let e="";for(let t=0,n=r.length;t<n;t++)e+=String.fromCharCode(r[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const kd="srgb",ql="srgb-linear",HC=3001,GH=3e3;class cM extends Vi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new JH(t)}),this.register(function(t){return new KH(t)}),this.register(function(t){return new rG(t)}),this.register(function(t){return new iG(t)}),this.register(function(t){return new sG(t)}),this.register(function(t){return new ZH(t)}),this.register(function(t){return new QH(t)}),this.register(function(t){return new qH(t)}),this.register(function(t){return new $H(t)}),this.register(function(t){return new XH(t)}),this.register(function(t){return new eG(t)}),this.register(function(t){return new YH(t)}),this.register(function(t){return new nG(t)}),this.register(function(t){return new tG(t)}),this.register(function(t){return new jH(t)}),this.register(function(t){return new aG(t)}),this.register(function(t){return new oG(t)})}load(e,t,n,i){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const h=hu.extractUrlBase(e);a=hu.resolveURL(h,this.path)}else a=hu.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){i?i(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},u=new Gi(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{s.parse(h,a,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const a={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(rx(new Uint8Array(e.slice(0,4)))===VI){try{a[Nn.KHR_BINARY_GLTF]=new lG(e)}catch(p){i&&i(p);return}s=JSON.parse(a[Nn.KHR_BINARY_GLTF].content)}else s=JSON.parse(rx(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new AG(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const p=this.pluginCallbacks[h](u);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,a[p.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const p=s.extensionsUsed[h],m=s.extensionsRequired||[];switch(p){case Nn.KHR_MATERIALS_UNLIT:a[p]=new WH;break;case Nn.KHR_DRACO_MESH_COMPRESSION:a[p]=new cG(s,this.dracoLoader);break;case Nn.KHR_TEXTURE_TRANSFORM:a[p]=new uG;break;case Nn.KHR_MESH_QUANTIZATION:a[p]=new dG;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function VH(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class jH{constructor(e){this.parser=e,this.name=Nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const p=new wt(16777215);u.color!==void 0&&p.setRGB(u.color[0],u.color[1],u.color[2],ql);const m=u.range!==void 0?u.range:0;switch(u.type){case"directional":h=new Jw(p),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new Xw(p),h.distance=m;break;case"spot":h=new Ww(p),h.distance=m,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return h.position.set(0,0,0),h.decay=2,zl(h,u),u.intensity!==void 0&&(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||"light_"+e),i=Promise.resolve(h),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(t.cache,l,u)})}}class WH{constructor(){this.name=Nn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ws}extendParams(e,t,n){const i=[];e.color=new wt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],ql),e.opacity=a[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,kd))}return Promise.all(i)}}class XH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class JH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Je(l,l)}return Promise.all(s)}}class KH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class YH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class ZH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new wt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],ql)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,kd)),a.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class QH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class qH{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return t.attenuationColor=new wt().setRGB(l[0],l[1],l[2],ql),Promise.all(s)}}class $H{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class eG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return t.specularColor=new wt().setRGB(l[0],l[1],l[2],ql),a.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,kd)),Promise.all(s)}}class tG{constructor(e){this.parser=e,this.name=Nn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class nG{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Da}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class rG{constructor(e){this.parser=e,this.name=Nn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class iG{constructor(e){this.parser=e,this.name=Nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=i.images[a.source];let u=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,a.source,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class sG{constructor(e){this.parser=e,this.name=Nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=i.images[a.source];let u=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,a.source,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class aG{constructor(e){this.name=Nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const u=i.byteOffset||0,h=i.byteLength||0,p=i.count,m=i.byteStride,v=new Uint8Array(l,u,h);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(p,m,v,i.mode,i.filter).then(function(y){return y.buffer}):a.ready.then(function(){const y=new ArrayBuffer(p*m);return a.decodeGltfBuffer(new Uint8Array(y),p,m,v,i.mode,i.filter),y})})}else return null}}class oG{constructor(e){this.name=Nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const h of i.primitives)if(h.mode!==Ea.TRIANGLES&&h.mode!==Ea.TRIANGLE_STRIP&&h.mode!==Ea.TRIANGLE_FAN&&h.mode!==void 0)return null;const a=n.extensions[this.name].attributes,l=[],u={};for(const h in a)l.push(this.parser.getDependency("accessor",a[h]).then(p=>(u[h]=p,u[h])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=>{const p=h.pop(),m=p.isGroup?p.children:[p],v=h[0].count,y=[];for(const _ of m){const M=new nn,w=new Z,S=new ii,T=new Z(1,1,1),R=new Rw(_.geometry,_.material,v);for(let C=0;C<v;C++)u.TRANSLATION&&w.fromBufferAttribute(u.TRANSLATION,C),u.ROTATION&&S.fromBufferAttribute(u.ROTATION,C),u.SCALE&&T.fromBufferAttribute(u.SCALE,C),R.setMatrixAt(C,M.compose(w,S,T));for(const C in u)if(C==="_COLOR_0"){const k=u[C];R.instanceColor=new cf(k.array,k.itemSize,k.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&_.geometry.setAttribute(C,u[C]);On.prototype.copy.call(R,_),this.parser.assignFinalMaterial(R),y.push(R)}return p.isGroup?(p.clear(),p.add(...y),p):y[0]}))}}const VI="glTF",qm=12,GC={JSON:1313821514,BIN:5130562};class lG{constructor(e){this.name=Nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,qm);if(this.header={magic:rx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==VI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-qm,i=new DataView(e,qm);let s=0;for(;s<n;){const a=i.getUint32(s,!0);s+=4;const l=i.getUint32(s,!0);if(s+=4,l===GC.JSON){const u=new Uint8Array(e,qm+s,a);this.content=rx(u)}else if(l===GC.BIN){const u=qm+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class cG{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},u={},h={};for(const p in a){const m=FS[p]||p.toLowerCase();l[m]=a[p]}for(const p in e.attributes){const m=FS[p]||p.toLowerCase();if(a[p]!==void 0){const v=n.accessors[e.attributes[p]],y=Qh[v.componentType];h[m]=y.name,u[m]=v.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(m,v){i.decodeDracoFile(p,function(y){for(const _ in y.attributes){const M=y.attributes[_],w=u[_];w!==void 0&&(M.normalized=w)}m(y)},l,h,ql,v)})})}}class uG{constructor(){this.name=Nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class dG{constructor(){this.name=Nn.KHR_MESH_QUANTIZATION}}class jI extends Op{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,p=i-t,m=(n-t)/p,v=m*m,y=v*m,_=e*h,M=_-h,w=-2*y+3*v,S=y-v,T=1-w,R=S-v+m;for(let C=0;C!==l;C++){const k=a[M+C+l],O=a[M+C+u]*p,V=a[_+C+l],z=a[_+C]*p;s[C]=T*k+R*O+w*V+S*z}return s}}const fG=new ii;class hG extends jI{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return fG.fromArray(s).normalize().toArray(s),s}}const Ea={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Qh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},VC={9728:Ii,9729:Jn,9984:mx,9985:Yh,9986:Bd,9987:Ia},jC={33071:Jr,33648:mp,10497:xu},OA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},FS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...lM>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Yc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pG={CUBICSPLINE:void 0,LINEAR:yp,STEP:vp},UA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function mG(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new lv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Jo})),r.DefaultMaterial}function Ed(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function zl(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function gG(r,e,t){let n=!1,i=!1,s=!1;for(let h=0,p=e.length;h<p;h++){const m=e[h];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(i=!0),m.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const a=[],l=[],u=[];for(let h=0,p=e.length;h<p;h++){const m=e[h];if(n){const v=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):r.attributes.position;a.push(v)}if(i){const v=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):r.attributes.normal;l.push(v)}if(s){const v=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):r.attributes.color;u.push(v)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(h){const p=h[0],m=h[1],v=h[2];return n&&(r.morphAttributes.position=p),i&&(r.morphAttributes.normal=m),s&&(r.morphAttributes.color=v),r.morphTargetsRelative=!0,r})}function vG(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yG(r){let e;const t=r.extensions&&r.extensions[Nn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+kA(t.attributes):e=r.indices+":"+kA(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+kA(r.targets[n]);return e}function kA(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function OS(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function xG(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _G=new nn;class AG{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new VH,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new ZR(this.options.manager):this.textureLoader=new iI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gi(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const l={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};return Ed(s,l,i),zl(l,i),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const a=t[i].joints;for(let l=0,u=a.length;l<u;l++)e[a[l]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[h,p]of a.children.entries())s(p,l.children[h])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Nn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){n.load(hu.resolveURL(t.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=OA[i.type],l=Qh[i.componentType],u=i.normalized===!0,h=new l(i.count*a);return Promise.resolve(new Kn(h,a,u))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const l=a[0],u=OA[i.type],h=Qh[i.componentType],p=h.BYTES_PER_ELEMENT,m=p*u,v=i.byteOffset||0,y=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,_=i.normalized===!0;let M,w;if(y&&y!==m){const S=Math.floor(v/y),T="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+S+":"+i.count;let R=t.cache.get(T);R||(M=new h(l,S*y,i.count*y/p),R=new tv(M,y/p),t.cache.add(T,R)),w=new _u(R,u,v%y/p,_)}else l===null?M=new h(i.count*u):M=new h(l,v,i.count*u),w=new Kn(M,u,_);if(i.sparse!==void 0){const S=OA.SCALAR,T=Qh[i.sparse.indices.componentType],R=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,k=new T(a[1],R,i.sparse.count*S),O=new h(a[2],C,i.sparse.count*u);l!==null&&(w=new Kn(w.array.slice(),w.itemSize,w.normalized));for(let V=0,z=k.length;V<z;V++){const F=k[V];if(w.setX(F,O[V*u]),u>=2&&w.setY(F,O[V*u+1]),u>=3&&w.setZ(F,O[V*u+2]),u>=4&&w.setW(F,O[V*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,a=t.images[s];let l=this.textureLoader;if(a.uri){const u=n.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const i=this,s=this.json,a=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=a.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const v=(s.samplers||{})[a.sampler]||{};return p.magFilter=VC[v.magFilter]||Jn,p.minFilter=VC[v.minFilter]||Ia,p.wrapS=jC[v.wrapS]||xu,p.wrapT=jC[v.wrapT]||xu,i.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const a=i.images[e],l=self.URL||self.webkitURL;let u=a.uri||"",h=!1;if(a.bufferView!==void 0)u=n.getDependency("bufferView",a.bufferView).then(function(m){h=!0;const v=new Blob([m],{type:a.mimeType});return u=l.createObjectURL(v),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(u).then(function(m){return new Promise(function(v,y){let _=v;t.isImageBitmapLoader===!0&&(_=function(M){const w=new nr(M);w.needsUpdate=!0,v(w)}),t.load(hu.resolveURL(m,s.path),_,void 0,y)})}).then(function(m){return h===!0&&l.revokeObjectURL(u),zl(m,a),m.userData.mimeType=a.mimeType||xG(a.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),m});return this.sourceCache[e]=p,p}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[Nn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[Nn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(a);a=s.extensions[Nn.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),s.associations.set(a,u)}}return i!==void 0&&(typeof i=="number"&&(i=i===HC?kd:ql),"colorSpace"in a?a.colorSpace=i:a.encoding=i===kd?HC:GH),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new bx,yi.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new rs,yi.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(i||s||a){let l="ClonedMaterial:"+n.uuid+":";i&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),s&&(u.vertexColors=!0),a&&(u.flatShading=!0),i&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}e.material=n}getMaterialType(){return lv}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const l={},u=s.extensions||{},h=[];if(u[Nn.KHR_MATERIALS_UNLIT]){const m=i[Nn.KHR_MATERIALS_UNLIT];a=m.getMaterialType(),h.push(m.extendParams(l,s,t))}else{const m=s.pbrMetallicRoughness||{};if(l.color=new wt(1,1,1),l.opacity=1,Array.isArray(m.baseColorFactor)){const v=m.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],ql),l.opacity=v[3]}m.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",m.baseColorTexture,kd)),l.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,l.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",m.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",m.metallicRoughnessTexture))),a=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Ta);const p=s.alphaMode||UA.OPAQUE;if(p===UA.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===UA.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Ws&&(h.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Je(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;l.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&a!==Ws&&(h.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Ws){const m=s.emissiveFactor;l.emissive=new wt().setRGB(m[0],m[1],m[2],ql)}return s.emissiveTexture!==void 0&&a!==Ws&&h.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,kd)),Promise.all(h).then(function(){const m=new a(l);return s.name&&(m.name=s.name),zl(m,s),t.associations.set(m,{materials:e}),s.extensions&&Ed(i,m,s),m})}createUniqueName(e){const t=Vn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(l){return n[Nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return WC(u,l,t)})}const a=[];for(let l=0,u=e.length;l<u;l++){const h=e[l],p=yG(h),m=i[p];if(m)a.push(m.promise);else{let v;h.extensions&&h.extensions[Nn.KHR_DRACO_MESH_COMPRESSION]?v=s(h):v=WC(new xn,h,t),i[p]={primitive:h,promise:v},a.push(v)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],a=s.primitives,l=[];for(let u=0,h=a.length;u<h;u++){const p=a[u].material===void 0?mG(this.cache):this.getDependency("material",a[u].material);l.push(p)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),p=u[u.length-1],m=[];for(let y=0,_=p.length;y<_;y++){const M=p[y],w=a[y];let S;const T=h[y];if(w.mode===Ea.TRIANGLES||w.mode===Ea.TRIANGLE_STRIP||w.mode===Ea.TRIANGLE_FAN||w.mode===void 0)S=s.isSkinnedMesh===!0?new Tw(M,T):new Tr(M,T),S.isSkinnedMesh===!0&&S.normalizeSkinWeights(),w.mode===Ea.TRIANGLE_STRIP?S.geometry=UC(S.geometry,yw):w.mode===Ea.TRIANGLE_FAN&&(S.geometry=UC(S.geometry,$0));else if(w.mode===Ea.LINES)S=new go(M,T);else if(w.mode===Ea.LINE_STRIP)S=new tc(M,T);else if(w.mode===Ea.LINE_LOOP)S=new Iw(M,T);else if(w.mode===Ea.POINTS)S=new Pw(M,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(S.geometry.morphAttributes).length>0&&vG(S,s),S.name=t.createUniqueName(s.name||"mesh_"+e),zl(S,s),w.extensions&&Ed(i,S,w),t.assignFinalMaterial(S),m.push(S)}for(let y=0,_=m.length;y<_;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return s.extensions&&Ed(i,m[0],s),m[0];const v=new Kl;s.extensions&&Ed(i,v,s),t.associations.set(v,{meshes:e});for(let y=0,_=m.length;y<_;y++)v.add(m[y]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Gr(Aw.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new Wo(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),zl(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),a=i,l=[],u=[];for(let h=0,p=a.length;h<p;h++){const m=a[h];if(m){l.push(m);const v=new nn;s!==null&&v.fromArray(s.array,h*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new nv(l,u)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,a=[],l=[],u=[],h=[],p=[];for(let m=0,v=i.channels.length;m<v;m++){const y=i.channels[m],_=i.samplers[y.sampler],M=y.target,w=M.node,S=i.parameters!==void 0?i.parameters[_.input]:_.input,T=i.parameters!==void 0?i.parameters[_.output]:_.output;M.node!==void 0&&(a.push(this.getDependency("node",w)),l.push(this.getDependency("accessor",S)),u.push(this.getDependency("accessor",T)),h.push(_),p.push(M))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(p)]).then(function(m){const v=m[0],y=m[1],_=m[2],M=m[3],w=m[4],S=[];for(let T=0,R=v.length;T<R;T++){const C=v[T],k=y[T],O=_[T],V=M[T],z=w[T];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();const F=n._createAnimationTracks(C,k,O,V,z);if(F)for(let L=0;L<F.length;L++)S.push(F[L])}return new Ap(s,void 0,S)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,h=i.weights.length;u<h;u++)l.morphTargetInfluences[u]=i.weights[u]}),a})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),a=[],l=i.children||[];for(let h=0,p=l.length;h<p;h++)a.push(n.getDependency("node",l[h]));const u=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(a),u]).then(function(h){const p=h[0],m=h[1],v=h[2];v!==null&&p.traverse(function(y){y.isSkinnedMesh&&y.bind(v,_G)});for(let y=0,_=m.length;y<_;y++)p.add(m[y]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"",l=[],u=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return u&&l.push(u),s.camera!==void 0&&l.push(i.getDependency("camera",s.camera).then(function(h){return i._getNodeRef(i.cameraCache,s.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let p;if(s.isBone===!0?p=new Cx:h.length>1?p=new Kl:h.length===1?p=h[0]:p=new On,p!==h[0])for(let m=0,v=h.length;m<v;m++)p.add(h[m]);if(s.name&&(p.userData.name=s.name,p.name=a),zl(p,s),s.extensions&&Ed(n,p,s),s.matrix!==void 0){const m=new nn;m.fromArray(s.matrix),p.applyMatrix4(m)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return i.associations.has(p)||i.associations.set(p,{}),i.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new Kl;n.name&&(s.name=i.createUniqueName(n.name)),zl(s,n),n.extensions&&Ed(t,s,n);const a=n.nodes||[],l=[];for(let u=0,h=a.length;u<h;u++)l.push(i.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let p=0,m=u.length;p<m;p++)s.add(u[p]);const h=p=>{const m=new Map;for(const[v,y]of i.associations)(v instanceof yi||v instanceof nr)&&m.set(v,y);return p.traverse(v=>{const y=i.associations.get(v);y!=null&&m.set(v,y)}),m};return i.associations=h(s),s})}_createAnimationTracks(e,t,n,i,s){const a=[],l=e.name?e.name:e.uuid,u=[];Yc[s.path]===Yc.weights?e.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let h;switch(Yc[s.path]){case Yc.weights:h=df;break;case Yc.rotation:h=ff;break;case Yc.position:case Yc.scale:h=hf;break;default:switch(n.itemSize){case 1:h=df;break;case 2:case 3:default:h=hf;break}break}const p=i.interpolation!==void 0?pG[i.interpolation]:yp,m=this._getArrayFromAccessor(n);for(let v=0,y=u.length;v<y;v++){const _=new h(u[v]+"."+Yc[s.path],t.array,m,p);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),a.push(_)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=OS(t.constructor),i=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof ff?hG:jI;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function SG(r,e,t){const n=e.attributes,i=new ns;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],u=l.min,h=l.max;if(u!==void 0&&h!==void 0){if(i.set(new Z(u[0],u[1],u[2]),new Z(h[0],h[1],h[2])),l.normalized){const p=OS(Qh[l.componentType]);i.min.multiplyScalar(p),i.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new Z,u=new Z;for(let h=0,p=s.length;h<p;h++){const m=s[h];if(m.POSITION!==void 0){const v=t.json.accessors[m.POSITION],y=v.min,_=v.max;if(y!==void 0&&_!==void 0){if(u.setX(Math.max(Math.abs(y[0]),Math.abs(_[0]))),u.setY(Math.max(Math.abs(y[1]),Math.abs(_[1]))),u.setZ(Math.max(Math.abs(y[2]),Math.abs(_[2]))),v.normalized){const M=OS(Qh[v.componentType]);u.multiplyScalar(M)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}r.boundingBox=i;const a=new Hi;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=a}function WC(r,e,t){const n=e.attributes,i=[];function s(a,l){return t.getDependency("accessor",a).then(function(u){r.setAttribute(l,u)})}for(const a in n){const l=FS[a]||a.toLowerCase();l in r.attributes||i.push(s(n[a],l))}if(e.indices!==void 0&&!r.index){const a=t.getDependency("accessor",e.indices).then(function(l){r.setIndex(l)});i.push(a)}return zl(r,e),SG(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?gG(r,e.targets,t):r})}class wG extends Vw{constructor(e){super(e),this.type=vi}parse(e){const a=function(z,F){switch(z){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(F||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(F||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(F||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(F||""))}},m=function(z,F,L){F=F||1024;let q=z.pos,re=-1,oe=0,Se="",he=String.fromCharCode.apply(null,new Uint16Array(z.subarray(q,q+128)));for(;0>(re=he.indexOf(`
`))&&oe<F&&q<z.byteLength;)Se+=he,oe+=he.length,q+=128,he+=String.fromCharCode.apply(null,new Uint16Array(z.subarray(q,q+128)));return-1<re?(z.pos+=oe+re+1,Se+he.slice(0,re)):!1},v=function(z){const F=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,q=/^\s*FORMAT=(\S+)\s*$/,re=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,oe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Se,he;for((z.pos>=z.byteLength||!(Se=m(z)))&&a(1,"no header found"),(he=Se.match(F))||a(3,"bad initial token"),oe.valid|=1,oe.programtype=he[1],oe.string+=Se+`
`;Se=m(z),Se!==!1;){if(oe.string+=Se+`
`,Se.charAt(0)==="#"){oe.comments+=Se+`
`;continue}if((he=Se.match(L))&&(oe.gamma=parseFloat(he[1])),(he=Se.match(W))&&(oe.exposure=parseFloat(he[1])),(he=Se.match(q))&&(oe.valid|=2,oe.format=he[1]),(he=Se.match(re))&&(oe.valid|=4,oe.height=parseInt(he[1],10),oe.width=parseInt(he[2],10)),oe.valid&2&&oe.valid&4)break}return oe.valid&2||a(3,"missing format specifier"),oe.valid&4||a(3,"missing image size specifier"),oe},y=function(z,F,L){const W=F;if(W<8||W>32767||z[0]!==2||z[1]!==2||z[2]&128)return new Uint8Array(z);W!==(z[2]<<8|z[3])&&a(3,"wrong scanline width");const q=new Uint8Array(4*F*L);q.length||a(4,"unable to allocate buffer space");let re=0,oe=0;const Se=4*W,he=new Uint8Array(4),Ee=new Uint8Array(Se);let Y=L;for(;Y>0&&oe<z.byteLength;){oe+4>z.byteLength&&a(1),he[0]=z[oe++],he[1]=z[oe++],he[2]=z[oe++],he[3]=z[oe++],(he[0]!=2||he[1]!=2||(he[2]<<8|he[3])!=W)&&a(3,"bad rgbe scanline format");let ge=0,se;for(;ge<Se&&oe<z.byteLength;){se=z[oe++];const ve=se>128;if(ve&&(se-=128),(se===0||ge+se>Se)&&a(3,"bad scanline data"),ve){const We=z[oe++];for(let we=0;we<se;we++)Ee[ge++]=We}else Ee.set(z.subarray(oe,oe+se),ge),ge+=se,oe+=se}const K=W;for(let ve=0;ve<K;ve++){let We=0;q[re]=Ee[ve+We],We+=W,q[re+1]=Ee[ve+We],We+=W,q[re+2]=Ee[ve+We],We+=W,q[re+3]=Ee[ve+We],re+=4}Y--}return q},_=function(z,F,L,W){const q=z[F+3],re=Math.pow(2,q-128)/255;L[W+0]=z[F+0]*re,L[W+1]=z[F+1]*re,L[W+2]=z[F+2]*re,L[W+3]=1},M=function(z,F,L,W){const q=z[F+3],re=Math.pow(2,q-128)/255;L[W+0]=Fd.toHalfFloat(Math.min(z[F+0]*re,65504)),L[W+1]=Fd.toHalfFloat(Math.min(z[F+1]*re,65504)),L[W+2]=Fd.toHalfFloat(Math.min(z[F+2]*re,65504)),L[W+3]=Fd.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const S=v(w),T=S.width,R=S.height,C=y(w.subarray(w.pos),T,R);let k,O,V;switch(this.type){case br:V=C.length/4;const z=new Float32Array(V*4);for(let L=0;L<V;L++)_(C,L*4,z,L*4);k=z,O=br;break;case vi:V=C.length/4;const F=new Uint16Array(V*4);for(let L=0;L<V;L++)M(C,L*4,F,L*4);k=F,O=vi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:T,height:R,data:k,header:S.string,gamma:S.gamma,exposure:S.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,l){switch(a.type){case br:case vi:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=Jn,a.magFilter=Jn,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,l)}return super.load(e,s,n,i)}}const $m=lM>=152;class MG extends Vw{constructor(e){super(e),this.type=vi}parse(e){const F=Math.pow(2.7182818,2.2);function L(G,J){for(var fe=0,Ie=0;Ie<65536;++Ie)(Ie==0||G[Ie>>3]&1<<(Ie&7))&&(J[fe++]=Ie);for(var Ue=fe-1;fe<65536;)J[fe++]=0;return Ue}function W(G){for(var J=0;J<16384;J++)G[J]={},G[J].len=0,G[J].lit=0,G[J].p=null}const q={l:0,c:0,lc:0};function re(G,J,fe,Ie,Ue){for(;fe<G;)J=J<<8|St(Ie,Ue),fe+=8;fe-=G,q.l=J>>fe&(1<<G)-1,q.c=J,q.lc=fe}const oe=new Array(59);function Se(G){for(var J=0;J<=58;++J)oe[J]=0;for(var J=0;J<65537;++J)oe[G[J]]+=1;for(var fe=0,J=58;J>0;--J){var Ie=fe+oe[J]>>1;oe[J]=fe,fe=Ie}for(var J=0;J<65537;++J){var Ue=G[J];Ue>0&&(G[J]=Ue|oe[Ue]++<<6)}}function he(G,J,fe,Ie,Ue,ke,ot){for(var H=fe,ne=0,ae=0;Ue<=ke;Ue++){if(H.value-fe.value>Ie)return!1;re(6,ne,ae,G,H);var ce=q.l;if(ne=q.c,ae=q.lc,ot[Ue]=ce,ce==63){if(H.value-fe.value>Ie)throw"Something wrong with hufUnpackEncTable";re(8,ne,ae,G,H);var $=q.l+6;if(ne=q.c,ae=q.lc,Ue+$>ke+1)throw"Something wrong with hufUnpackEncTable";for(;$--;)ot[Ue++]=0;Ue--}else if(ce>=59){var $=ce-59+2;if(Ue+$>ke+1)throw"Something wrong with hufUnpackEncTable";for(;$--;)ot[Ue++]=0;Ue--}}Se(ot)}function Ee(G){return G&63}function Y(G){return G>>6}function ge(G,J,fe,Ie){for(;J<=fe;J++){var Ue=Y(G[J]),ke=Ee(G[J]);if(Ue>>ke)throw"Invalid table entry";if(ke>14){var ot=Ie[Ue>>ke-14];if(ot.len)throw"Invalid table entry";if(ot.lit++,ot.p){var H=ot.p;ot.p=new Array(ot.lit);for(var ne=0;ne<ot.lit-1;++ne)ot.p[ne]=H[ne]}else ot.p=new Array(1);ot.p[ot.lit-1]=J}else if(ke)for(var ae=0,ne=1<<14-ke;ne>0;ne--){var ot=Ie[(Ue<<14-ke)+ae];if(ot.len||ot.p)throw"Invalid table entry";ot.len=ke,ot.lit=J,ae++}}return!0}const se={c:0,lc:0};function K(G,J,fe,Ie){G=G<<8|St(fe,Ie),J+=8,se.c=G,se.lc=J}const ve={c:0,lc:0};function We(G,J,fe,Ie,Ue,ke,ot,H,ne,ae){if(G==J){Ie<8&&(K(fe,Ie,Ue,ot),fe=se.c,Ie=se.lc),Ie-=8;var ce=fe>>Ie,ce=new Uint8Array([ce])[0];if(ne.value+ce>ae)return!1;for(var $=H[ne.value-1];ce-- >0;)H[ne.value++]=$}else if(ne.value<ae)H[ne.value++]=G;else return!1;ve.c=fe,ve.lc=Ie}function we(G){return G&65535}function Le(G){var J=we(G);return J>32767?J-65536:J}const Fe={a:0,b:0};function He(G,J){var fe=Le(G),Ie=Le(J),Ue=Ie,ke=fe+(Ue&1)+(Ue>>1),ot=ke,H=ke-Ue;Fe.a=ot,Fe.b=H}function rt(G,J){var fe=we(G),Ie=we(J),Ue=fe-(Ie>>1)&65535,ke=Ie+Ue-32768&65535;Fe.a=ke,Fe.b=Ue}function yt(G,J,fe,Ie,Ue,ke,ot){for(var H=ot<16384,ne=fe>Ue?Ue:fe,ae=1,ce;ae<=ne;)ae<<=1;for(ae>>=1,ce=ae,ae>>=1;ae>=1;){for(var $=0,Xe=$+ke*(Ue-ce),Oe=ke*ae,Ve=ke*ce,Qe=Ie*ae,ut=Ie*ce,gt,lt,dt,bt;$<=Xe;$+=Ve){for(var Ft=$,rn=$+Ie*(fe-ce);Ft<=rn;Ft+=ut){var Tt=Ft+Qe,_t=Ft+Oe,In=_t+Qe;H?(He(G[Ft+J],G[_t+J]),gt=Fe.a,dt=Fe.b,He(G[Tt+J],G[In+J]),lt=Fe.a,bt=Fe.b,He(gt,lt),G[Ft+J]=Fe.a,G[Tt+J]=Fe.b,He(dt,bt),G[_t+J]=Fe.a,G[In+J]=Fe.b):(rt(G[Ft+J],G[_t+J]),gt=Fe.a,dt=Fe.b,rt(G[Tt+J],G[In+J]),lt=Fe.a,bt=Fe.b,rt(gt,lt),G[Ft+J]=Fe.a,G[Tt+J]=Fe.b,rt(dt,bt),G[_t+J]=Fe.a,G[In+J]=Fe.b)}if(fe&ae){var _t=Ft+Oe;H?He(G[Ft+J],G[_t+J]):rt(G[Ft+J],G[_t+J]),gt=Fe.a,G[_t+J]=Fe.b,G[Ft+J]=gt}}if(Ue&ae)for(var Ft=$,rn=$+Ie*(fe-ce);Ft<=rn;Ft+=ut){var Tt=Ft+Qe;H?He(G[Ft+J],G[Tt+J]):rt(G[Ft+J],G[Tt+J]),gt=Fe.a,G[Tt+J]=Fe.b,G[Ft+J]=gt}ce=ae,ae>>=1}return $}function Rt(G,J,fe,Ie,Ue,ke,ot,H,ne,ae){for(var ce=0,$=0,Xe=H,Oe=Math.trunc(Ue.value+(ke+7)/8);Ue.value<Oe;)for(K(ce,$,fe,Ue),ce=se.c,$=se.lc;$>=14;){var Ve=ce>>$-14&16383,Qe=J[Ve];if(Qe.len)$-=Qe.len,We(Qe.lit,ot,ce,$,fe,Ie,Ue,ne,ae,Xe),ce=ve.c,$=ve.lc;else{if(!Qe.p)throw"hufDecode issues";var ut;for(ut=0;ut<Qe.lit;ut++){for(var gt=Ee(G[Qe.p[ut]]);$<gt&&Ue.value<Oe;)K(ce,$,fe,Ue),ce=se.c,$=se.lc;if($>=gt&&Y(G[Qe.p[ut]])==(ce>>$-gt&(1<<gt)-1)){$-=gt,We(Qe.p[ut],ot,ce,$,fe,Ie,Ue,ne,ae,Xe),ce=ve.c,$=ve.lc;break}}if(ut==Qe.lit)throw"hufDecode issues"}}var lt=8-ke&7;for(ce>>=lt,$-=lt;$>0;){var Qe=J[ce<<14-$&16383];if(Qe.len)$-=Qe.len,We(Qe.lit,ot,ce,$,fe,Ie,Ue,ne,ae,Xe),ce=ve.c,$=ve.lc;else throw"hufDecode issues"}return!0}function Qt(G,J,fe,Ie,Ue,ke){var ot={value:0},H=fe.value,ne=Bt(J,fe),ae=Bt(J,fe);fe.value+=4;var ce=Bt(J,fe);if(fe.value+=4,ne<0||ne>=65537||ae<0||ae>=65537)throw"Something wrong with HUF_ENCSIZE";var $=new Array(65537),Xe=new Array(16384);W(Xe);var Oe=Ie-(fe.value-H);if(he(G,J,fe,Oe,ne,ae,$),ce>8*(Ie-(fe.value-H)))throw"Something wrong with hufUncompress";ge($,ne,ae,Xe),Rt($,Xe,G,J,fe,ce,ae,ke,Ue,ot)}function Ke(G,J,fe){for(var Ie=0;Ie<fe;++Ie)J[Ie]=G[J[Ie]]}function Ze(G){for(var J=1;J<G.length;J++){var fe=G[J-1]+G[J]-128;G[J]=fe}}function ee(G,J){for(var fe=0,Ie=Math.floor((G.length+1)/2),Ue=0,ke=G.length-1;!(Ue>ke||(J[Ue++]=G[fe++],Ue>ke));)J[Ue++]=G[Ie++]}function Dt(G){for(var J=G.byteLength,fe=new Array,Ie=0,Ue=new DataView(G);J>0;){var ke=Ue.getInt8(Ie++);if(ke<0){var ot=-ke;J-=ot+1;for(var H=0;H<ot;H++)fe.push(Ue.getUint8(Ie++))}else{var ot=ke;J-=2;for(var ne=Ue.getUint8(Ie++),H=0;H<ot+1;H++)fe.push(ne)}}return fe}function et(G,J,fe,Ie,Ue,ke){var Tt=new DataView(ke.buffer),ot=fe[G.idx[0]].width,H=fe[G.idx[0]].height,ne=3,ae=Math.floor(ot/8),ce=Math.ceil(ot/8),$=Math.ceil(H/8),Xe=ot-(ce-1)*8,Oe=H-($-1)*8,Ve={value:0},Qe=new Array(ne),ut=new Array(ne),gt=new Array(ne),lt=new Array(ne),dt=new Array(ne);for(let _n=0;_n<ne;++_n)dt[_n]=J[G.idx[_n]],Qe[_n]=_n<1?0:Qe[_n-1]+ce*$,ut[_n]=new Float32Array(64),gt[_n]=new Uint16Array(64),lt[_n]=new Uint16Array(ce*64);for(let _n=0;_n<$;++_n){var bt=8;_n==$-1&&(bt=Oe);var Ft=8;for(let Dn=0;Dn<ce;++Dn){Dn==ce-1&&(Ft=Xe);for(let Wt=0;Wt<ne;++Wt)gt[Wt].fill(0),gt[Wt][0]=Ue[Qe[Wt]++],At(Ve,Ie,gt[Wt]),at(gt[Wt],ut[Wt]),Kt(ut[Wt]);ht(ut);for(let Wt=0;Wt<ne;++Wt)N(ut[Wt],lt[Wt],Dn*64)}let kn=0;for(let Dn=0;Dn<ne;++Dn){const Wt=fe[G.idx[Dn]].type;for(let bn=8*_n;bn<8*_n+bt;++bn){kn=dt[Dn][bn];for(let hr=0;hr<ae;++hr){const Ln=hr*64+(bn&7)*8;Tt.setUint16(kn+0*Wt,lt[Dn][Ln+0],!0),Tt.setUint16(kn+2*Wt,lt[Dn][Ln+1],!0),Tt.setUint16(kn+4*Wt,lt[Dn][Ln+2],!0),Tt.setUint16(kn+6*Wt,lt[Dn][Ln+3],!0),Tt.setUint16(kn+8*Wt,lt[Dn][Ln+4],!0),Tt.setUint16(kn+10*Wt,lt[Dn][Ln+5],!0),Tt.setUint16(kn+12*Wt,lt[Dn][Ln+6],!0),Tt.setUint16(kn+14*Wt,lt[Dn][Ln+7],!0),kn+=16*Wt}}if(ae!=ce)for(let bn=8*_n;bn<8*_n+bt;++bn){const hr=dt[Dn][bn]+8*ae*2*Wt,Ln=ae*64+(bn&7)*8;for(let cr=0;cr<Ft;++cr)Tt.setUint16(hr+cr*2*Wt,lt[Dn][Ln+cr],!0)}}}for(var rn=new Uint16Array(ot),Tt=new DataView(ke.buffer),_t=0;_t<ne;++_t){fe[G.idx[_t]].decoded=!0;var In=fe[G.idx[_t]].type;if(fe[_t].type==2)for(var $t=0;$t<H;++$t){const _n=dt[_t][$t];for(var Un=0;Un<ot;++Un)rn[Un]=Tt.getUint16(_n+Un*2*In,!0);for(var Un=0;Un<ot;++Un)Tt.setFloat32(_n+Un*2*In,Ce(rn[Un]),!0)}}}function At(G,J,fe){for(var Ie,Ue=1;Ue<64;)Ie=J[G.value],Ie==65280?Ue=64:Ie>>8==255?Ue+=Ie&255:(fe[Ue]=Ie,Ue++),G.value++}function at(G,J){J[0]=Ce(G[0]),J[1]=Ce(G[1]),J[2]=Ce(G[5]),J[3]=Ce(G[6]),J[4]=Ce(G[14]),J[5]=Ce(G[15]),J[6]=Ce(G[27]),J[7]=Ce(G[28]),J[8]=Ce(G[2]),J[9]=Ce(G[4]),J[10]=Ce(G[7]),J[11]=Ce(G[13]),J[12]=Ce(G[16]),J[13]=Ce(G[26]),J[14]=Ce(G[29]),J[15]=Ce(G[42]),J[16]=Ce(G[3]),J[17]=Ce(G[8]),J[18]=Ce(G[12]),J[19]=Ce(G[17]),J[20]=Ce(G[25]),J[21]=Ce(G[30]),J[22]=Ce(G[41]),J[23]=Ce(G[43]),J[24]=Ce(G[9]),J[25]=Ce(G[11]),J[26]=Ce(G[18]),J[27]=Ce(G[24]),J[28]=Ce(G[31]),J[29]=Ce(G[40]),J[30]=Ce(G[44]),J[31]=Ce(G[53]),J[32]=Ce(G[10]),J[33]=Ce(G[19]),J[34]=Ce(G[23]),J[35]=Ce(G[32]),J[36]=Ce(G[39]),J[37]=Ce(G[45]),J[38]=Ce(G[52]),J[39]=Ce(G[54]),J[40]=Ce(G[20]),J[41]=Ce(G[22]),J[42]=Ce(G[33]),J[43]=Ce(G[38]),J[44]=Ce(G[46]),J[45]=Ce(G[51]),J[46]=Ce(G[55]),J[47]=Ce(G[60]),J[48]=Ce(G[21]),J[49]=Ce(G[34]),J[50]=Ce(G[37]),J[51]=Ce(G[47]),J[52]=Ce(G[50]),J[53]=Ce(G[56]),J[54]=Ce(G[59]),J[55]=Ce(G[61]),J[56]=Ce(G[35]),J[57]=Ce(G[36]),J[58]=Ce(G[48]),J[59]=Ce(G[49]),J[60]=Ce(G[57]),J[61]=Ce(G[58]),J[62]=Ce(G[62]),J[63]=Ce(G[63])}function Kt(G){const J=.5*Math.cos(.7853975),fe=.5*Math.cos(3.14159/16),Ie=.5*Math.cos(3.14159/8),Ue=.5*Math.cos(3*3.14159/16),ke=.5*Math.cos(5*3.14159/16),ot=.5*Math.cos(3*3.14159/8),H=.5*Math.cos(7*3.14159/16);for(var ne=new Array(4),ae=new Array(4),ce=new Array(4),$=new Array(4),Xe=0;Xe<8;++Xe){var Oe=Xe*8;ne[0]=Ie*G[Oe+2],ne[1]=ot*G[Oe+2],ne[2]=Ie*G[Oe+6],ne[3]=ot*G[Oe+6],ae[0]=fe*G[Oe+1]+Ue*G[Oe+3]+ke*G[Oe+5]+H*G[Oe+7],ae[1]=Ue*G[Oe+1]-H*G[Oe+3]-fe*G[Oe+5]-ke*G[Oe+7],ae[2]=ke*G[Oe+1]-fe*G[Oe+3]+H*G[Oe+5]+Ue*G[Oe+7],ae[3]=H*G[Oe+1]-ke*G[Oe+3]+Ue*G[Oe+5]-fe*G[Oe+7],ce[0]=J*(G[Oe+0]+G[Oe+4]),ce[3]=J*(G[Oe+0]-G[Oe+4]),ce[1]=ne[0]+ne[3],ce[2]=ne[1]-ne[2],$[0]=ce[0]+ce[1],$[1]=ce[3]+ce[2],$[2]=ce[3]-ce[2],$[3]=ce[0]-ce[1],G[Oe+0]=$[0]+ae[0],G[Oe+1]=$[1]+ae[1],G[Oe+2]=$[2]+ae[2],G[Oe+3]=$[3]+ae[3],G[Oe+4]=$[3]-ae[3],G[Oe+5]=$[2]-ae[2],G[Oe+6]=$[1]-ae[1],G[Oe+7]=$[0]-ae[0]}for(var Ve=0;Ve<8;++Ve)ne[0]=Ie*G[16+Ve],ne[1]=ot*G[16+Ve],ne[2]=Ie*G[48+Ve],ne[3]=ot*G[48+Ve],ae[0]=fe*G[8+Ve]+Ue*G[24+Ve]+ke*G[40+Ve]+H*G[56+Ve],ae[1]=Ue*G[8+Ve]-H*G[24+Ve]-fe*G[40+Ve]-ke*G[56+Ve],ae[2]=ke*G[8+Ve]-fe*G[24+Ve]+H*G[40+Ve]+Ue*G[56+Ve],ae[3]=H*G[8+Ve]-ke*G[24+Ve]+Ue*G[40+Ve]-fe*G[56+Ve],ce[0]=J*(G[Ve]+G[32+Ve]),ce[3]=J*(G[Ve]-G[32+Ve]),ce[1]=ne[0]+ne[3],ce[2]=ne[1]-ne[2],$[0]=ce[0]+ce[1],$[1]=ce[3]+ce[2],$[2]=ce[3]-ce[2],$[3]=ce[0]-ce[1],G[0+Ve]=$[0]+ae[0],G[8+Ve]=$[1]+ae[1],G[16+Ve]=$[2]+ae[2],G[24+Ve]=$[3]+ae[3],G[32+Ve]=$[3]-ae[3],G[40+Ve]=$[2]-ae[2],G[48+Ve]=$[1]-ae[1],G[56+Ve]=$[0]-ae[0]}function ht(G){for(var J=0;J<64;++J){var fe=G[0][J],Ie=G[1][J],Ue=G[2][J];G[0][J]=fe+1.5747*Ue,G[1][J]=fe-.1873*Ie-.4682*Ue,G[2][J]=fe+1.8556*Ie}}function N(G,J,fe){for(var Ie=0;Ie<64;++Ie)J[fe+Ie]=Fd.toHalfFloat(D(G[Ie]))}function D(G){return G<=1?Math.sign(G)*Math.pow(Math.abs(G),2.2):Math.sign(G)*Math.pow(F,Math.abs(G)-1)}function Q(G){return new DataView(G.array.buffer,G.offset.value,G.size)}function ye(G){var J=G.viewer.buffer.slice(G.offset.value,G.offset.value+G.size),fe=new Uint8Array(Dt(J)),Ie=new Uint8Array(fe.length);return Ze(fe),ee(fe,Ie),new DataView(Ie.buffer)}function xe(G){var J=G.array.slice(G.offset.value,G.offset.value+G.size),fe=n0(J),Ie=new Uint8Array(fe.length);return Ze(fe),ee(fe,Ie),new DataView(Ie.buffer)}function pe(G){for(var J=G.viewer,fe={value:G.offset.value},Ie=new Uint16Array(G.width*G.scanlineBlockSize*(G.channels*G.type)),Ue=new Uint8Array(8192),ke=0,ot=new Array(G.channels),H=0;H<G.channels;H++)ot[H]={},ot[H].start=ke,ot[H].end=ot[H].start,ot[H].nx=G.width,ot[H].ny=G.lines,ot[H].size=G.type,ke+=ot[H].nx*ot[H].ny*ot[H].size;var ne=Pe(J,fe),ae=Pe(J,fe);if(ae>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ne<=ae)for(var H=0;H<ae-ne+1;H++)Ue[H+ne]=de(J,fe);var ce=new Uint16Array(65536),$=L(Ue,ce),Xe=Bt(J,fe);Qt(G.array,J,fe,Xe,Ie,ke);for(var H=0;H<G.channels;++H)for(var Oe=ot[H],Ve=0;Ve<ot[H].size;++Ve)yt(Ie,Oe.start+Ve,Oe.nx,Oe.size,Oe.ny,Oe.nx*Oe.size,$);Ke(ce,Ie,ke);for(var Qe=0,ut=new Uint8Array(Ie.buffer.byteLength),gt=0;gt<G.lines;gt++)for(var lt=0;lt<G.channels;lt++){var Oe=ot[lt],dt=Oe.nx*Oe.size,bt=new Uint8Array(Ie.buffer,Oe.end*2,dt*2);ut.set(bt,Qe),Qe+=dt*2,Oe.end+=dt}return new DataView(ut.buffer)}function je(G){var J=G.array.slice(G.offset.value,G.offset.value+G.size),fe=n0(J);const Ie=G.lines*G.channels*G.width,Ue=G.type==1?new Uint16Array(Ie):new Uint32Array(Ie);let ke=0,ot=0;const H=new Array(4);for(let ne=0;ne<G.lines;ne++)for(let ae=0;ae<G.channels;ae++){let ce=0;switch(G.type){case 1:H[0]=ke,H[1]=H[0]+G.width,ke=H[1]+G.width;for(let $=0;$<G.width;++$){const Xe=fe[H[0]++]<<8|fe[H[1]++];ce+=Xe,Ue[ot]=ce,ot++}break;case 2:H[0]=ke,H[1]=H[0]+G.width,H[2]=H[1]+G.width,ke=H[2]+G.width;for(let $=0;$<G.width;++$){const Xe=fe[H[0]++]<<24|fe[H[1]++]<<16|fe[H[2]++]<<8;ce+=Xe,Ue[ot]=ce,ot++}break}}return new DataView(Ue.buffer)}function Ye(G){var J=G.viewer,fe={value:G.offset.value},Ie=new Uint8Array(G.width*G.lines*(G.channels*G.type*2)),Ue={version:De(J,fe),unknownUncompressedSize:De(J,fe),unknownCompressedSize:De(J,fe),acCompressedSize:De(J,fe),dcCompressedSize:De(J,fe),rleCompressedSize:De(J,fe),rleUncompressedSize:De(J,fe),rleRawSize:De(J,fe),totalAcUncompressedCount:De(J,fe),totalDcUncompressedCount:De(J,fe),acCompression:De(J,fe)};if(Ue.version<2)throw"EXRLoader.parse: "+ai.compression+" version "+Ue.version+" is unsupported";for(var ke=new Array,ot=Pe(J,fe)-2;ot>0;){var H=$e(J.buffer,fe),ne=de(J,fe),ae=ne>>2&3,ce=(ne>>4)-1,$=new Int8Array([ce])[0],Xe=de(J,fe);ke.push({name:H,index:$,type:Xe,compression:ae}),ot-=H.length+3}for(var Oe=ai.channels,Ve=new Array(G.channels),Qe=0;Qe<G.channels;++Qe){var ut=Ve[Qe]={},gt=Oe[Qe];ut.name=gt.name,ut.compression=0,ut.decoded=!1,ut.type=gt.pixelType,ut.pLinear=gt.pLinear,ut.width=G.width,ut.height=G.lines}for(var lt={idx:new Array(3)},dt=0;dt<G.channels;++dt)for(var ut=Ve[dt],Qe=0;Qe<ke.length;++Qe){var bt=ke[Qe];ut.name==bt.name&&(ut.compression=bt.compression,bt.index>=0&&(lt.idx[bt.index]=dt),ut.offset=dt)}if(Ue.acCompressedSize>0)switch(Ue.acCompression){case 0:var Tt=new Uint16Array(Ue.totalAcUncompressedCount);Qt(G.array,J,fe,Ue.acCompressedSize,Tt,Ue.totalAcUncompressedCount);break;case 1:var Ft=G.array.slice(fe.value,fe.value+Ue.totalAcUncompressedCount),rn=n0(Ft),Tt=new Uint16Array(rn.buffer);fe.value+=Ue.totalAcUncompressedCount;break}if(Ue.dcCompressedSize>0){var _t={array:G.array,offset:fe,size:Ue.dcCompressedSize},In=new Uint16Array(xe(_t).buffer);fe.value+=Ue.dcCompressedSize}if(Ue.rleRawSize>0){var Ft=G.array.slice(fe.value,fe.value+Ue.rleCompressedSize),rn=n0(Ft),$t=Dt(rn.buffer);fe.value+=Ue.rleCompressedSize}for(var Un=0,_n=new Array(Ve.length),Qe=0;Qe<_n.length;++Qe)_n[Qe]=new Array;for(var kn=0;kn<G.lines;++kn)for(var Dn=0;Dn<Ve.length;++Dn)_n[Dn].push(Un),Un+=Ve[Dn].width*G.type*2;et(lt,_n,Ve,Tt,In,Ie);for(var Qe=0;Qe<Ve.length;++Qe){var ut=Ve[Qe];if(!ut.decoded)switch(ut.compression){case 2:for(var Wt=0,bn=0,kn=0;kn<G.lines;++kn){for(var hr=_n[Qe][Wt],Ln=0;Ln<ut.width;++Ln){for(var cr=0;cr<2*ut.type;++cr)Ie[hr++]=$t[bn+cr*ut.width*ut.height];bn++}Wt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ie.buffer)}function $e(G,J){for(var fe=new Uint8Array(G),Ie=0;fe[J.value+Ie]!=0;)Ie+=1;var Ue=new TextDecoder().decode(fe.slice(J.value,J.value+Ie));return J.value=J.value+Ie+1,Ue}function kt(G,J,fe){var Ie=new TextDecoder().decode(new Uint8Array(G).slice(J.value,J.value+fe));return J.value=J.value+fe,Ie}function qe(G,J){var fe=zt(G,J),Ie=Bt(G,J);return[fe,Ie]}function xt(G,J){var fe=Bt(G,J),Ie=Bt(G,J);return[fe,Ie]}function zt(G,J){var fe=G.getInt32(J.value,!0);return J.value=J.value+4,fe}function Bt(G,J){var fe=G.getUint32(J.value,!0);return J.value=J.value+4,fe}function St(G,J){var fe=G[J.value];return J.value=J.value+1,fe}function de(G,J){var fe=G.getUint8(J.value);return J.value=J.value+1,fe}const De=function(G,J){let fe;return"getBigInt64"in DataView.prototype?fe=Number(G.getBigInt64(J.value,!0)):fe=G.getUint32(J.value+4,!0)+Number(G.getUint32(J.value,!0)<<32),J.value+=8,fe};function it(G,J){var fe=G.getFloat32(J.value,!0);return J.value+=4,fe}function le(G,J){return Fd.toHalfFloat(it(G,J))}function Ce(G){var J=(G&31744)>>10,fe=G&1023;return(G>>15?-1:1)*(J?J===31?fe?NaN:1/0:Math.pow(2,J-15)*(1+fe/1024):6103515625e-14*(fe/1024))}function Pe(G,J){var fe=G.getUint16(J.value,!0);return J.value+=2,fe}function Ge(G,J){return Ce(Pe(G,J))}function Mt(G,J,fe,Ie){for(var Ue=fe.value,ke=[];fe.value<Ue+Ie-1;){var ot=$e(J,fe),H=zt(G,fe),ne=de(G,fe);fe.value+=3;var ae=zt(G,fe),ce=zt(G,fe);ke.push({name:ot,pixelType:H,pLinear:ne,xSampling:ae,ySampling:ce})}return fe.value+=1,ke}function vt(G,J){var fe=it(G,J),Ie=it(G,J),Ue=it(G,J),ke=it(G,J),ot=it(G,J),H=it(G,J),ne=it(G,J),ae=it(G,J);return{redX:fe,redY:Ie,greenX:Ue,greenY:ke,blueX:ot,blueY:H,whiteX:ne,whiteY:ae}}function qt(G,J){var fe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ie=de(G,J);return fe[Ie]}function Rn(G,J){var fe=Bt(G,J),Ie=Bt(G,J),Ue=Bt(G,J),ke=Bt(G,J);return{xMin:fe,yMin:Ie,xMax:Ue,yMax:ke}}function $n(G,J){var fe=["INCREASING_Y"],Ie=de(G,J);return fe[Ie]}function fn(G,J){var fe=it(G,J),Ie=it(G,J);return[fe,Ie]}function vr(G,J){var fe=it(G,J),Ie=it(G,J),Ue=it(G,J);return[fe,Ie,Ue]}function wr(G,J,fe,Ie,Ue){if(Ie==="string"||Ie==="stringvector"||Ie==="iccProfile")return kt(J,fe,Ue);if(Ie==="chlist")return Mt(G,J,fe,Ue);if(Ie==="chromaticities")return vt(G,fe);if(Ie==="compression")return qt(G,fe);if(Ie==="box2i")return Rn(G,fe);if(Ie==="lineOrder")return $n(G,fe);if(Ie==="float")return it(G,fe);if(Ie==="v2f")return fn(G,fe);if(Ie==="v3f")return vr(G,fe);if(Ie==="int")return zt(G,fe);if(Ie==="rational")return qe(G,fe);if(Ie==="timecode")return xt(G,fe);if(Ie==="preview")return fe.value+=Ue,"skipped";fe.value+=Ue}function xo(G,J,fe){const Ie={};if(G.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ie.version=G.getUint8(4);const Ue=G.getUint8(5);Ie.spec={singleTile:!!(Ue&2),longName:!!(Ue&4),deepFormat:!!(Ue&8),multiPart:!!(Ue&16)},fe.value=8;for(var ke=!0;ke;){var ot=$e(J,fe);if(ot==0)ke=!1;else{var H=$e(J,fe),ne=Bt(G,fe),ae=wr(G,J,fe,H,ne);ae===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${H}'.`):Ie[ot]=ae}}if((Ue&-5)!=0)throw console.error("EXRHeader:",Ie),"THREE.EXRLoader: provided file is currently unsupported.";return Ie}function fa(G,J,fe,Ie,Ue){const ke={size:0,viewer:J,array:fe,offset:Ie,width:G.dataWindow.xMax-G.dataWindow.xMin+1,height:G.dataWindow.yMax-G.dataWindow.yMin+1,channels:G.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:G.channels[0].pixelType,uncompress:null,getter:null,format:null,[$m?"colorSpace":"encoding"]:null};switch(G.compression){case"NO_COMPRESSION":ke.lines=1,ke.uncompress=Q;break;case"RLE_COMPRESSION":ke.lines=1,ke.uncompress=ye;break;case"ZIPS_COMPRESSION":ke.lines=1,ke.uncompress=xe;break;case"ZIP_COMPRESSION":ke.lines=16,ke.uncompress=xe;break;case"PIZ_COMPRESSION":ke.lines=32,ke.uncompress=pe;break;case"PXR24_COMPRESSION":ke.lines=16,ke.uncompress=je;break;case"DWAA_COMPRESSION":ke.lines=32,ke.uncompress=Ye;break;case"DWAB_COMPRESSION":ke.lines=256,ke.uncompress=Ye;break;default:throw"EXRLoader.parse: "+G.compression+" is unsupported"}if(ke.scanlineBlockSize=ke.lines,ke.type==1)switch(Ue){case br:ke.getter=Ge,ke.inputSize=2;break;case vi:ke.getter=Pe,ke.inputSize=2;break}else if(ke.type==2)switch(Ue){case br:ke.getter=it,ke.inputSize=4;break;case vi:ke.getter=le,ke.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ke.type+" for "+G.compression+".";ke.blockCount=(G.dataWindow.yMax+1)/ke.scanlineBlockSize;for(var ot=0;ot<ke.blockCount;ot++)De(J,Ie);ke.outputChannels=ke.channels==3?4:ke.channels;const H=ke.width*ke.height*ke.outputChannels;switch(Ue){case br:ke.byteArray=new Float32Array(H),ke.channels<ke.outputChannels&&ke.byteArray.fill(1,0,H);break;case vi:ke.byteArray=new Uint16Array(H),ke.channels<ke.outputChannels&&ke.byteArray.fill(15360,0,H);break;default:console.error("THREE.EXRLoader: unsupported type: ",Ue);break}return ke.bytesPerLine=ke.width*ke.inputSize*ke.channels,ke.outputChannels==4?ke.format=Kr:ke.format=Qg,$m?ke.colorSpace="srgb-linear":ke.encoding=3e3,ke}const Pi=new DataView(e),is=new Uint8Array(e),ss={value:0},ai=xo(Pi,e,ss),cn=fa(ai,Pi,is,ss,this.type),qo={value:0},_o={R:0,G:1,B:2,A:3,Y:0};for(let G=0;G<cn.height/cn.scanlineBlockSize;G++){const J=Bt(Pi,ss);cn.size=Bt(Pi,ss),cn.lines=J+cn.scanlineBlockSize>cn.height?cn.height-J:cn.scanlineBlockSize;const Ie=cn.size<cn.lines*cn.bytesPerLine?cn.uncompress(cn):Q(cn);ss.value+=cn.size;for(let Ue=0;Ue<cn.scanlineBlockSize;Ue++){const ke=Ue+G*cn.scanlineBlockSize;if(ke>=cn.height)break;for(let ot=0;ot<cn.channels;ot++){const H=_o[ai.channels[ot].name];for(let ne=0;ne<cn.width;ne++){qo.value=(Ue*(cn.channels*cn.width)+ot*cn.width+ne)*cn.inputSize;const ae=(cn.height-1-ke)*(cn.width*cn.outputChannels)+ne*cn.outputChannels+H;cn.byteArray[ae]=cn.getter(Ie,qo)}}}}return{header:ai,width:cn.width,height:cn.height,data:cn.byteArray,format:cn.format,[$m?"colorSpace":"encoding"]:cn[$m?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,l){$m?a.colorSpace=l.colorSpace:a.encoding=l.encoding,a.minFilter=Jn,a.magFilter=Jn,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,l)}return super.load(e,s,n,i)}}const zA=new WeakMap;class EG extends Vi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new Gi(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const h=t.attributeTypes[u];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=h.name)}const n=JSON.stringify(t);if(zA.has(e)){const u=zA.get(e);if(u.key===n)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,a=e.byteLength,l=this._getWorker(s,a).then(u=>(i=u,new Promise((h,p)=>{i._callbacks[s]={resolve:h,reject:p},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),zA.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new xn;e.index&&t.setIndex(new Kn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,a=i.array,l=i.itemSize;t.setAttribute(s,new Kn(a,l))}return t}_loadLibrary(e,t){const n=new Gi(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,s)=>{n.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=CG.toString(),a=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const a=s.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function CG(){let r,e;onmessage=function(a){const l=a.data;switch(l.type){case"init":r=l.decoderConfig,e=new Promise(function(p){r.onModuleLoaded=function(m){p({draco:m})},DracoDecoderModule(r)});break;case"decode":const u=l.buffer,h=l.taskConfig;e.then(p=>{const m=p.draco,v=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(u),u.byteLength);try{const _=t(m,v,y,h),M=_.attributes.map(w=>w.array.buffer);_.index&&M.push(_.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:_},M)}catch(_){console.error(_),self.postMessage({type:"error",id:l.id,error:_.message})}finally{m.destroy(y),m.destroy(v)}});break}};function t(a,l,u,h){const p=h.attributeIDs,m=h.attributeTypes;let v,y;const _=l.GetEncodedGeometryType(u);if(_===a.TRIANGULAR_MESH)v=new a.Mesh,y=l.DecodeBufferToMesh(u,v);else if(_===a.POINT_CLOUD)v=new a.PointCloud,y=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const M={index:null,attributes:[]};for(const w in p){const S=self[m[w]];let T,R;if(h.useUniqueIDs)R=p[w],T=l.GetAttributeByUniqueId(v,R);else{if(R=l.GetAttributeId(v,a[p[w]]),R===-1)continue;T=l.GetAttribute(v,R)}M.attributes.push(i(a,l,v,w,S,T))}return _===a.TRIANGULAR_MESH&&(M.index=n(a,l,v)),a.destroy(v),M}function n(a,l,u){const p=u.num_faces()*3,m=p*4,v=a._malloc(m);l.GetTrianglesUInt32Array(u,m,v);const y=new Uint32Array(a.HEAPF32.buffer,v,p).slice();return a._free(v),{array:y,itemSize:1}}function i(a,l,u,h,p,m){const v=m.num_components(),_=u.num_points()*v,M=_*p.BYTES_PER_ELEMENT,w=s(a,p),S=a._malloc(M);l.GetAttributeDataArrayForAllPoints(u,m,w,M,S);const T=new p(a.HEAPF32.buffer,S,_).slice();return a._free(S),{name:h,array:T,itemSize:v}}function s(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let i0;const HA=()=>{if(i0)return i0;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=r;WebAssembly.validate(t)&&(i=e);let s;const a=WebAssembly.instantiate(l(i),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function l(m){const v=new Uint8Array(m.length);for(let _=0;_<m.length;++_){const M=m.charCodeAt(_);v[_]=M>96?M-71:M>64?M-65:M>47?M+4:M>46?63:62}let y=0;for(let _=0;_<m.length;++_)v[y++]=v[_]<60?n[v[_]]:(v[_]-60)*64+v[++_];return v.buffer.slice(0,y)}function u(m,v,y,_,M,w){const S=s.exports.sbrk,T=y+3&-4,R=S(T*_),C=S(M.length),k=new Uint8Array(s.exports.memory.buffer);k.set(M,C);const O=m(R,y,_,C,M.length);if(O===0&&w&&w(R,T,_),v.set(k.subarray(R,R+y*_)),S(R-S(0)),O!==0)throw new Error(`Malformed buffer data: ${O}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return i0={ready:a,supported:!0,decodeVertexBuffer(m,v,y,_,M){u(s.exports.meshopt_decodeVertexBuffer,m,v,y,_,s.exports[h[M]])},decodeIndexBuffer(m,v,y,_){u(s.exports.meshopt_decodeIndexBuffer,m,v,y,_)},decodeIndexSequence(m,v,y,_){u(s.exports.meshopt_decodeIndexSequence,m,v,y,_)},decodeGltfBuffer(m,v,y,_,M,w){u(s.exports[p[M]],m,v,y,_,s.exports[h[w]])}},i0};function bG(r,e,t,n){const i=class extends Cs{constructor(a={}){const l=Object.entries(r);super({uniforms:l.reduce((u,[h,p])=>{const m=Ew.clone({[h]:{value:p}});return{...u,...m}},{}),vertexShader:e,fragmentShader:t}),this.key="",l.forEach(([u])=>Object.defineProperty(this,u,{get:()=>this.uniforms[u].value,set:h=>this.uniforms[u].value=h})),Object.assign(this,a)}};return i.key=Aw.generateUUID(),i}const TG=()=>parseInt(Dp.replace(/\D+/g,"")),RG=TG();let s0=null,WI="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function XI(r=!0,e=!0,t){return n=>{t&&t(n),r&&(s0||(s0=new EG),s0.setDecoderPath(typeof r=="string"?r:WI),n.setDRACOLoader(s0)),e&&n.setMeshoptDecoder(typeof HA=="function"?HA():HA)}}const Xx=(r,e,t,n)=>nc(cM,r,XI(e,t,n));Xx.preload=(r,e,t,n)=>nc.preload(cM,r,XI(e,t,n));Xx.clear=r=>nc.clear(cM,r);Xx.setDecoderPath=r=>{WI=r};function IG(r,e,t){const n=Ar(v=>v.size),i=Ar(v=>v.viewport),s=typeof r=="number"?r:n.width*i.dpr,a=n.height*i.dpr,l=(typeof r=="number"?t:r)||{},{samples:u=0,depth:h,...p}=l,m=X.useMemo(()=>{const v=new Js(s,a,{minFilter:Jn,magFilter:Jn,type:vi,...p});return h&&(v.depthTexture=new Rx(s,a,br)),v.samples=u,v},[]);return X.useLayoutEffect(()=>{m.setSize(s,a),u&&(m.samples=u)},[u,m,s,a]),X.useEffect(()=>()=>m.dispose(),[]),m}const PG=r=>typeof r=="function",BG=X.forwardRef(({envMap:r,resolution:e=256,frames:t=1/0,children:n,makeDefault:i,...s},a)=>{const l=Ar(({set:w})=>w),u=Ar(({camera:w})=>w),h=Ar(({size:w})=>w),p=X.useRef(null);X.useImperativeHandle(a,()=>p.current,[]);const m=X.useRef(null),v=IG(e);X.useLayoutEffect(()=>{s.manual||p.current.updateProjectionMatrix()},[h,s]),X.useLayoutEffect(()=>{p.current.updateProjectionMatrix()}),X.useLayoutEffect(()=>{if(i){const w=u;return l(()=>({camera:p.current})),()=>l(()=>({camera:w}))}},[p,i,l]);let y=0,_=null;const M=PG(n);return kp(w=>{M&&(t===1/0||y<t)&&(m.current.visible=!1,w.gl.setRenderTarget(v),_=w.scene.background,r&&(w.scene.background=r),w.gl.render(w.scene,p.current),w.scene.background=_,w.gl.setRenderTarget(null),m.current.visible=!0,y++)}),X.createElement(X.Fragment,null,X.createElement("orthographicCamera",Ss({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:p},s),!M&&n),X.createElement("group",{ref:m},M&&n(v.texture)))}),DG=X.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:a,onStart:l,onEnd:u,...h},p)=>{const m=Ar(O=>O.invalidate),v=Ar(O=>O.camera),y=Ar(O=>O.gl),_=Ar(O=>O.events),M=Ar(O=>O.setEvents),w=Ar(O=>O.set),S=Ar(O=>O.get),T=Ar(O=>O.performance),R=e||v,C=n||_.connected||y.domElement,k=X.useMemo(()=>new HH(R),[R]);return kp(()=>{k.enabled&&k.update()},-1),X.useEffect(()=>(s&&k.connect(s===!0?C:s),k.connect(C),()=>void k.dispose()),[s,C,t,k,m]),X.useEffect(()=>{const O=F=>{m(),t&&T.regress(),a&&a(F)},V=F=>{l&&l(F)},z=F=>{u&&u(F)};return k.addEventListener("change",O),k.addEventListener("start",V),k.addEventListener("end",z),()=>{k.removeEventListener("start",V),k.removeEventListener("end",z),k.removeEventListener("change",O)}},[a,l,u,k,m,M]),X.useEffect(()=>{if(r){const O=S().controls;return w({controls:k}),()=>w({controls:O})}},[r,k]),X.createElement("primitive",Ss({ref:p,object:k,enableDamping:i},h))});function LG({defaultScene:r,defaultCamera:e,renderPriority:t=1}){const{gl:n,scene:i,camera:s}=Ar();let a;return kp(()=>{a=n.autoClear,t===1&&(n.autoClear=!0,n.render(r,e)),n.autoClear=!1,n.clearDepth(),n.render(i,s),n.autoClear=a},t),X.createElement("group",{onPointerOver:()=>null})}function NG({children:r,renderPriority:e=1}){const{scene:t,camera:n}=Ar(),[i]=X.useState(()=>new Np);return X.createElement(X.Fragment,null,BI(X.createElement(X.Fragment,null,r,X.createElement(LG,{defaultScene:t,defaultCamera:n,renderPriority:e})),i,{events:{priority:e+1}}))}const JI=X.createContext({}),FG=()=>X.useContext(JI),OG=2*Math.PI,GA=new On,XC=new nn,[Fh,VA]=[new ii,new ii],JC=new Z,KC=new Z,UG=r=>"minPolarAngle"in r,YC=r=>"getTarget"in r,kG=({alignment:r="bottom-right",margin:e=[80,80],renderPriority:t=1,onUpdate:n,onTarget:i,children:s})=>{const a=Ar(O=>O.size),l=Ar(O=>O.camera),u=Ar(O=>O.controls),h=Ar(O=>O.invalidate),p=X.useRef(null),m=X.useRef(null),v=X.useRef(!1),y=X.useRef(0),_=X.useRef(new Z(0,0,0)),M=X.useRef(new Z(0,0,0));X.useEffect(()=>{M.current.copy(l.up),GA.up.copy(l.up)},[l]);const w=X.useCallback(O=>{v.current=!0,(u||i)&&(_.current=(i==null?void 0:i())||(YC(u)?u.getTarget(_.current):u==null?void 0:u.target)),y.current=l.position.distanceTo(JC),Fh.copy(l.quaternion),KC.copy(O).multiplyScalar(y.current).add(JC),GA.lookAt(KC),VA.copy(GA.quaternion),h()},[u,l,i,h]);kp((O,V)=>{if(m.current&&p.current){var z;if(v.current)if(Fh.angleTo(VA)<.01)v.current=!1,UG(u)&&l.up.copy(M.current);else{const F=V*OG;Fh.rotateTowards(VA,F),l.position.set(0,0,1).applyQuaternion(Fh).multiplyScalar(y.current).add(_.current),l.up.set(0,1,0).applyQuaternion(Fh).normalize(),l.quaternion.copy(Fh),YC(u)&&u.setPosition(l.position.x,l.position.y,l.position.z),n?n():u&&u.update(V),h()}XC.copy(l.matrix).invert(),(z=p.current)==null||z.quaternion.setFromRotationMatrix(XC)}});const S=X.useMemo(()=>({tweenCamera:w}),[w]),[T,R]=e,C=r.endsWith("-center")?0:r.endsWith("-left")?-a.width/2+T:a.width/2-T,k=r.startsWith("center-")?0:r.startsWith("top-")?a.height/2-R:-a.height/2+R;return X.createElement(NG,{renderPriority:t},X.createElement(JI.Provider,{value:S},X.createElement(BG,{makeDefault:!0,ref:m,position:[0,0,200]}),X.createElement("group",{ref:p,position:[C,k,0]},s)))};function jA({scale:r=[.8,.05,.05],color:e,rotation:t}){return X.createElement("group",{rotation:t},X.createElement("mesh",{position:[.4,0,0]},X.createElement("boxGeometry",{args:r}),X.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function Oh({onClick:r,font:e,disabled:t,arcStyle:n,label:i,labelColor:s,axisHeadScale:a=1,...l}){const u=Ar(M=>M.gl),h=X.useMemo(()=>{const M=document.createElement("canvas");M.width=64,M.height=64;const w=M.getContext("2d");return w.beginPath(),w.arc(32,32,16,0,2*Math.PI),w.closePath(),w.fillStyle=n,w.fill(),i&&(w.font=e,w.textAlign="center",w.fillStyle=s,w.fillText(i,32,41)),new MR(M)},[n,i,s,e]),[p,m]=X.useState(!1),v=(i?1:.75)*(p?1.2:1)*a,y=M=>{M.stopPropagation(),m(!0)},_=M=>{M.stopPropagation(),m(!1)};return X.createElement("sprite",Ss({scale:v,onPointerOver:t?void 0:y,onPointerOut:t?void 0:r||_},l),X.createElement("spriteMaterial",{map:h,"map-anisotropy":u.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}const zG=({hideNegativeAxes:r,hideAxisHeads:e,disabled:t,font:n="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:a,labels:l=["X","Y","Z"],labelColor:u="#000",onClick:h,...p})=>{const[m,v,y]=i,{tweenCamera:_}=FG(),M={font:n,disabled:t,labelColor:u,onClick:h,axisHeadScale:s,onPointerDown:t?void 0:w=>{_(w.object.position),w.stopPropagation()}};return X.createElement("group",Ss({scale:40},p),X.createElement(jA,{color:m,rotation:[0,0,0],scale:a}),X.createElement(jA,{color:v,rotation:[0,0,Math.PI/2],scale:a}),X.createElement(jA,{color:y,rotation:[0,-Math.PI/2,0],scale:a}),!e&&X.createElement(X.Fragment,null,X.createElement(Oh,Ss({arcStyle:m,position:[1,0,0],label:l[0]},M)),X.createElement(Oh,Ss({arcStyle:v,position:[0,1,0],label:l[1]},M)),X.createElement(Oh,Ss({arcStyle:y,position:[0,0,1],label:l[2]},M)),!r&&X.createElement(X.Fragment,null,X.createElement(Oh,Ss({arcStyle:m,position:[-1,0,0]},M)),X.createElement(Oh,Ss({arcStyle:v,position:[0,-1,0]},M)),X.createElement(Oh,Ss({arcStyle:y,position:[0,0,-1]},M)))))},HG=bG({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new wt,sectionColor:new wt,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Z,worldPlanePosition:new Z},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${RG>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),GG=X.forwardRef(({args:r,cellColor:e="#000000",sectionColor:t="#2080ff",cellSize:n=.5,sectionSize:i=1,followCamera:s=!1,infiniteGrid:a=!1,fadeDistance:l=100,fadeStrength:u=1,fadeFrom:h=1,cellThickness:p=.5,sectionThickness:m=1,side:v=ts,...y},_)=>{iM({GridMaterial:HG});const M=X.useRef(null);X.useImperativeHandle(_,()=>M.current,[]);const w=new ko,S=new Z(0,1,0),T=new Z(0,0,0);kp(k=>{w.setFromNormalAndCoplanarPoint(S,T).applyMatrix4(M.current.matrixWorld);const O=M.current.material,V=O.uniforms.worldCamProjPosition,z=O.uniforms.worldPlanePosition;w.projectPoint(k.camera.position,V.value),z.value.set(0,0,0).applyMatrix4(M.current.matrixWorld)});const R={cellSize:n,sectionSize:i,cellColor:e,sectionColor:t,cellThickness:p,sectionThickness:m},C={fadeDistance:l,fadeStrength:u,fadeFrom:h,infiniteGrid:a,followCamera:s};return X.createElement("mesh",Ss({ref:M,frustumCulled:!1},y),X.createElement("gridMaterial",Ss({transparent:!0,"extensions-derivatives":!0,side:v},R,C)),X.createElement("planeGeometry",{args:r}))}),VG=3e3,jG=3001,KI=(r,e,t)=>{let n;switch(r){case Xs:n=new Uint8ClampedArray(e*t*4);break;case vi:n=new Uint16Array(e*t*4);break;case Yo:n=new Uint32Array(e*t*4);break;case gx:n=new Int8Array(e*t*4);break;case vx:n=new Int16Array(e*t*4);break;case Zg:n=new Int32Array(e*t*4);break;case br:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let a0;const WG=(r,e,t,n)=>{if(a0!==void 0)return a0;const i=new Js(1,1,n);e.setRenderTarget(i);const s=new Tr(new Eu,new Ws({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=KI(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),s.geometry.dispose(),s.material.dispose(),a0=a[0]!==0,a0};class uM{constructor(e){Ur(this,"_renderer");Ur(this,"_rendererIsDisposable",!1);Ur(this,"_material");Ur(this,"_scene");Ur(this,"_camera");Ur(this,"_quad");Ur(this,"_renderTarget");Ur(this,"_width");Ur(this,"_height");Ur(this,"_type");Ur(this,"_colorSpace");Ur(this,"_supportsReadPixels",!0);Ur(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var n,i,s,a,l,u,h,p,m,v,y,_,M,w,S,T;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const t={format:Kr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)==null?void 0:n.anisotropy)!==void 0?(i=e.renderTargetOptions)==null?void 0:i.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)==null?void 0:s.generateMipmaps)!==void 0?(a=e.renderTargetOptions)==null?void 0:a.generateMipmaps:!1,magFilter:((l=e.renderTargetOptions)==null?void 0:l.magFilter)!==void 0?(u=e.renderTargetOptions)==null?void 0:u.magFilter:Jn,minFilter:((h=e.renderTargetOptions)==null?void 0:h.minFilter)!==void 0?(p=e.renderTargetOptions)==null?void 0:p.minFilter:Jn,samples:((m=e.renderTargetOptions)==null?void 0:m.samples)!==void 0?(v=e.renderTargetOptions)==null?void 0:v.samples:void 0,wrapS:((y=e.renderTargetOptions)==null?void 0:y.wrapS)!==void 0?(_=e.renderTargetOptions)==null?void 0:_.wrapS:Jr,wrapT:((M=e.renderTargetOptions)==null?void 0:M.wrapT)!==void 0?(w=e.renderTargetOptions)==null?void 0:w.wrapT:Jr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=uM.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Np,this._camera=new Wo,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!WG(this._type,this._renderer,this._camera,t)){let R;switch(this._type){case vi:R=this._renderer.extensions.has("EXT_color_buffer_float")?br:void 0;break}R!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${br}`),this._type=R):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Tr(new Eu,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Js(this.width,this.height,t),this._renderTarget.texture.mapping=((S=e.renderTargetOptions)==null?void 0:S.mapping)!==void 0?(T=e.renderTargetOptions)==null?void 0:T.mapping:vu}static instantiateRenderer(){const e=new nM;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=KI(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new mo(this.toArray(),this.width,this.height,Kr,this._type,(e==null?void 0:e.mapping)||vu,(e==null?void 0:e.wrapS)||Jr,(e==null?void 0:e.wrapT)||Jr,(e==null?void 0:e.magFilter)||Jn,(e==null?void 0:e.minFilter)||Jn,(e==null?void 0:e.anisotropy)||1,Zo);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Cs&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof nr&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof nr&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class YI extends Error{}class ZI extends Error{}const eg=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},XG=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=eg(i,"hdrgm:GainMapMin","0"),a=eg(i,"hdrgm:GainMapMax"),l=eg(i,"hdrgm:Gamma","1"),u=eg(i,"hdrgm:OffsetSDR","0.015625"),h=eg(i,"hdrgm:OffsetHDR","0.015625"),p=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),m=p?p[1]:"0",v=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!v)throw new Error("Incomplete gainmap metadata");const y=v[1];return{gainMapMin:Array.isArray(s)?s.map(_=>parseFloat(_)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(_=>parseFloat(_)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(l)?l.map(_=>parseFloat(_)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(u)?u.map(_=>parseFloat(_)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetHdr:Array.isArray(h)?h.map(_=>parseFloat(_)):[parseFloat(h),parseFloat(h),parseFloat(h)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class JG{constructor(e){Ur(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const a=s.byteLength;let l=2,u=0,h;for(;l<a;){if(++u>250){n(new Error(`Found no marker after ${u} loops `));return}if(s.getUint8(l)!==255){n(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${s.getUint8(l).toString(16)}`));return}if(h=s.getUint8(l+1),i&&console.log(`Marker: ${h.toString(16)}`),h===226){i&&console.log("Found APP2 marker (0xffe2)");const p=l+4;if(s.getUint32(p)===1297106432){const m=p+4;let v;if(s.getUint16(m)===18761)v=!1;else if(s.getUint16(m)===19789)v=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(m+2,!v)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=s.getUint32(m+4,!v);if(y<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=m+y,M=s.getUint16(_,!v),w=_+2;let S=0;for(let k=w;k<w+12*M;k+=12)s.getUint16(k,!v)===45057&&(S=s.getUint32(k+8,!v));const R=_+2+M*12+4,C=[];for(let k=R;k<R+S*16;k+=16){const O={MPType:s.getUint32(k,!v),size:s.getUint32(k+4,!v),dataOffset:s.getUint32(k+8,!v),dependantImages:s.getUint32(k+12,!v),start:-1,end:-1,isFII:!1};O.dataOffset?(O.start=m+O.dataOffset,O.isFII=!1):(O.start=0,O.isFII=!0),O.end=O.start+O.size,C.push(O)}if(this.options.extractNonFII&&C.length){const k=new Blob([s]),O=[];for(const V of C){if(V.isFII&&!this.options.extractFII)continue;const z=k.slice(V.start,V.end+1,"image/jpeg");O.push(z)}t(O)}}}l+=2+s.getUint16(l+2)}})}}const KG=async r=>{const e=XG(r);if(!e)throw new ZI("Gain map XMP metadata not found");const n=await new JG({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new YI("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},ZC=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class YG extends Vi{constructor(t,n){super(n);Ur(this,"_renderer");Ur(this,"_renderTargetOptions");Ur(this,"_internalLoadingManager");Ur(this,"_config");this._config=t,t.renderer&&(this._renderer=t.renderer),this._internalLoadingManager=new Vx}setRenderer(t){return this._renderer=t,this}setRenderTargetOptions(t){return this._renderTargetOptions=t,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const t=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new nr,sdr:new nr});return this._config.createQuadRenderer({width:16,height:16,type:vi,colorSpace:Zo,material:t,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(t,n,i){const s=n?new Blob([n],{type:"image/jpeg"}):void 0,a=new Blob([t],{type:"image/jpeg"});let l,u,h=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([s?ZC(s):Promise.resolve(void 0),ZC(a)]);u=p[0],l=p[1],h=i==="flipY"}else{const p=await Promise.all([s?createImageBitmap(s,{imageOrientation:i||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:i||"flipY"})]);u=p[0],l=p[1]}return{sdrImage:l,gainMapImage:u,needsFlip:h}}createTextures(t,n,i){const s=new nr(n||new ImageData(2,2),vu,Jr,Jr,Jn,_S,Kr,Xs,1,Zo);s.flipY=i,s.needsUpdate=!0;const a=new nr(t,vu,Jr,Jr,Jn,_S,Kr,Xs,1,As);return a.flipY=i,a.needsUpdate=!0,{gainMap:s,sdr:a}}updateQuadRenderer(t,n,i,s,a){t.width=n.width,t.height=n.height,t.material.gainMap=i,t.material.sdr=s,t.material.gainMapMin=a.gainMapMin,t.material.gainMapMax=a.gainMapMax,t.material.offsetHdr=a.offsetHdr,t.material.offsetSdr=a.offsetSdr,t.material.gamma=a.gamma,t.material.hdrCapacityMin=a.hdrCapacityMin,t.material.hdrCapacityMax=a.hdrCapacityMax,t.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),t.material.needsUpdate=!0}}const ZG=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,QG=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class qG extends Cs{constructor({gamma:t,offsetHdr:n,offsetSdr:i,gainMapMin:s,gainMapMax:a,maxDisplayBoost:l,hdrCapacityMin:u,hdrCapacityMax:h,sdr:p,gainMap:m}){super({name:"GainMapDecoderMaterial",vertexShader:ZG,fragmentShader:QG,uniforms:{sdr:{value:p},gainMap:{value:m},gamma:{value:new Z(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:new Z().fromArray(n)},offsetSdr:{value:new Z().fromArray(i)},gainMapMin:{value:new Z().fromArray(s)},gainMapMax:{value:new Z().fromArray(a)},weightFactor:{value:(Math.log2(l)-u)/(h-u)}},blending:Go,depthTest:!1,depthWrite:!1});Ur(this,"_maxDisplayBoost");Ur(this,"_hdrCapacityMin");Ur(this,"_hdrCapacityMax");this._maxDisplayBoost=l,this._hdrCapacityMin=u,this._hdrCapacityMax=h,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(t){this.uniforms.sdr.value=t}get gainMap(){return this.uniforms.gainMap.value}set gainMap(t){this.uniforms.gainMap.value=t}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(t){this.uniforms.offsetHdr.value.fromArray(t)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(t){this.uniforms.offsetSdr.value.fromArray(t)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(t){this.uniforms.gainMapMin.value.fromArray(t)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(t){this.uniforms.gainMapMax.value.fromArray(t)}get gamma(){const t=this.uniforms.gamma.value;return[1/t.x,1/t.y,1/t.z]}set gamma(t){const n=this.uniforms.gamma.value;n.x=1/t[0],n.y=1/t[1],n.z=1/t[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(t){this._hdrCapacityMin=t,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(t){this._hdrCapacityMax=t,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(t){this._maxDisplayBoost=Math.max(1,Math.min(65504,t)),this.calculateWeight()}calculateWeight(){const t=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,t))}}class QI extends YG{constructor(e,t){super({renderer:e,createMaterial:n=>new qG(n),createQuadRenderer:n=>new uM(n)},t)}async render(e,t,n,i){const{sdrImage:s,gainMapImage:a,needsFlip:l}=await this.processImages(n,i,"flipY"),{gainMap:u,sdr:h}=this.createTextures(s,a,l);this.updateQuadRenderer(e,s,u,h,t),e.render()}}class $G extends QI{load([e,t,n],i,s,a){const l=this.prepareQuadRenderer();let u,h,p;const m=async()=>{if(u&&h&&p){try{await this.render(l,p,u,h)}catch(F){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof a=="function"&&a(F),l.disposeOnDemandRenderer();return}typeof i=="function"&&i(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),l.disposeOnDemandRenderer()}};let v=!0,y=0,_=0,M=!0,w=0,S=0,T=!0,R=0,C=0;const k=()=>{if(typeof s=="function"){const F=y+w+R,L=_+S+C,W=v&&M&&T;s(new ProgressEvent("progress",{lengthComputable:W,loaded:L,total:F}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const O=new Gi(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(e,async F=>{if(typeof F=="string")throw new Error("Invalid sdr buffer");u=F,await m()},F=>{v=F.lengthComputable,_=F.loaded,y=F.total,k()},F=>{this.manager.itemError(e),typeof a=="function"&&a(F)});const V=new Gi(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(t,async F=>{if(typeof F=="string")throw new Error("Invalid gainmap buffer");h=F,await m()},F=>{M=F.lengthComputable,S=F.loaded,w=F.total,k()},F=>{this.manager.itemError(t),typeof a=="function"&&a(F)});const z=new Gi(this._internalLoadingManager);return z.setRequestHeader(this.requestHeader),z.setPath(this.path),z.setWithCredentials(this.withCredentials),z.load(n,async F=>{if(typeof F!="string")throw new Error("Invalid metadata string");p=JSON.parse(F),await m()},F=>{T=F.lengthComputable,C=F.loaded,R=F.total,k()},F=>{this.manager.itemError(n),typeof a=="function"&&a(F)}),l}}class e5 extends QI{load(e,t,n,i){const s=this.prepareQuadRenderer(),a=new Gi(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const u=new Uint8Array(l);let h,p,m;try{const v=await KG(u);h=v.sdr,p=v.gainMap,m=v.metadata}catch(v){if(v instanceof ZI||v instanceof YI)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},h=u;else throw v}try{await this.render(s,m,h.buffer,p==null?void 0:p.buffer)}catch(v){this.manager.itemError(e),typeof i=="function"&&i(v),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,l=>{this.manager.itemError(e),typeof i=="function"&&i(l)}),s}}const Lg={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},qI="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",qh=r=>Array.isArray(r),dM=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Jx({files:r=dM,path:e="",preset:t=void 0,encoding:n=void 0,extensions:i}={}){let s=null,a=!1;t&&(fM(t),r=Lg[t],e=qI),a=qh(r);const{extension:l,isCubemap:u}=hM(r);if(s=pM(l),!s)throw new Error("useEnvironment: Unrecognized file extension: "+r);const h=Ar(y=>y.gl);X.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function y(){nc.clear(s,a?[r]:r)}h.domElement.addEventListener("webglcontextlost",y,{once:!0})},[r,h.domElement]);const p=nc(s,a?[r]:r,y=>{(l==="webp"||l==="jpg"||l==="jpeg")&&y.setRenderer(h),y.setPath==null||y.setPath(e),i&&i(y)});let m=a?p[0]:p;if(l==="jpg"||l==="jpeg"||l==="webp"){var v;m=(v=m.renderTarget)==null?void 0:v.texture}return m.mapping=u?Ko:pp,"colorSpace"in m?m.colorSpace=n??u?"srgb":"srgb-linear":m.encoding=n??u?jG:VG,m}const t5={files:dM,path:"",preset:void 0,extensions:void 0};Jx.preload=r=>{const e={...t5,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(fM(i),t=Lg[i],n=qI);const{extension:a}=hM(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=pM(a);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);nc.preload(l,qh(t)?[t]:t,u=>{u.setPath==null||u.setPath(n),s&&s(u)})};const n5={files:dM,preset:void 0};Jx.clear=r=>{const e={...n5,...r};let{files:t}=e;const{preset:n}=e;n&&(fM(n),t=Lg[n]);const{extension:i}=hM(t),s=pM(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);nc.clear(s,qh(t)?[t]:t)};function fM(r){if(!(r in Lg))throw new Error("Preset must be one of: "+Object.keys(Lg).join(", "))}function hM(r){var e;const t=qh(r)&&r.length===6,n=qh(r)&&r.length===3&&r.some(a=>a.endsWith("json")),i=qh(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function pM(r){return r==="cube"?YR:r==="hdr"?wG:r==="exr"?MG:r==="jpg"||r==="jpeg"?e5:r==="webp"?$G:null}const r5=r=>r.current&&r.current.isScene,i5=r=>r5(r)?r.current:r;function mM(r,e,t,n,i={}){var s,a,l,u;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const h=i5(e||t),p=h.background,m=h.environment,v={backgroundBlurriness:h.backgroundBlurriness,backgroundIntensity:h.backgroundIntensity,backgroundRotation:(s=(a=h.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:h.environmentIntensity,environmentRotation:(l=(u=h.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return r!=="only"&&(h.environment=n),r&&(h.background=n),Qc(h,i),()=>{r!=="only"&&(h.environment=m),r&&(h.background=p),Qc(h,v)}}function gM({scene:r,background:e=!1,map:t,...n}){const i=Ar(s=>s.scene);return X.useLayoutEffect(()=>{if(t)return mM(e,r,i,t,n)}),null}function $I({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:l,...u}){const h=Jx(u),p=Ar(m=>m.scene);return X.useLayoutEffect(()=>mM(r,e,p,h,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:a,environmentRotation:l})),X.useEffect(()=>()=>{h.dispose()},[h]),null}function s5({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:a=!1,blur:l,backgroundBlurriness:u,backgroundIntensity:h,backgroundRotation:p,environmentIntensity:m,environmentRotation:v,scene:y,files:_,path:M,preset:w=void 0,extensions:S}){const T=Ar(z=>z.gl),R=Ar(z=>z.scene),C=X.useRef(null),[k]=X.useState(()=>new Np),O=X.useMemo(()=>{const z=new Cw(n);return z.texture.type=vi,z},[n]);X.useEffect(()=>()=>{O.dispose()},[O]),X.useLayoutEffect(()=>{if(i===1){const z=T.autoClear;T.autoClear=!0,C.current.update(T,k),T.autoClear=z}return mM(a,y,R,O.texture,{backgroundBlurriness:l??u,backgroundIntensity:h,backgroundRotation:p,environmentIntensity:m,environmentRotation:v})},[r,k,O.texture,y,R,a,i,T]);let V=1;return kp(()=>{if(i===1/0||V<i){const z=T.autoClear;T.autoClear=!0,C.current.update(T,k),T.autoClear=z,V++}}),X.createElement(X.Fragment,null,BI(X.createElement(X.Fragment,null,r,X.createElement("cubeCamera",{ref:C,args:[e,t,O]}),_||w?X.createElement($I,{background:!0,files:_,preset:w,path:M,extensions:S}):s?X.createElement(gM,{background:!0,map:s,extensions:S}):null),k))}function a5(r){var e,t,n,i;const s=Jx(r),a=r.map||s;X.useMemo(()=>iM({GroundProjectedEnvImpl:DH}),[]),X.useEffect(()=>()=>{s.dispose()},[s]);const l=X.useMemo(()=>[a],[a]),u=(e=r.ground)==null?void 0:e.height,h=(t=r.ground)==null?void 0:t.radius,p=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return X.createElement(X.Fragment,null,X.createElement(gM,Ss({},r,{map:a})),X.createElement("groundProjectedEnvImpl",{args:l,scale:p,height:u,radius:h}))}function o5(r){return r.ground?X.createElement(a5,r):r.map?X.createElement(gM,r):r.children?X.createElement(s5,r):X.createElement($I,r)}function l5({url:r}){const{scene:e}=Xx(r);return B.jsx("primitive",{object:e})}function c5({onToggleGrid:r,onResetCamera:e}){return B.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[B.jsx(qn,{variant:"secondary",size:"sm",onClick:r,title:"Toggle Grid",children:B.jsx(yD,{className:"w-4 h-4"})}),B.jsx(qn,{variant:"secondary",size:"sm",onClick:e,title:"Reset Camera",children:B.jsx(SD,{className:"w-4 h-4"})})]})}function u5({glbUrl:r,className:e,showGrid:t=!0,showGizmo:n=!0}){const[i,s]=X.useState(t),[a,l]=X.useState(!0),[u,h]=X.useState(null);X.useEffect(()=>{l(!0),h(null)},[r]);const p=()=>{};return r?u?B.jsx("div",{className:e,children:B.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg",children:B.jsxs("div",{className:"text-center text-red-500",children:[B.jsx("p",{children:"Failed to load model"}),B.jsx("p",{className:"text-sm mt-1",children:u})]})})}):B.jsx("div",{className:e,children:B.jsxs("div",{className:"relative w-full h-full bg-gradient-to-br from-gray-900 to-gray-800 rounded-lg overflow-hidden",children:[B.jsx(c5,{onToggleGrid:()=>s(!i),onResetCamera:p}),a&&B.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80 z-10",children:B.jsxs("div",{className:"text-center text-white",children:[B.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto mb-2"}),B.jsx("p",{className:"text-sm",children:"Loading model..."})]})}),B.jsxs(yH,{camera:{position:[5,5,5],fov:45},shadows:!0,gl:{antialias:!0,alpha:!0},onCreated:()=>l(!1),onError:m=>{console.error("Canvas error:",m),h("Failed to initialize viewer"),l(!1)},children:[B.jsxs(X.Suspense,{fallback:null,children:[B.jsx("ambientLight",{intensity:.5}),B.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),i&&B.jsx(GG,{args:[20,20],cellSize:1,cellThickness:.5,cellColor:"#6b7280",sectionSize:5,sectionThickness:1,sectionColor:"#9ca3af",fadeDistance:30,fadeStrength:1,followCamera:!1,infiniteGrid:!0}),B.jsx("group",{children:B.jsx(l5,{url:r})}),B.jsx(o5,{preset:"city",background:!1}),n&&B.jsx(kG,{alignment:"bottom-right",margin:[80,80],children:B.jsx(zG,{axisColors:["#ef4444","#22c55e","#3b82f6"],labelColor:"white"})})]}),B.jsx(DG,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI,minDistance:1,maxDistance:50,enableDamping:!0,dampingFactor:.05})]})]})}):B.jsx("div",{className:e,children:B.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 rounded-lg",children:B.jsxs("div",{className:"text-center text-gray-500",children:[B.jsx(ag,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),B.jsx("p",{children:"No model URL provided"})]})})})}function d5(){const{id:r}=pB(),e=ic(),t=ac(),[n,i]=X.useState(!1),[s,a]=X.useState(""),[l,u]=X.useState("draft"),[h,p]=X.useState(),{data:m,isLoading:v}=Ho({queryKey:["asset",r],queryFn:()=>gu.get(r),enabled:!!r}),{data:y}=Ho({queryKey:["lighting-presets"],queryFn:()=>sf.list()});X.useEffect(()=>{m&&(a(m.name),u(m.status))},[m]);const _=mf({mutationFn:S=>gu.update(r,S),onSuccess:()=>{e.invalidateQueries({queryKey:["asset",r]}),e.invalidateQueries({queryKey:["assets"]}),t.addToast("Asset updated successfully","success"),i(!1)},onError:S=>{t.addToast(S.message,"error")}}),M=()=>{m&&_.mutate({name:s!==m.name?s:void 0,status:l!==m.status?l:void 0})},w=()=>{m&&(a(m.name),u(m.status)),i(!1)};return v?B.jsx("div",{className:"flex items-center justify-center h-64",children:B.jsx(mu,{className:"w-8 h-8 text-primary animate-spin"})}):m?B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx(Hr,{to:"/assets",children:B.jsx(qn,{variant:"ghost",size:"sm",children:B.jsx(uS,{className:"w-4 h-4"})})}),n?B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx(Ti,{value:s,onChange:S=>a(S.target.value),className:"text-lg font-semibold"}),B.jsxs(hp,{value:l,onChange:S=>u(S.target.value),children:[B.jsx("option",{value:"draft",children:"Draft"}),B.jsx("option",{value:"processing",children:"Processing"}),B.jsx("option",{value:"ready",children:"Ready"}),B.jsx("option",{value:"failed",children:"Failed"})]})]}):B.jsxs("div",{children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m.name}),B.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:["ID: ",m.id]})]})]}),B.jsx("div",{className:"flex items-center gap-3",children:n?B.jsxs(B.Fragment,{children:[B.jsxs(qn,{variant:"secondary",size:"sm",onClick:w,children:[B.jsx(aw,{className:"w-4 h-4"}),"Cancel"]}),B.jsxs(qn,{size:"sm",onClick:M,disabled:_.isPending,children:[_.isPending?B.jsx(mu,{className:"w-4 h-4 animate-spin"}):B.jsx(wD,{className:"w-4 h-4"}),"Save"]})]}):B.jsxs(qn,{size:"sm",onClick:()=>i(!0),children:[B.jsx(AD,{className:"w-4 h-4"}),"Edit"]})})]}),B.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[B.jsxs(Ri,{children:[B.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[B.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"3D Preview"}),y&&y.items&&y.items.length>0&&B.jsxs(hp,{value:h||"",onChange:S=>p(S.target.value||void 0),children:[B.jsx("option",{value:"",children:"Default Lighting"}),y.items.map(S=>B.jsx("option",{value:S.id,children:S.name},S.id))]})]}),B.jsx(Es,{children:B.jsx(u5,{glbUrl:m.masterUrl,className:"h-[400px]"})})]}),B.jsxs("div",{className:"space-y-6",children:[B.jsxs(Ri,{children:[B.jsx("div",{className:"p-6 border-b border-gray-100",children:B.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Asset Information"})}),B.jsxs(Es,{className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),B.jsx("div",{className:"mt-1",children:B.jsx(lw,{status:m.status})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Master URL"}),B.jsx("p",{className:"mt-1 text-sm text-gray-900 break-all font-mono bg-gray-50 p-2 rounded",children:m.masterUrl})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),B.jsx("p",{className:"mt-1 text-sm text-gray-900",children:fp(m.createdAt)})]}),B.jsxs("div",{children:[B.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),B.jsx("p",{className:"mt-1 text-sm text-gray-900",children:fp(m.updatedAt)})]})]})]}),B.jsxs(Ri,{children:[B.jsx("div",{className:"p-6 border-b border-gray-100",children:B.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Render Presets"})}),B.jsx(Es,{children:B.jsx("p",{className:"text-sm text-gray-500",children:"Render presets associated with this asset will appear here."})})]})]})]})]}):B.jsxs("div",{className:"text-center py-12",children:[B.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Asset not found"}),B.jsx("p",{className:"text-gray-500 mb-4",children:"The asset you're looking for doesn't exist."}),B.jsx(Hr,{to:"/assets",children:B.jsxs(qn,{children:[B.jsx(uS,{className:"w-4 h-4 mr-2"}),"Back to Assets"]})})]})}var dv=r=>r.type==="checkbox",zd=r=>r instanceof Date,Vs=r=>r==null;const eP=r=>typeof r=="object";var si=r=>!Vs(r)&&!Array.isArray(r)&&eP(r)&&!zd(r),f5=r=>si(r)&&r.target?dv(r.target)?r.target.checked:r.target.value:r,h5=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,p5=(r,e)=>r.has(h5(e)),m5=r=>{const e=r.constructor&&r.constructor.prototype;return si(e)&&e.hasOwnProperty("isPrototypeOf")},vM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function pi(r){if(r instanceof Date)return new Date(r);const e=typeof FileList<"u"&&r instanceof FileList;if(vM&&(r instanceof Blob||e))return r;const t=Array.isArray(r);if(!t&&!(si(r)&&m5(r)))return r;const n=t?[]:Object.create(Object.getPrototypeOf(r));for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=pi(r[i]));return n}var Kx=r=>/^\w*$/.test(r),Dr=r=>r===void 0,yM=r=>Array.isArray(r)?r.filter(Boolean):[],xM=r=>yM(r.replace(/["|']|\]/g,"").split(/\.|\[/)),Gt=(r,e,t)=>{if(!e||!si(r))return t;const n=(Kx(e)?[e]:xM(e)).reduce((i,s)=>Vs(i)?i:i[s],r);return Dr(n)||n===r?Dr(r[e])?t:r[e]:n},No=r=>typeof r=="boolean",ho=r=>typeof r=="function",fr=(r,e,t)=>{let n=-1;const i=Kx(e)?[e]:xM(e),s=i.length,a=s-1;for(;++n<s;){const l=i[n];let u=t;if(n!==a){const h=r[l];u=si(h)||Array.isArray(h)?h:isNaN(+i[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;r[l]=u,r=r[l]}};const QC={BLUR:"blur",FOCUS_OUT:"focusout"},po={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ul={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},g5=mi.createContext(null);g5.displayName="HookFormControlContext";var v5=(r,e,t,n=!0)=>{const i={defaultValues:e._defaultValues};for(const s in r)Object.defineProperty(i,s,{get:()=>{const a=s;return e._proxyFormState[a]!==po.all&&(e._proxyFormState[a]=!n||po.all),r[a]}});return i};const y5=typeof window<"u"?mi.useLayoutEffect:mi.useEffect;var aa=r=>typeof r=="string",x5=(r,e,t,n,i)=>aa(r)?(n&&e.watch.add(r),Gt(t,r,i)):Array.isArray(r)?r.map(s=>(n&&e.watch.add(s),Gt(t,s))):(n&&(e.watchAll=!0),t),US=r=>Vs(r)||!eP(r);function eu(r,e,t=new WeakSet){if(US(r)||US(e))return Object.is(r,e);if(zd(r)&&zd(e))return Object.is(r.getTime(),e.getTime());const n=Object.keys(r),i=Object.keys(e);if(n.length!==i.length)return!1;if(t.has(r)||t.has(e))return!0;t.add(r),t.add(e);for(const s of n){const a=r[s];if(!i.includes(s))return!1;if(s!=="ref"){const l=e[s];if(zd(a)&&zd(l)||si(a)&&si(l)||Array.isArray(a)&&Array.isArray(l)?!eu(a,l,t):!Object.is(a,l))return!1}}return!0}const _5=mi.createContext(null);_5.displayName="HookFormContext";var tP=(r,e,t,n,i)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[n]:i||!0}}:{},yg=r=>Array.isArray(r)?r:[r],qC=()=>{let r=[];return{get observers(){return r},next:i=>{for(const s of r)s.next&&s.next(i)},subscribe:i=>(r.push(i),{unsubscribe:()=>{r=r.filter(s=>s!==i)}}),unsubscribe:()=>{r=[]}}};function nP(r,e){const t={};for(const n in r)if(r.hasOwnProperty(n)){const i=r[n],s=e[n];if(i&&si(i)&&s){const a=nP(i,s);si(a)&&(t[n]=a)}else r[n]&&(t[n]=s)}return t}var xs=r=>si(r)&&!Object.keys(r).length,_M=r=>r.type==="file",ix=r=>{if(!vM)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},rP=r=>r.type==="select-multiple",AM=r=>r.type==="radio",A5=r=>AM(r)||dv(r),WA=r=>ix(r)&&r.isConnected;function S5(r,e){const t=e.slice(0,-1).length;let n=0;for(;n<t;)r=Dr(r)?n++:r[e[n++]];return r}function w5(r){for(const e in r)if(r.hasOwnProperty(e)&&!Dr(r[e]))return!1;return!0}function ni(r,e){const t=Array.isArray(e)?e:Kx(e)?[e]:xM(e),n=t.length===1?r:S5(r,t),i=t.length-1,s=t[i];return n&&delete n[s],i!==0&&(si(n)&&xs(n)||Array.isArray(n)&&w5(n))&&ni(r,t.slice(0,-1)),r}var M5=r=>{for(const e in r)if(ho(r[e]))return!0;return!1};function iP(r){return Array.isArray(r)||si(r)&&!M5(r)}function kS(r,e={}){for(const t in r){const n=r[t];iP(n)?(e[t]=Array.isArray(n)?[]:{},kS(n,e[t])):Dr(n)||(e[t]=!0)}return e}function Gh(r,e,t){t||(t=kS(e));for(const n in r){const i=r[n];if(iP(i))Dr(e)||US(t[n])?t[n]=kS(i,Array.isArray(i)?[]:{}):Gh(i,Vs(e)?{}:e[n],t[n]);else{const s=e[n];t[n]=!eu(i,s)}}return t}const $C={value:!1,isValid:!1},eb={value:!0,isValid:!0};var sP=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!Dr(r[0].attributes.value)?Dr(r[0].value)||r[0].value===""?eb:{value:r[0].value,isValid:!0}:eb:$C}return $C},aP=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:n})=>Dr(r)?r:e?r===""?NaN:r&&+r:t&&aa(r)?new Date(r):n?n(r):r;const tb={isValid:!1,value:null};var oP=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,tb):tb;function nb(r){const e=r.ref;return _M(e)?e.files:AM(e)?oP(r.refs).value:rP(e)?[...e.selectedOptions].map(({value:t})=>t):dv(e)?sP(r.refs).value:aP(Dr(e.value)?r.ref.value:e.value,r)}var E5=(r,e,t,n)=>{const i={};for(const s of r){const a=Gt(e,s);a&&fr(i,s,a._f)}return{criteriaMode:t,names:[...r],fields:i,shouldUseNativeValidation:n}},sx=r=>r instanceof RegExp,tg=r=>Dr(r)?r:sx(r)?r.source:si(r)?sx(r.value)?r.value.source:r.value:r,rb=r=>({isOnSubmit:!r||r===po.onSubmit,isOnBlur:r===po.onBlur,isOnChange:r===po.onChange,isOnAll:r===po.all,isOnTouch:r===po.onTouched});const ib="AsyncFunction";var C5=r=>!!r&&!!r.validate&&!!(ho(r.validate)&&r.validate.constructor.name===ib||si(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===ib)),b5=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),sb=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(n=>r.startsWith(n)&&/^\.\w+/.test(r.slice(n.length))));const xg=(r,e,t,n)=>{for(const i of t||Object.keys(r)){const s=Gt(r,i);if(s){const{_f:a,...l}=s;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],i)&&!n)return!0;if(a.ref&&e(a.ref,a.name)&&!n)return!0;if(xg(l,e))break}else if(si(l)&&xg(l,e))break}}};function ab(r,e,t){const n=Gt(r,t);if(n||Kx(t))return{error:n,name:t};const i=t.split(".");for(;i.length;){const s=i.join("."),a=Gt(e,s),l=Gt(r,s);if(a&&!Array.isArray(a)&&t!==s)return{name:t};if(l&&l.type)return{name:s,error:l};if(l&&l.root&&l.root.type)return{name:`${s}.root`,error:l.root};i.pop()}return{name:t}}var T5=(r,e,t,n)=>{t(r);const{name:i,...s}=r;return xs(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(a=>e[a]===(!n||po.all))},R5=(r,e,t)=>!r||!e||r===e||yg(r).some(n=>n&&(t?n===e:n.startsWith(e)||e.startsWith(n))),I5=(r,e,t,n,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||r):(t?n.isOnBlur:i.isOnBlur)?!r:(t?n.isOnChange:i.isOnChange)?r:!0,P5=(r,e)=>!yM(Gt(r,e)).length&&ni(r,e),B5=(r,e,t)=>{const n=yg(Gt(r,t));return fr(n,"root",e[t]),fr(r,t,n),r};function ob(r,e,t="validate"){if(aa(r)||Array.isArray(r)&&r.every(aa)||No(r)&&!r)return{type:t,message:aa(r)?r:"",ref:e}}var Uh=r=>si(r)&&!sx(r)?r:{value:r,message:""},lb=async(r,e,t,n,i,s)=>{const{ref:a,refs:l,required:u,maxLength:h,minLength:p,min:m,max:v,pattern:y,validate:_,name:M,valueAsNumber:w,mount:S}=r._f,T=Gt(t,M);if(!S||e.has(M))return{};const R=l?l[0]:a,C=q=>{i&&R.reportValidity&&(R.setCustomValidity(No(q)?"":q||""),R.reportValidity())},k={},O=AM(a),V=dv(a),z=O||V,F=(w||_M(a))&&Dr(a.value)&&Dr(T)||ix(a)&&a.value===""||T===""||Array.isArray(T)&&!T.length,L=tP.bind(null,M,n,k),W=(q,re,oe,Se=Ul.maxLength,he=Ul.minLength)=>{const Ee=q?re:oe;k[M]={type:q?Se:he,message:Ee,ref:a,...L(q?Se:he,Ee)}};if(s?!Array.isArray(T)||!T.length:u&&(!z&&(F||Vs(T))||No(T)&&!T||V&&!sP(l).isValid||O&&!oP(l).isValid)){const{value:q,message:re}=aa(u)?{value:!!u,message:u}:Uh(u);if(q&&(k[M]={type:Ul.required,message:re,ref:R,...L(Ul.required,re)},!n))return C(re),k}if(!F&&(!Vs(m)||!Vs(v))){let q,re;const oe=Uh(v),Se=Uh(m);if(!Vs(T)&&!isNaN(T)){const he=a.valueAsNumber||T&&+T;Vs(oe.value)||(q=he>oe.value),Vs(Se.value)||(re=he<Se.value)}else{const he=a.valueAsDate||new Date(T),Ee=se=>new Date(new Date().toDateString()+" "+se),Y=a.type=="time",ge=a.type=="week";aa(oe.value)&&T&&(q=Y?Ee(T)>Ee(oe.value):ge?T>oe.value:he>new Date(oe.value)),aa(Se.value)&&T&&(re=Y?Ee(T)<Ee(Se.value):ge?T<Se.value:he<new Date(Se.value))}if((q||re)&&(W(!!q,oe.message,Se.message,Ul.max,Ul.min),!n))return C(k[M].message),k}if((h||p)&&!F&&(aa(T)||s&&Array.isArray(T))){const q=Uh(h),re=Uh(p),oe=!Vs(q.value)&&T.length>+q.value,Se=!Vs(re.value)&&T.length<+re.value;if((oe||Se)&&(W(oe,q.message,re.message),!n))return C(k[M].message),k}if(y&&!F&&aa(T)){const{value:q,message:re}=Uh(y);if(sx(q)&&!T.match(q)&&(k[M]={type:Ul.pattern,message:re,ref:a,...L(Ul.pattern,re)},!n))return C(re),k}if(_){if(ho(_)){const q=await _(T,t),re=ob(q,R);if(re&&(k[M]={...re,...L(Ul.validate,re.message)},!n))return C(re.message),k}else if(si(_)){let q={};for(const re in _){if(!xs(q)&&!n)break;const oe=ob(await _[re](T,t),R,re);oe&&(q={...oe,...L(re,oe.message)},C(oe.message),n&&(k[M]=q))}if(!xs(q)&&(k[M]={ref:R,...q},!n))return k}}return C(!0),k};const D5={mode:po.onSubmit,reValidateMode:po.onChange,shouldFocusError:!0};function L5(r={}){let e={...D5,...r},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:ho(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},i=si(e.defaultValues)||si(e.values)?pi(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:pi(i),a={action:!1,mount:!1,watch:!1,keepIsValid:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={...p};let v={...m};const y={array:qC(),state:qC()},_=e.criteriaMode===po.all,M=N=>D=>{clearTimeout(h),h=setTimeout(N,D)},w=async N=>{if(!a.keepIsValid&&!e.disabled&&(m.isValid||v.isValid||N)){let D;e.resolver?(D=xs((await z()).errors),S()):D=await L(n,!0),D!==t.isValid&&y.state.next({isValid:D})}},S=(N,D)=>{!e.disabled&&(m.isValidating||m.validatingFields||v.isValidating||v.validatingFields)&&((N||Array.from(l.mount)).forEach(Q=>{Q&&(D?fr(t.validatingFields,Q,D):ni(t.validatingFields,Q))}),y.state.next({validatingFields:t.validatingFields,isValidating:!xs(t.validatingFields)}))},T=(N,D=[],Q,ye,xe=!0,pe=!0)=>{if(ye&&Q&&!e.disabled){if(a.action=!0,pe&&Array.isArray(Gt(n,N))){const je=Q(Gt(n,N),ye.argA,ye.argB);xe&&fr(n,N,je)}if(pe&&Array.isArray(Gt(t.errors,N))){const je=Q(Gt(t.errors,N),ye.argA,ye.argB);xe&&fr(t.errors,N,je),P5(t.errors,N)}if((m.touchedFields||v.touchedFields)&&pe&&Array.isArray(Gt(t.touchedFields,N))){const je=Q(Gt(t.touchedFields,N),ye.argA,ye.argB);xe&&fr(t.touchedFields,N,je)}(m.dirtyFields||v.dirtyFields)&&(t.dirtyFields=Gh(i,s)),y.state.next({name:N,isDirty:q(N,D),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else fr(s,N,D)},R=(N,D)=>{fr(t.errors,N,D),y.state.next({errors:t.errors})},C=N=>{t.errors=N,y.state.next({errors:t.errors,isValid:!1})},k=(N,D,Q,ye)=>{const xe=Gt(n,N);if(xe){const pe=Gt(s,N,Dr(Q)?Gt(i,N):Q);Dr(pe)||ye&&ye.defaultChecked||D?fr(s,N,D?pe:nb(xe._f)):Se(N,pe),a.mount&&!a.action&&w()}},O=(N,D,Q,ye,xe)=>{let pe=!1,je=!1;const Ye={name:N};if(!e.disabled){if(!Q||ye){(m.isDirty||v.isDirty)&&(je=t.isDirty,t.isDirty=Ye.isDirty=q(),pe=je!==Ye.isDirty);const $e=eu(Gt(i,N),D);je=!!Gt(t.dirtyFields,N),$e?ni(t.dirtyFields,N):fr(t.dirtyFields,N,!0),Ye.dirtyFields=t.dirtyFields,pe=pe||(m.dirtyFields||v.dirtyFields)&&je!==!$e}if(Q){const $e=Gt(t.touchedFields,N);$e||(fr(t.touchedFields,N,Q),Ye.touchedFields=t.touchedFields,pe=pe||(m.touchedFields||v.touchedFields)&&$e!==Q)}pe&&xe&&y.state.next(Ye)}return pe?Ye:{}},V=(N,D,Q,ye)=>{const xe=Gt(t.errors,N),pe=(m.isValid||v.isValid)&&No(D)&&t.isValid!==D;if(e.delayError&&Q?(u=M(()=>R(N,Q)),u(e.delayError)):(clearTimeout(h),u=null,Q?fr(t.errors,N,Q):ni(t.errors,N)),(Q?!eu(xe,Q):xe)||!xs(ye)||pe){const je={...ye,...pe&&No(D)?{isValid:D}:{},errors:t.errors,name:N};t={...t,...je},y.state.next(je)}},z=async N=>(S(N,!0),await e.resolver(s,e.context,E5(N||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation))),F=async N=>{const{errors:D}=await z(N);if(S(N),N)for(const Q of N){const ye=Gt(D,Q);ye?fr(t.errors,Q,ye):ni(t.errors,Q)}else t.errors=D;return D},L=async(N,D,Q={valid:!0})=>{for(const ye in N){const xe=N[ye];if(xe){const{_f:pe,...je}=xe;if(pe){const Ye=l.array.has(pe.name),$e=xe._f&&C5(xe._f);$e&&m.validatingFields&&S([pe.name],!0);const kt=await lb(xe,l.disabled,s,_,e.shouldUseNativeValidation&&!D,Ye);if($e&&m.validatingFields&&S([pe.name]),kt[pe.name]&&(Q.valid=!1,D||r.shouldUseNativeValidation))break;!D&&(Gt(kt,pe.name)?Ye?B5(t.errors,kt,pe.name):fr(t.errors,pe.name,kt[pe.name]):ni(t.errors,pe.name))}!xs(je)&&await L(je,D,Q)}}return Q.valid},W=()=>{for(const N of l.unMount){const D=Gt(n,N);D&&(D._f.refs?D._f.refs.every(Q=>!WA(Q)):!WA(D._f.ref))&&rt(N)}l.unMount=new Set},q=(N,D)=>!e.disabled&&(N&&D&&fr(s,N,D),!eu(K(),i)),re=(N,D,Q)=>x5(N,l,{...a.mount?s:Dr(D)?i:aa(N)?{[N]:D}:D},Q,D),oe=N=>yM(Gt(a.mount?s:i,N,e.shouldUnregister?Gt(i,N,[]):[])),Se=(N,D,Q={})=>{const ye=Gt(n,N);let xe=D;if(ye){const pe=ye._f;pe&&(!pe.disabled&&fr(s,N,aP(D,pe)),xe=ix(pe.ref)&&Vs(D)?"":D,rP(pe.ref)?[...pe.ref.options].forEach(je=>je.selected=xe.includes(je.value)):pe.refs?dv(pe.ref)?pe.refs.forEach(je=>{(!je.defaultChecked||!je.disabled)&&(Array.isArray(xe)?je.checked=!!xe.find(Ye=>Ye===je.value):je.checked=xe===je.value||!!xe)}):pe.refs.forEach(je=>je.checked=je.value===xe):_M(pe.ref)?pe.ref.value="":(pe.ref.value=xe,pe.ref.type||y.state.next({name:N,values:pi(s)})))}(Q.shouldDirty||Q.shouldTouch)&&O(N,xe,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&se(N)},he=(N,D,Q)=>{for(const ye in D){if(!D.hasOwnProperty(ye))return;const xe=D[ye],pe=N+"."+ye,je=Gt(n,pe);(l.array.has(N)||si(xe)||je&&!je._f)&&!zd(xe)?he(pe,xe,Q):Se(pe,xe,Q)}},Ee=(N,D,Q={})=>{const ye=Gt(n,N),xe=l.array.has(N),pe=pi(D);fr(s,N,pe),xe?(y.array.next({name:N,values:pi(s)}),(m.isDirty||m.dirtyFields||v.isDirty||v.dirtyFields)&&Q.shouldDirty&&y.state.next({name:N,dirtyFields:Gh(i,s),isDirty:q(N,pe)})):ye&&!ye._f&&!Vs(pe)?he(N,pe,Q):Se(N,pe,Q),sb(N,l)?y.state.next({...t,name:N,values:pi(s)}):y.state.next({name:a.mount?N:void 0,values:pi(s)})},Y=async N=>{a.mount=!0;const D=N.target;let Q=D.name,ye=!0;const xe=Gt(n,Q),pe=$e=>{ye=Number.isNaN($e)||zd($e)&&isNaN($e.getTime())||eu($e,Gt(s,Q,$e))},je=rb(e.mode),Ye=rb(e.reValidateMode);if(xe){let $e,kt;const qe=D.type?nb(xe._f):f5(N),xt=N.type===QC.BLUR||N.type===QC.FOCUS_OUT,zt=!b5(xe._f)&&!e.resolver&&!Gt(t.errors,Q)&&!xe._f.deps||I5(xt,Gt(t.touchedFields,Q),t.isSubmitted,Ye,je),Bt=sb(Q,l,xt);fr(s,Q,qe),xt?(!D||!D.readOnly)&&(xe._f.onBlur&&xe._f.onBlur(N),u&&u(0)):xe._f.onChange&&xe._f.onChange(N);const St=O(Q,qe,xt),de=!xs(St)||Bt;if(!xt&&y.state.next({name:Q,type:N.type,values:pi(s)}),zt)return(m.isValid||v.isValid)&&(e.mode==="onBlur"?xt&&w():xt||w()),de&&y.state.next({name:Q,...Bt?{}:St});if(!xt&&Bt&&y.state.next({...t}),e.resolver){const{errors:De}=await z([Q]);if(S([Q]),pe(qe),ye){const it=ab(t.errors,n,Q),le=ab(De,n,it.name||Q);$e=le.error,Q=le.name,kt=xs(De)}}else S([Q],!0),$e=(await lb(xe,l.disabled,s,_,e.shouldUseNativeValidation))[Q],S([Q]),pe(qe),ye&&($e?kt=!1:(m.isValid||v.isValid)&&(kt=await L(n,!0)));ye&&(xe._f.deps&&(!Array.isArray(xe._f.deps)||xe._f.deps.length>0)&&se(xe._f.deps),V(Q,kt,$e,St))}},ge=(N,D)=>{if(Gt(t.errors,D)&&N.focus)return N.focus(),1},se=async(N,D={})=>{let Q,ye;const xe=yg(N);if(e.resolver){const pe=await F(Dr(N)?N:xe);Q=xs(pe),ye=N?!xe.some(je=>Gt(pe,je)):Q}else N?(ye=(await Promise.all(xe.map(async pe=>{const je=Gt(n,pe);return await L(je&&je._f?{[pe]:je}:je)}))).every(Boolean),!(!ye&&!t.isValid)&&w()):ye=Q=await L(n);return y.state.next({...!aa(N)||(m.isValid||v.isValid)&&Q!==t.isValid?{}:{name:N},...e.resolver||!N?{isValid:Q}:{},errors:t.errors}),D.shouldFocus&&!ye&&xg(n,ge,N?xe:l.mount),ye},K=(N,D)=>{let Q={...a.mount?s:i};return D&&(Q=nP(D.dirtyFields?t.dirtyFields:t.touchedFields,Q)),Dr(N)?Q:aa(N)?Gt(Q,N):N.map(ye=>Gt(Q,ye))},ve=(N,D)=>({invalid:!!Gt((D||t).errors,N),isDirty:!!Gt((D||t).dirtyFields,N),error:Gt((D||t).errors,N),isValidating:!!Gt(t.validatingFields,N),isTouched:!!Gt((D||t).touchedFields,N)}),We=N=>{N&&yg(N).forEach(D=>ni(t.errors,D)),y.state.next({errors:N?t.errors:{}})},we=(N,D,Q)=>{const ye=(Gt(n,N,{_f:{}})._f||{}).ref,xe=Gt(t.errors,N)||{},{ref:pe,message:je,type:Ye,...$e}=xe;fr(t.errors,N,{...$e,...D,ref:ye}),y.state.next({name:N,errors:t.errors,isValid:!1}),Q&&Q.shouldFocus&&ye&&ye.focus&&ye.focus()},Le=(N,D)=>ho(N)?y.state.subscribe({next:Q=>"values"in Q&&N(re(void 0,D),Q)}):re(N,D,!0),Fe=N=>y.state.subscribe({next:D=>{R5(N.name,D.name,N.exact)&&T5(D,N.formState||m,at,N.reRenderRoot)&&N.callback({values:{...s},...t,...D,defaultValues:i})}}).unsubscribe,He=N=>(a.mount=!0,v={...v,...N.formState},Fe({...N,formState:{...p,...N.formState}})),rt=(N,D={})=>{for(const Q of N?yg(N):l.mount)l.mount.delete(Q),l.array.delete(Q),D.keepValue||(ni(n,Q),ni(s,Q)),!D.keepError&&ni(t.errors,Q),!D.keepDirty&&ni(t.dirtyFields,Q),!D.keepTouched&&ni(t.touchedFields,Q),!D.keepIsValidating&&ni(t.validatingFields,Q),!e.shouldUnregister&&!D.keepDefaultValue&&ni(i,Q);y.state.next({values:pi(s)}),y.state.next({...t,...D.keepDirty?{isDirty:q()}:{}}),!D.keepIsValid&&w()},yt=({disabled:N,name:D})=>{if(No(N)&&a.mount||N||l.disabled.has(D)){const xe=l.disabled.has(D)!==!!N;N?l.disabled.add(D):l.disabled.delete(D),xe&&a.mount&&!a.action&&w()}},Rt=(N,D={})=>{let Q=Gt(n,N);const ye=No(D.disabled)||No(e.disabled);return fr(n,N,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:N}},name:N,mount:!0,...D}}),l.mount.add(N),Q?yt({disabled:No(D.disabled)?D.disabled:e.disabled,name:N}):k(N,!0,D.value),{...ye?{disabled:D.disabled||e.disabled}:{},...e.progressive?{required:!!D.required,min:tg(D.min),max:tg(D.max),minLength:tg(D.minLength),maxLength:tg(D.maxLength),pattern:tg(D.pattern)}:{},name:N,onChange:Y,onBlur:Y,ref:xe=>{if(xe){Rt(N,D),Q=Gt(n,N);const pe=Dr(xe.value)&&xe.querySelectorAll&&xe.querySelectorAll("input,select,textarea")[0]||xe,je=A5(pe),Ye=Q._f.refs||[];if(je?Ye.find($e=>$e===pe):pe===Q._f.ref)return;fr(n,N,{_f:{...Q._f,...je?{refs:[...Ye.filter(WA),pe,...Array.isArray(Gt(i,N))?[{}]:[]],ref:{type:pe.type,name:N}}:{ref:pe}}}),k(N,!1,void 0,pe)}else Q=Gt(n,N,{}),Q._f&&(Q._f.mount=!1),(e.shouldUnregister||D.shouldUnregister)&&!(p5(l.array,N)&&a.action)&&l.unMount.add(N)}}},Qt=()=>e.shouldFocusError&&xg(n,ge,l.mount),Ke=N=>{No(N)&&(y.state.next({disabled:N}),xg(n,(D,Q)=>{const ye=Gt(n,Q);ye&&(D.disabled=ye._f.disabled||N,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(xe=>{xe.disabled=ye._f.disabled||N}))},0,!1))},Ze=(N,D)=>async Q=>{let ye;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let xe=pi(s);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:pe,values:je}=await z();S(),t.errors=pe,xe=pi(je)}else await L(n);if(l.disabled.size)for(const pe of l.disabled)ni(xe,pe);if(ni(t.errors,"root"),xs(t.errors)){y.state.next({errors:{}});try{await N(xe,Q)}catch(pe){ye=pe}}else D&&await D({...t.errors},Q),Qt(),setTimeout(Qt);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xs(t.errors)&&!ye,submitCount:t.submitCount+1,errors:t.errors}),ye)throw ye},ee=(N,D={})=>{Gt(n,N)&&(Dr(D.defaultValue)?Ee(N,pi(Gt(i,N))):(Ee(N,D.defaultValue),fr(i,N,pi(D.defaultValue))),D.keepTouched||ni(t.touchedFields,N),D.keepDirty||(ni(t.dirtyFields,N),t.isDirty=D.defaultValue?q(N,pi(Gt(i,N))):q()),D.keepError||(ni(t.errors,N),m.isValid&&w()),y.state.next({...t}))},Dt=(N,D={})=>{const Q=N?pi(N):i,ye=pi(Q),xe=xs(N),pe=xe?i:ye;if(D.keepDefaultValues||(i=Q),!D.keepValues){if(D.keepDirtyValues){const je=new Set([...l.mount,...Object.keys(Gh(i,s))]);for(const Ye of Array.from(je)){const $e=Gt(t.dirtyFields,Ye),kt=Gt(s,Ye),qe=Gt(pe,Ye);$e&&!Dr(kt)?fr(pe,Ye,kt):!$e&&!Dr(qe)&&Ee(Ye,qe)}}else{if(vM&&Dr(N))for(const je of l.mount){const Ye=Gt(n,je);if(Ye&&Ye._f){const $e=Array.isArray(Ye._f.refs)?Ye._f.refs[0]:Ye._f.ref;if(ix($e)){const kt=$e.closest("form");if(kt){kt.reset();break}}}}if(D.keepFieldsRef)for(const je of l.mount)Ee(je,Gt(pe,je));else n={}}s=e.shouldUnregister?D.keepDefaultValues?pi(i):{}:pi(pe),y.array.next({values:{...pe}}),y.state.next({values:{...pe}})}l={mount:D.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!m.isValid||!!D.keepIsValid||!!D.keepDirtyValues||!e.shouldUnregister&&!xs(pe),a.watch=!!e.shouldUnregister,a.keepIsValid=!!D.keepIsValid,a.action=!1,D.keepErrors||(t.errors={}),y.state.next({submitCount:D.keepSubmitCount?t.submitCount:0,isDirty:xe?!1:D.keepDirty?t.isDirty:!!(D.keepDefaultValues&&!eu(N,i)),isSubmitted:D.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:xe?{}:D.keepDirtyValues?D.keepDefaultValues&&s?Gh(i,s):t.dirtyFields:D.keepDefaultValues&&N?Gh(i,N):D.keepDirty?t.dirtyFields:{},touchedFields:D.keepTouched?t.touchedFields:{},errors:D.keepErrors?t.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},et=(N,D)=>Dt(ho(N)?N(s):N,{...e.resetOptions,...D}),At=(N,D={})=>{const Q=Gt(n,N),ye=Q&&Q._f;if(ye){const xe=ye.refs?ye.refs[0]:ye.ref;xe.focus&&setTimeout(()=>{xe.focus(),D.shouldSelect&&ho(xe.select)&&xe.select()})}},at=N=>{t={...t,...N}},ht={control:{register:Rt,unregister:rt,getFieldState:ve,handleSubmit:Ze,setError:we,_subscribe:Fe,_runSchema:z,_updateIsValidating:S,_focusError:Qt,_getWatch:re,_getDirty:q,_setValid:w,_setFieldArray:T,_setDisabledField:yt,_setErrors:C,_getFieldArray:oe,_reset:Dt,_resetDefaultValues:()=>ho(e.defaultValues)&&e.defaultValues().then(N=>{et(N,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:Ke,_subjects:y,_proxyFormState:m,get _fields(){return n},get _formValues(){return s},get _state(){return a},set _state(N){a=N},get _defaultValues(){return i},get _names(){return l},set _names(N){l=N},get _formState(){return t},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:He,trigger:se,register:Rt,handleSubmit:Ze,watch:Le,setValue:Ee,getValues:K,reset:et,resetField:ee,clearErrors:We,unregister:rt,setError:we,setFocus:At,getFieldState:ve};return{...ht,formControl:ht}}function SM(r={}){const e=mi.useRef(void 0),t=mi.useRef(void 0),[n,i]=mi.useState({isDirty:!1,isValidating:!1,isLoading:ho(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,isReady:!1,defaultValues:ho(r.defaultValues)?void 0:r.defaultValues});if(!e.current)if(r.formControl)e.current={...r.formControl,formState:n},r.defaultValues&&!ho(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions);else{const{formControl:a,...l}=L5(r);e.current={...l,formState:n}}const s=e.current.control;return s._options=r,y5(()=>{const a=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),s._formState.isReady=!0,a},[s]),mi.useEffect(()=>s._disableForm(r.disabled),[s,r.disabled]),mi.useEffect(()=>{r.mode&&(s._options.mode=r.mode),r.reValidateMode&&(s._options.reValidateMode=r.reValidateMode)},[s,r.mode,r.reValidateMode]),mi.useEffect(()=>{r.errors&&(s._setErrors(r.errors),s._focusError())},[s,r.errors]),mi.useEffect(()=>{r.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,r.shouldUnregister]),mi.useEffect(()=>{if(s._proxyFormState.isDirty){const a=s._getDirty();a!==n.isDirty&&s._subjects.state.next({isDirty:a})}},[s,n.isDirty]),mi.useEffect(()=>{var a;r.values&&!eu(r.values,t.current)?(s._reset(r.values,{keepFieldsRef:!0,...s._options.resetOptions}),!((a=s._options.resetOptions)===null||a===void 0)&&a.keepIsValid||s._setValid(),t.current=r.values,i(l=>({...l}))):s._resetDefaultValues()},[s,r.values]),mi.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=mi.useMemo(()=>v5(n,s),[s,n]),e.current}const cb=(r,e,t)=>{if(r&&"reportValidity"in r){const n=Gt(t,e);r.setCustomValidity(n&&n.message||""),r.reportValidity()}},lP=(r,e)=>{for(const t in e.fields){const n=e.fields[t];n&&n.ref&&"reportValidity"in n.ref?cb(n.ref,t,r):n.refs&&n.refs.forEach(i=>cb(i,t,r))}},N5=(r,e)=>{e.shouldUseNativeValidation&&lP(r,e);const t={};for(const n in r){const i=Gt(e.fields,n),s=Object.assign(r[n]||{},{ref:i&&i.ref});if(F5(e.names||Object.keys(r),n)){const a=Object.assign({},Gt(t,n));fr(a,"root",s),fr(t,n,a)}else fr(t,n,s)}return t},F5=(r,e)=>r.some(t=>t.startsWith(e+"."));var O5=function(r,e){for(var t={};r.length;){var n=r[0],i=n.code,s=n.message,a=n.path.join(".");if(!t[a])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];t[a]={message:l.message,type:l.code}}else t[a]={message:s,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(p){return p.errors.forEach(function(m){return r.push(m)})}),e){var u=t[a].types,h=u&&u[n.code];t[a]=tP(a,e,t,i,h?[].concat(h,n.message):n.message)}r.shift()}return t},wM=function(r,e,t){return t===void 0&&(t={}),function(n,i,s){try{return Promise.resolve((function(a,l){try{var u=Promise.resolve(r[t.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(h){return s.shouldUseNativeValidation&&lP({},s),{errors:{},values:t.raw?n:h}})}catch(h){return l(h)}return u&&u.then?u.then(void 0,l):u})(0,function(a){if((function(l){return Array.isArray(l==null?void 0:l.errors)})(a))return{values:{},errors:N5(O5(a.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw a}))}catch(a){return Promise.reject(a)}}},Qn;(function(r){r.assertEqual=i=>{};function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},r.getValidEnumValues=i=>{const s=r.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(const l of s)a[l]=i[l];return r.objectValues(a)},r.objectValues=i=>r.objectKeys(i).map(function(s){return i[s]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},r.find=(i,s)=>{for(const a of i)if(s(a))return a},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}r.joinValues=n,r.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Qn||(Qn={}));var ub;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(ub||(ub={}));const jt=Qn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),qc=r=>{switch(typeof r){case"undefined":return jt.undefined;case"string":return jt.string;case"number":return Number.isNaN(r)?jt.nan:jt.number;case"boolean":return jt.boolean;case"function":return jt.function;case"bigint":return jt.bigint;case"symbol":return jt.symbol;case"object":return Array.isArray(r)?jt.array:r===null?jt.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?jt.promise:typeof Map<"u"&&r instanceof Map?jt.map:typeof Set<"u"&&r instanceof Set?jt.set:typeof Date<"u"&&r instanceof Date?jt.date:jt.object;default:return jt.unknown}},pt=Qn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class rc extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let l=n,u=0;for(;u<a.path.length;){const h=a.path[u];u===a.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(t(a))):l[h]=l[h]||{_errors:[]},l=l[h],u++}}};return i(this),n}static assert(e){if(!(e instanceof rc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const i of this.issues)if(i.path.length>0){const s=i.path[0];t[s]=t[s]||[],t[s].push(e(i))}else n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}rc.create=r=>new rc(r);const zS=(r,e)=>{let t;switch(r.code){case pt.invalid_type:r.received===jt.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case pt.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Qn.jsonStringifyReplacer)}`;break;case pt.unrecognized_keys:t=`Unrecognized key(s) in object: ${Qn.joinValues(r.keys,", ")}`;break;case pt.invalid_union:t="Invalid input";break;case pt.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Qn.joinValues(r.options)}`;break;case pt.invalid_enum_value:t=`Invalid enum value. Expected ${Qn.joinValues(r.options)}, received '${r.received}'`;break;case pt.invalid_arguments:t="Invalid function arguments";break;case pt.invalid_return_type:t="Invalid function return type";break;case pt.invalid_date:t="Invalid date";break;case pt.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Qn.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case pt.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case pt.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case pt.custom:t="Invalid input";break;case pt.invalid_intersection_types:t="Intersection results could not be merged";break;case pt.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case pt.not_finite:t="Number must be finite";break;default:t=e.defaultError,Qn.assertNever(r)}return{message:t}};let U5=zS;function k5(){return U5}const z5=r=>{const{data:e,path:t,errorMaps:n,issueData:i}=r,s=[...t,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const u=n.filter(h=>!!h).slice().reverse();for(const h of u)l=h(a,{data:e,defaultError:l}).message;return{...i,path:s,message:l}};function Nt(r,e){const t=k5(),n=z5({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===zS?void 0:zS].filter(i=>!!i)});r.common.issues.push(n)}class ua{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if(i.status==="aborted")return mn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const i of t){const s=await i.key,a=await i.value;n.push({key:s,value:a})}return ua.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return mn;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}}const mn=Object.freeze({status:"aborted"}),sg=r=>({status:"dirty",value:r}),La=r=>({status:"valid",value:r}),db=r=>r.status==="aborted",fb=r=>r.status==="dirty",wp=r=>r.status==="valid",ax=r=>typeof Promise<"u"&&r instanceof Promise;var Zt;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Zt||(Zt={}));class Au{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hb=(r,e)=>{if(wp(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new rc(r.common.issues);return this._error=t,this._error}}};function Bn(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{const{message:u}=r;return a.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:u??t??l.defaultError}},description:i}}class Yn{get description(){return this._def.description}_getType(e){return qc(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:qc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ua,ctx:{common:e.parent.common,data:e.data,parsedType:qc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ax(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qc(e)},i=this._parseSync({data:e,path:n.path,parent:n});return hb(n,i)}"~validate"(e){var n,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qc(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return wp(s)?{value:s.value}:{issues:t.common.issues}}catch(s){(i=(n=s==null?void 0:s.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>wp(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:qc(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(ax(i)?i:Promise.resolve(i));return hb(n,s)}refine(e,t){const n=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,s)=>{const a=e(i),l=()=>s.addIssue({code:pt.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new Cp({schema:this,typeName:gn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return pu.create(this,this._def)}nullable(){return bp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xo.create(this)}promise(){return ux.create(this,this._def)}or(e){return lx.create([this,e],this._def)}and(e){return cx.create(this,e,this._def)}transform(e){return new Cp({...Bn(this._def),schema:this,typeName:gn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new GS({...Bn(this._def),innerType:this,defaultValue:t,typeName:gn.ZodDefault})}brand(){return new cV({typeName:gn.ZodBranded,type:this,...Bn(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new VS({...Bn(this._def),innerType:this,catchValue:t,typeName:gn.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return MM.create(this,e)}readonly(){return jS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const H5=/^c[^\s-]{8,}$/i,G5=/^[0-9a-z]+$/,V5=/^[0-9A-HJKMNP-TV-Z]{26}$/i,j5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,W5=/^[a-z0-9_-]{21}$/i,X5=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,J5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let XA;const Z5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Q5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,q5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,$5=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nV=new RegExp(`^${cP}$`);function uP(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function rV(r){return new RegExp(`^${uP(r)}$`)}function iV(r){let e=`${cP}T${uP(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function sV(r,e){return!!((e==="v4"||!e)&&Z5.test(r)||(e==="v6"||!e)&&q5.test(r))}function aV(r,e){if(!X5.test(r))return!1;try{const[t]=r.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function oV(r,e){return!!((e==="v4"||!e)&&Q5.test(r)||(e==="v6"||!e)&&$5.test(r))}class du extends Yn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==jt.string){const s=this._getOrReturnCtx(e);return Nt(s,{code:pt.invalid_type,expected:jt.string,received:s.parsedType}),mn}const n=new ua;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,l=e.data.length<s.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?Nt(i,{code:pt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&Nt(i,{code:pt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")K5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"email",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")XA||(XA=new RegExp(Y5,"u")),XA.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"emoji",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")j5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"uuid",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")W5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"nanoid",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")H5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"cuid",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")G5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"cuid2",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")V5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"ulid",code:pt.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Nt(i,{validation:"url",code:pt.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"regex",code:pt.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?iV(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?nV.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?rV(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?J5.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"duration",code:pt.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?sV(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"ip",code:pt.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?aV(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"jwt",code:pt.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?oV(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"cidr",code:pt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?eV.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"base64",code:pt.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?tV.test(e.data)||(i=this._getOrReturnCtx(e,i),Nt(i,{validation:"base64url",code:pt.invalid_string,message:s.message}),n.dirty()):Qn.assertNever(s);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:pt.invalid_string,...Zt.errToObj(n)})}_addCheck(e){return new du({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Zt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Zt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Zt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Zt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Zt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Zt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Zt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Zt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Zt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Zt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Zt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Zt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Zt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Zt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Zt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Zt.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Zt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Zt.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Zt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Zt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Zt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Zt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Zt.errToObj(t)})}nonempty(e){return this.min(1,Zt.errToObj(e))}trim(){return new du({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new du({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new du({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}du.create=r=>new du({checks:[],typeName:gn.ZodString,coerce:(r==null?void 0:r.coerce)??!1,...Bn(r)});function lV(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,s=Number.parseInt(r.toFixed(i).replace(".","")),a=Number.parseInt(e.toFixed(i).replace(".",""));return s%a/10**i}class Mp extends Yn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==jt.number){const s=this._getOrReturnCtx(e);return Nt(s,{code:pt.invalid_type,expected:jt.number,received:s.parsedType}),mn}let n;const i=new ua;for(const s of this._def.checks)s.kind==="int"?Qn.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?lV(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.not_finite,message:s.message}),i.dirty()):Qn.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Zt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Zt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Zt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Zt.toString(t))}setLimit(e,t,n,i){return new Mp({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Zt.toString(i)}]})}_addCheck(e){return new Mp({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Zt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Zt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Zt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Zt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Zt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Zt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Zt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Zt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Zt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Qn.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Mp.create=r=>new Mp({checks:[],typeName:gn.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Bn(r)});class Ng extends Yn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==jt.bigint)return this._getInvalidInput(e);let n;const i=new ua;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Nt(n,{code:pt.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Qn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Nt(t,{code:pt.invalid_type,expected:jt.bigint,received:t.parsedType}),mn}gte(e,t){return this.setLimit("min",e,!0,Zt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Zt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Zt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Zt.toString(t))}setLimit(e,t,n,i){return new Ng({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Zt.toString(i)}]})}_addCheck(e){return new Ng({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Zt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Zt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Zt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Zt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Zt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ng.create=r=>new Ng({checks:[],typeName:gn.ZodBigInt,coerce:(r==null?void 0:r.coerce)??!1,...Bn(r)});class pb extends Yn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==jt.boolean){const n=this._getOrReturnCtx(e);return Nt(n,{code:pt.invalid_type,expected:jt.boolean,received:n.parsedType}),mn}return La(e.data)}}pb.create=r=>new pb({typeName:gn.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Bn(r)});class ox extends Yn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==jt.date){const s=this._getOrReturnCtx(e);return Nt(s,{code:pt.invalid_type,expected:jt.date,received:s.parsedType}),mn}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Nt(s,{code:pt.invalid_date}),mn}const n=new ua;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Nt(i,{code:pt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Qn.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ox({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Zt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Zt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ox.create=r=>new ox({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:gn.ZodDate,...Bn(r)});class mb extends Yn{_parse(e){if(this._getType(e)!==jt.symbol){const n=this._getOrReturnCtx(e);return Nt(n,{code:pt.invalid_type,expected:jt.symbol,received:n.parsedType}),mn}return La(e.data)}}mb.create=r=>new mb({typeName:gn.ZodSymbol,...Bn(r)});class gb extends Yn{_parse(e){if(this._getType(e)!==jt.undefined){const n=this._getOrReturnCtx(e);return Nt(n,{code:pt.invalid_type,expected:jt.undefined,received:n.parsedType}),mn}return La(e.data)}}gb.create=r=>new gb({typeName:gn.ZodUndefined,...Bn(r)});class vb extends Yn{_parse(e){if(this._getType(e)!==jt.null){const n=this._getOrReturnCtx(e);return Nt(n,{code:pt.invalid_type,expected:jt.null,received:n.parsedType}),mn}return La(e.data)}}vb.create=r=>new vb({typeName:gn.ZodNull,...Bn(r)});class yb extends Yn{constructor(){super(...arguments),this._any=!0}_parse(e){return La(e.data)}}yb.create=r=>new yb({typeName:gn.ZodAny,...Bn(r)});class xb extends Yn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return La(e.data)}}xb.create=r=>new xb({typeName:gn.ZodUnknown,...Bn(r)});class Su extends Yn{_parse(e){const t=this._getOrReturnCtx(e);return Nt(t,{code:pt.invalid_type,expected:jt.never,received:t.parsedType}),mn}}Su.create=r=>new Su({typeName:gn.ZodNever,...Bn(r)});class _b extends Yn{_parse(e){if(this._getType(e)!==jt.undefined){const n=this._getOrReturnCtx(e);return Nt(n,{code:pt.invalid_type,expected:jt.void,received:n.parsedType}),mn}return La(e.data)}}_b.create=r=>new _b({typeName:gn.ZodVoid,...Bn(r)});class Xo extends Yn{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==jt.array)return Nt(t,{code:pt.invalid_type,expected:jt.array,received:t.parsedType}),mn;if(i.exactLength!==null){const a=t.data.length>i.exactLength.value,l=t.data.length<i.exactLength.value;(a||l)&&(Nt(t,{code:a?pt.too_big:pt.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Nt(t,{code:pt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Nt(t,{code:pt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,l)=>i.type._parseAsync(new Au(t,a,t.path,l)))).then(a=>ua.mergeArray(n,a));const s=[...t.data].map((a,l)=>i.type._parseSync(new Au(t,a,t.path,l)));return ua.mergeArray(n,s)}get element(){return this._def.type}min(e,t){return new Xo({...this._def,minLength:{value:e,message:Zt.toString(t)}})}max(e,t){return new Xo({...this._def,maxLength:{value:e,message:Zt.toString(t)}})}length(e,t){return new Xo({...this._def,exactLength:{value:e,message:Zt.toString(t)}})}nonempty(e){return this.min(1,e)}}Xo.create=(r,e)=>new Xo({type:r,minLength:null,maxLength:null,exactLength:null,typeName:gn.ZodArray,...Bn(e)});function Vh(r){if(r instanceof ri){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=pu.create(Vh(n))}return new ri({...r._def,shape:()=>e})}else return r instanceof Xo?new Xo({...r._def,type:Vh(r.element)}):r instanceof pu?pu.create(Vh(r.unwrap())):r instanceof bp?bp.create(Vh(r.unwrap())):r instanceof pf?pf.create(r.items.map(e=>Vh(e))):r}class ri extends Yn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Qn.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==jt.object){const h=this._getOrReturnCtx(e);return Nt(h,{code:pt.invalid_type,expected:jt.object,received:h.parsedType}),mn}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Su&&this._def.unknownKeys==="strip"))for(const h in i.data)a.includes(h)||l.push(h);const u=[];for(const h of a){const p=s[h],m=i.data[h];u.push({key:{status:"valid",value:h},value:p._parse(new Au(i,m,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof Su){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of l)u.push({key:{status:"valid",value:p},value:{status:"valid",value:i.data[p]}});else if(h==="strict")l.length>0&&(Nt(i,{code:pt.unrecognized_keys,keys:l}),n.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of l){const m=i.data[p];u.push({key:{status:"valid",value:p},value:h._parse(new Au(i,m,i.path,p)),alwaysSet:p in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of u){const m=await p.key,v=await p.value;h.push({key:m,value:v,alwaysSet:p.alwaysSet})}return h}).then(h=>ua.mergeObjectSync(n,h)):ua.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return Zt.errToObj,new ri({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,a;const i=((a=(s=this._def).errorMap)==null?void 0:a.call(s,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:Zt.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new ri({...this._def,unknownKeys:"strip"})}passthrough(){return new ri({...this._def,unknownKeys:"passthrough"})}extend(e){return new ri({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ri({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:gn.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ri({...this._def,catchall:e})}pick(e){const t={};for(const n of Qn.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new ri({...this._def,shape:()=>t})}omit(e){const t={};for(const n of Qn.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new ri({...this._def,shape:()=>t})}deepPartial(){return Vh(this)}partial(e){const t={};for(const n of Qn.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}return new ri({...this._def,shape:()=>t})}required(e){const t={};for(const n of Qn.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof pu;)s=s._def.innerType;t[n]=s}return new ri({...this._def,shape:()=>t})}keyof(){return dP(Qn.objectKeys(this.shape))}}ri.create=(r,e)=>new ri({shape:()=>r,unknownKeys:"strip",catchall:Su.create(),typeName:gn.ZodObject,...Bn(e)});ri.strictCreate=(r,e)=>new ri({shape:()=>r,unknownKeys:"strict",catchall:Su.create(),typeName:gn.ZodObject,...Bn(e)});ri.lazycreate=(r,e)=>new ri({shape:r,unknownKeys:"strip",catchall:Su.create(),typeName:gn.ZodObject,...Bn(e)});class lx extends Yn{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const a=s.map(l=>new rc(l.ctx.common.issues));return Nt(t,{code:pt.invalid_union,unionErrors:a}),mn}if(t.common.async)return Promise.all(n.map(async s=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const u of n){const h={...t,common:{...t.common,issues:[]},parent:null},p=u._parseSync({data:t.data,path:t.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:h}),h.common.issues.length&&a.push(h.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const l=a.map(u=>new rc(u));return Nt(t,{code:pt.invalid_union,unionErrors:l}),mn}}get options(){return this._def.options}}lx.create=(r,e)=>new lx({options:r,typeName:gn.ZodUnion,...Bn(e)});function HS(r,e){const t=qc(r),n=qc(e);if(r===e)return{valid:!0,data:r};if(t===jt.object&&n===jt.object){const i=Qn.objectKeys(e),s=Qn.objectKeys(r).filter(l=>i.indexOf(l)!==-1),a={...r,...e};for(const l of s){const u=HS(r[l],e[l]);if(!u.valid)return{valid:!1};a[l]=u.data}return{valid:!0,data:a}}else if(t===jt.array&&n===jt.array){if(r.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<r.length;s++){const a=r[s],l=e[s],u=HS(a,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return t===jt.date&&n===jt.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class cx extends Yn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(db(s)||db(a))return mn;const l=HS(s.value,a.value);return l.valid?((fb(s)||fb(a))&&t.dirty(),{status:t.value,value:l.data}):(Nt(n,{code:pt.invalid_intersection_types}),mn)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}cx.create=(r,e,t)=>new cx({left:r,right:e,typeName:gn.ZodIntersection,...Bn(t)});class pf extends Yn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jt.array)return Nt(n,{code:pt.invalid_type,expected:jt.array,received:n.parsedType}),mn;if(n.data.length<this._def.items.length)return Nt(n,{code:pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mn;!this._def.rest&&n.data.length>this._def.items.length&&(Nt(n,{code:pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...n.data].map((a,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Au(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>ua.mergeArray(t,a)):ua.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new pf({...this._def,rest:e})}}pf.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pf({items:r,typeName:gn.ZodTuple,rest:null,...Bn(e)})};class Ab extends Yn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jt.map)return Nt(n,{code:pt.invalid_type,expected:jt.map,received:n.parsedType}),mn;const i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([l,u],h)=>({key:i._parse(new Au(n,l,n.path,[h,"key"])),value:s._parse(new Au(n,u,n.path,[h,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of a){const h=await u.key,p=await u.value;if(h.status==="aborted"||p.status==="aborted")return mn;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(h.value,p.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const u of a){const h=u.key,p=u.value;if(h.status==="aborted"||p.status==="aborted")return mn;(h.status==="dirty"||p.status==="dirty")&&t.dirty(),l.set(h.value,p.value)}return{status:t.value,value:l}}}}Ab.create=(r,e,t)=>new Ab({valueType:e,keyType:r,typeName:gn.ZodMap,...Bn(t)});class Fg extends Yn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jt.set)return Nt(n,{code:pt.invalid_type,expected:jt.set,received:n.parsedType}),mn;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Nt(n,{code:pt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Nt(n,{code:pt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const s=this._def.valueType;function a(u){const h=new Set;for(const p of u){if(p.status==="aborted")return mn;p.status==="dirty"&&t.dirty(),h.add(p.value)}return{status:t.value,value:h}}const l=[...n.data.values()].map((u,h)=>s._parse(new Au(n,u,n.path,h)));return n.common.async?Promise.all(l).then(u=>a(u)):a(l)}min(e,t){return new Fg({...this._def,minSize:{value:e,message:Zt.toString(t)}})}max(e,t){return new Fg({...this._def,maxSize:{value:e,message:Zt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Fg.create=(r,e)=>new Fg({valueType:r,minSize:null,maxSize:null,typeName:gn.ZodSet,...Bn(e)});class Sb extends Yn{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Sb.create=(r,e)=>new Sb({getter:r,typeName:gn.ZodLazy,...Bn(e)});class wb extends Yn{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Nt(t,{received:t.data,code:pt.invalid_literal,expected:this._def.value}),mn}return{status:"valid",value:e.data}}get value(){return this._def.value}}wb.create=(r,e)=>new wb({value:r,typeName:gn.ZodLiteral,...Bn(e)});function dP(r,e){return new Ep({values:r,typeName:gn.ZodEnum,...Bn(e)})}class Ep extends Yn{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return Nt(t,{expected:Qn.joinValues(n),received:t.parsedType,code:pt.invalid_type}),mn}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Nt(t,{received:t.data,code:pt.invalid_enum_value,options:n}),mn}return La(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ep.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ep.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Ep.create=dP;class Mb extends Yn{_parse(e){const t=Qn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==jt.string&&n.parsedType!==jt.number){const i=Qn.objectValues(t);return Nt(n,{expected:Qn.joinValues(i),received:n.parsedType,code:pt.invalid_type}),mn}if(this._cache||(this._cache=new Set(Qn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=Qn.objectValues(t);return Nt(n,{received:n.data,code:pt.invalid_enum_value,options:i}),mn}return La(e.data)}get enum(){return this._def.values}}Mb.create=(r,e)=>new Mb({values:r,typeName:gn.ZodNativeEnum,...Bn(e)});class ux extends Yn{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==jt.promise&&t.common.async===!1)return Nt(t,{code:pt.invalid_type,expected:jt.promise,received:t.parsedType}),mn;const n=t.parsedType===jt.promise?t.data:Promise.resolve(t.data);return La(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ux.create=(r,e)=>new ux({type:r,typeName:gn.ZodPromise,...Bn(e)});class Cp extends Yn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===gn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{Nt(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async l=>{if(t.value==="aborted")return mn;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?mn:u.status==="dirty"||t.value==="dirty"?sg(u.value):u});{if(t.value==="aborted")return mn;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?mn:l.status==="dirty"||t.value==="dirty"?sg(l.value):l}}if(i.type==="refinement"){const a=l=>{const u=i.refinement(l,s);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?mn:(l.status==="dirty"&&t.dirty(),a(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?mn:(l.status==="dirty"&&t.dirty(),a(l.value).then(()=>({status:t.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!wp(a))return mn;const l=i.transform(a.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>wp(a)?Promise.resolve(i.transform(a.value,s)).then(l=>({status:t.value,value:l})):mn);Qn.assertNever(i)}}Cp.create=(r,e,t)=>new Cp({schema:r,typeName:gn.ZodEffects,effect:e,...Bn(t)});Cp.createWithPreprocess=(r,e,t)=>new Cp({schema:e,effect:{type:"preprocess",transform:r},typeName:gn.ZodEffects,...Bn(t)});class pu extends Yn{_parse(e){return this._getType(e)===jt.undefined?La(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pu.create=(r,e)=>new pu({innerType:r,typeName:gn.ZodOptional,...Bn(e)});class bp extends Yn{_parse(e){return this._getType(e)===jt.null?La(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bp.create=(r,e)=>new bp({innerType:r,typeName:gn.ZodNullable,...Bn(e)});class GS extends Yn{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===jt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}GS.create=(r,e)=>new GS({innerType:r,typeName:gn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Bn(e)});class VS extends Yn{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ax(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new rc(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}VS.create=(r,e)=>new VS({innerType:r,typeName:gn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Bn(e)});class Eb extends Yn{_parse(e){if(this._getType(e)!==jt.nan){const n=this._getOrReturnCtx(e);return Nt(n,{code:pt.invalid_type,expected:jt.nan,received:n.parsedType}),mn}return{status:"valid",value:e.data}}}Eb.create=r=>new Eb({typeName:gn.ZodNaN,...Bn(r)});class cV extends Yn{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class MM extends Yn{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?mn:s.status==="dirty"?(t.dirty(),sg(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?mn:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new MM({in:e,out:t,typeName:gn.ZodPipeline})}}class jS extends Yn{_parse(e){const t=this._def.innerType._parse(e),n=i=>(wp(i)&&(i.value=Object.freeze(i.value)),i);return ax(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}}jS.create=(r,e)=>new jS({innerType:r,typeName:gn.ZodReadonly,...Bn(e)});var gn;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(gn||(gn={}));const tf=du.create,Hl=Mp.create;Su.create;Xo.create;const EM=ri.create;lx.create;cx.create;pf.create;Ep.create;ux.create;pu.create;bp.create;const uV=EM({name:tf().min(1,"Name is required"),masterUrl:tf().min(1,"Master URL is required")});function dV(){const r=Vg(),e=ic(),t=ac(),{register:n,handleSubmit:i,formState:{errors:s}}=SM({resolver:wM(uV)}),a=mf({mutationFn:u=>gu.create(u),onSuccess:u=>{e.invalidateQueries({queryKey:["assets"]}),t.addToast("Asset created successfully","success"),r(`/assets/${u.id}`)},onError:u=>{t.addToast(u.message,"error")}}),l=u=>{a.mutate(u)};return B.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[B.jsxs("div",{className:"flex items-center gap-4",children:[B.jsx(Hr,{to:"/assets",children:B.jsx(qn,{variant:"ghost",size:"sm",children:B.jsx(uS,{className:"w-4 h-4"})})}),B.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create New Asset"})]}),B.jsxs(Ri,{children:[B.jsx(yL,{children:B.jsx(xL,{children:"Asset Details"})}),B.jsx(Es,{children:B.jsxs("form",{onSubmit:i(l),className:"space-y-6",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),B.jsx(Ti,{...n("name"),placeholder:"My 3D Model",className:s.name?"border-red-300":""}),s.name&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name.message})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Master URL"}),B.jsx(Ti,{...n("masterUrl"),placeholder:"https://example.com/models/file.glb",className:s.masterUrl?"border-red-300":""}),s.masterUrl&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.masterUrl.message}),B.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter the URL to the GLB file. This will be the source of truth for the asset."})]}),B.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[B.jsxs(qn,{type:"submit",disabled:a.isPending,children:[a.isPending?B.jsx(mu,{className:"w-4 h-4 animate-spin"}):null,"Create Asset"]}),B.jsx(Hr,{to:"/assets",children:B.jsx(qn,{type:"button",variant:"secondary",children:"Cancel"})})]})]})})]})]})}const fV=EM({name:tf().min(1,"Name is required"),hdriUrl:tf().min(1,"HDRI URL is required"),exposure:Hl().min(0).max(10),intensity:Hl().min(0).max(10),tags:tf().optional()});function hV({isOpen:r,onClose:e,preset:t}){const n=ic(),i=ac(),s=!!t,{register:a,handleSubmit:l,reset:u,formState:{errors:h}}=SM({resolver:wM(fV),defaultValues:t?{name:t.name,hdriUrl:t.hdriUrl,exposure:t.exposure,intensity:t.intensity,tags:t.tags.join(", ")}:{exposure:1,intensity:1}}),p=mf({mutationFn:v=>s?sf.update(t.id,v):sf.create({name:v.name,hdriUrl:v.hdriUrl,exposure:v.exposure,intensity:v.intensity,tags:v.tags??[]}),onSuccess:()=>{n.invalidateQueries({queryKey:["lighting-presets"]}),i.addToast(s?"Preset updated successfully":"Preset created successfully","success"),u(),e()},onError:v=>{i.addToast(v.message,"error")}}),m=v=>{const y=v.tags?v.tags.split(",").map(_=>_.trim().toLowerCase()).filter(Boolean):[];p.mutate({...v,tags:y})};return B.jsx(Xg,{open:r,onOpenChange:v=>!v&&e(),children:B.jsx(Jg,{title:s?"Edit Lighting Preset":"Create Lighting Preset",children:B.jsxs("form",{onSubmit:l(m),className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),B.jsx(Ti,{...a("name"),placeholder:"Studio Lighting",className:h.name?"border-red-300":""}),h.name&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name.message})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HDRI URL"}),B.jsx(Ti,{...a("hdriUrl"),placeholder:"https://example.com/hdri/studio.hdr",className:h.hdriUrl?"border-red-300":""}),h.hdriUrl&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.hdriUrl.message})]}),B.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exposure"}),B.jsx(Ti,{type:"number",step:"0.1",min:"0",max:"10",...a("exposure",{valueAsNumber:!0}),className:h.exposure?"border-red-300":""}),h.exposure&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.exposure.message})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intensity"}),B.jsx(Ti,{type:"number",step:"0.1",min:"0",max:"10",...a("intensity",{valueAsNumber:!0}),className:h.intensity?"border-red-300":""}),h.intensity&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.intensity.message})]})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),B.jsx(Ti,{...a("tags"),placeholder:"studio, interior, product"}),B.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add tags to categorize this preset (e.g., studio, outdoor, product)"})]}),B.jsxs(Kg,{children:[B.jsx(qn,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),B.jsxs(qn,{type:"submit",disabled:p.isPending,children:[p.isPending?B.jsx(mu,{className:"w-4 h-4 animate-spin"}):null,s?"Update":"Create"]})]})]})})})}function pV(){var R;const r=ic(),e=ac(),[t,n]=X.useState(!1),[i,s]=X.useState(),[a,l]=X.useState({isOpen:!1,preset:null}),u=ly(C=>C.selectedTag),h=ly(C=>C.setSelectedTag),p=ly(C=>C.setPresets),{data:m,isLoading:v}=Ho({queryKey:["lighting-presets",u],queryFn:()=>sf.list(u??void 0)});X.useEffect(()=>{m!=null&&m.items&&p(m.items)},[m,p]);const y=mf({mutationFn:C=>sf.delete(C),onSuccess:()=>{r.invalidateQueries({queryKey:["lighting-presets"]}),e.addToast("Preset deleted successfully","success"),l({isOpen:!1,preset:null})},onError:C=>{e.addToast(C.message,"error")}}),_=(m==null?void 0:m.items)??[],M=ly(C=>C.allTags),w=()=>{s(void 0),n(!0)},S=C=>{s(C),n(!0)},T=C=>{l({isOpen:!0,preset:C})};return B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Lighting Presets"}),B.jsxs(qn,{onClick:w,children:[B.jsx(dp,{className:"w-4 h-4"}),"New Preset"]})]}),M.length>0&&B.jsx(Ri,{children:B.jsx(Es,{className:"p-4",children:B.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[B.jsx(DE,{className:"w-4 h-4 text-gray-400"}),B.jsx("button",{onClick:()=>h(null),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${u===null?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),M.map(C=>B.jsx("button",{onClick:()=>h(C),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${u===C?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:C},C))]})})}),v?B.jsx("div",{className:"flex items-center justify-center h-64",children:B.jsx(mu,{className:"w-8 h-8 text-primary animate-spin"})}):_.length===0?B.jsx(Ri,{children:B.jsxs(Es,{className:"p-8 text-center text-gray-500",children:[B.jsx(DE,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),u?B.jsxs(B.Fragment,{children:[B.jsxs("p",{children:['No lighting presets with the tag "',u,'".']}),B.jsx("button",{onClick:()=>h(null),className:"text-primary hover:text-primary-dark mt-2",children:"Clear filter"})]}):B.jsxs(B.Fragment,{children:[B.jsx("p",{className:"mb-4",children:"No lighting presets yet. Create your first preset to get started."}),B.jsxs(qn,{onClick:w,children:[B.jsx(dp,{className:"w-4 h-4"}),"Create Preset"]})]})]})}):B.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(C=>B.jsx(Ri,{className:"hover:shadow-md transition-shadow",children:B.jsxs(Es,{className:"p-6",children:[B.jsxs("div",{className:"flex items-start justify-between mb-4",children:[B.jsxs("div",{className:"flex-1 min-w-0",children:[B.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:C.name}),B.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:fp(C.createdAt)})]}),B.jsxs("div",{className:"flex items-center gap-1",children:[B.jsx("button",{onClick:()=>S(C),className:"p-1.5 text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100",children:B.jsx(hT,{className:"w-4 h-4"})}),B.jsx("button",{onClick:()=>T(C),className:"p-1.5 text-gray-400 hover:text-red-600 rounded hover:bg-red-50",children:B.jsx(sw,{className:"w-4 h-4"})})]})]}),B.jsxs("div",{className:"space-y-2 text-sm",children:[B.jsxs("div",{className:"flex justify-between",children:[B.jsx("span",{className:"text-gray-500",children:"Exposure"}),B.jsx("span",{className:"font-medium",children:C.exposure})]}),B.jsxs("div",{className:"flex justify-between",children:[B.jsx("span",{className:"text-gray-500",children:"Intensity"}),B.jsx("span",{className:"font-medium",children:C.intensity})]})]}),C.tags.length>0&&B.jsx("div",{className:"flex flex-wrap gap-1.5 mt-4",children:C.tags.map(k=>B.jsx(Hr,{to:"#",onClick:O=>{O.preventDefault(),h(k)},children:B.jsx(og,{variant:"default",className:"text-xs",children:k})},k))})]})},C.id))}),B.jsx(hV,{isOpen:t,onClose:()=>n(!1),preset:i}),B.jsx(Xg,{open:a.isOpen,onOpenChange:C=>!C&&l({isOpen:!1,preset:null}),children:B.jsxs(Jg,{title:"Delete Lighting Preset",children:[B.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",B.jsx("strong",{children:(R=a.preset)==null?void 0:R.name}),"? This action cannot be undone."]}),B.jsxs(Kg,{children:[B.jsx(qn,{variant:"secondary",onClick:()=>l({isOpen:!1,preset:null}),children:"Cancel"}),B.jsx(qn,{variant:"danger",onClick:()=>a.preset&&y.mutate(a.preset.id),children:"Delete"})]})]})})]})}const mV=EM({assetId:tf().min(1,"Asset is required"),lightingPresetId:tf().min(1,"Lighting preset is required"),fov:Hl().min(10).max(120),positionX:Hl(),positionY:Hl(),positionZ:Hl(),targetX:Hl(),targetY:Hl(),targetZ:Hl()});function gV({isOpen:r,onClose:e}){const t=ic(),n=ac(),{data:i}=Ho({queryKey:["assets"],queryFn:()=>gu.list()}),{data:s}=Ho({queryKey:["lighting-presets"],queryFn:()=>sf.list()}),{register:a,handleSubmit:l,reset:u,formState:{errors:h}}=SM({resolver:wM(mV),defaultValues:{fov:45,positionX:5,positionY:5,positionZ:5,targetX:0,targetY:0,targetZ:0}}),p=mf({mutationFn:_=>v0.create({assetId:_.assetId,lightingPresetId:_.lightingPresetId,camera:{fov:_.fov,position:[_.positionX,_.positionY,_.positionZ],target:[_.targetX,_.targetY,_.targetZ]}}),onSuccess:()=>{t.invalidateQueries({queryKey:["render-presets"]}),n.addToast("Render preset created successfully","success"),u(),e()},onError:_=>{n.addToast(_.message,"error")}}),m=_=>{p.mutate(_)},v=(i==null?void 0:i.items)??[],y=(s==null?void 0:s.items)??[];return B.jsx(Xg,{open:r,onOpenChange:_=>!_&&e(),children:B.jsx(Jg,{title:"Create Render Preset",children:B.jsxs("form",{onSubmit:l(m),className:"space-y-4",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset"}),B.jsxs(hp,{...a("assetId"),className:h.assetId?"border-red-300":"",children:[B.jsx("option",{value:"",children:"Select an asset..."}),v.map(_=>B.jsx("option",{value:_.id,children:_.name},_.id))]}),h.assetId&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.assetId.message})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lighting Preset"}),B.jsxs(hp,{...a("lightingPresetId"),className:h.lightingPresetId?"border-red-300":"",children:[B.jsx("option",{value:"",children:"Select a lighting preset..."}),y.map(_=>B.jsx("option",{value:_.id,children:_.name},_.id))]}),h.lightingPresetId&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.lightingPresetId.message})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Field of View (FOV)"}),B.jsx(Ti,{type:"number",min:"10",max:"120",...a("fov",{valueAsNumber:!0}),className:h.fov?"border-red-300":""}),h.fov&&B.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.fov.message})]}),B.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[B.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Camera Position"}),B.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X"}),B.jsx(Ti,{type:"number",step:"0.1",...a("positionX",{valueAsNumber:!0})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y"}),B.jsx(Ti,{type:"number",step:"0.1",...a("positionY",{valueAsNumber:!0})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Z"}),B.jsx(Ti,{type:"number",step:"0.1",...a("positionZ",{valueAsNumber:!0})})]})]})]}),B.jsxs("div",{children:[B.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Camera Target"}),B.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X"}),B.jsx(Ti,{type:"number",step:"0.1",...a("targetX",{valueAsNumber:!0})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y"}),B.jsx(Ti,{type:"number",step:"0.1",...a("targetY",{valueAsNumber:!0})})]}),B.jsxs("div",{children:[B.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Z"}),B.jsx(Ti,{type:"number",step:"0.1",...a("targetZ",{valueAsNumber:!0})})]})]})]}),B.jsxs(Kg,{children:[B.jsx(qn,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),B.jsxs(qn,{type:"submit",disabled:p.isPending,children:[p.isPending?B.jsx(mu,{className:"w-4 h-4 animate-spin"}):null,"Create"]})]})]})})})}function vV(){const r=ic(),e=ac(),[t,n]=X.useState(!1),[i,s]=X.useState({isOpen:!1,preset:null}),{data:a,isLoading:l}=Ho({queryKey:["render-presets"],queryFn:()=>v0.list()}),u=mf({mutationFn:m=>v0.delete(m),onSuccess:()=>{r.invalidateQueries({queryKey:["render-presets"]}),e.addToast("Render preset deleted successfully","success"),s({isOpen:!1,preset:null})},onError:m=>{e.addToast(m.message,"error")}}),h=(a==null?void 0:a.items)??[],p=m=>{s({isOpen:!0,preset:m})};return B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{className:"flex items-center justify-between",children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Render Presets"}),B.jsxs(qn,{onClick:()=>n(!0),children:[B.jsx(dp,{className:"w-4 h-4"}),"New Preset"]})]}),l?B.jsx("div",{className:"flex items-center justify-center h-64",children:B.jsx(mu,{className:"w-8 h-8 text-primary animate-spin"})}):h.length===0?B.jsx(Ri,{children:B.jsxs(Es,{className:"p-8 text-center text-gray-500",children:[B.jsx(g0,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),B.jsx("p",{className:"mb-4",children:"No render presets yet. Create your first preset to get started."}),B.jsxs(qn,{onClick:()=>n(!0),children:[B.jsx(dp,{className:"w-4 h-4"}),"Create Preset"]})]})}):B.jsx(Ri,{children:B.jsx("div",{className:"overflow-x-auto",children:B.jsxs("table",{className:"w-full",children:[B.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:B.jsxs("tr",{children:[B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asset"}),B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lighting"}),B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Camera"}),B.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),B.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),B.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(m=>B.jsxs("tr",{className:"hover:bg-gray-50",children:[B.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:m.assetName||"Unknown Asset"}),B.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:m.lightingPresetName||"Unknown Lighting"}),B.jsx("td",{className:"px-6 py-4",children:B.jsxs("div",{className:"text-sm text-gray-600",children:[B.jsxs("div",{children:["FOV: ",m.camera.fov,""]}),B.jsxs("div",{className:"text-xs text-gray-500",children:["Pos: [",m.camera.position.map(v=>v.toFixed(1)).join(", "),"]"]})]})}),B.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:fp(m.createdAt)}),B.jsx("td",{className:"px-6 py-4",children:B.jsx("div",{className:"flex items-center justify-end gap-2",children:B.jsx("button",{onClick:()=>p(m),className:"p-1.5 text-gray-400 hover:text-red-600 rounded hover:bg-red-50",title:"Delete",children:B.jsx(sw,{className:"w-4 h-4"})})})})]},m.id))})]})})}),B.jsx(gV,{isOpen:t,onClose:()=>n(!1)}),B.jsx(Xg,{open:i.isOpen,onOpenChange:m=>!m&&s({isOpen:!1,preset:null}),children:B.jsxs(Jg,{title:"Delete Render Preset",children:[B.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this render preset? This action cannot be undone."}),B.jsxs(Kg,{children:[B.jsx(qn,{variant:"secondary",onClick:()=>s({isOpen:!1,preset:null}),children:"Cancel"}),B.jsx(qn,{variant:"danger",onClick:()=>i.preset&&u.mutate(i.preset.id),children:"Delete"})]})]})})]})}function yV(){const r=Vg(),e=ac(),[t,n]=X.useState([]),[i,s]=X.useState(!1),[a,l]=X.useState(""),u=X.useCallback(C=>{C.preventDefault(),s(!0)},[]),h=X.useCallback(C=>{C.preventDefault(),s(!1)},[]),p=X.useCallback(C=>{C.preventDefault(),s(!1);const k=Array.from(C.dataTransfer.files).filter(O=>O.name.toLowerCase().endsWith(".glb"));if(k.length===0){e.addToast("Please drop .glb files only","error");return}v(k)},[e]),m=C=>{const O=Array.from(C.target.files||[]).filter(V=>V.name.toLowerCase().endsWith(".glb"));if(O.length===0){e.addToast("Please select .glb files only","error");return}v(O)},v=C=>{const k=C.map(O=>({id:Math.random().toString(36).substring(7),file:O,status:"idle",progress:0}));n(O=>[...O,...k])},y=C=>{n(k=>k.filter(O=>O.id!==C))},_=async C=>{n(k=>k.map(O=>O.id===C.id?{...O,status:"uploading"}:O));try{const k=`${Date.now()}-${C.file.name}`,{uploadUrl:O,fileUrl:V}=await vL.presign(k);await fetch(O,{method:"PUT",body:C.file,headers:{"Content-Type":C.file.type||"model/gltf-binary"}}),n(L=>L.map(W=>W.id===C.id?{...W,progress:100,assetUrl:V}:W));const z=a||C.file.name.replace(".glb",""),F=await gu.create({name:z,masterUrl:V});n(L=>L.map(W=>W.id===C.id?{...W,status:"success",assetId:F.id}:W)),e.addToast(`Successfully uploaded ${C.file.name}`,"success"),l("")}catch(k){const O=k instanceof Error?k.message:"Upload failed";n(V=>V.map(z=>z.id===C.id?{...z,status:"error",error:O}:z)),e.addToast(`Failed to upload ${C.file.name}`,"error")}},M=()=>{t.forEach(C=>{C.status==="idle"&&_(C)})},w=()=>{n(C=>C.filter(k=>k.status==="idle"||k.status==="uploading"))},S=t.filter(C=>C.status==="idle").length,T=t.filter(C=>C.status==="success").length,R=t.filter(C=>C.status==="error").length;return B.jsxs("div",{className:"space-y-6",children:[B.jsxs("div",{children:[B.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Upload 3D Models"}),B.jsx("p",{className:"text-gray-500 mt-1",children:"Upload GLB files to create new 3D assets in your library."})]}),B.jsx(Ri,{children:B.jsxs(Es,{className:"p-6",children:[B.jsxs("div",{onDragOver:u,onDragLeave:h,onDrop:p,className:la("border-2 border-dashed rounded-xl p-12 text-center transition-colors",i?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400"),children:[B.jsx(BE,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),B.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drag & drop GLB files here"}),B.jsx("p",{className:"text-gray-500 mb-4",children:"or click to browse your files"}),B.jsxs("label",{children:[B.jsx("input",{type:"file",accept:".glb",multiple:!0,onChange:m,className:"hidden"}),B.jsx("span",{className:"inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-colors bg-primary text-white hover:bg-primary-dark cursor-pointer",children:"Select Files"})]})]}),t.length>0&&B.jsxs("div",{className:"mt-4",children:[B.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset Name (optional)"}),B.jsx(Ti,{placeholder:"Leave empty to use filename",value:a,onChange:C=>l(C.target.value)}),B.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This name will be used for all uploads in this batch"})]})]})}),t.length>0&&B.jsxs(Ri,{children:[B.jsxs("div",{className:"flex flex-row items-center justify-between p-6 border-b border-gray-100",children:[B.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Upload Queue (",t.length,")"]}),B.jsxs("div",{className:"flex items-center gap-2",children:[T>0&&B.jsx(qn,{variant:"secondary",size:"sm",onClick:w,children:"Clear Completed"}),S>0&&B.jsxs(qn,{onClick:M,children:[B.jsx(BE,{className:"w-4 h-4"}),"Upload ",S," File",S>1?"s":""]})]})]}),B.jsx(Es,{className:"p-0",children:B.jsx("div",{className:"divide-y divide-gray-100",children:t.map(C=>B.jsxs("div",{className:"p-4 flex items-center gap-4",children:[B.jsx(vD,{className:"w-8 h-8 text-gray-400"}),B.jsxs("div",{className:"flex-1 min-w-0",children:[B.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:C.file.name}),B.jsxs("p",{className:"text-xs text-gray-500",children:[(C.file.size/1024/1024).toFixed(2)," MB"]}),C.status==="uploading"&&B.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-1.5",children:B.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all",style:{width:`${C.progress}%`}})})]}),B.jsxs("div",{className:"flex items-center gap-2",children:[C.status==="idle"&&B.jsx(qn,{size:"sm",onClick:()=>_(C),children:"Upload"}),C.status==="uploading"&&B.jsx(mu,{className:"w-5 h-5 text-primary animate-spin"}),C.status==="success"&&B.jsxs(B.Fragment,{children:[B.jsx(IE,{className:"w-5 h-5 text-green-500"}),C.assetId&&B.jsx("button",{onClick:()=>r(`/assets/${C.assetId}`),className:"text-sm text-primary hover:text-primary-dark",children:"View"})]}),C.status==="error"&&B.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[B.jsx(PE,{className:"w-5 h-5"}),B.jsx("span",{className:"text-xs",children:C.error})]}),B.jsx("button",{onClick:()=>y(C.id),className:"p-1 text-gray-400 hover:text-gray-600",children:B.jsx(aw,{className:"w-4 h-4"})})]})]},C.id))})})]}),(T>0||R>0)&&B.jsx(Ri,{children:B.jsx(Es,{className:"p-6",children:B.jsxs("div",{className:"flex items-center gap-6",children:[T>0&&B.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[B.jsx(IE,{className:"w-5 h-5"}),B.jsxs("span",{className:"text-sm font-medium",children:[T," uploaded successfully"]})]}),R>0&&B.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[B.jsx(PE,{className:"w-5 h-5"}),B.jsxs("span",{className:"text-sm font-medium",children:[R," failed"]})]})]})})})]})}const xV=new v2({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5e3}}});function _V(){return B.jsx(y2,{client:xV,children:B.jsx(nD,{children:B.jsx(PB,{children:B.jsxs(Lo,{path:"/",element:B.jsx(mL,{}),children:[B.jsx(Lo,{index:!0,element:B.jsx(SL,{})}),B.jsx(Lo,{path:"assets",element:B.jsx(EL,{})}),B.jsx(Lo,{path:"assets/new",element:B.jsx(dV,{})}),B.jsx(Lo,{path:"assets/:id",element:B.jsx(d5,{})}),B.jsx(Lo,{path:"lighting",element:B.jsx(pV,{})}),B.jsx(Lo,{path:"renders",element:B.jsx(vV,{})}),B.jsx(Lo,{path:"uploads",element:B.jsx(yV,{})}),B.jsx(Lo,{path:"*",element:B.jsx(TB,{to:"/",replace:!0})})]})})})})}JP.createRoot(document.getElementById("root")).render(B.jsx(X.StrictMode,{children:B.jsx(_V,{})}));
